User.create!([
  {id: 1, email: "jeyboy1985@gmail.com", encrypted_password: "$2a$10$D08asc8ITLAI4BMfQlbbl.kikKQtnEunK/pN1hH99QuV2NMlhB7kC", is_admin: true, reset_password_token: nil, reset_password_sent_at: nil, remember_created_at: nil, sign_in_count: 9, current_sign_in_at: "2013-12-13 20:01:35", last_sign_in_at: "2013-12-14 09:16:06", current_sign_in_ip: "127.0.0.1", last_sign_in_ip: "192.162.143.89", created_at: "2013-12-13 19:19:41", updated_at: "2013-12-13 20:01:35", invitation_token: nil, invitation_created_at: nil, invitation_sent_at: nil, invitation_accepted_at: nil, invitation_limit: nil, invited_by_id: nil, invited_by_type: nil}
])
Category.create!([
  {id: 1, name: "JS", created_at: "2013-12-13 19:56:07", updated_at: "2013-12-13 19:56:07", icon: "javascript"},
  {id: 2, name: "Ruby", created_at: "2013-12-13 19:56:07", updated_at: "2013-12-13 19:56:07", icon: "ruby"},
  {id: 3, name: "RoR", created_at: "2013-12-13 19:56:07", updated_at: "2013-12-13 19:56:07", icon: "ruby"},
  {id: 4, name: "HTML", created_at: "2013-12-13 19:56:07", updated_at: "2013-12-13 19:56:07", icon: "html"}
])
Post.create!([
  {id: 310, name: "Drop a table from the Rails console", category_id: 3, body: "<pre><code class=\"ruby\">ActiveRecord::Migration.drop_table(:users)</code></pre>", created_at: "2013-12-13 19:56:08", updated_at: "2013-12-13 19:56:08", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#036;font-weight:bold\">ActiveRecord</span>::<span style=\"color:#036;font-weight:bold\">Migration</span>.drop_table(<span style=\"color:#A60\">:users</span>)\n</pre></td>\n</tr></table>\n\n        </div>\n", pretty_preview: "        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <div class=\"CodeRay\">\n  <div class=\"code\"><pre><span style=\"color:#036;font-weight:bold\">ActiveRecord</span>::<span style=\"color:#036;font-weight:bold\">Migration</span>.drop_table(<span style=\"color:#A60\">:users</span>)\n</pre></div>\n</div>\n\n        </div>\n"},
  {id: 311, name: "rspec should receive multiple times", category_id: 3, body: "<div style=\"font-family: Arial,Helvetica,sans-serif;\">\nIf you expect a mocked method to be called multiple times, here's how you can handle it: </div>\n\n<div style='font-family: \"Courier New\",Courier,monospace;'>\n<pre><code class=\"ruby\">User.should_receive(:new).exactly(2).times.and_return(@some_predefined_stuff)</code></pre>\n</div>", created_at: "2013-12-13 19:56:08", updated_at: "2013-12-13 19:56:08", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "<div style=\"font-family: Arial,Helvetica,sans-serif;\">\nIf you expect a mocked method to be called multiple times, here's how you can handle it: </div>\n\n<div style='font-family: \"Courier New\",Courier,monospace;'>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#036;font-weight:bold\">User</span>.should_receive(<span style=\"color:#A60\">:new</span>).exactly(<span style=\"color:#00D\">2</span>).times.and_return(<span style=\"color:#33B\">@some_predefined_stuff</span>)\n</pre></td>\n</tr></table>\n\n        </div>\n\n</div>", pretty_preview: "<div style=\"font-family: Arial,Helvetica,sans-serif;\">\nIf you expect a mocked method to be called multiple times, here's how you can handle it: </div>\n\n<div style='font-family: \"Courier New\",Courier,monospace;'>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <div class=\"CodeRay\">\n  <div class=\"code\"><pre><span style=\"color:#036;font-weight:bold\">User</span>.should_receive(<span style=\"color:#A60\">:new</span>).exactly(<span style=\"color:#00D\">2</span>).times.and_return(<span style=\"color:#33B\">@some_predefined_stuff</span>)\n</pre></div>\n</div>\n\n        </div>\n\n</div>"},
  {id: 312, name: "Protecting a rack app with basic auth", category_id: 3, body: "<p>I had to mount a <code>Sinatra</code> app ( Sidekiq app for monitoring a queue ) in \nmy Rails app, and I wanted basic auth for it. Here's how to do it, from \nthe routes file:<br></p>\n<pre><code class=\"ruby\">Sidekiq::Web.use Rack::Auth::Basic do |username, password|<br style='font-family: \"Courier New\",Courier,monospace;'>  username == 'some_user' &amp;&amp; password == 'some_password'<br style='font-family: \"Courier New\",Courier,monospace;'>end <br style='font-family: \"Courier New\",Courier,monospace;'>mount Sidekiq::Web =&gt; '/sidekiq'</code></pre>", created_at: "2013-12-13 19:56:08", updated_at: "2013-12-13 19:56:08", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "<p>I had to mount a <code>Sinatra</code> app ( Sidekiq app for monitoring a queue ) in \nmy Rails app, and I wanted basic auth for it. Here's how to do it, from \nthe routes file:<br></p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#036;font-weight:bold\">Sidekiq</span>::<span style=\"color:#036;font-weight:bold\">Web</span>.use <span style=\"color:#036;font-weight:bold\">Rack</span>::<span style=\"color:#036;font-weight:bold\">Auth</span>::<span style=\"color:#036;font-weight:bold\">Basic</span> <span style=\"color:#080;font-weight:bold\">do</span> |username, password|\n  username == <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">some_user</span><span style=\"color:#710\">'</span></span> &amp;&amp; password == <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">some_password</span><span style=\"color:#710\">'</span></span>\n<span style=\"color:#080;font-weight:bold\">end</span> \nmount <span style=\"color:#036;font-weight:bold\">Sidekiq</span>::<span style=\"color:#036;font-weight:bold\">Web</span> =&gt; <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">/sidekiq</span><span style=\"color:#710\">'</span></span>\n</pre></td>\n</tr></table>\n\n        </div>\n", pretty_preview: "<p>I had to mount a <code>Sinatra</code> app ( Sidekiq app for monitoring a queue ) in \nmy Rails app, and I wanted basic auth for it. Here's how to do it, from \nthe routes file:<br></p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <div class=\"CodeRay\">\n  <div class=\"code\"><pre><span style=\"color:#036;font-weight:bold\">Sidekiq</span>::<span style=\"color:#036;font-weight:bold\">Web</span>.use <span style=\"color:#036;font-weight:bold\">Rack</span>::<span style=\"color:#036;font-weight:bold\">Auth</span>::<span style=\"color:#036;font-weight:bold\">Basic</span> <span style=\"color:#080;font-weight:bold\">do</span> |username, password|\n  username == <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">some_user</span><span style=\"color:#710\">'</span></span> &amp;&amp; pa...\n\n</pre></div>\n</div>\n\n        </div>\n"},
  {id: 313, name: "Задачи", category_id: 2, body: "<p>(1) Дана последовательность: <br>1 <br>11 <br>21 <br>1211 <br>111221 <br>312211 <br>Нужно чтобы ваша программа могла продолжить данную последовательность.<br><br>(2) Начальник тюрьмы - чокнутый компьютерный маньяк - собирает зеков, и объявляет: <br> <br>Можете собраться и спланировать стратегию, а потом всех по одиночкам и никаких перестуков. В камере для медитаций есть рубильник, по особому случаю отключенный от электрического стула, с двумя возможными положениям - вкл/выкл. Иногда, когда захочется, буду случайно выбирать одного из вас, кто пойдет в камеру с рубильником. Войдя, можно перещелкнуть рубильник или просто его не трогать. Никто кроме вас туда входить не будет. Ходить туда будете хоть до конца срока, торопиться некуда. В любой момент каждый из вас может объявить \"Начальник, мы все уже тут были в камере для медитаций хотя бы по разу\". Если это будет верно, всем амнистия, а нет - всех на корм крокодилам. <br> <br>1.Разработать выигрышную стратегию для известного начального положения рубильника <br>2. То же для неизвестного начального положения.<br><br>(3) Нужно написать ruby программу, которая получив адрес веб странички, закачает с нее все изображения в папку.<br><br>(4) У вас есть массив целых чисел. Все числа идут последовательно от 1 до k. Но в<br>массиве пропущены 2 числа. Реализуйте алгоритм для нахождения этих чисел.<br><br>(5) Допустим нужно написать демон, который будет принимать большое \nколичество данных по сети, каким-либо образом их обрабатывать, часть из \nних передавать куда-то дальше, а что-то складывать в базу данных. Какие \nтехнологии вы будете применять при решении задачи? На что обратите \nосновное внимание при разработке?<br><br>(6) Мы хотим узнать какие пользователи контакта заходили к нам на страницу, но не зарегистрировались, как это можно сделать?<br><br>(7) Есть таблица Users(id, email), есть таблица Messages(id, user_id, \nmessage). Нужно написать sql запрос который вернет 10 пользователей с \nмаксимальным кол-ом сообщений.<br><br>(8) Надо написать код объединяющий \nдва списка без повторений в один список, в котором также не будет \nсодержаться повторений. Нужно оцените сложность алгоритма.<br><br>(9) Клиент может взять сумму на n дней, под определенный процент в день. \nКлиент обязан погашать долг m раз на протяжении n дней (считаем что m \nкратно n). Требуется расчитать общую сумму долга, и сумму частичного \nпогашения. Основное условие, что бы во всех суммах не было копеек.<br><br>Исходные данные: сумма для клиента, процентная ставка в день, кол-во дней, кол-во частичных погашений.<br><br>Пример:\n клиент взял 10 тысяч на 10 дней, с обязаностью погасить долг два раза, \nпод ноль процентов. Тогда 5 тысяч он отдаст через 5 дней, и еще 5 тысяч \nклиент отдаст на 10-й день.<br><br><br>написать метод, подсчитывающий количество очков в результате выброса игральных костей.<br>\nАргумент — массив содержащий до 5 значений. Например [1, 4] или [4, 4, 4, 1, 5]<br>\nПравила подсчета:<br></p>\n<ul>\n<li>Три единицы дают 1000 очков.</li>\n<li>Любое другое число встречающееся 3 раза, даёт 100 умноженное на это число (три пятерки дадут 500).</li>\n<li>Встречающаяся единица дает 100. Кроме случаев, когда она входит в набор из трех единиц (см пункт 1).</li>\n<li>Пятерка дает 50 Кроме случаев, когда она входит в набор из трех пятерок (см пункт 2).</li>\n<li>Все остальное 0.</li>\n</ul>\n<p><br></p>", created_at: "2013-12-13 19:56:08", updated_at: "2013-12-13 19:56:08", author_id: nil, author_name: "jeyboy1985@gmail.com", pretty_body: "<p>(1) Дана последовательность: <br>1 <br>11 <br>21 <br>1211 <br>111221 <br>312211 <br>Нужно чтобы ваша программа могла продолжить данную последовательность.<br><br>(2) Начальник тюрьмы - чокнутый компьютерный маньяк - собирает зеков, и объявляет: <br> <br>Можете собраться и спланировать стратегию, а потом всех по одиночкам и никаких перестуков. В камере для медитаций есть рубильник, по особому случаю отключенный от электрического стула, с двумя возможными положениям - вкл/выкл. Иногда, когда захочется, буду случайно выбирать одного из вас, кто пойдет в камеру с рубильником. Войдя, можно перещелкнуть рубильник или просто его не трогать. Никто кроме вас туда входить не будет. Ходить туда будете хоть до конца срока, торопиться некуда. В любой момент каждый из вас может объявить \"Начальник, мы все уже тут были в камере для медитаций хотя бы по разу\". Если это будет верно, всем амнистия, а нет - всех на корм крокодилам. <br> <br>1.Разработать выигрышную стратегию для известного начального положения рубильника <br>2. То же для неизвестного начального положения.<br><br>(3) Нужно написать ruby программу, которая получив адрес веб странички, закачает с нее все изображения в папку.<br><br>(4) У вас есть массив целых чисел. Все числа идут последовательно от 1 до k. Но в<br>массиве пропущены 2 числа. Реализуйте алгоритм для нахождения этих чисел.<br><br>(5) Допустим нужно написать демон, который будет принимать большое \nколичество данных по сети, каким-либо образом их обрабатывать, часть из \nних передавать куда-то дальше, а что-то складывать в базу данных. Какие \nтехнологии вы будете применять при решении задачи? На что обратите \nосновное внимание при разработке?<br><br>(6) Мы хотим узнать какие пользователи контакта заходили к нам на страницу, но не зарегистрировались, как это можно сделать?<br><br>(7) Есть таблица Users(id, email), есть таблица Messages(id, user_id, \nmessage). Нужно написать sql запрос который вернет 10 пользователей с \nмаксимальным кол-ом сообщений.<br><br>(8) Надо написать код объединяющий \nдва списка без повторений в один список, в котором также не будет \nсодержаться повторений. Нужно оцените сложность алгоритма.<br><br>(9) Клиент может взять сумму на n дней, под определенный процент в день. \nКлиент обязан погашать долг m раз на протяжении n дней (считаем что m \nкратно n). Требуется расчитать общую сумму долга, и сумму частичного \nпогашения. Основное условие, что бы во всех суммах не было копеек.<br><br>Исходные данные: сумма для клиента, процентная ставка в день, кол-во дней, кол-во частичных погашений.<br><br>Пример:\n клиент взял 10 тысяч на 10 дней, с обязаностью погасить долг два раза, \nпод ноль процентов. Тогда 5 тысяч он отдаст через 5 дней, и еще 5 тысяч \nклиент отдаст на 10-й день.<br><br><br>написать метод, подсчитывающий количество очков в результате выброса игральных костей.<br>\nАргумент — массив содержащий до 5 значений. Например [1, 4] или [4, 4, 4, 1, 5]<br>\nПравила подсчета:<br></p>\n<ul>\n<li>Три единицы дают 1000 очков.</li>\n<li>Любое другое число встречающееся 3 раза, даёт 100 умноженное на это число (три пятерки дадут 500).</li>\n<li>Встречающаяся единица дает 100. Кроме случаев, когда она входит в набор из трех единиц (см пункт 1).</li>\n<li>Пятерка дает 50 Кроме случаев, когда она входит в набор из трех пятерок (см пункт 2).</li>\n<li>Все остальное 0.</li>\n</ul>\n<p><br></p>", pretty_preview: "<p>(1) Дана последовательность: <br>1 <br>11 <br>21 <br>1211 <br>111221 <br>312211 <br>Нужно чтобы ваша программа могла продолжить данную последовательность.<br><br>(2) Начальник тюрьмы - чокнутый компьютерный маньяк - собирает зеков, и объявляет: <br> <br>Можете собраться и спланировать стратегию...<br></p>"},
  {id: 314, name: "Date conversion problems", category_id: 3, body: "<p>Spent a lot of time debugging dates because of this:<br></p>\n<pre><code class=\"bash\">in activerecord-3.2.13/lib/active_record/connection_adapters/abstract/quoting.rb @ line 103 ActiveRecord::ConnectionAdapters::Quoting#quoted_date</code></pre>\n<pre><code class=\"ruby\">zone_conversion_method = ActiveRecord::Base.default_timezone == :utc ? :getutc : :getlocal</code></pre>", created_at: "2013-12-13 19:56:08", updated_at: "2013-12-13 19:56:08", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "<p>Spent a lot of time debugging dates because of this:<br></p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/bash.png' alt='bash'/>\n              </div>\n          <pre><code class=\"bash\">in activerecord-3.2.13/lib/active_record/connection_adapters/abstract/quoting.rb @ line 103 ActiveRecord::ConnectionAdapters::Quoting#quoted_date</code></pre>\n        </div>\n\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n</pre></td>\n  <td class=\"code\"><pre>zone_conversion_method = <span style=\"color:#036;font-weight:bold\">ActiveRecord</span>::<span style=\"color:#036;font-weight:bold\">Base</span>.default_timezone == <span style=\"color:#A60\">:utc</span> ? <span style=\"color:#A60\">:getutc</span> : <span style=\"color:#A60\">:getlocal</span>\n</pre></td>\n</tr></table>\n\n        </div>\n", pretty_preview: "<p>Spent a lot of time debugging dates because of this:<br></p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/bash.png' alt='bash'/>\n              </div>\n          <pre><code class=\"bash\">in activerecord-3.2.13/lib/active_record/connection_adapters/abstract/quoting.rb @ line 103 ActiveRecord::ConnectionAdapters::Quoting#quoted_date</code></pre>\n        </div>\n\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <div class=\"CodeRay\">\n  <div class=\"code\"><pre>zone_conversion_method = <span style=\"color:#036;font-weight:bold\">ActiveRecord</span>::<span style=\"color:#036;font-weight:bold\">Base</span>.default_...\n</pre></div>\n</div>\n\n        </div>\n"},
  {id: 315, name: "Easy character normalization in Rails 3", category_id: 3, body: "<p>Imagine you have the string Höhere and you'd want to transform it to Hohere. Here's how to do it, using <code>Rails 3</code>:<br></p>\n<pre><code class=\"ruby\">s = \"Höhere\"<br>ActiveSupport::Inflector.transliterate(s)<br>=&gt; Hohere</code></pre>", created_at: "2013-12-13 19:56:08", updated_at: "2013-12-13 19:56:08", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "<p>Imagine you have the string Höhere and you'd want to transform it to Hohere. Here's how to do it, using <code>Rails 3</code>:<br></p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n</pre></td>\n  <td class=\"code\"><pre>s = <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">Höhere</span><span style=\"color:#710\">&quot;</span></span>\n<span style=\"color:#036;font-weight:bold\">ActiveSupport</span>::<span style=\"color:#036;font-weight:bold\">Inflector</span>.transliterate(s)\n=&gt; <span style=\"color:#036;font-weight:bold\">Hohere</span>\n</pre></td>\n</tr></table>\n\n        </div>\n", pretty_preview: "<p>Imagine you have the string Höhere and you'd want to transform it to Hohere. Here's how to do it, using <code>Rails 3</code>:<br></p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <div class=\"CodeRay\">\n  <div class=\"code\"><pre>s = <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">Höhere</span><span style=\"color:#710\">&quot;</span></span>\n<span style=\"color:#036;font-weight:bold\">ActiveSupport</span>::<span style=\"color:#036;font-weight:bold\">Inflector</span>.transliterate(s)\n=&gt; <span style=\"color:#036;font-weight:bold\">Hohere</span>\n</pre></div>\n</div>\n\n        </div>\n"},
  {id: 316, name: "Deleting all objects from the Rails console", category_id: 3, body: "<pre><code class=\"ruby\">ActiveRecord::Base.subclasses.each {|e| e.destroy_all }</code></pre>", created_at: "2013-12-13 19:56:08", updated_at: "2013-12-13 19:56:08", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#036;font-weight:bold\">ActiveRecord</span>::<span style=\"color:#036;font-weight:bold\">Base</span>.subclasses.each {|e| e.destroy_all }\n</pre></td>\n</tr></table>\n\n        </div>\n", pretty_preview: "        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <div class=\"CodeRay\">\n  <div class=\"code\"><pre><span style=\"color:#036;font-weight:bold\">ActiveRecord</span>::<span style=\"color:#036;font-weight:bold\">Base</span>.subclasses.each {|e| e.destroy_all }\n</pre></div>\n</div>\n\n        </div>\n"},
  {id: 317, name: "Listing all models in a Rails app", category_id: 3, body: "<pre><code class=\"ruby\">ActiveRecord::Base.subclasses</code></pre>\n<span style=\"font-family: Arial,Helvetica,sans-serif;\">OR</span> <br><pre><code class=\"ruby\">ActiveRecord::Base.descendants</code></pre>", created_at: "2013-12-13 19:56:08", updated_at: "2013-12-13 19:56:08", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#036;font-weight:bold\">ActiveRecord</span>::<span style=\"color:#036;font-weight:bold\">Base</span>.subclasses\n</pre></td>\n</tr></table>\n\n        </div>\n\n<span style=\"font-family: Arial,Helvetica,sans-serif;\">OR</span> <br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#036;font-weight:bold\">ActiveRecord</span>::<span style=\"color:#036;font-weight:bold\">Base</span>.descendants\n</pre></td>\n</tr></table>\n\n        </div>\n", pretty_preview: "        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <div class=\"CodeRay\">\n  <div class=\"code\"><pre><span style=\"color:#036;font-weight:bold\">ActiveRecord</span>::<span style=\"color:#036;font-weight:bold\">Base</span>.subclasses\n</pre></div>\n</div>\n\n        </div>\n\n<span style=\"font-family: Arial,Helvetica,sans-serif;\">OR</span> <br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <div class=\"CodeRay\">\n  <div class=\"code\"><pre><span style=\"color:#036;font-weight:bold\">ActiveRecord</span>::<span style=\"color:#036;font-weight:bold\">Base</span>.descendants\n</pre></div>\n</div>\n\n        </div>\n"},
  {id: 318, name: "Sample .irbrc file", category_id: 2, body: "<p>( location is $HOME/.irbrc ) :<br><br></p>\n<pre><code class=\"ruby\">require \"rubygems\"<br style='font-family: \"Courier New\",Courier,monospace;'>require \"irb\"<br style='font-family: \"Courier New\",Courier,monospace;'>require 'wirble'<br style='font-family: \"Courier New\",Courier,monospace;'><br style='font-family: \"Courier New\",Courier,monospace;'>Wirble.init<br style='font-family: \"Courier New\",Courier,monospace;'>Wirble.colorize<br style='font-family: \"Courier New\",Courier,monospace;'><br style='font-family: \"Courier New\",Courier,monospace;'>class Object<br style='font-family: \"Courier New\",Courier,monospace;'>  def onlym<br style='font-family: \"Courier New\",Courier,monospace;'>    self.methods.sort - Object.methods<br style='font-family: \"Courier New\",Courier,monospace;'>  end<br style='font-family: \"Courier New\",Courier,monospace;'>end<br style='font-family: \"Courier New\",Courier,monospace;'><br style='font-family: \"Courier New\",Courier,monospace;'>if defined?(Rails) &amp;&amp; defined?(Rails.env)<br style='font-family: \"Courier New\",Courier,monospace;'><br style='font-family: \"Courier New\",Courier,monospace;'>  def all_ar_tables<br style='font-family: \"Courier New\",Courier,monospace;'>    ActiveRecord::Base.descendants<br style='font-family: \"Courier New\",Courier,monospace;'>  end<br style='font-family: \"Courier New\",Courier,monospace;'><br style='font-family: \"Courier New\",Courier,monospace;'>  def table_stats<br style='font-family: \"Courier New\",Courier,monospace;'>    stats = all_ar_tables.map {|e| [e.name,e.count] }<br style='font-family: \"Courier New\",Courier,monospace;'>    stats.each do |s|<br style='font-family: \"Courier New\",Courier,monospace;'>      padding = 6 - s[1].to_s.size<br style='font-family: \"Courier New\",Courier,monospace;'>      puts \"\#{s[1]} \#{\" \" * padding} \#{s[0]}\"<br style='font-family: \"Courier New\",Courier,monospace;'>    end<br style='font-family: \"Courier New\",Courier,monospace;'>  end<br style='font-family: \"Courier New\",Courier,monospace;'><br style='font-family: \"Courier New\",Courier,monospace;'>  def clear_db<br style='font-family: \"Courier New\",Courier,monospace;'>    all_ar_tables.each {|e| e.destroy_all }<br style='font-family: \"Courier New\",Courier,monospace;'>  end<br style='font-family: \"Courier New\",Courier,monospace;'>end</code></pre>", created_at: "2013-12-13 19:56:08", updated_at: "2013-12-13 19:56:08", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "<p>( location is $HOME/.irbrc ) :<br><br></p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n<a href=\"#n8\" name=\"n8\">8</a>\n<a href=\"#n9\" name=\"n9\">9</a>\n<strong><a href=\"#n10\" name=\"n10\">10</a></strong>\n<a href=\"#n11\" name=\"n11\">11</a>\n<a href=\"#n12\" name=\"n12\">12</a>\n<a href=\"#n13\" name=\"n13\">13</a>\n<a href=\"#n14\" name=\"n14\">14</a>\n<a href=\"#n15\" name=\"n15\">15</a>\n<a href=\"#n16\" name=\"n16\">16</a>\n<a href=\"#n17\" name=\"n17\">17</a>\n<a href=\"#n18\" name=\"n18\">18</a>\n<a href=\"#n19\" name=\"n19\">19</a>\n<strong><a href=\"#n20\" name=\"n20\">20</a></strong>\n<a href=\"#n21\" name=\"n21\">21</a>\n<a href=\"#n22\" name=\"n22\">22</a>\n<a href=\"#n23\" name=\"n23\">23</a>\n<a href=\"#n24\" name=\"n24\">24</a>\n<a href=\"#n25\" name=\"n25\">25</a>\n<a href=\"#n26\" name=\"n26\">26</a>\n<a href=\"#n27\" name=\"n27\">27</a>\n<a href=\"#n28\" name=\"n28\">28</a>\n<a href=\"#n29\" name=\"n29\">29</a>\n<strong><a href=\"#n30\" name=\"n30\">30</a></strong>\n<a href=\"#n31\" name=\"n31\">31</a>\n</pre></td>\n  <td class=\"code\"><pre>require <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">rubygems</span><span style=\"color:#710\">&quot;</span></span>\nrequire <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">irb</span><span style=\"color:#710\">&quot;</span></span>\nrequire <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">wirble</span><span style=\"color:#710\">'</span></span>\n\n<span style=\"color:#036;font-weight:bold\">Wirble</span>.init\n<span style=\"color:#036;font-weight:bold\">Wirble</span>.colorize\n\n<span style=\"color:#080;font-weight:bold\">class</span> <span style=\"color:#B06;font-weight:bold\">Object</span>\n  <span style=\"color:#080;font-weight:bold\">def</span> <span style=\"color:#06B;font-weight:bold\">onlym</span>\n    <span style=\"color:#069\">self</span>.methods.sort - <span style=\"color:#036;font-weight:bold\">Object</span>.methods\n  <span style=\"color:#080;font-weight:bold\">end</span>\n<span style=\"color:#080;font-weight:bold\">end</span>\n\n<span style=\"color:#080;font-weight:bold\">if</span> <span style=\"color:#080;font-weight:bold\">defined?</span>(<span style=\"color:#036;font-weight:bold\">Rails</span>) &amp;&amp; <span style=\"color:#080;font-weight:bold\">defined?</span>(<span style=\"color:#036;font-weight:bold\">Rails</span>.env)\n\n  <span style=\"color:#080;font-weight:bold\">def</span> <span style=\"color:#06B;font-weight:bold\">all_ar_tables</span>\n    <span style=\"color:#036;font-weight:bold\">ActiveRecord</span>::<span style=\"color:#036;font-weight:bold\">Base</span>.descendants\n  <span style=\"color:#080;font-weight:bold\">end</span>\n\n  <span style=\"color:#080;font-weight:bold\">def</span> <span style=\"color:#06B;font-weight:bold\">table_stats</span>\n    stats = all_ar_tables.map {|e| [e.name,e.count] }\n    stats.each <span style=\"color:#080;font-weight:bold\">do</span> |s|\n      padding = <span style=\"color:#00D\">6</span> - s[<span style=\"color:#00D\">1</span>].to_s.size\n      puts <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">\#{</span>s[<span style=\"color:#00D\">1</span>]<span style=\"font-weight:bold;color:#666\">}</span></span><span style=\"color:#D20\"> </span><span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">\#{</span><span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\"> </span><span style=\"color:#710\">&quot;</span></span> * padding<span style=\"font-weight:bold;color:#666\">}</span></span><span style=\"color:#D20\"> </span><span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">\#{</span>s[<span style=\"color:#00D\">0</span>]<span style=\"font-weight:bold;color:#666\">}</span></span><span style=\"color:#710\">&quot;</span></span>\n    <span style=\"color:#080;font-weight:bold\">end</span>\n  <span style=\"color:#080;font-weight:bold\">end</span>\n\n  <span style=\"color:#080;font-weight:bold\">def</span> <span style=\"color:#06B;font-weight:bold\">clear_db</span>\n    all_ar_tables.each {|e| e.destroy_all }\n  <span style=\"color:#080;font-weight:bold\">end</span>\n<span style=\"color:#080;font-weight:bold\">end</span>\n</pre></td>\n</tr></table>\n\n        </div>\n", pretty_preview: "<p>( location is $HOME/.irbrc ) :<br><br></p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <div class=\"CodeRay\">\n  <div class=\"code\"><pre>require <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">rubygems</span><span style=\"color:#710\">&quot;</span></span>\nrequire <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">irb</span><span style=\"color:#710\">&quot;</span></span>\nrequire <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">wirble</span><span style=\"color:#710\">'</span></span>\n\n<span style=\"color:#036;font-weight:bold\">Wirble</span>.init\n<span style=\"color:#036;font-weight:bold\">Wirble</span>.colorize\n\n<span style=\"color:#080;font-weight:bold\">class</span> <span style=\"color:#B06;font-weight:bold\">Object</span>\n  <span style=\"color:#080;font-weight:bold\">def</span> <span style=\"color:#06B;font-weight:bold\">onlym</span>\n    <span style=\"color:#069\">self</span>.methods.sort - <span style=\"color:#036;font-weight:bold\">Object</span>.methods\n  <span style=\"color:#080;font-weight:bold\">end</span>\n<span style=\"color:#080;font-weight:bold\">end</span>\n\n<span style=\"color:#080;font-weight:bold\">if</span> <span style=\"color:#080;font-weight:bold\">defined?</span>(<span style=\"color:#036;font-weight:bold\">Rails</span>) &amp;&amp; <span style=\"color:#080;font-weight:bold\">defined?</span>(<span style=\"color:#036;font-weight:bold\">Rails</span>.env)\n\n  <span style=\"color:#080;font-weight:bold\">def</span> <span style=\"color:#06B;font-weight:bold\">all_ar_tables</span>\n    <span style=\"color:#036;font-weight:bold\">ActiveRecord</span>::...\n\n</pre></div>\n</div>\n\n        </div>\n"},
  {id: 319, name: "Making your models modifiable from ActiveAdmin", category_id: 3, body: "<p>I mentioned <a href=\"http://rubylan.herokuapp.com/posts/2044\">here</a>\n how you can modify your attributes with a specific role. If you want to\n be able to do those modifications from ActiveAdmin, you have to add the\n following to your admin_model.rb file:<br></p>\n<pre><code class=\"ruby\">ActiveAdmin.register YourModelName do<br>  controller do<br>    with_role :admin<br>  end<br>end</code></pre>", created_at: "2013-12-13 19:56:08", updated_at: "2013-12-13 19:56:08", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "<p>I mentioned <a href=\"http://rubylan.herokuapp.com/posts/2044\">here</a>\n how you can modify your attributes with a specific role. If you want to\n be able to do those modifications from ActiveAdmin, you have to add the\n following to your admin_model.rb file:<br></p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#036;font-weight:bold\">ActiveAdmin</span>.register <span style=\"color:#036;font-weight:bold\">YourModelName</span> <span style=\"color:#080;font-weight:bold\">do</span>\n  controller <span style=\"color:#080;font-weight:bold\">do</span>\n    with_role <span style=\"color:#A60\">:admin</span>\n  <span style=\"color:#080;font-weight:bold\">end</span>\n<span style=\"color:#080;font-weight:bold\">end</span>\n</pre></td>\n</tr></table>\n\n        </div>\n", pretty_preview: "<p>I mentioned <a href=\"http://rubylan.herokuapp.com/posts/2044\">here</a>\n how you can modify your attributes with a specific role. If you want to\n be able to do those modifications from ActiveAdmin, you have to add the\n following to your admin_model.rb file:<br></p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <div class=\"CodeRay\">\n  <div class=\"code\"><pre><span style=\"color:#036;font-weight:bold\">ActiveAdmin</span>.register <span style=\"color:#036;font-weight:bold\">YourModelName</span> <span style=\"color:#080;font-weight:bold\">do</span>\n  controller <span style=\"color:#080;font-weight:bold\">do</span>...\n\n</pre></div>\n</div>\n\n        </div>\n"},
  {id: 320, name: "Running a migration from console", category_id: 3, body: "<div itemprop=\"articleBody\">\n<div style=\"font-family: Arial,Helvetica,sans-serif;\">\nIf you need to run a specific migration, here's the code to accomplish this ( I'm assuming you are in the rails console ):</div>\n<pre><code class=\"ruby\">load \"db/migrate/20120718081132_add_title_to_articles.rb\"<br></code></pre>\n<span style='font-family: \"Courier New\",Courier,monospace;'><span style=\"font-family: Arial,Helvetica,sans-serif;\">Your migration file has a class name defined, smth. like:</span></span><br><pre><code class=\"ruby\">class AddTitleToArticles &lt; ActiveRecord::Migration<br style='font-family: \"Courier New\",Courier,monospace;'>  def change<br style='font-family: \"Courier New\",Courier,monospace;'>    add_column :articles, :title,:string<br style='font-family: \"Courier New\",Courier,monospace;'>  end<br style='font-family: \"Courier New\",Courier,monospace;'>end<br></code></pre>\n<span style='font-family: \"Courier New\",Courier,monospace;'><span style=\"font-family: Arial,Helvetica,sans-serif;\"><span style=\"font-family: Arial,Helvetica,sans-serif;\">To run the migration, write the following:</span></span></span><br><pre><code class=\"ruby\">AddTitleToArticles.migrate(:up)  </code></pre>\nOr:<br><pre><code class=\"ruby\">AddTitleToArticles.migrate(:down)</code></pre>\n<span style='font-family: \"Courier New\",Courier,monospace;'> </span>\n</div>", created_at: "2013-12-13 19:56:08", updated_at: "2013-12-13 19:56:08", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "<div itemprop=\"articleBody\">\n<div style=\"font-family: Arial,Helvetica,sans-serif;\">\nIf you need to run a specific migration, here's the code to accomplish this ( I'm assuming you are in the rails console ):</div>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n</pre></td>\n  <td class=\"code\"><pre>load <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">db/migrate/20120718081132_add_title_to_articles.rb</span><span style=\"color:#710\">&quot;</span></span>\n\n</pre></td>\n</tr></table>\n\n        </div>\n\n<span style='font-family: \"Courier New\",Courier,monospace;'><span style=\"font-family: Arial,Helvetica,sans-serif;\">Your migration file has a class name defined, smth. like:</span></span><br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#080;font-weight:bold\">class</span> <span style=\"color:#B06;font-weight:bold\">AddTitleToArticles</span> &lt; <span style=\"color:#036;font-weight:bold\">ActiveRecord</span>::<span style=\"color:#036;font-weight:bold\">Migration</span>\n  <span style=\"color:#080;font-weight:bold\">def</span> <span style=\"color:#06B;font-weight:bold\">change</span>\n    add_column <span style=\"color:#A60\">:articles</span>, <span style=\"color:#A60\">:title</span>,<span style=\"color:#A60\">:string</span>\n  <span style=\"color:#080;font-weight:bold\">end</span>\n<span style=\"color:#080;font-weight:bold\">end</span>\n\n</pre></td>\n</tr></table>\n\n        </div>\n\n<span style='font-family: \"Courier New\",Courier,monospace;'><span style=\"font-family: Arial,Helvetica,sans-serif;\"><span style=\"font-family: Arial,Helvetica,sans-serif;\">To run the migration, write the following:</span></span></span><br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#036;font-weight:bold\">AddTitleToArticles</span>.migrate(<span style=\"color:#A60\">:up</span>)  \n</pre></td>\n</tr></table>\n\n        </div>\n\nOr:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#036;font-weight:bold\">AddTitleToArticles</span>.migrate(<span style=\"color:#A60\">:down</span>)\n</pre></td>\n</tr></table>\n\n        </div>\n\n<span style='font-family: \"Courier New\",Courier,monospace;'> </span>\n</div>", pretty_preview: "<div itemprop=\"articleBody\">\n<div style=\"font-family: Arial,Helvetica,sans-serif;\">\nIf you need to run a specific migration, here's the code to accomplish this ( I'm assuming you are in the rails console ):</div>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <div class=\"CodeRay\">\n  <div class=\"code\"><pre>load <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">db/migrate/20120718081132_add_title_to_articles.rb</span><span style=\"color:#710\">&quot;</span></span>\n\n</pre></div>\n</div>\n\n        </div>\n\n<span style='font-family: \"Courier New\",Courier,monospace;'><span style=\"font-family: Arial,Helvetica,sans-serif;\">Your migration file has a class name defined, smth. like:</span></span><br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <div class=\"CodeRay\">\n  <div class=\"code\"><pre><span style=\"color:#080;font-weight:bold\">class</span> <span style=\"color:#B06;font-weight:bold\">AddTi</span>...\n\n</pre></div>\n</div>\n\n        </div>\n\n</div>"},
  {id: 321, name: "Config for Rails", category_id: 3, body: "<p>These are the steps on a Ubuntu PC. First we install build prerequisites, git, postgresql and memcached:<br></p>\n<pre><code class=\"bash\">sudo apt-get install curl git-core build-essential openssl libreadline6 libreadline6-dev curl git-corezlib1g zlib1g-dev libssl-dev libyaml-dev libsqlite3-0 libsqlite3-dev sqlite3 libxml2-dev libxslt-dev autoconf libc6-dev ncurses-dev automake libtool bison subversion libcurl4-gnutls-dev postgresql postgresql-contrib libpq-dev memcached<br></code></pre>\nNext, we install RVM: <pre><code class=\"bash\">curl -L get.rvm.io | bash -s stable --ruby</code></pre>\nFollowed by adding a user to <code>postgresql</code>:<pre><code class=\"bash\">sudo -u postgres createuser --superuser george \nsudo -u postgres psql postgres \n\\password george\n\\q</code></pre>\n\nAnd add this to your <code>.bashrc</code>:<br><pre><code>[[ -s \"$HOME/.rvm/scripts/rvm\" ]] &amp;&amp; . \"$HOME/.rvm/scripts/rvm\"</code></pre>", created_at: "2013-12-13 19:56:08", updated_at: "2013-12-13 19:56:08", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "<p>These are the steps on a Ubuntu PC. First we install build prerequisites, git, postgresql and memcached:<br></p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/bash.png' alt='bash'/>\n              </div>\n          <pre><code class=\"bash\">sudo apt-get install curl git-core build-essential openssl libreadline6 libreadline6-dev curl git-corezlib1g zlib1g-dev libssl-dev libyaml-dev libsqlite3-0 libsqlite3-dev sqlite3 libxml2-dev libxslt-dev autoconf libc6-dev ncurses-dev automake libtool bison subversion libcurl4-gnutls-dev postgresql postgresql-contrib libpq-dev memcached<br></code></pre>\n        </div>\n\nNext, we install RVM:         <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/bash.png' alt='bash'/>\n              </div>\n          <pre><code class=\"bash\">curl -L get.rvm.io | bash -s stable --ruby</code></pre>\n        </div>\n\nFollowed by adding a user to <code>postgresql</code>:        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/bash.png' alt='bash'/>\n              </div>\n          <pre><code class=\"bash\">sudo -u postgres createuser --superuser george \nsudo -u postgres psql postgres \n\\password george\n\\q</code></pre>\n        </div>\n\n\nAnd add this to your <code>.bashrc</code>:<br>        <div class='oa clearfix'>\n          \n          <pre><code>[[ -s \"$HOME/.rvm/scripts/rvm\" ]] &amp;&amp; . \"$HOME/.rvm/scripts/rvm\"</code></pre>\n        </div>\n", pretty_preview: "<p>These are the steps on a Ubuntu PC. First we install build prerequisites, git, postgresql and memcached:<br></p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/bash.png' alt='bash'/>\n              </div>\n          <pre><code class=\"bash\">sudo apt-get install curl git-core build-essential openssl libreadline6 libreadline6-dev curl git-corezlib1g zlib1g-dev libssl-dev libyaml-dev lib...<br></code></pre>\n        </div>\n"},
  {id: 322, name: "Specifying gem inclusion details in your Gemfile", category_id: 3, body: "<p>If you want to use a specific commit of a gem in your Gemfile, use this:<br></p>\n<pre><code class=\"ruby\">gem 'rails', :git =&gt; 'git://github.com/rails/rails.git', :ref =&gt; '4aded'</code></pre>\n   \nfor local path use:<br><pre><code class=\"ruby\">gem 'rails', :path =&gt; 'path to gem'</code></pre>", created_at: "2013-12-13 19:56:08", updated_at: "2013-12-13 19:56:08", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "<p>If you want to use a specific commit of a gem in your Gemfile, use this:<br></p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n</pre></td>\n  <td class=\"code\"><pre>gem <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">rails</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#A60\">:git</span> =&gt; <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">git://github.com/rails/rails.git</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#A60\">:ref</span> =&gt; <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">4aded</span><span style=\"color:#710\">'</span></span>\n</pre></td>\n</tr></table>\n\n        </div>\n\n   \nfor local path use:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n</pre></td>\n  <td class=\"code\"><pre>gem <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">rails</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#A60\">:path</span> =&gt; <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">path to gem</span><span style=\"color:#710\">'</span></span>\n</pre></td>\n</tr></table>\n\n        </div>\n", pretty_preview: "<p>If you want to use a specific commit of a gem in your Gemfile, use this:<br></p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <div class=\"CodeRay\">\n  <div class=\"code\"><pre>gem <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">rails</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#A60\">:git</span> =&gt; <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">git://github.com/rails/rails.git</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#A60\">:ref</span> =&gt; <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">4aded</span><span style=\"color:#710\">'</span></span>\n</pre></div>\n</div>\n\n        </div>\n\n   \nfor local path use:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <div class=\"CodeRay\">\n  <div class=\"code\"><pre>gem <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">rails</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#A60\">:path</span> =&gt; <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">path to gem</span><span style=\"color:#710\">'</span></span>\n</pre></div>\n</div>\n\n        </div>\n"},
  {id: 323, name: "Get a listing of all the tables using ActiveRecord", category_id: 3, body: "<span style='font-family: \"Courier New\",Courier,monospace;'><pre><code class=\"ruby\">ActiveRecord::Base.connection.tables</code></pre></span>", created_at: "2013-12-13 19:56:08", updated_at: "2013-12-13 19:56:08", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "<span style='font-family: \"Courier New\",Courier,monospace;'>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#036;font-weight:bold\">ActiveRecord</span>::<span style=\"color:#036;font-weight:bold\">Base</span>.connection.tables\n</pre></td>\n</tr></table>\n\n        </div>\n</span>", pretty_preview: "<span style='font-family: \"Courier New\",Courier,monospace;'>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <div class=\"CodeRay\">\n  <div class=\"code\"><pre><span style=\"color:#036;font-weight:bold\">ActiveRecord</span>::<span style=\"color:#036;font-weight:bold\">Base</span>.connection.tables\n</pre></div>\n</div>\n\n        </div>\n</span>"},
  {id: 324, name: "Creating custom constraints for your routes", category_id: 3, body: "<p>If you'd like that some routes are only available to logged in users, you can do this:<br></p>\n<pre><code class=\"ruby\">get \"some_route\",:to =&gt; \"some_controller#some_action\",:constraints =&gt; MyConstraints.new</code></pre>\nNext, define your constraints class:<br><pre><code class=\"ruby\">class MyConstraints\n  def matches?(request)\n     # some logic here; if you return true, request will reach controller\n     # if you return false, user will get a 404, his req will not reach controller\n  end\nend</code></pre>", created_at: "2013-12-13 19:56:08", updated_at: "2013-12-13 19:56:08", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "<p>If you'd like that some routes are only available to logged in users, you can do this:<br></p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n</pre></td>\n  <td class=\"code\"><pre>get <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">some_route</span><span style=\"color:#710\">&quot;</span></span>,<span style=\"color:#A60\">:to</span> =&gt; <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">some_controller#some_action</span><span style=\"color:#710\">&quot;</span></span>,<span style=\"color:#A60\">:constraints</span> =&gt; <span style=\"color:#036;font-weight:bold\">MyConstraints</span>.new\n</pre></td>\n</tr></table>\n\n        </div>\n\nNext, define your constraints class:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#080;font-weight:bold\">class</span> <span style=\"color:#B06;font-weight:bold\">MyConstraints</span>\n  <span style=\"color:#080;font-weight:bold\">def</span> <span style=\"color:#06B;font-weight:bold\">matches?</span>(request)\n     <span style=\"color:#777\"># some logic here; if you return true, request will reach controller</span>\n     <span style=\"color:#777\"># if you return false, user will get a 404, his req will not reach controller</span>\n  <span style=\"color:#080;font-weight:bold\">end</span>\n<span style=\"color:#080;font-weight:bold\">end</span>\n</pre></td>\n</tr></table>\n\n        </div>\n", pretty_preview: "<p>If you'd like that some routes are only available to logged in users, you can do this:<br></p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <div class=\"CodeRay\">\n  <div class=\"code\"><pre>get <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">some_route</span><span style=\"color:#710\">&quot;</span></span>,<span style=\"color:#A60\">:to</span> =&gt; <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">some_controller#some_action</span><span style=\"color:#710\">&quot;</span></span>,<span style=\"color:#A60\">:constraints</span> =&gt; <span style=\"color:#036;font-weight:bold\">MyConstraints</span>.new\n</pre></div>\n</div>\n\n        </div>\n\nNext, define your constraints class:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <div class=\"CodeRay\">\n  <div class=\"code\"><pre><span style=\"color:#080;font-weight:bold\">class</span> <span style=\"color:#B06;font-weight:bold\">MyConstraints</span>\n  <span style=\"color:#080;font-weight:bold\">def</span> <span style=\"color:#06B;font-weight:bold\">matches?</span>(request)\n ...\n</pre></div>\n</div>\n\n        </div>\n"},
  {id: 325, name: "twitter bootstrap rails problems", category_id: 3, body: "<p>This post will cover multiple errors you may receive. <br></p>\n<pre><code class=\"bash\">assets:precompile error( \"Invalid CSS after\" ) with FontAwesome path.<br>variable @fontAwesomeEotPath_iefix is undefined</code></pre>If you receive these errors, make sure you update your twitter bootstrap rails file, and regenerate the install files:<br><pre><code class=\"bash\">rails g bootstrap:install -f<br>Ruby on Rails error “cannot load such file — less”</code></pre>The fix was adding the following in my Gemfile:<br><pre><code class=\"ruby\">gem 'libv8', '~&gt; 3.11.8'<br>gem \"less-rails\"</code></pre>", created_at: "2013-12-13 19:56:08", updated_at: "2013-12-13 19:56:08", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "<p>This post will cover multiple errors you may receive. <br></p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/bash.png' alt='bash'/>\n              </div>\n          <pre><code class=\"bash\">assets:precompile error( \"Invalid CSS after\" ) with FontAwesome path.<br>variable @fontAwesomeEotPath_iefix is undefined</code></pre>\n        </div>\nIf you receive these errors, make sure you update your twitter bootstrap rails file, and regenerate the install files:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/bash.png' alt='bash'/>\n              </div>\n          <pre><code class=\"bash\">rails g bootstrap:install -f<br>Ruby on Rails error “cannot load such file — less”</code></pre>\n        </div>\nThe fix was adding the following in my Gemfile:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n</pre></td>\n  <td class=\"code\"><pre>gem <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">libv8</span><span style=\"color:#710\">'</span></span>, <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">~&gt; 3.11.8</span><span style=\"color:#710\">'</span></span>\ngem <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">less-rails</span><span style=\"color:#710\">&quot;</span></span>\n</pre></td>\n</tr></table>\n\n        </div>\n", pretty_preview: "<p>This post will cover multiple errors you may receive. <br></p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/bash.png' alt='bash'/>\n              </div>\n          <pre><code class=\"bash\">assets:precompile error( \"Invalid CSS after\" ) with FontAwesome path.<br>variable @fontAwesomeEotPath_iefix is undefined</code></pre>\n        </div>\nIf you receive these errors, make sure you update your twitter bootstrap rails f...<br>"},
  {id: 326, name: "Inject trick", category_id: 2, body: "<p></p>\n<pre><code class=\"ruby\">[[1,2], [2,3]].inject(:&amp;)<br>=&gt;[2]</code></pre>", created_at: "2013-12-13 19:56:08", updated_at: "2013-12-13 19:56:08", author_id: nil, author_name: "alexsummers@yandex.ua", pretty_body: "<p></p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n</pre></td>\n  <td class=\"code\"><pre>[[<span style=\"color:#00D\">1</span>,<span style=\"color:#00D\">2</span>], [<span style=\"color:#00D\">2</span>,<span style=\"color:#00D\">3</span>]].inject(<span style=\"color:#A60\">:&amp;</span>)\n=&gt;[<span style=\"color:#00D\">2</span>]\n</pre></td>\n</tr></table>\n\n        </div>\n", pretty_preview: "<p></p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <div class=\"CodeRay\">\n  <div class=\"code\"><pre>[[<span style=\"color:#00D\">1</span>,<span style=\"color:#00D\">2</span>], [<span style=\"color:#00D\">2</span>,<span style=\"color:#00D\">3</span>]].inject(<span style=\"color:#A60\">:&amp;</span>)\n=&gt;[<span style=\"color:#00D\">2</span>]\n</pre></div>\n</div>\n\n        </div>\n"},
  {id: 327, name: "Marking ActiveRecord attributes as accessible for certain roles", category_id: 3, body: "<p>Usually, in your model, you'd have :<br></p>\n<pre><code class=\"ruby\">attr_accessible :name, :title</code></pre>If you want that certain roles be able to modify some other attributes/associations, declare them on a specific role:<br><pre><code class=\"ruby\">attr_accessible :name, :title, :secret, :as =&gt; :admin</code></pre>To be able to create a record, under a specific role, you can do this in your console:<br><pre><code class=\"ruby\">MyModel.new(params[:your_model], :as =&gt; :admin)</code></pre>", created_at: "2013-12-13 19:56:08", updated_at: "2013-12-13 19:56:08", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "<p>Usually, in your model, you'd have :<br></p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n</pre></td>\n  <td class=\"code\"><pre>attr_accessible <span style=\"color:#A60\">:name</span>, <span style=\"color:#A60\">:title</span>\n</pre></td>\n</tr></table>\n\n        </div>\nIf you want that certain roles be able to modify some other attributes/associations, declare them on a specific role:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n</pre></td>\n  <td class=\"code\"><pre>attr_accessible <span style=\"color:#A60\">:name</span>, <span style=\"color:#A60\">:title</span>, <span style=\"color:#A60\">:secret</span>, <span style=\"color:#A60\">:as</span> =&gt; <span style=\"color:#A60\">:admin</span>\n</pre></td>\n</tr></table>\n\n        </div>\nTo be able to create a record, under a specific role, you can do this in your console:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#036;font-weight:bold\">MyModel</span>.new(params[<span style=\"color:#A60\">:your_model</span>], <span style=\"color:#A60\">:as</span> =&gt; <span style=\"color:#A60\">:admin</span>)\n</pre></td>\n</tr></table>\n\n        </div>\n", pretty_preview: "<p>Usually, in your model, you'd have :<br></p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <div class=\"CodeRay\">\n  <div class=\"code\"><pre>attr_accessible <span style=\"color:#A60\">:name</span>, <span style=\"color:#A60\">:title</span>\n</pre></div>\n</div>\n\n        </div>\nIf you want that certain roles be able to modify some other attributes/associations, declare them on a specific role:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <div class=\"CodeRay\">\n  <div class=\"code\"><pre>attr_accessible <span style=\"color:#A60\">:name</span>, <span style=\"color:#A60\">:title</span>, <span style=\"color:#A60\">:secret</span>, <span style=\"color:#A60\">:as</span> =&gt; <span style=\"color:#A60\">:admin</span>\n</pre></div>\n</div>\n\n        </div>\nTo be able to c...<br>"},
  {id: 328, name: "Jenkins build step for testing a Rails project", category_id: 3, body: "<div itemprop=\"articleBody\"><pre><code class=\"bash\">. ~/.bashrc<br style='font-family: \"Courier New\",Courier,monospace;'>. ~/.rvm/scripts/rvm<br style='font-family: \"Courier New\",Courier,monospace;'>rvm use 1.9.3@yourgemset --create<br style='font-family: \"Courier New\",Courier,monospace;'>bundle install<br style='font-family: \"Courier New\",Courier,monospace;'>bundle exec rake db:schema:load<br style='font-family: \"Courier New\",Courier,monospace;'>bundle exec rspec spec/models/some_spec.rb</code></pre></div>", created_at: "2013-12-13 19:56:08", updated_at: "2013-12-13 19:56:08", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "<div itemprop=\"articleBody\">        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/bash.png' alt='bash'/>\n              </div>\n          <pre><code class=\"bash\">. ~/.bashrc<br style='font-family: \"Courier New\",Courier,monospace;'>. ~/.rvm/scripts/rvm<br style='font-family: \"Courier New\",Courier,monospace;'>rvm use 1.9.3@yourgemset --create<br style='font-family: \"Courier New\",Courier,monospace;'>bundle install<br style='font-family: \"Courier New\",Courier,monospace;'>bundle exec rake db:schema:load<br style='font-family: \"Courier New\",Courier,monospace;'>bundle exec rspec spec/models/some_spec.rb</code></pre>\n        </div>\n</div>", pretty_preview: "<div itemprop=\"articleBody\">        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/bash.png' alt='bash'/>\n              </div>\n          <pre><code class=\"bash\">. ~/.bashrc<br style='font-family: \"Courier New\",Courier,monospace;'>. ~/.rvm/scripts/rvm<br style='font-family: \"Courier New\",Courier,monospace;'>rvm use 1.9.3@yourgemset --create<br style='font-family: \"Courier New\",Courier,monospace;'>bundle install<br style='font-family: \"Courier New\",Courier,monospace;'>bundle exec rake db:schema:load<br style='font-family: \"Courier New\",Courier,monospace;'>bundle exec rspec spec/models/some_spec.rb</code></pre>\n        </div>\n</div>"},
  {id: 329, name: "Raw update/select using ActiveRecord", category_id: 3, body: "<p>In order to fix a migration issue, I had to manually modify the \nschema_migrations and insert a migration version before another one. \nThese two lambdas were helpful:<br></p>\n<pre><code class=\"ruby\">selecter = lambda { (ActiveRecord::Base.connection.execute \"select * from schema_migrations\").each {|e| puts e } }\ninserter = lambda {|e| (ActiveRecord::Base.connection.execute \"INSERT into schema_migrations VALUES (\#{e})\") }</code></pre>", created_at: "2013-12-13 19:56:08", updated_at: "2013-12-13 19:56:08", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "<p>In order to fix a migration issue, I had to manually modify the \nschema_migrations and insert a migration version before another one. \nThese two lambdas were helpful:<br></p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n</pre></td>\n  <td class=\"code\"><pre>selecter = lambda { (<span style=\"color:#036;font-weight:bold\">ActiveRecord</span>::<span style=\"color:#036;font-weight:bold\">Base</span>.connection.execute <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">select * from schema_migrations</span><span style=\"color:#710\">&quot;</span></span>).each {|e| puts e } }\ninserter = lambda {|e| (<span style=\"color:#036;font-weight:bold\">ActiveRecord</span>::<span style=\"color:#036;font-weight:bold\">Base</span>.connection.execute <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">INSERT into schema_migrations VALUES (</span><span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">\#{</span>e<span style=\"font-weight:bold;color:#666\">}</span></span><span style=\"color:#D20\">)</span><span style=\"color:#710\">&quot;</span></span>) }\n</pre></td>\n</tr></table>\n\n        </div>\n", pretty_preview: "<p>In order to fix a migration issue, I had to manually modify the \nschema_migrations and insert a migration version before another one. \nThese two lambdas were helpful:<br></p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <div class=\"CodeRay\">\n  <div class=\"code\"><pre>selecter = lambda { (<span style=\"color:#036;font-weight:bold\">ActiveRecord</span>::<span style=\"color:#036;font-weight:bold\">Base</span>.connection.execute <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">select * from schema_migrations</span><span style=\"color:#710\">&quot;</span></span>).each {|e| puts e } }\ni...\n</pre></div>\n</div>\n\n        </div>\n"},
  {id: 330, name: "Accesing a resource in ActiveAdmin's index page", category_id: 3, body: "<p>If you need to customize how something appears in a resource's index page, here's how you can do it:<br></p>\n<pre><code class=\"ruby\">index do<br>  column :first<br>  column :second<br>  column :tags do |record|<br>    record.tags.map(&amp;:name)<br>  end<br>end</code></pre>", created_at: "2013-12-13 19:56:08", updated_at: "2013-12-13 19:56:08", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "<p>If you need to customize how something appears in a resource's index page, here's how you can do it:<br></p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n</pre></td>\n  <td class=\"code\"><pre>index <span style=\"color:#080;font-weight:bold\">do</span>\n  column <span style=\"color:#A60\">:first</span>\n  column <span style=\"color:#A60\">:second</span>\n  column <span style=\"color:#A60\">:tags</span> <span style=\"color:#080;font-weight:bold\">do</span> |record|\n    record.tags.map(&amp;<span style=\"color:#A60\">:name</span>)\n  <span style=\"color:#080;font-weight:bold\">end</span>\n<span style=\"color:#080;font-weight:bold\">end</span>\n</pre></td>\n</tr></table>\n\n        </div>\n", pretty_preview: "<p>If you need to customize how something appears in a resource's index page, here's how you can do it:<br></p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <div class=\"CodeRay\">\n  <div class=\"code\"><pre>index <span style=\"color:#080;font-weight:bold\">do</span>\n  column <span style=\"color:#A60\">:first</span>\n  column <span style=\"color:#A60\">:second</span>\n  column <span style=\"color:#A60\">:tags</span> <span style=\"color:#080;font-weight:bold\">do</span> |record|\n    record.tags.map(&amp;<span style=\"color:#A60\">:name</span>)\n  <span style=\"color:#080;font-weight:bold\">end</span>\n<span style=\"color:#080;font-weight:bold\">end</span>\n</pre></div>\n</div>\n\n        </div>\n"},
  {id: 331, name: "Dumping/restoring a Rails database", category_id: 3, body: "<p>Add the following gem to your development group: <code><a href=\"https://github.com/ludicast/yaml_db\">yaml_db</a></code><br>\nAfter you run a <i><code>bundle</code></i>, you have access to the following rake tasks:<br><span style='font-family: \"Courier New\",Courier,monospace;'></span></p>\n<pre><code class=\"ruby\">rake db:data:dump</code></pre>\n<span style='font-family: \"Courier New\",Courier,monospace;'><span style=\"font-family: Arial,Helvetica,sans-serif;\">Which will create a </span></span><span style=\"font-style: italic;\"><code>data.yml</code></span><span style='font-family: \"Courier New\",Courier,monospace;'> <span style=\"font-family: Arial,Helvetica,sans-serif;\">in your</span> <i><code>db</code><span style=\"font-family: Arial,Helvetica,sans-serif;\"> </span></i><span style=\"font-family: Arial,Helvetica,sans-serif;\">folder</span>.</span>You also get the task:<br><p></p>\n<pre><code class=\"ruby\">rake db:data:load</code></pre>\nWhich will restore your database from the yml file.", created_at: "2013-12-13 19:56:08", updated_at: "2013-12-13 19:56:08", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "<p>Add the following gem to your development group: <code><a href=\"https://github.com/ludicast/yaml_db\">yaml_db</a></code><br>\nAfter you run a <i><code>bundle</code></i>, you have access to the following rake tasks:<br><span style='font-family: \"Courier New\",Courier,monospace;'></span></p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n</pre></td>\n  <td class=\"code\"><pre>rake <span style=\"color:#606\">db</span>:<span style=\"color:#606\">data</span>:dump\n</pre></td>\n</tr></table>\n\n        </div>\n\n<span style='font-family: \"Courier New\",Courier,monospace;'><span style=\"font-family: Arial,Helvetica,sans-serif;\">Which will create a </span></span><span style=\"font-style: italic;\"><code>data.yml</code></span><span style='font-family: \"Courier New\",Courier,monospace;'> <span style=\"font-family: Arial,Helvetica,sans-serif;\">in your</span> <i><code>db</code><span style=\"font-family: Arial,Helvetica,sans-serif;\"> </span></i><span style=\"font-family: Arial,Helvetica,sans-serif;\">folder</span>.</span>You also get the task:<br><p></p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n</pre></td>\n  <td class=\"code\"><pre>rake <span style=\"color:#606\">db</span>:<span style=\"color:#606\">data</span>:load\n</pre></td>\n</tr></table>\n\n        </div>\n\nWhich will restore your database from the yml file.", pretty_preview: "<p>Add the following gem to your development group: <code><a href=\"https://github.com/ludicast/yaml_db\">yaml_db</a></code><br>\nAfter you run a <i><code>bundle</code></i>, you have access to the following rake tasks:<br><span style='font-family: \"Courier New\",Courier,monospace;'></span></p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <div class=\"CodeRay\">\n  <div class=\"code\"><pre>rake <span style=\"color:#606\">db</span>:<span style=\"color:#606\">data</span>:dump\n</pre></div>\n</div>\n\n        </div>\n\n<span style='font-family: \"Courier New\",Courier,monospace;'><span style=\"font-family: Arial,Helvetica,sans-serif;\">Which will create a </span></span><span style=\"font-style: italic;\"><code>data.yml</code></span><span style='font-family: \"Courier New\",Courier,monospace;'> <span style=\"font-family: Arial,Helvetica,sans-serif;\">in your</span> <i><code>db</code><span style=\"font-family: Arial,Helvetica,sans-serif;\"> </span></i><span style=\"font-family: Arial,Helvetica,sans-serif;\">folder</span>.</span>You also get the task:<br><p></p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <div class=\"CodeRay\">\n  <div class=\"code\"><pre>rake <span style=\"color:#606\">db</span>:<span style=\"color:#606\">data</span>:load\n</pre></div>\n</div>\n\n        </div>\n\nWhich will restore your da..."},
  {id: 332, name: "Removing the delete button from ActiveAdmin", category_id: 3, body: "<pre><code class=\"ruby\">ActiveAdmin.register User do\n  actions :all,:except =&gt; :destroy\n  ...\nend</code></pre>", created_at: "2013-12-13 19:56:08", updated_at: "2013-12-13 19:56:08", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#036;font-weight:bold\">ActiveAdmin</span>.register <span style=\"color:#036;font-weight:bold\">User</span> <span style=\"color:#080;font-weight:bold\">do</span>\n  actions <span style=\"color:#A60\">:all</span>,<span style=\"color:#A60\">:except</span> =&gt; <span style=\"color:#A60\">:destroy</span>\n  ...\n<span style=\"color:#080;font-weight:bold\">end</span>\n</pre></td>\n</tr></table>\n\n        </div>\n", pretty_preview: "        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <div class=\"CodeRay\">\n  <div class=\"code\"><pre><span style=\"color:#036;font-weight:bold\">ActiveAdmin</span>.register <span style=\"color:#036;font-weight:bold\">User</span> <span style=\"color:#080;font-weight:bold\">do</span>\n  actions <span style=\"color:#A60\">:all</span>,<span style=\"color:#A60\">:except</span> =&gt; <span style=\"color:#A60\">:destroy</span>\n  ...\n<span style=\"color:#080;font-weight:bold\">end</span>\n</pre></div>\n</div>\n\n        </div>\n"},
  {id: 333, name: "Customizing the labels for a collection in ActiveAdmin", category_id: 3, body: "<pre><code class=\"ruby\">form do |f|<br>  f.inputs \"Details\" do<br>    f.input :model,:include_blank =&gt; false,:collection =&gt; MyModel.all.map {|e| [\"ID:\#{e.id} | \#{e.attr}\", e.id]}<br>    ...\n  end\nend</code></pre>", created_at: "2013-12-13 19:56:08", updated_at: "2013-12-13 19:56:08", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n</pre></td>\n  <td class=\"code\"><pre>form <span style=\"color:#080;font-weight:bold\">do</span> |f|\n  f.inputs <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">Details</span><span style=\"color:#710\">&quot;</span></span> <span style=\"color:#080;font-weight:bold\">do</span>\n    f.input <span style=\"color:#A60\">:model</span>,<span style=\"color:#A60\">:include_blank</span> =&gt; <span style=\"color:#069\">false</span>,<span style=\"color:#A60\">:collection</span> =&gt; <span style=\"color:#036;font-weight:bold\">MyModel</span>.all.map {|e| [<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">ID:</span><span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">\#{</span>e.id<span style=\"font-weight:bold;color:#666\">}</span></span><span style=\"color:#D20\"> | </span><span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">\#{</span>e.attr<span style=\"font-weight:bold;color:#666\">}</span></span><span style=\"color:#710\">&quot;</span></span>, e.id]}\n    ...\n  <span style=\"color:#080;font-weight:bold\">end</span>\n<span style=\"color:#080;font-weight:bold\">end</span>\n</pre></td>\n</tr></table>\n\n        </div>\n", pretty_preview: "        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <div class=\"CodeRay\">\n  <div class=\"code\"><pre>form <span style=\"color:#080;font-weight:bold\">do</span> |f|\n  f.inputs <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">Details</span><span style=\"color:#710\">&quot;</span></span> <span style=\"color:#080;font-weight:bold\">do</span>\n    f.input <span style=\"color:#A60\">:model</span>,<span style=\"color:#A60\">:include_blank</span> =&gt; <span style=\"color:#069\">false</span>,<span style=\"color:#A60\">:collection</span> =&gt; <span style=\"color:#036;font-weight:bold\">MyModel</span>.all.map {|e| [<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">ID:</span><span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">\#{</span>e.id<span style=\"font-weight:bold;color:#666\">}</span></span><span style=\"color:#D20\"> | </span><span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">\#{</span>e.attr<span style=\"font-weight:bold;color:#666\">}</span></span><span style=\"color:#710\">&quot;</span></span>, e.id]}\n    ...\n  <span style=\"color:#080;font-weight:bold\">end</span>\n<span style=\"color:#080;font-weight:bold\">end</span>\n</pre></div>\n</div>\n\n        </div>\n"},
  {id: 334, name: "difference between instance_eval and class_eval", category_id: 2, body: "<p>Use ClassName.<strong>instance_eval</strong> to define <strong>class </strong>methods.<br>\n\nUse ClassName.<strong>class_eval</strong> to define <strong>instance </strong>methods.</p>", created_at: "2013-12-13 19:56:08", updated_at: "2013-12-13 19:56:08", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "<p>Use ClassName.<strong>instance_eval</strong> to define <strong>class </strong>methods.<br>\n\nUse ClassName.<strong>class_eval</strong> to define <strong>instance </strong>methods.</p>", pretty_preview: "<p>Use ClassName.<strong>instance_eval</strong> to define <strong>class </strong>methods.<br>\n\nUse ClassName.<strong>class_eval</strong> to define <strong>instance </strong>methods.</p>"},
  {id: 335, name: "Adding a custom button to ActiveAdmin", category_id: 3, body: "<p>Say you want to add a custom button to ActiveAdmin. Here's how you can do it:<br></p>\n<pre><code class=\"ruby\">action_item only: [:edit] do<br style='font-family: \"Courier New\",Courier,monospace;'>  link_to \"Some text here\", some_path<br>end</code></pre>", created_at: "2013-12-13 19:56:08", updated_at: "2013-12-13 19:56:08", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "<p>Say you want to add a custom button to ActiveAdmin. Here's how you can do it:<br></p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n</pre></td>\n  <td class=\"code\"><pre>action_item <span style=\"color:#606\">only</span>: [<span style=\"color:#A60\">:edit</span>] <span style=\"color:#080;font-weight:bold\">do</span>\n  link_to <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">Some text here</span><span style=\"color:#710\">&quot;</span></span>, some_path\n<span style=\"color:#080;font-weight:bold\">end</span>\n</pre></td>\n</tr></table>\n\n        </div>\n", pretty_preview: "<p>Say you want to add a custom button to ActiveAdmin. Here's how you can do it:<br></p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <div class=\"CodeRay\">\n  <div class=\"code\"><pre>action_item <span style=\"color:#606\">only</span>: [<span style=\"color:#A60\">:edit</span>] <span style=\"color:#080;font-weight:bold\">do</span>\n  link_to <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">Some text here</span><span style=\"color:#710\">&quot;</span></span>, some_path\n<span style=\"color:#080;font-weight:bold\">end</span>\n</pre></div>\n</div>\n\n        </div>\n"},
  {id: 336, name: "Changing the type of a column using a Rails migration", category_id: 3, body: "<p>Syntax is as follows:<br></p>\n<pre><code class=\"ruby\">def change<br style='font-family: \"Courier New\",Courier,monospace;'>  change_column :table_name, :column_name, :column_type<br style='font-family: \"Courier New\",Courier,monospace;'>end</code></pre>\n<span style=\"font-family: Arial,Helvetica,sans-serif;\">Example:</span><br><pre><code class=\"ruby\">def change<br style='font-family: \"Courier New\",Courier,monospace;'>  change_column :users, :description, :text<br style='font-family: \"Courier New\",Courier,monospace;'>end</code></pre>", created_at: "2013-12-13 19:56:08", updated_at: "2013-12-13 19:56:08", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "<p>Syntax is as follows:<br></p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#080;font-weight:bold\">def</span> <span style=\"color:#06B;font-weight:bold\">change</span>\n  change_column <span style=\"color:#A60\">:table_name</span>, <span style=\"color:#A60\">:column_name</span>, <span style=\"color:#A60\">:column_type</span>\n<span style=\"color:#080;font-weight:bold\">end</span>\n</pre></td>\n</tr></table>\n\n        </div>\n\n<span style=\"font-family: Arial,Helvetica,sans-serif;\">Example:</span><br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#080;font-weight:bold\">def</span> <span style=\"color:#06B;font-weight:bold\">change</span>\n  change_column <span style=\"color:#A60\">:users</span>, <span style=\"color:#A60\">:description</span>, <span style=\"color:#A60\">:text</span>\n<span style=\"color:#080;font-weight:bold\">end</span>\n</pre></td>\n</tr></table>\n\n        </div>\n", pretty_preview: "<p>Syntax is as follows:<br></p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <div class=\"CodeRay\">\n  <div class=\"code\"><pre><span style=\"color:#080;font-weight:bold\">def</span> <span style=\"color:#06B;font-weight:bold\">change</span>\n  change_column <span style=\"color:#A60\">:table_name</span>, <span style=\"color:#A60\">:column_name</span>, <span style=\"color:#A60\">:column_type</span>\n<span style=\"color:#080;font-weight:bold\">end</span>\n</pre></div>\n</div>\n\n        </div>\n\n<span style=\"font-family: Arial,Helvetica,sans-serif;\">Example:</span><br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <div class=\"CodeRay\">\n  <div class=\"code\"><pre><span style=\"color:#080;font-weight:bold\">def</span> <span style=\"color:#06B;font-weight:bold\">change</span>\n  change_column <span style=\"color:#A60\">:users</span>, <span style=\"color:#A60\">:description</span>, <span style=\"color:#A60\">:text</span>\n<span style=\"color:#080;font-weight:bold\">end</span>\n</pre></div>\n</div>\n\n        </div>\n"},
  {id: 337, name: "Using the ActiveRecord session store in Rails", category_id: 3, body: "<p>Here's what you need to do to take advantage of AR's SessionStore. The following was tested with Rails 3.2.5.\n</p>\n<ol>\n<li>Run <strong>rake db:sessions:create</strong>\n</li>\n<li>Run <strong>rake db:migrate</strong>\n</li>\n<li>Modify config/initializers/session_store.rb to this:\n<pre><code class=\"ruby\">YourApp.config.session_store :active_record_store\n</code></pre>\n</li>\n<li>Add the following in application.rb:\n<pre><code class=\"ruby\">config.action_dispatch.session_store = :active_record_store\n</code></pre>\n</li>\n</ol>\n\nThis will setup the default session tracking mechanism. I wanted to have\n a custom Session class, which held the user_id ( if he's logged in ). \nHere's the additional things I've done:\n<ol>\n<li>I added in config/initializers/session_store.rb the following line:\n<pre><code class=\"ruby\">ActiveRecord::SessionStore.session_class = Session</code></pre>\n</li>\n<li>I added the following code in app/models/session.rb :\n<pre><code class=\"ruby\">class Session &lt; ActiveRecord::SessionStore::Session \n  belongs_to :user \n  before_save :ensure_user_is_set \n  \n  def self.find_by_session_id(session_id) \n    find(:first,:conditions =&gt; [\"session_id = ?\",session_id]) \n  end \n  \n  private \n  def ensure_user_is_set \n    warden_data = self.data[\"warden.user.user.key\"] \n    if warden_data \n      user_id = warden_data[1][0] \n      self.user = User.find(user_id) \n    end \n  end \nend\n</code></pre>\n</li>\n</ol>", created_at: "2013-12-13 19:56:08", updated_at: "2013-12-13 19:56:08", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "<p>Here's what you need to do to take advantage of AR's SessionStore. The following was tested with Rails 3.2.5.\n</p>\n<ol>\n<li>Run <strong>rake db:sessions:create</strong>\n</li>\n<li>Run <strong>rake db:migrate</strong>\n</li>\n<li>Modify config/initializers/session_store.rb to this:\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#036;font-weight:bold\">YourApp</span>.config.session_store <span style=\"color:#A60\">:active_record_store</span>\n\n</pre></td>\n</tr></table>\n\n        </div>\n\n</li>\n<li>Add the following in application.rb:\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n</pre></td>\n  <td class=\"code\"><pre>config.action_dispatch.session_store = <span style=\"color:#A60\">:active_record_store</span>\n\n</pre></td>\n</tr></table>\n\n        </div>\n\n</li>\n</ol>\n\nThis will setup the default session tracking mechanism. I wanted to have\n a custom Session class, which held the user_id ( if he's logged in ). \nHere's the additional things I've done:\n<ol>\n<li>I added in config/initializers/session_store.rb the following line:\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#036;font-weight:bold\">ActiveRecord</span>::<span style=\"color:#036;font-weight:bold\">SessionStore</span>.session_class = <span style=\"color:#036;font-weight:bold\">Session</span>\n</pre></td>\n</tr></table>\n\n        </div>\n\n</li>\n<li>I added the following code in app/models/session.rb :\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n<a href=\"#n8\" name=\"n8\">8</a>\n<a href=\"#n9\" name=\"n9\">9</a>\n<strong><a href=\"#n10\" name=\"n10\">10</a></strong>\n<a href=\"#n11\" name=\"n11\">11</a>\n<a href=\"#n12\" name=\"n12\">12</a>\n<a href=\"#n13\" name=\"n13\">13</a>\n<a href=\"#n14\" name=\"n14\">14</a>\n<a href=\"#n15\" name=\"n15\">15</a>\n<a href=\"#n16\" name=\"n16\">16</a>\n<a href=\"#n17\" name=\"n17\">17</a>\n<a href=\"#n18\" name=\"n18\">18</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#080;font-weight:bold\">class</span> <span style=\"color:#B06;font-weight:bold\">Session</span> &lt; <span style=\"color:#036;font-weight:bold\">ActiveRecord</span>::<span style=\"color:#036;font-weight:bold\">SessionStore</span>::<span style=\"color:#036;font-weight:bold\">Session</span> \n  belongs_to <span style=\"color:#A60\">:user</span> \n  before_save <span style=\"color:#A60\">:ensure_user_is_set</span> \n  \n  <span style=\"color:#080;font-weight:bold\">def</span> <span style=\"color:#069\">self</span>.<span style=\"color:#06B;font-weight:bold\">find_by_session_id</span>(session_id) \n    find(<span style=\"color:#A60\">:first</span>,<span style=\"color:#A60\">:conditions</span> =&gt; [<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">session_id = ?</span><span style=\"color:#710\">&quot;</span></span>,session_id]) \n  <span style=\"color:#080;font-weight:bold\">end</span> \n  \n  private \n  <span style=\"color:#080;font-weight:bold\">def</span> <span style=\"color:#06B;font-weight:bold\">ensure_user_is_set</span> \n    warden_data = <span style=\"color:#069\">self</span>.data[<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">warden.user.user.key</span><span style=\"color:#710\">&quot;</span></span>] \n    <span style=\"color:#080;font-weight:bold\">if</span> warden_data \n      user_id = warden_data[<span style=\"color:#00D\">1</span>][<span style=\"color:#00D\">0</span>] \n      <span style=\"color:#069\">self</span>.user = <span style=\"color:#036;font-weight:bold\">User</span>.find(user_id) \n    <span style=\"color:#080;font-weight:bold\">end</span> \n  <span style=\"color:#080;font-weight:bold\">end</span> \n<span style=\"color:#080;font-weight:bold\">end</span>\n\n</pre></td>\n</tr></table>\n\n        </div>\n\n</li>\n</ol>", pretty_preview: "<p>Here's what you need to do to take advantage of AR's SessionStore. The following was tested with Rails 3.2.5.\n</p>\n<ol>\n<li>Run <strong>rake db:sessions:create</strong>\n</li>\n<li>Run <strong>rake db:migrate</strong>\n</li>\n<li>Modify config/initializers/session_store.rb to this:\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <div class=\"CodeRay\">\n  <div class=\"code\"><pre><span style=\"color:#036;font-weight:bold\">YourApp</span>.config.session_store <span style=\"color:#A60\">:active_record_store</span>\n...\n</pre></div>\n</div>\n\n        </div>\n\n</li>\n</ol>"},
  {id: 338, name: "Creating a postgresql schema from inside a rails migration", category_id: 3, body: "<p>If you ever need to create a schema from inside a migration, write this:\n</p>\n<pre><code class=\"ruby\">def up\n  execute \"CREATE SCHEMA some_schema\"\nend<br><br>def down\n  execute \"DROP SCHEMA some_schema\"\nend</code></pre>", created_at: "2013-12-13 19:56:08", updated_at: "2013-12-13 19:56:08", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "<p>If you ever need to create a schema from inside a migration, write this:\n</p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#080;font-weight:bold\">def</span> <span style=\"color:#06B;font-weight:bold\">up</span>\n  execute <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">CREATE SCHEMA some_schema</span><span style=\"color:#710\">&quot;</span></span>\n<span style=\"color:#080;font-weight:bold\">end</span>\n\n<span style=\"color:#080;font-weight:bold\">def</span> <span style=\"color:#06B;font-weight:bold\">down</span>\n  execute <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">DROP SCHEMA some_schema</span><span style=\"color:#710\">&quot;</span></span>\n<span style=\"color:#080;font-weight:bold\">end</span>\n</pre></td>\n</tr></table>\n\n        </div>\n", pretty_preview: "<p>If you ever need to create a schema from inside a migration, write this:\n</p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <div class=\"CodeRay\">\n  <div class=\"code\"><pre><span style=\"color:#080;font-weight:bold\">def</span> <span style=\"color:#06B;font-weight:bold\">up</span>\n  execute <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">CREATE SCHEMA some_schema</span><span style=\"color:#710\">&quot;</span></span>\n<span style=\"color:#080;font-weight:bold\">end</span>\n\n<span style=\"color:#080;font-weight:bold\">def</span> <span style=\"color:#06B;font-weight:bold\">down</span>\n  execute <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">DROP SCHEMA some_schema</span><span style=\"color:#710\">&quot;</span></span>\n<span style=\"color:#080;font-weight:bold\">end</span>\n</pre></div>\n</div>\n\n        </div>\n"},
  {id: 339, name: "Change timezone without changing time", category_id: 3, body: "<pre><code class=\"ruby\">t = DateTime.now\nt.change(:offset =&gt; \" 0800\")</code></pre>\nwill change the timezone to a  0800 one.", created_at: "2013-12-13 19:56:08", updated_at: "2013-12-13 19:56:08", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n</pre></td>\n  <td class=\"code\"><pre>t = <span style=\"color:#036;font-weight:bold\">DateTime</span>.now\nt.change(<span style=\"color:#A60\">:offset</span> =&gt; <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\"> 0800</span><span style=\"color:#710\">&quot;</span></span>)\n</pre></td>\n</tr></table>\n\n        </div>\n\nwill change the timezone to a  0800 one.", pretty_preview: "        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <div class=\"CodeRay\">\n  <div class=\"code\"><pre>t = <span style=\"color:#036;font-weight:bold\">DateTime</span>.now\nt.change(<span style=\"color:#A60\">:offset</span> =&gt; <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\"> 0800</span><span style=\"color:#710\">&quot;</span></span>)\n</pre></div>\n</div>\n\n        </div>\n\nwill change the timezone to a  0800 one."},
  {id: 340, name: "Rendering a jbuilder template to a string", category_id: 3, body: "<pre><code class=\"ruby\">#controllers/users_controller.rb\ndef index\n  @users = User.all\n  @users_json = render_to_string( template: 'users.json.jbuilder', locals: { users: @users})\nend</code></pre>\n\n<pre><code class=\"ruby\">#views/users/users.json.jbuilder\njson.array!(users) do |json, user|\n  json.(user, :id, :name)\nend</code></pre>", created_at: "2013-12-13 19:56:08", updated_at: "2013-12-13 19:56:08", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#777\">#controllers/users_controller.rb</span>\n<span style=\"color:#080;font-weight:bold\">def</span> <span style=\"color:#06B;font-weight:bold\">index</span>\n  <span style=\"color:#33B\">@users</span> = <span style=\"color:#036;font-weight:bold\">User</span>.all\n  <span style=\"color:#33B\">@users_json</span> = render_to_string( <span style=\"color:#606\">template</span>: <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">users.json.jbuilder</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#606\">locals</span>: { <span style=\"color:#606\">users</span>: <span style=\"color:#33B\">@users</span>})\n<span style=\"color:#080;font-weight:bold\">end</span>\n</pre></td>\n</tr></table>\n\n        </div>\n\n\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#777\">#views/users/users.json.jbuilder</span>\njson.array!(users) <span style=\"color:#080;font-weight:bold\">do</span> |json, user|\n  json.(user, <span style=\"color:#A60\">:id</span>, <span style=\"color:#A60\">:name</span>)\n<span style=\"color:#080;font-weight:bold\">end</span>\n</pre></td>\n</tr></table>\n\n        </div>\n", pretty_preview: "        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <div class=\"CodeRay\">\n  <div class=\"code\"><pre><span style=\"color:#777\">#controllers/users_controller.rb</span>\n<span style=\"color:#080;font-weight:bold\">def</span> <span style=\"color:#06B;font-weight:bold\">index</span>\n  <span style=\"color:#33B\">@users</span> = <span style=\"color:#036;font-weight:bold\">User</span>.all\n  <span style=\"color:#33B\">@users_json</span> = render_to_string( <span style=\"color:#606\">template</span>: <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">users.json.jbuilder</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#606\">locals</span>: { <span style=\"color:#606\">users</span>: <span style=\"color:#33B\">@users</span>})\n<span style=\"color:#080;font-weight:bold\">end</span>\n</pre></div>\n</div>\n\n        </div>\n\n\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <div class=\"CodeRay\">\n  <div class=\"code\"><pre><span style=\"color:#777\">#views/users/users.json.jbuilder</span>\njson.array!(users) <span style=\"color:#080;font-weight:bold\">do</span> |json, user|\n  json.(user, <span style=\"color:#A60\">:id</span>, <span style=\"color:#A60\">:name</span>)\ne...\n</pre></div>\n</div>\n\n        </div>\n"},
  {id: 341, name: "Dalli unmarshal error", category_id: 3, body: "<p>I've kept receiving errors like: <strong><code>DalliError: unable to unmarshal value</code></strong>.\nThe solution was to add all the unmarshable classes in the relevant controllers, like this:\n</p>\n<pre><code class=\"ruby\">require_dependency \"some_model_that_cannot_be_unmarshalled\"</code></pre>", created_at: "2013-12-13 19:56:08", updated_at: "2013-12-13 19:56:08", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "<p>I've kept receiving errors like: <strong><code>DalliError: unable to unmarshal value</code></strong>.\nThe solution was to add all the unmarshable classes in the relevant controllers, like this:\n</p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n</pre></td>\n  <td class=\"code\"><pre>require_dependency <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">some_model_that_cannot_be_unmarshalled</span><span style=\"color:#710\">&quot;</span></span>\n</pre></td>\n</tr></table>\n\n        </div>\n", pretty_preview: "<p>I've kept receiving errors like: <strong><code>DalliError: unable to unmarshal value</code></strong>.\nThe solution was to add all the unmarshable classes in the relevant controllers, like this:\n</p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <div class=\"CodeRay\">\n  <div class=\"code\"><pre>require_dependency <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">some_model_that_cannot_be_unmarshalled</span><span style=\"color:#710\">&quot;</span></span>\n</pre></div>\n</div>\n\n        </div>\n"},
  {id: 342, name: "Rails translating attribute names", category_id: 3, body: "<pre><code class=\"ruby\">activerecord:\n  attributes:\n    user:\n      first_name: \"Name first\"</code></pre>", created_at: "2013-12-13 19:56:08", updated_at: "2013-12-13 19:56:08", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#606\">activerecord</span>:\n  <span style=\"color:#606\">attributes</span>:\n    <span style=\"color:#606\">user</span>:\n      <span style=\"color:#606\">first_name</span>: <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">Name first</span><span style=\"color:#710\">&quot;</span></span>\n</pre></td>\n</tr></table>\n\n        </div>\n", pretty_preview: "        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <div class=\"CodeRay\">\n  <div class=\"code\"><pre><span style=\"color:#606\">activerecord</span>:\n  <span style=\"color:#606\">attributes</span>:\n    <span style=\"color:#606\">user</span>:\n      <span style=\"color:#606\">first_name</span>: <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">Name first</span><span style=\"color:#710\">&quot;</span></span>\n</pre></div>\n</div>\n\n        </div>\n"},
  {id: 343, name: "Making sure your integration tests view the data in the database", category_id: 3, body: "<p>Monkeypatch ActiveRecord with this:\n</p>\n<pre><code class=\"ruby\">class ActiveRecord::Base\n  mattr_accessor :shared_connection\n  @@shared_connection = nil\n\n  def self.connection\n    @@shared_connection || retrieve_connection\n  end\nend</code></pre>\nand your spec_helper with this:\n<pre><code class=\"ruby\">RSpec.configure do |config|\n  config.use_transactional_fixtures = false\n\n  config.before :each do\n    if Capybara.current_driver == :rack_test\n      DatabaseCleaner.strategy = :transaction\n    else\n      DatabaseCleaner.strategy = :truncation\n    end\n    DatabaseCleaner.start\n  end\n\n  config.after do\n    DatabaseCleaner.clean\n  end\nend</code></pre>", created_at: "2013-12-13 19:56:08", updated_at: "2013-12-13 19:56:08", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "<p>Monkeypatch ActiveRecord with this:\n</p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n<a href=\"#n8\" name=\"n8\">8</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#080;font-weight:bold\">class</span> <span style=\"color:#B06;font-weight:bold\">ActiveRecord::Base</span>\n  mattr_accessor <span style=\"color:#A60\">:shared_connection</span>\n  <span style=\"color:#369\">@@shared_connection</span> = <span style=\"color:#069\">nil</span>\n\n  <span style=\"color:#080;font-weight:bold\">def</span> <span style=\"color:#069\">self</span>.<span style=\"color:#06B;font-weight:bold\">connection</span>\n    <span style=\"color:#369\">@@shared_connection</span> || retrieve_connection\n  <span style=\"color:#080;font-weight:bold\">end</span>\n<span style=\"color:#080;font-weight:bold\">end</span>\n</pre></td>\n</tr></table>\n\n        </div>\n\nand your spec_helper with this:\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n<a href=\"#n8\" name=\"n8\">8</a>\n<a href=\"#n9\" name=\"n9\">9</a>\n<strong><a href=\"#n10\" name=\"n10\">10</a></strong>\n<a href=\"#n11\" name=\"n11\">11</a>\n<a href=\"#n12\" name=\"n12\">12</a>\n<a href=\"#n13\" name=\"n13\">13</a>\n<a href=\"#n14\" name=\"n14\">14</a>\n<a href=\"#n15\" name=\"n15\">15</a>\n<a href=\"#n16\" name=\"n16\">16</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#036;font-weight:bold\">RSpec</span>.configure <span style=\"color:#080;font-weight:bold\">do</span> |config|\n  config.use_transactional_fixtures = <span style=\"color:#069\">false</span>\n\n  config.before <span style=\"color:#A60\">:each</span> <span style=\"color:#080;font-weight:bold\">do</span>\n    <span style=\"color:#080;font-weight:bold\">if</span> <span style=\"color:#036;font-weight:bold\">Capybara</span>.current_driver == <span style=\"color:#A60\">:rack_test</span>\n      <span style=\"color:#036;font-weight:bold\">DatabaseCleaner</span>.strategy = <span style=\"color:#A60\">:transaction</span>\n    <span style=\"color:#080;font-weight:bold\">else</span>\n      <span style=\"color:#036;font-weight:bold\">DatabaseCleaner</span>.strategy = <span style=\"color:#A60\">:truncation</span>\n    <span style=\"color:#080;font-weight:bold\">end</span>\n    <span style=\"color:#036;font-weight:bold\">DatabaseCleaner</span>.start\n  <span style=\"color:#080;font-weight:bold\">end</span>\n\n  config.after <span style=\"color:#080;font-weight:bold\">do</span>\n    <span style=\"color:#036;font-weight:bold\">DatabaseCleaner</span>.clean\n  <span style=\"color:#080;font-weight:bold\">end</span>\n<span style=\"color:#080;font-weight:bold\">end</span>\n</pre></td>\n</tr></table>\n\n        </div>\n", pretty_preview: "<p>Monkeypatch ActiveRecord with this:\n</p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <div class=\"CodeRay\">\n  <div class=\"code\"><pre><span style=\"color:#080;font-weight:bold\">class</span> <span style=\"color:#B06;font-weight:bold\">ActiveRecord::Base</span>\n  mattr_accessor <span style=\"color:#A60\">:shared_connection</span>\n  <span style=\"color:#369\">@@shared_connection</span> = <span style=\"color:#069\">nil</span>\n\n  <span style=\"color:#080;font-weight:bold\">def</span> <span style=\"color:#069\">self</span>.<span style=\"color:#06B;font-weight:bold\">connection</span>\n    <span style=\"color:#369\">@@shared_connection</span> || retrieve_connection\n  <span style=\"color:#080;font-weight:bold\">end</span>\n<span style=\"color:#080;font-weight:bold\">end</span>\n</pre></div>\n</div>\n\n        </div>\n\nand your spec_helper with this:\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <div class=\"CodeRay\">\n  <div class=\"code\"><pre><span style=\"color:#036;font-weight:bold\">RSpec</span>.configure <span style=\"color:#080;font-weight:bold\">do</span> |config|\n ...\n</pre></div>\n</div>\n\n        </div>\n"},
  {id: 344, name: "Rails select only some columns", category_id: 3, body: "<p>If you want to only select a few columns on a query, here's how you can do it for <code>Rails 2</code> and <code>Rails 3</code>:\n</p>\n<pre><code class=\"ruby\">YourModel.find(:all, :select =&gt; \"column1, column2\")</code></pre>\nand for <code>Rails 4</code><br><pre><code class=\"ruby\">YourModel.pluck(:column1, :column2)</code></pre>", created_at: "2013-12-13 19:56:08", updated_at: "2013-12-13 19:56:08", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "<p>If you want to only select a few columns on a query, here's how you can do it for <code>Rails 2</code> and <code>Rails 3</code>:\n</p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#036;font-weight:bold\">YourModel</span>.find(<span style=\"color:#A60\">:all</span>, <span style=\"color:#A60\">:select</span> =&gt; <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">column1, column2</span><span style=\"color:#710\">&quot;</span></span>)\n</pre></td>\n</tr></table>\n\n        </div>\n\nand for <code>Rails 4</code><br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#036;font-weight:bold\">YourModel</span>.pluck(<span style=\"color:#A60\">:column1</span>, <span style=\"color:#A60\">:column2</span>)\n</pre></td>\n</tr></table>\n\n        </div>\n", pretty_preview: "<p>If you want to only select a few columns on a query, here's how you can do it for <code>Rails 2</code> and <code>Rails 3</code>:\n</p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <div class=\"CodeRay\">\n  <div class=\"code\"><pre><span style=\"color:#036;font-weight:bold\">YourModel</span>.find(<span style=\"color:#A60\">:all</span>, <span style=\"color:#A60\">:select</span> =&gt; <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">column1, column2</span><span style=\"color:#710\">&quot;</span></span>)\n</pre></div>\n</div>\n\n        </div>\n\nand for <code>Rails 4</code><br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <div class=\"CodeRay\">\n  <div class=\"code\"><pre><span style=\"color:#036;font-weight:bold\">YourModel</span>.pluck(<span style=\"color:#A60\">:column1</span>, <span style=\"color:#A60\">:column2</span>)\n</pre></div>\n</div>\n\n        </div>\n"},
  {id: 345, name: "Access the database of a Heroku app from another app", category_id: 3, body: "<p>First thing you have to do is find out the DATABASE_URL of the app you're interested in. Run </p>\n<pre><code class=\"bash\">heroku config --app your_app</code></pre> to get it. Then, in the other app, run this:\n\n<pre><code class=\"bash\">heroku config:add DATABASE_URL=whatever_the_result_of_the_first_command_was</code></pre>\n\nEstablish an ActiveRecord connection:\n  <pre><code class=\"ruby\">db = URI.parse(ENV['DATABASE_URL'] || 'postgres://localhost/mydb')\n\nActiveRecord::Base.establish_connection(\n  :adapter  =&gt; db.scheme == 'postgres' ? 'postgresql' : db.scheme,\n  :host     =&gt; db.host,\n  :username =&gt; db.user,\n  :password =&gt; db.password,\n  :database =&gt; db.path[1..-1],\n  :encoding =&gt; 'utf8'\n)</code></pre>", created_at: "2013-12-13 19:56:08", updated_at: "2013-12-13 19:56:08", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "<p>First thing you have to do is find out the DATABASE_URL of the app you're interested in. Run </p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/bash.png' alt='bash'/>\n              </div>\n          <pre><code class=\"bash\">heroku config --app your_app</code></pre>\n        </div>\n to get it. Then, in the other app, run this:\n\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/bash.png' alt='bash'/>\n              </div>\n          <pre><code class=\"bash\">heroku config:add DATABASE_URL=whatever_the_result_of_the_first_command_was</code></pre>\n        </div>\n\n\nEstablish an ActiveRecord connection:\n          <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n<a href=\"#n8\" name=\"n8\">8</a>\n<a href=\"#n9\" name=\"n9\">9</a>\n<strong><a href=\"#n10\" name=\"n10\">10</a></strong>\n</pre></td>\n  <td class=\"code\"><pre>db = <span style=\"color:#036;font-weight:bold\">URI</span>.parse(<span style=\"color:#069\">ENV</span>[<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">DATABASE_URL</span><span style=\"color:#710\">'</span></span>] || <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">postgres://localhost/mydb</span><span style=\"color:#710\">'</span></span>)\n\n<span style=\"color:#036;font-weight:bold\">ActiveRecord</span>::<span style=\"color:#036;font-weight:bold\">Base</span>.establish_connection(\n  <span style=\"color:#A60\">:adapter</span>  =&gt; db.scheme == <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">postgres</span><span style=\"color:#710\">'</span></span> ? <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">postgresql</span><span style=\"color:#710\">'</span></span> : db.scheme,\n  <span style=\"color:#A60\">:host</span>     =&gt; db.host,\n  <span style=\"color:#A60\">:username</span> =&gt; db.user,\n  <span style=\"color:#A60\">:password</span> =&gt; db.password,\n  <span style=\"color:#A60\">:database</span> =&gt; db.path[<span style=\"color:#00D\">1</span>..<span style=\"color:#00D\">-1</span>],\n  <span style=\"color:#A60\">:encoding</span> =&gt; <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">utf8</span><span style=\"color:#710\">'</span></span>\n)\n</pre></td>\n</tr></table>\n\n        </div>\n", pretty_preview: "<p>First thing you have to do is find out the DATABASE_URL of the app you're interested in. Run </p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/bash.png' alt='bash'/>\n              </div>\n          <pre><code class=\"bash\">heroku config --app your_app</code></pre>\n        </div>\n to get it. Then, in the other app, run this:\n\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/bash.png' alt='bash'/>\n              </div>\n          <pre><code class=\"bash\">heroku config:add DATABASE_URL=whatever_the_result_of_the_first_command_was</code></pre>\n        </div>\n\n\nEstablish an ActiveRecord connection:\n ...        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <div class=\"CodeRay\">\n  <div class=\"code\"><pre>db = <span style=\"color:#036;font-weight:bold\">URI</span>.parse(<span style=\"color:#069\">ENV</span>[<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">DATABASE_URL</span><span style=\"color:#710\">'</span></span>] || <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">postgres://localhost/mydb</span><span style=\"color:#710\">'</span></span>)\n\n<span style=\"color:#036;font-weight:bold\">ActiveRecord</span>::<span style=\"color:#036;font-weight:bold\">Base</span>.establish_connection(\n  <span style=\"color:#A60\">:adapter</span>  =&gt; db.scheme == <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">postgres</span><span style=\"color:#710\">'</span></span> ? <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">postgresql</span><span style=\"color:#710\">'</span></span> : db.scheme,\n  <span style=\"color:#A60\">:host</span>     =&gt; db.host,\n  <span style=\"color:#A60\">:username</span> =&gt; db.user,\n  <span style=\"color:#A60\">:password</span> =&gt; db.password,\n  <span style=\"color:#A60\">:database</span> =&gt; db.path[<span style=\"color:#00D\">1</span>..<span style=\"color:#00D\">-1</span>],\n ...\n</pre></div>\n</div>\n\n        </div>\n"},
  {id: 346, name: "Rake aborted! missing :action", category_id: 3, body: "<pre><code class=\"ruby\">rake aborted!\nmissing :action</code></pre>\n\nAfter I added a member route to:\n<pre><code class=\"ruby\">member do\n  get \"/custom_member_action\"\nend</code></pre>\nThe solution was removing the <code>/</code> from the <code><b>custom_member_action</b></code>:\n<pre><code class=\"ruby\">member do\n  get \"custom_member_action\"\nend</code></pre>", created_at: "2013-12-13 19:56:08", updated_at: "2013-12-13 19:56:08", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n</pre></td>\n  <td class=\"code\"><pre>rake aborted!\nmissing <span style=\"color:#A60\">:action</span>\n</pre></td>\n</tr></table>\n\n        </div>\n\n\nAfter I added a member route to:\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n</pre></td>\n  <td class=\"code\"><pre>member <span style=\"color:#080;font-weight:bold\">do</span>\n  get <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">/custom_member_action</span><span style=\"color:#710\">&quot;</span></span>\n<span style=\"color:#080;font-weight:bold\">end</span>\n</pre></td>\n</tr></table>\n\n        </div>\n\nThe solution was removing the <code>/</code> from the <code><b>custom_member_action</b></code>:\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n</pre></td>\n  <td class=\"code\"><pre>member <span style=\"color:#080;font-weight:bold\">do</span>\n  get <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">custom_member_action</span><span style=\"color:#710\">&quot;</span></span>\n<span style=\"color:#080;font-weight:bold\">end</span>\n</pre></td>\n</tr></table>\n\n        </div>\n", pretty_preview: "        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <div class=\"CodeRay\">\n  <div class=\"code\"><pre>rake aborted!\nmissing <span style=\"color:#A60\">:action</span>\n</pre></div>\n</div>\n\n        </div>\n\n\nAfter I added a member route to:\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <div class=\"CodeRay\">\n  <div class=\"code\"><pre>member <span style=\"color:#080;font-weight:bold\">do</span>\n  get <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">/custom_member_action</span><span style=\"color:#710\">&quot;</span></span>\n<span style=\"color:#080;font-weight:bold\">end</span>\n</pre></div>\n</div>\n\n        </div>\n\nThe solution was removing the <code>/</code> from the <code><b>custom_member_action</b></code>:\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <div class=\"CodeRay\">\n  <div class=\"code\"><pre>member <span style=\"color:#080;font-weight:bold\">do</span>\n  get <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">custom_member_action</span><span style=\"color:#710\">&quot;</span></span>\n<span style=\"color:#080;font-weight:bold\">end</span>\n</pre></div>\n</div>\n\n        </div>\n"},
  {id: 347, name: "Интересные ссылки по ruby", category_id: 2, body: "<a href=\"http://www.readysetrails.com/\">http://www.readysetrails.com/</a><br><a href=\"http://rubymonk.com/\"><br>http://rubymonk.com/</a><br><a href=\"https://github.com/generalassembly/ga-ruby-on-rails-for-devs\"><br>https://github.com/generalassembly/ga-ruby-on-rails-for-devs</a><br><a href=\"http://www.codequizzes.com/\"><br>http://www.codequizzes.com/</a><br><br><a href=\"https://github.com/bbatsov/ruby-style-guide\">https://github.com/bbatsov/ruby-style-guide</a><br><br><a href=\"http://www.codecademy.com/tracks/ruby\">http://www.codecademy.com/tracks/ruby</a><br><br><a href=\"http://rubylearning.com/satishtalim/tutorial.html\">http://rubylearning.com/satishtalim/tutorial.html</a><br><a href=\"http://www.zaphinath.com/ruby-on-rails-5-star-rating/\"><br>http://www.zaphinath.com/ruby-on-rails-5-star-rating/</a><br><br><a href=\"http://eighty-b.tumblr.com/post/1569674815/creating-an-ajaxified-star-rating-system-in-rails-3\">http://eighty-b.tumblr.com/post/1569674815/creating-an-ajaxified-star-rating-system-in-rails-3</a><br><br><a href=\"http://teachmetocode.com/screencasts/building-a-star-rating-system-in-ruby-on-rails-with-jquery/\">http://teachmetocode.com/screencasts/building-a-star-rating-system-in-ruby-on-rails-with-jquery/</a><br><br><a href=\"http://railsapps.github.com/rails-haml.html\">http://railsapps.github.com/rails-haml.html</a><br><br><a href=\"http://teachmetocode.com/screencasts/rails-3-building-a-blog-part-1-test-setup-generators/\">http://teachmetocode.com/screencasts/rails-3-building-a-blog-part-1-test-setup-generators/</a><br><br><a href=\"http://teachmetocode.com/screencasts/rails-3-building-a-blog-part-2-crud-show-and-create/\">http://teachmetocode.com/screencasts/rails-3-building-a-blog-part-2-crud-show-and-create/</a><br><br><a href=\"http://teachmetocode.com/screencasts/rails-3-build-a-blog-part-3-edit-and-delete-crud/\">http://teachmetocode.com/screencasts/rails-3-build-a-blog-part-3-edit-and-delete-crud/</a><br><br><a href=\"http://rusrails.ru/a-guide-to-testing-rails-applications/unit-testing-your-models\">http://rusrails.ru/a-guide-to-testing-rails-applications/unit-testing-your-models</a><br><br><a href=\"http://rubyflow.ru/\">http://rubyflow.ru/</a><br><br><a href=\"http://ruby-doc.org/core-1.9.3/Enumerator.html#method-i-feed\">http://ruby-doc.org/core-1.9.3/Enumerator.html#method-i-feed</a><br><br><a href=\"http://rubyquicktips.com/\">http://rubyquicktips.com/</a><br><br><a href=\"http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html\">http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html</a><br><br><a href=\"http://rails-bestpractices.com/\">http://rails-bestpractices.com/</a><br><br><a href=\"http://net.tutsplus.com/category/tutorials/ruby/page/2/\">http://net.tutsplus.com/category/tutorials/ruby/page/2/</a>", created_at: "2013-12-13 19:56:08", updated_at: "2013-12-13 19:56:08", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "<a href=\"http://www.readysetrails.com/\">http://www.readysetrails.com/</a><br><a href=\"http://rubymonk.com/\"><br>http://rubymonk.com/</a><br><a href=\"https://github.com/generalassembly/ga-ruby-on-rails-for-devs\"><br>https://github.com/generalassembly/ga-ruby-on-rails-for-devs</a><br><a href=\"http://www.codequizzes.com/\"><br>http://www.codequizzes.com/</a><br><br><a href=\"https://github.com/bbatsov/ruby-style-guide\">https://github.com/bbatsov/ruby-style-guide</a><br><br><a href=\"http://www.codecademy.com/tracks/ruby\">http://www.codecademy.com/tracks/ruby</a><br><br><a href=\"http://rubylearning.com/satishtalim/tutorial.html\">http://rubylearning.com/satishtalim/tutorial.html</a><br><a href=\"http://www.zaphinath.com/ruby-on-rails-5-star-rating/\"><br>http://www.zaphinath.com/ruby-on-rails-5-star-rating/</a><br><br><a href=\"http://eighty-b.tumblr.com/post/1569674815/creating-an-ajaxified-star-rating-system-in-rails-3\">http://eighty-b.tumblr.com/post/1569674815/creating-an-ajaxified-star-rating-system-in-rails-3</a><br><br><a href=\"http://teachmetocode.com/screencasts/building-a-star-rating-system-in-ruby-on-rails-with-jquery/\">http://teachmetocode.com/screencasts/building-a-star-rating-system-in-ruby-on-rails-with-jquery/</a><br><br><a href=\"http://railsapps.github.com/rails-haml.html\">http://railsapps.github.com/rails-haml.html</a><br><br><a href=\"http://teachmetocode.com/screencasts/rails-3-building-a-blog-part-1-test-setup-generators/\">http://teachmetocode.com/screencasts/rails-3-building-a-blog-part-1-test-setup-generators/</a><br><br><a href=\"http://teachmetocode.com/screencasts/rails-3-building-a-blog-part-2-crud-show-and-create/\">http://teachmetocode.com/screencasts/rails-3-building-a-blog-part-2-crud-show-and-create/</a><br><br><a href=\"http://teachmetocode.com/screencasts/rails-3-build-a-blog-part-3-edit-and-delete-crud/\">http://teachmetocode.com/screencasts/rails-3-build-a-blog-part-3-edit-and-delete-crud/</a><br><br><a href=\"http://rusrails.ru/a-guide-to-testing-rails-applications/unit-testing-your-models\">http://rusrails.ru/a-guide-to-testing-rails-applications/unit-testing-your-models</a><br><br><a href=\"http://rubyflow.ru/\">http://rubyflow.ru/</a><br><br><a href=\"http://ruby-doc.org/core-1.9.3/Enumerator.html#method-i-feed\">http://ruby-doc.org/core-1.9.3/Enumerator.html#method-i-feed</a><br><br><a href=\"http://rubyquicktips.com/\">http://rubyquicktips.com/</a><br><br><a href=\"http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html\">http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html</a><br><br><a href=\"http://rails-bestpractices.com/\">http://rails-bestpractices.com/</a><br><br><a href=\"http://net.tutsplus.com/category/tutorials/ruby/page/2/\">http://net.tutsplus.com/category/tutorials/ruby/page/2/</a>", pretty_preview: "<a href=\"http://www.readysetrails.com/\">http://www.readysetrails.com/</a><br><a href=\"http://rubymonk.com/\"><br>http://rubymonk.com/</a><br><a href=\"https://github.com/generalassembly/ga-ruby-on-rails-for-devs\"><br>https://github.com/generalassembly/ga-ruby-on-rails-for-devs</a><br><a href=\"http://www.codequizzes.com/\"><br>http://www.codequizzes.com/</a><br><br><a href=\"https://github.com/bbatsov/ruby-style-guide\">https://github.com/bbatsov/ruby-style-guide</a><br><br><a href=\"http://www.codecademy.com/tracks/ruby\">http://www.codecademy.com/tracks/ruby</a><br><br><a href=\"http://rubylearning.com/satishtalim/tutorial.html\">http://rubylearning.com/satishtalim/tutorial.html</a><br><a href=\"http://www.zaphinath.com/ruby-on-rails-5-star-rating/\"><br>http://www.zaphinath.com/ruby-on-rails-5-star-rating/</a><br><br><a href=\"http://eighty-b.tumblr.com/post/1569674815/creating-an-ajaxified-star-rating-system-in-rails-3\">http://eighty-b.tumblr.com/post/1569674815/creating-an-ajaxified-star-rating-system-in-rails-3</a><br><br><a href=\"http://teachmetocode.com/screencasts/building-a-star-rating-system-in-ruby-on-rails-with-jquery/\">http://teachmetocode.com/screencasts/building-a-star-rating-system-in-ruby-on-rails-with-jquery/</a><br><br><a href=\"http://railsapps.github.com/rails-haml.html\">http://railsapps.github.com/rails-haml.html</a><br><br><a href=\"http://teachmetocode.com/screencasts/rails-3-building-a-blog-part-1-test-setup-generators/\">http://teachmetocode.com/screencasts/rails-3-building-a-blog-part-1-test-setup-generators/</a><br><br><a href=\"http://teachmetocode.com/screencasts/rails-3-building-a-blog-part-2-crud-show-and-create/\">http://teachmetocode.com/screencasts/rails-3-building-a-blog-part-2-crud-show-and-create/</a><br><br><a href=\"http://teachmetocode.com/screencasts/rails-3-build-a-blog-part-3-edit-and-delete-crud/\">http://teachmetocode.com/screencasts/rails-3-build-a-blog-part-3-edit-and-delete-crud/</a><br><br><a href=\"http://rusrails.ru/a-guide-to-testing-rails-applications/unit-testing-your-models\">http://rusrails.ru/a-guide-to-testing-rails-applications/unit-testing-your-models</a><br><br><a href=\"http://rubyflow.ru/\">http://rubyflow.ru/</a><br><br><a href=\"http://ruby-doc.org/core-1.9.3/Enumerator.html#method-i-feed\">http://ruby-doc.org/core-1.9.3/Enumerator.html#method-i-feed</a><br><br><a href=\"http://rubyquicktips.com/\">http://rubyquicktips.com/</a><br><br><a href=\"http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html\">http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html</a><br><br><a href=\"http://rails-bestpractices.com/\">http://rails-bestpractices.com/</a><br><br><a href=\"http://net.tutsplus.com/category/tutorials/ruby/page/2/\">http://net.tutsplus.com/category/tutorials/ruby/page/2/</a>"},
  {id: 348, name: "Rails list of columns in a model", category_id: 3, body: "<pre><code class=\"ruby\">SomeModel.column_names</code></pre>", created_at: "2013-12-13 19:56:08", updated_at: "2013-12-13 19:56:08", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#036;font-weight:bold\">SomeModel</span>.column_names\n</pre></td>\n</tr></table>\n\n        </div>\n", pretty_preview: "        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <div class=\"CodeRay\">\n  <div class=\"code\"><pre><span style=\"color:#036;font-weight:bold\">SomeModel</span>.column_names\n</pre></div>\n</div>\n\n        </div>\n"},
  {id: 349, name: "rails migrations change default value of a column", category_id: 3, body: "<p>Example of changing a column's default value:\n</p>\n<pre><code class=\"ruby\">change_column_default(:messages, :read, false)</code></pre>", created_at: "2013-12-13 19:56:08", updated_at: "2013-12-13 19:56:08", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "<p>Example of changing a column's default value:\n</p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n</pre></td>\n  <td class=\"code\"><pre>change_column_default(<span style=\"color:#A60\">:messages</span>, <span style=\"color:#A60\">:read</span>, <span style=\"color:#069\">false</span>)\n</pre></td>\n</tr></table>\n\n        </div>\n", pretty_preview: "<p>Example of changing a column's default value:\n</p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <div class=\"CodeRay\">\n  <div class=\"code\"><pre>change_column_default(<span style=\"color:#A60\">:messages</span>, <span style=\"color:#A60\">:read</span>, <span style=\"color:#069\">false</span>)\n</pre></div>\n</div>\n\n        </div>\n"},
  {id: 350, name: "Showing the actual query performed by an ActiveRecord method", category_id: 3, body: "<pre><code class=\"ruby\">ActiveRecord::Base.logger = Logger.new(STDOUT) if defined?(ActiveRecord::Base)</code></pre>", created_at: "2013-12-13 19:56:08", updated_at: "2013-12-13 19:56:08", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#036;font-weight:bold\">ActiveRecord</span>::<span style=\"color:#036;font-weight:bold\">Base</span>.logger = <span style=\"color:#036;font-weight:bold\">Logger</span>.new(<span style=\"color:#069\">STDOUT</span>) <span style=\"color:#080;font-weight:bold\">if</span> <span style=\"color:#080;font-weight:bold\">defined?</span>(<span style=\"color:#036;font-weight:bold\">ActiveRecord</span>::<span style=\"color:#036;font-weight:bold\">Base</span>)\n</pre></td>\n</tr></table>\n\n        </div>\n", pretty_preview: "        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <div class=\"CodeRay\">\n  <div class=\"code\"><pre><span style=\"color:#036;font-weight:bold\">ActiveRecord</span>::<span style=\"color:#036;font-weight:bold\">Base</span>.logger = <span style=\"color:#036;font-weight:bold\">Logger</span>.new(<span style=\"color:#069\">STDOUT</span>) <span style=\"color:#080;font-weight:bold\">if</span> <span style=\"color:#080;font-weight:bold\">defined?</span>(<span style=\"color:#036;font-weight:bold\">ActiveRecord</span>::<span style=\"color:#036;font-weight:bold\">Base</span>)\n</pre></div>\n</div>\n\n        </div>\n"},
  {id: 351, name: "adding a primary key to a table", category_id: 3, body: "<pre><code class=\"ruby\">class SomeMigration &lt; ActiveRecord::Migration\n  def change\n    add_column :some_table,:some_column_name,:primary_key\n  end\nend</code></pre>", created_at: "2013-12-13 19:56:08", updated_at: "2013-12-13 19:56:08", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#080;font-weight:bold\">class</span> <span style=\"color:#B06;font-weight:bold\">SomeMigration</span> &lt; <span style=\"color:#036;font-weight:bold\">ActiveRecord</span>::<span style=\"color:#036;font-weight:bold\">Migration</span>\n  <span style=\"color:#080;font-weight:bold\">def</span> <span style=\"color:#06B;font-weight:bold\">change</span>\n    add_column <span style=\"color:#A60\">:some_table</span>,<span style=\"color:#A60\">:some_column_name</span>,<span style=\"color:#A60\">:primary_key</span>\n  <span style=\"color:#080;font-weight:bold\">end</span>\n<span style=\"color:#080;font-weight:bold\">end</span>\n</pre></td>\n</tr></table>\n\n        </div>\n", pretty_preview: "        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <div class=\"CodeRay\">\n  <div class=\"code\"><pre><span style=\"color:#080;font-weight:bold\">class</span> <span style=\"color:#B06;font-weight:bold\">SomeMigration</span> &lt; <span style=\"color:#036;font-weight:bold\">ActiveRecord</span>::<span style=\"color:#036;font-weight:bold\">Migration</span>\n  <span style=\"color:#080;font-weight:bold\">def</span> <span style=\"color:#06B;font-weight:bold\">change</span>\n    add_column <span style=\"color:#A60\">:some_table</span>,<span style=\"color:#A60\">:some_column_name</span>,<span style=\"color:#A60\">:primary_key</span>\n  <span style=\"color:#080;font-weight:bold\">end</span>\n<span style=\"color:#080;font-weight:bold\">end</span>\n</pre></div>\n</div>\n\n        </div>\n"},
  {id: 352, name: "Validating a valid email using devise's email regexp", category_id: 3, body: "<span style='font-family: \"Courier New\",Courier,monospace;'><pre><code class=\"ruby\">validates_format_of :email,:with =&gt; Devise.email_regexp</code></pre></span>", created_at: "2013-12-13 19:56:08", updated_at: "2013-12-13 19:56:08", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "<span style='font-family: \"Courier New\",Courier,monospace;'>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n</pre></td>\n  <td class=\"code\"><pre>validates_format_of <span style=\"color:#A60\">:email</span>,<span style=\"color:#A60\">:with</span> =&gt; <span style=\"color:#036;font-weight:bold\">Devise</span>.email_regexp\n</pre></td>\n</tr></table>\n\n        </div>\n</span>", pretty_preview: "<span style='font-family: \"Courier New\",Courier,monospace;'>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <div class=\"CodeRay\">\n  <div class=\"code\"><pre>validates_format_of <span style=\"color:#A60\">:email</span>,<span style=\"color:#A60\">:with</span> =&gt; <span style=\"color:#036;font-weight:bold\">Devise</span>.email_regexp\n</pre></div>\n</div>\n\n        </div>\n</span>"},
  {id: 353, name: "Avoid Angular.js from adding \"unsafe\" tag in ng-href", category_id: 3, body: "<p>In PhoneGap application for mobile device, it is common to use \"tel: 1-800-xxx-xxx\" in hyperlink to dial. If you use it with Angular.js, it won't work, because Angular.js will add \"unsafe\" automatically. An angular.js like this:<br></p>\n<pre><code class=\"html\">&lt;a ng-href='tel: 1-800-xxx-xxx'&gt;Call Me&lt;/a&gt;</code></pre>will becomes this:<br><pre><code class=\"html\">&lt;a ng-href='tel: 1-800-xxx-xxx' href='unsafe:tel: 1-800-xxx-xxx'&gt;Call Me&lt;/a&gt;</code></pre>tel is not allowed by default. To fix it, for Angular.js <span style=\"font-weight: bold;\">1.2</span>:<br><pre><code class=\"javascript\">app.config(['$compileProvider', function($compileProvider) {<br>  $compileProvider.aHrefSanitizationWhitelist(/^\\s*(https?|file|tel):/);<br>}]);</code></pre>or for <span style=\"font-weight: bold;\">1.1.x</span> and <span style=\"font-weight: bold;\">1.0.x</span>, use <code>urlSanitizationWhitelist</code>.<br><br>If you use <span style=\"font-weight: bold;\">PhoneGap</span>, remember to add file besides <span style=\"font-weight: bold;\">https?</span>, otherwise, links will not work. <br>", created_at: "2013-12-13 19:56:08", updated_at: "2013-12-13 19:56:08", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "<p>In PhoneGap application for mobile device, it is common to use \"tel: 1-800-xxx-xxx\" in hyperlink to dial. If you use it with Angular.js, it won't work, because Angular.js will add \"unsafe\" automatically. An angular.js like this:<br></p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/html.png' alt='html'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#070;font-weight:bold\">&lt;a</span> <span style=\"color:#b48\">ng-href</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">tel: 1-800-xxx-xxx</span><span style=\"color:#710\">'</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span>Call Me<span style=\"color:#070;font-weight:bold\">&lt;/a&gt;</span>\n</pre></td>\n</tr></table>\n\n        </div>\nwill becomes this:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/html.png' alt='html'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#070;font-weight:bold\">&lt;a</span> <span style=\"color:#b48\">ng-href</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">tel: 1-800-xxx-xxx</span><span style=\"color:#710\">'</span></span> <span style=\"color:#b48\">href</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">unsafe:tel: 1-800-xxx-xxx</span><span style=\"color:#710\">'</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span>Call Me<span style=\"color:#070;font-weight:bold\">&lt;/a&gt;</span>\n</pre></td>\n</tr></table>\n\n        </div>\ntel is not allowed by default. To fix it, for Angular.js <span style=\"font-weight: bold;\">1.2</span>:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/javascript.png' alt='javascript'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n</pre></td>\n  <td class=\"code\"><pre>app.config([<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">$compileProvider</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#080;font-weight:bold\">function</span>(<span style=\"color:#369;font-weight:bold\">$compileProvider</span>) {\n<span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#369;font-weight:bold\">$compileProvider</span>.aHrefSanitizationWhitelist(<span style=\"background-color:hsla(300,100%,50%,0.06)\"><span style=\"color:#404\">/</span><span style=\"color:#808\">^</span><span style=\"color:#D20\">\\s</span><span style=\"color:#808\">*(https?|file|tel):</span><span style=\"color:#404\">/</span></span>);\n}]);\n</pre></td>\n</tr></table>\n\n        </div>\nor for <span style=\"font-weight: bold;\">1.1.x</span> and <span style=\"font-weight: bold;\">1.0.x</span>, use <code>urlSanitizationWhitelist</code>.<br><br>If you use <span style=\"font-weight: bold;\">PhoneGap</span>, remember to add file besides <span style=\"font-weight: bold;\">https?</span>, otherwise, links will not work. <br>", pretty_preview: "<p>In PhoneGap application for mobile device, it is common to use \"tel: 1-800-xxx-xxx\" in hyperlink to dial. If you use it with Angular.js, it won't work, because Angular.js will add \"unsafe\" automatically. An angular.js like this:<br></p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/html.png' alt='html'/>\n              </div>\n          <div class=\"CodeRay\">\n  <div class=\"code\"><pre><span style=\"color:#070;font-weight:bold\">&lt;a</span> <span style=\"color:#b48\">ng-href</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">tel: 1-800...</span>\n</span></pre></div>\n</div>\n\n        </div>\n"},
  {id: 354, name: "PG::Error: ERROR: null value in column \"created_at\" violates not-null constraint", category_id: 3, body: "<p>This may happen if you created a HABTM association, and you defined your table like this:<br></p>\n<pre><code class=\"ruby\">create_table :some_join_table, :id =&gt; false do |t|\n   t.references :some_model\n   t.references :some_other_model\n   t.timestamps\nend\n</code></pre>\nSolution: remove <code>t.timestamps</code>", created_at: "2013-12-13 19:56:08", updated_at: "2013-12-13 19:56:08", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "<p>This may happen if you created a HABTM association, and you defined your table like this:<br></p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n</pre></td>\n  <td class=\"code\"><pre>create_table <span style=\"color:#A60\">:some_join_table</span>, <span style=\"color:#A60\">:id</span> =&gt; <span style=\"color:#069\">false</span> <span style=\"color:#080;font-weight:bold\">do</span> |t|\n   t.references <span style=\"color:#A60\">:some_model</span>\n   t.references <span style=\"color:#A60\">:some_other_model</span>\n   t.timestamps\n<span style=\"color:#080;font-weight:bold\">end</span>\n\n</pre></td>\n</tr></table>\n\n        </div>\n\nSolution: remove <code>t.timestamps</code>", pretty_preview: "<p>This may happen if you created a HABTM association, and you defined your table like this:<br></p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <div class=\"CodeRay\">\n  <div class=\"code\"><pre>create_table <span style=\"color:#A60\">:some_join_table</span>, <span style=\"color:#A60\">:id</span> =&gt; <span style=\"color:#069\">false</span> <span style=\"color:#080;font-weight:bold\">do</span> |t|\n   t.references <span style=\"color:#A60\">:some_model</span>\n   t.references <span style=\"color:#A60\">:some_other_model</span>\n   t.timestamps\n<span style=\"color:#080;font-weight:bold\">end</span>\n\n</pre></div>\n</div>\n\n        </div>\n\nSolution: remove <code>t.timestam...</code>"},
  {id: 355, name: "Finding current migration", category_id: 3, body: "<pre><code class=\"bash\">rails r \"p ActiveRecord::Migrator.current_version\"</code></pre>", created_at: "2013-12-13 19:56:08", updated_at: "2013-12-13 19:56:08", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/bash.png' alt='bash'/>\n              </div>\n          <pre><code class=\"bash\">rails r \"p ActiveRecord::Migrator.current_version\"</code></pre>\n        </div>\n", pretty_preview: "        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/bash.png' alt='bash'/>\n              </div>\n          <pre><code class=\"bash\">rails r \"p ActiveRecord::Migrator.current_version\"</code></pre>\n        </div>\n"},
  {id: 356, name: "Recognizing a route with rails", category_id: 3, body: "<p>If you want to see what controller action would match a certain route, you can do this:<br></p>\n<pre><code class=\"ruby\">Rails.application.routes.recognize_path \"/some_route\"</code></pre>", created_at: "2013-12-13 19:56:08", updated_at: "2013-12-13 19:56:08", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "<p>If you want to see what controller action would match a certain route, you can do this:<br></p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#036;font-weight:bold\">Rails</span>.application.routes.recognize_path <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">/some_route</span><span style=\"color:#710\">&quot;</span></span>\n</pre></td>\n</tr></table>\n\n        </div>\n", pretty_preview: "<p>If you want to see what controller action would match a certain route, you can do this:<br></p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <div class=\"CodeRay\">\n  <div class=\"code\"><pre><span style=\"color:#036;font-weight:bold\">Rails</span>.application.routes.recognize_path <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">/some_route</span><span style=\"color:#710\">&quot;</span></span>\n</pre></div>\n</div>\n\n        </div>\n"},
  {id: 357, name: "Connecting to heroku's redis", category_id: 3, body: "<div itemprop=\"articleBody\"><pre><code class=\"ruby\">uri = URI.parse(ENV[\"REDISTOGO_URL\"])<br style='font-family: \"Courier New\",Courier,monospace;'>REDIS = Redis.new(<br>     :host =&gt; uri.host, <br>     :port =&gt; uri.port, <br>     :password =&gt; uri.password<br>)<br>\nREDIS.flushdb</code></pre></div>", created_at: "2013-12-13 19:56:08", updated_at: "2013-12-13 19:56:08", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "<div itemprop=\"articleBody\">        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n<a href=\"#n8\" name=\"n8\">8</a>\n</pre></td>\n  <td class=\"code\"><pre>uri = <span style=\"color:#036;font-weight:bold\">URI</span>.parse(<span style=\"color:#069\">ENV</span>[<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">REDISTOGO_URL</span><span style=\"color:#710\">&quot;</span></span>])\n<span style=\"color:#036;font-weight:bold\">REDIS</span> = <span style=\"color:#036;font-weight:bold\">Redis</span>.new(\n     <span style=\"color:#A60\">:host</span> =&gt; uri.host, \n     <span style=\"color:#A60\">:port</span> =&gt; uri.port, \n     <span style=\"color:#A60\">:password</span> =&gt; uri.password\n)\n\n<span style=\"color:#036;font-weight:bold\">REDIS</span>.flushdb\n</pre></td>\n</tr></table>\n\n        </div>\n</div>", pretty_preview: "<div itemprop=\"articleBody\">        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <div class=\"CodeRay\">\n  <div class=\"code\"><pre>uri = <span style=\"color:#036;font-weight:bold\">URI</span>.parse(<span style=\"color:#069\">ENV</span>[<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">REDISTOGO_URL</span><span style=\"color:#710\">&quot;</span></span>])\n<span style=\"color:#036;font-weight:bold\">REDIS</span> = <span style=\"color:#036;font-weight:bold\">Redis</span>.new(\n     <span style=\"color:#A60\">:host</span> =&gt; uri.host, \n     <span style=\"color:#A60\">:port</span> =&gt; uri.port, \n     <span style=\"color:#A60\">:password</span> =&gt; uri.password\n)\n\n<span style=\"color:#036;font-weight:bold\">REDIS</span>.flushdb\n</pre></div>\n</div>\n\n        </div>\n</div>"},
  {id: 358, name: "Cache Collection in Rails", category_id: 3, body: "<p>It is quite easy to <a href=\"http://guides.rubyonrails.org/caching_with_rails.html#fragment-caching\"><code>cache a record</code></a> in Rails. But in action <span style=\"font-weight: bold;\">#index</span>, it is often better to cache the collection as a single cache, if possible, to reduce the reading of database and rendering of multiple partials.<br><br>If your records are relatively simple, you can follow what Rails Guide says:<br></p>\n<pre><code class=\"ruby\">def cache_key_for_products<br>  count          = Product.count<br>  max_updated_at = Product.maximum(:updated_at).try(:utc).try(:to_s, :number)<br>  \"products/all-\#{count}-\#{max_updated_at}\"<br>end</code></pre>Or a simpler version:<br><pre><code class=\"ruby\">def cache_key<br>  pluck(\"COUNT(*)\", \"MAX(updated_at)\").flatten.map(&amp;:to_i).join(\"-\")<br>end</code></pre>For something more complicated, you can try to get <a href=\"http://blog.gingerlime.com/2013/matryoshka-fragment-caching-in-rails/\"><code>MD5 signature through database</code></a> (read comments of link for pros and cons).<br><br>If you use pagination, remember to include the page parameter, often <span style=\"font-weight: bold;\">params[:page]</span> in your cache key.<br><br>To support search on collection, you might want to avoid caching if search parameter exists:<br><pre><code class=\"erb\">&lt;% cache_unless params[:search].present?, [posts_cache_key(), params[:page]] do %&gt;<br>  &lt;%= render @posts %&gt;<br>&lt;% end %&gt;</code></pre>Finally, if you really cannot cache the whole collection, try <a href=\"https://github.com/n8/multi_fetch_fragments\"><code>multi_fetch_fragments</code></a> (now support <span style=\"font-weight: bold;\">Rails 4</span>), which will fetch multiple caches at once. It indeed will save you a LOT of time. <br>", created_at: "2013-12-13 19:56:08", updated_at: "2013-12-13 19:56:08", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "<p>It is quite easy to <a href=\"http://guides.rubyonrails.org/caching_with_rails.html#fragment-caching\"><code>cache a record</code></a> in Rails. But in action <span style=\"font-weight: bold;\">#index</span>, it is often better to cache the collection as a single cache, if possible, to reduce the reading of database and rendering of multiple partials.<br><br>If your records are relatively simple, you can follow what Rails Guide says:<br></p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#080;font-weight:bold\">def</span> <span style=\"color:#06B;font-weight:bold\">cache_key_for_products</span>\n  count          = <span style=\"color:#036;font-weight:bold\">Product</span>.count\n  max_updated_at = <span style=\"color:#036;font-weight:bold\">Product</span>.maximum(<span style=\"color:#A60\">:updated_at</span>).try(<span style=\"color:#A60\">:utc</span>).try(<span style=\"color:#A60\">:to_s</span>, <span style=\"color:#A60\">:number</span>)\n  <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">products/all-</span><span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">\#{</span>count<span style=\"font-weight:bold;color:#666\">}</span></span><span style=\"color:#D20\">-</span><span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">\#{</span>max_updated_at<span style=\"font-weight:bold;color:#666\">}</span></span><span style=\"color:#710\">&quot;</span></span>\n<span style=\"color:#080;font-weight:bold\">end</span>\n</pre></td>\n</tr></table>\n\n        </div>\nOr a simpler version:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#080;font-weight:bold\">def</span> <span style=\"color:#06B;font-weight:bold\">cache_key</span>\n  pluck(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">COUNT(*)</span><span style=\"color:#710\">&quot;</span></span>, <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">MAX(updated_at)</span><span style=\"color:#710\">&quot;</span></span>).flatten.map(&amp;<span style=\"color:#A60\">:to_i</span>).join(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">-</span><span style=\"color:#710\">&quot;</span></span>)\n<span style=\"color:#080;font-weight:bold\">end</span>\n</pre></td>\n</tr></table>\n\n        </div>\nFor something more complicated, you can try to get <a href=\"http://blog.gingerlime.com/2013/matryoshka-fragment-caching-in-rails/\"><code>MD5 signature through database</code></a> (read comments of link for pros and cons).<br><br>If you use pagination, remember to include the page parameter, often <span style=\"font-weight: bold;\">params[:page]</span> in your cache key.<br><br>To support search on collection, you might want to avoid caching if search parameter exists:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/erb.png' alt='erb'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%</span> cache_unless params[<span style=\"color:#A60\">:search</span>].present?, [posts_cache_key(), params[<span style=\"color:#A60\">:page</span>]] <span style=\"color:#080;font-weight:bold\">do</span> <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>\n  <span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> render <span style=\"color:#33B\">@posts</span> <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>\n<span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%</span> <span style=\"color:#080;font-weight:bold\">end</span> <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>\n</pre></td>\n</tr></table>\n\n        </div>\nFinally, if you really cannot cache the whole collection, try <a href=\"https://github.com/n8/multi_fetch_fragments\"><code>multi_fetch_fragments</code></a> (now support <span style=\"font-weight: bold;\">Rails 4</span>), which will fetch multiple caches at once. It indeed will save you a LOT of time. <br>", pretty_preview: "<p>It is quite easy to <a href=\"http://guides.rubyonrails.org/caching_with_rails.html#fragment-caching\"><code>cache a record</code></a> in Rails. But in action <span style=\"font-weight: bold;\">#index</span>, it is often better to cache the collection as a single cache, if possible, to reduce the reading of database and rendering of multiple partials.<br><br>If your records are relatively simple, you can follow ...<br></p>"},
  {id: 359, name: "Working with time fields set by a rails app", category_id: 3, body: "<p>If you need to work with time fields set by a Rails app, make sure that \nyour app is using utc as it's AR default timezone. Since Rails 3, date \nfields are stored in UTC format in the db, and when they are being read,\n they are given to you in the time zone you specified.<br></p>\n<pre><code class=\"ruby\">ActiveRecord::Base.default_timezone = :utc</code></pre>\nThen, just set your timezone to be what you need it to be, and make the AR fields time zone aware:<br><pre><code class=\"ruby\">Time.zone = \"Berlin\"<br style='font-family: \"Courier New\",Courier,monospace;'>ActiveRecord::Base.time_zone_aware_attributes = true</code></pre>\nIf you need to see the value of the field before the offset was added, run this:<br><span style='font-family: \"Courier New\",Courier,monospace;'><pre><code class=\"ruby\">some_object.read_attribute_before_type_cast(\"created_at\")</code></pre></span>", created_at: "2013-12-13 19:56:08", updated_at: "2013-12-13 19:56:08", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "<p>If you need to work with time fields set by a Rails app, make sure that \nyour app is using utc as it's AR default timezone. Since Rails 3, date \nfields are stored in UTC format in the db, and when they are being read,\n they are given to you in the time zone you specified.<br></p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#036;font-weight:bold\">ActiveRecord</span>::<span style=\"color:#036;font-weight:bold\">Base</span>.default_timezone = <span style=\"color:#A60\">:utc</span>\n</pre></td>\n</tr></table>\n\n        </div>\n\nThen, just set your timezone to be what you need it to be, and make the AR fields time zone aware:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#036;font-weight:bold\">Time</span>.zone = <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">Berlin</span><span style=\"color:#710\">&quot;</span></span>\n<span style=\"color:#036;font-weight:bold\">ActiveRecord</span>::<span style=\"color:#036;font-weight:bold\">Base</span>.time_zone_aware_attributes = <span style=\"color:#069\">true</span>\n</pre></td>\n</tr></table>\n\n        </div>\n\nIf you need to see the value of the field before the offset was added, run this:<br><span style='font-family: \"Courier New\",Courier,monospace;'>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n</pre></td>\n  <td class=\"code\"><pre>some_object.read_attribute_before_type_cast(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">created_at</span><span style=\"color:#710\">&quot;</span></span>)\n</pre></td>\n</tr></table>\n\n        </div>\n</span>", pretty_preview: "<p>If you need to work with time fields set by a Rails app, make sure that \nyour app is using utc as it's AR default timezone. Since Rails 3, date \nfields are stored in UTC format in the db, and when they are being read,\n they are given to you in the tim...<br></p>"},
  {id: 360, name: "Testing a paperclip upload with rspec", category_id: 3, body: "<div itemprop=\"articleBody\">\n<pre><code class=\"ruby\">file = Rack::Test::UploadedFile.new(File.join(Rails.root, \"app/assets/images/some_asset.jpg\"), \"image/jpeg\") \npost :update, :id =&gt; @user, :user =&gt; {\n  :avatar =&gt; file\n}\n...\n# assert stuff here</code></pre>\n<span style=\"font-size: x-small;\"><span style='font-family: \"Courier New\",Courier,monospace;'> </span></span>\n</div>", created_at: "2013-12-13 19:56:08", updated_at: "2013-12-13 19:56:08", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "<div itemprop=\"articleBody\">\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n</pre></td>\n  <td class=\"code\"><pre>file = <span style=\"color:#036;font-weight:bold\">Rack</span>::<span style=\"color:#036;font-weight:bold\">Test</span>::<span style=\"color:#036;font-weight:bold\">UploadedFile</span>.new(<span style=\"color:#036;font-weight:bold\">File</span>.join(<span style=\"color:#036;font-weight:bold\">Rails</span>.root, <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">app/assets/images/some_asset.jpg</span><span style=\"color:#710\">&quot;</span></span>), <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">image/jpeg</span><span style=\"color:#710\">&quot;</span></span>) \npost <span style=\"color:#A60\">:update</span>, <span style=\"color:#A60\">:id</span> =&gt; <span style=\"color:#33B\">@user</span>, <span style=\"color:#A60\">:user</span> =&gt; {\n  <span style=\"color:#A60\">:avatar</span> =&gt; file\n}\n...\n<span style=\"color:#777\"># assert stuff here</span>\n</pre></td>\n</tr></table>\n\n        </div>\n\n<span style=\"font-size: x-small;\"><span style='font-family: \"Courier New\",Courier,monospace;'> </span></span>\n</div>", pretty_preview: "<div itemprop=\"articleBody\">\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <div class=\"CodeRay\">\n  <div class=\"code\"><pre>file = <span style=\"color:#036;font-weight:bold\">Rack</span>::<span style=\"color:#036;font-weight:bold\">Test</span>::<span style=\"color:#036;font-weight:bold\">UploadedFile</span>.new(<span style=\"color:#036;font-weight:bold\">File</span>.join(<span style=\"color:#036;font-weight:bold\">Rails</span>.root, <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">app/assets/images/some_asset.jpg</span><span style=\"color:#710\">&quot;</span></span>), <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">image/jpeg</span><span style=\"color:#710\">&quot;</span></span>) \npost <span style=\"color:#A60\">:update</span>, <span style=\"color:#A60\">:id</span> =&gt; <span style=\"color:#33B\">@user</span>, <span style=\"color:#A60\">:user</span> =&gt; {\n  <span style=\"color:#A60\">:avatar</span> =&gt; file\n}\n...\n<span style=\"color:#777\"># assert stuff here</span>\n</pre></div>\n</div>\n\n        </div>\n\n<span style=\"font-size: x-small;\"><span style='font-family: \"Courier New\",Courier,monospace;'> </span></span>\n</div>"},
  {id: 361, name: "Caching devise's query for authenticate_user!", category_id: 3, body: "<p>Implement this method on your model:<br></p>\n<pre><code class=\"ruby\">def self.serialize_from_session(key, salt)<br style='font-family: \"Courier New\",Courier,monospace;'>  single_key = key.is_a?(Array) ? key.first : key<br style='font-family: \"Courier New\",Courier,monospace;'>  Rails.cache.fetch(\"user_by_id_\#{single_key}\") { User.find(single_key) }<br style='font-family: \"Courier New\",Courier,monospace;'>end</code></pre>\nIn this case, single_key is actual id of your object. Make sure you invalidate it properly.", created_at: "2013-12-13 19:56:08", updated_at: "2013-12-13 19:56:08", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "<p>Implement this method on your model:<br></p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#080;font-weight:bold\">def</span> <span style=\"color:#069\">self</span>.<span style=\"color:#06B;font-weight:bold\">serialize_from_session</span>(key, salt)\n  single_key = key.is_a?(<span style=\"color:#036;font-weight:bold\">Array</span>) ? key.first : key\n  <span style=\"color:#036;font-weight:bold\">Rails</span>.cache.fetch(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">user_by_id_</span><span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">\#{</span>single_key<span style=\"font-weight:bold;color:#666\">}</span></span><span style=\"color:#710\">&quot;</span></span>) { <span style=\"color:#036;font-weight:bold\">User</span>.find(single_key) }\n<span style=\"color:#080;font-weight:bold\">end</span>\n</pre></td>\n</tr></table>\n\n        </div>\n\nIn this case, single_key is actual id of your object. Make sure you invalidate it properly.", pretty_preview: "<p>Implement this method on your model:<br></p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <div class=\"CodeRay\">\n  <div class=\"code\"><pre><span style=\"color:#080;font-weight:bold\">def</span> <span style=\"color:#069\">self</span>.<span style=\"color:#06B;font-weight:bold\">serialize_from_session</span>(key, salt)\n  single_key = key.is_a?(<span style=\"color:#036;font-weight:bold\">Array</span>) ? key.first : key\n  <span style=\"color:#036;font-weight:bold\">Rails</span>.cache.fetch(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">user_by_id_</span><span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">\#{</span>single_key<span style=\"font-weight:bold;color:#666\">}</span></span><span style=\"color:#710\">&quot;</span></span>) { <span style=\"color:#036;font-weight:bold\">User</span>.find(single_key) }\n<span style=\"color:#080;font-weight:bold\">end</span>\n</pre></div>\n</div>\n\n        </div>\n\nIn this case, single_key is actual id of your ..."},
  {id: 362, name: "Making an engine helper accessible from the main app", category_id: 3, body: "<pre><code class=\"ruby\">module YourModule<br>  class Engine &lt; ::Rails::Engine<br>    initializer \"your_engine.action_view\" do |app|<br>      ActionView::Base.send :include, YourHelper<br>    end<br>  end<br>end</code></pre>", created_at: "2013-12-13 19:56:08", updated_at: "2013-12-13 19:56:08", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#080;font-weight:bold\">module</span> <span style=\"color:#B06;font-weight:bold\">YourModule</span>\n  <span style=\"color:#080;font-weight:bold\">class</span> <span style=\"color:#B06;font-weight:bold\">Engine</span> &lt; ::<span style=\"color:#036;font-weight:bold\">Rails</span>::<span style=\"color:#036;font-weight:bold\">Engine</span>\n    initializer <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">your_engine.action_view</span><span style=\"color:#710\">&quot;</span></span> <span style=\"color:#080;font-weight:bold\">do</span> |app|\n      <span style=\"color:#036;font-weight:bold\">ActionView</span>::<span style=\"color:#036;font-weight:bold\">Base</span>.send <span style=\"color:#A60\">:include</span>, <span style=\"color:#036;font-weight:bold\">YourHelper</span>\n    <span style=\"color:#080;font-weight:bold\">end</span>\n  <span style=\"color:#080;font-weight:bold\">end</span>\n<span style=\"color:#080;font-weight:bold\">end</span>\n</pre></td>\n</tr></table>\n\n        </div>\n", pretty_preview: "        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <div class=\"CodeRay\">\n  <div class=\"code\"><pre><span style=\"color:#080;font-weight:bold\">module</span> <span style=\"color:#B06;font-weight:bold\">YourModule</span>\n  <span style=\"color:#080;font-weight:bold\">class</span> <span style=\"color:#B06;font-weight:bold\">Engine</span> &lt; ::<span style=\"color:#036;font-weight:bold\">Rails</span>::<span style=\"color:#036;font-weight:bold\">Engine</span>\n    initializer <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">your_engine.action_view</span><span style=\"color:#710\">&quot;</span></span> <span style=\"color:#080;font-weight:bold\">do</span> |app|\n      <span style=\"color:#036;font-weight:bold\">ActionView</span>::<span style=\"color:#036;font-weight:bold\">Base</span>.send <span style=\"color:#A60\">:include</span>, <span style=\"color:#036;font-weight:bold\">YourHelper</span>\n    <span style=\"color:#080;font-weight:bold\">end</span>\n  <span style=\"color:#080;font-weight:bold\">end</span>\n<span style=\"color:#080;font-weight:bold\">end</span>\n</pre></div>\n</div>\n\n        </div>\n"},
  {id: 363, name: "manually disabling a remote link with jquery-ujs", category_id: 3, body: "<p>When doing an AJAX call using a remote link, the following gets called:<br></p>\n<pre><code class=\"javascript\">$.rails.disableElement(some_element);</code></pre>The code behind it does the following:<br><pre><code class=\"javascript\">element.data('ujs:enable-with', element.html()); // store enabled state<br>  element.html(element.data('disable-with')); // set to disabled state<br>  element.bind('click.railsDisable', function(e) { // prevent further clicking<br>    return rails.stopEverything(e);<br>});</code></pre>When it's getting enabled again, it goes through <code>$.rails.enableElement(some_element)</code>, which does:<br><pre><code class=\"javascript\"> // restore element to its original state which was disabled by 'disableElement' above<br>enableElement: function(element) {<br>  if (element.data('ujs:enable-with') !== undefined) {<br>     element.html(element.data('ujs:enable-with')); // set to old enabled state<br>     // this should be element.removeData('ujs:enable-with')<br>    // but, there is currently a bug in jquery which makes hyphenated data attributes not get removed<br>     element.data('ujs:enable-with', false); // clean up cache<br>  }<br>   element.unbind('click.railsDisable'); // enable element<br>}</code></pre>", created_at: "2013-12-13 19:56:08", updated_at: "2013-12-13 19:56:08", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "<p>When doing an AJAX call using a remote link, the following gets called:<br></p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/javascript.png' alt='javascript'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#369;font-weight:bold\">$</span>.rails.disableElement(some_element);\n</pre></td>\n</tr></table>\n\n        </div>\nThe code behind it does the following:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/javascript.png' alt='javascript'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n</pre></td>\n  <td class=\"code\"><pre>element.data(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">ujs:enable-with</span><span style=\"color:#710\">'</span></span>, element.html()); <span style=\"color:#777\">// store enabled state</span>\n<span style=\"color:#F00;background-color:#FAA\"> </span> element.html(element.data(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">disable-with</span><span style=\"color:#710\">'</span></span>)); <span style=\"color:#777\">// set to disabled state</span>\n<span style=\"color:#F00;background-color:#FAA\"> </span> element.bind(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">click.railsDisable</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#080;font-weight:bold\">function</span>(e) { <span style=\"color:#777\">// prevent further clicking</span>\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#080;font-weight:bold\">return</span> rails.stopEverything(e);\n});\n</pre></td>\n</tr></table>\n\n        </div>\nWhen it's getting enabled again, it goes through <code>$.rails.enableElement(some_element)</code>, which does:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/javascript.png' alt='javascript'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n<a href=\"#n8\" name=\"n8\">8</a>\n<a href=\"#n9\" name=\"n9\">9</a>\n<strong><a href=\"#n10\" name=\"n10\">10</a></strong>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#777\">// restore element to its original state which was disabled by 'disableElement' above</span>\n<span style=\"color:#06B;font-weight:bold\">enableElement</span>: <span style=\"color:#080;font-weight:bold\">function</span>(element) {\n<span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#080;font-weight:bold\">if</span> (element.data(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">ujs:enable-with</span><span style=\"color:#710\">'</span></span>) !== <span style=\"color:#069\">undefined</span>) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> element.html(element.data(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">ujs:enable-with</span><span style=\"color:#710\">'</span></span>)); <span style=\"color:#777\">// set to old enabled state</span>\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#777\">// this should be element.removeData('ujs:enable-with')</span>\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#777\">// but, there is currently a bug in jquery which makes hyphenated data attributes not get removed</span>\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> element.data(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">ujs:enable-with</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#069\">false</span>); <span style=\"color:#777\">// clean up cache</span>\n<span style=\"color:#F00;background-color:#FAA\"> </span> }\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> element.unbind(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">click.railsDisable</span><span style=\"color:#710\">'</span></span>); <span style=\"color:#777\">// enable element</span>\n}\n</pre></td>\n</tr></table>\n\n        </div>\n", pretty_preview: "<p>When doing an AJAX call using a remote link, the following gets called:<br></p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/javascript.png' alt='javascript'/>\n              </div>\n          <div class=\"CodeRay\">\n  <div class=\"code\"><pre><span style=\"color:#369;font-weight:bold\">$</span>.rails.disableElement(some_element);\n</pre></div>\n</div>\n\n        </div>\nThe code behind it does the following:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/javascript.png' alt='javascript'/>\n              </div>\n          <div class=\"CodeRay\">\n  <div class=\"code\"><pre>element.data(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">ujs:enable-with</span><span style=\"color:#710\">'</span></span>, element.html()); <span style=\"color:#777\">// store enabled state</span>\n<span style=\"color:#F00;background-color:#FAA\"> </span> element.html(element.data(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">disa...\n\n</span></span></pre></div>\n</div>\n\n        </div>\n"},
  {id: 364, name: "adding parameters dynamically to a remote link", category_id: 3, body: "<p>Rails UJS uses a data params that allows you to set the data that will be sent via the AJAX request. If you ever need access to dynamic parameters, you do like this:<br></p>\n<pre><code class=\"coffeescript\">$(\"#some_remote_link\").bind \"ajax:before\", -&gt;<br>  $(this).data(\"params\",{some_param: $(\"#user_answer\").val()})</code></pre>It's important to note that this particular solution works with <code>ajax:before</code>. It will not work with <code>ajax:beforeSend</code><br>", created_at: "2013-12-13 19:56:08", updated_at: "2013-12-13 19:56:08", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "<p>Rails UJS uses a data params that allows you to set the data that will be sent via the AJAX request. If you ever need access to dynamic parameters, you do like this:<br></p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/coffeescript.png' alt='coffeescript'/>\n              </div>\n          <pre><code class=\"coffeescript\">$(\"#some_remote_link\").bind \"ajax:before\", -&gt;<br>  $(this).data(\"params\",{some_param: $(\"#user_answer\").val()})</code></pre>\n        </div>\nIt's important to note that this particular solution works with <code>ajax:before</code>. It will not work with <code>ajax:beforeSend</code><br>", pretty_preview: "<p>Rails UJS uses a data params that allows you to set the data that will be sent via the AJAX request. If you ever need access to dynamic parameters, you do like this:<br></p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/coffeescript.png' alt='coffeescript'/>\n              </div>\n          <pre><code class=\"coffeescript\">$(\"#some_remote_link\").bind \"ajax:before\", -&gt;<br>  $(this).data(\"params\",{some_param: $(\"...</code></pre>\n        </div>\n"},
  {id: 365, name: "Running rake tasks from the rails console", category_id: 3, body: "<pre><code class=\"bash\">rails c</code></pre>\n<pre><code class=\"ruby\">require \"rake\"<br>YourApp::Application.load_tasks<br>Rake::Task[\"some_task_name\"].invoke</code></pre>", created_at: "2013-12-13 19:56:08", updated_at: "2013-12-13 19:56:08", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/bash.png' alt='bash'/>\n              </div>\n          <pre><code class=\"bash\">rails c</code></pre>\n        </div>\n\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n</pre></td>\n  <td class=\"code\"><pre>require <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">rake</span><span style=\"color:#710\">&quot;</span></span>\n<span style=\"color:#036;font-weight:bold\">YourApp</span>::<span style=\"color:#036;font-weight:bold\">Application</span>.load_tasks\n<span style=\"color:#036;font-weight:bold\">Rake</span>::<span style=\"color:#036;font-weight:bold\">Task</span>[<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">some_task_name</span><span style=\"color:#710\">&quot;</span></span>].invoke\n</pre></td>\n</tr></table>\n\n        </div>\n", pretty_preview: "        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/bash.png' alt='bash'/>\n              </div>\n          <pre><code class=\"bash\">rails c</code></pre>\n        </div>\n\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <div class=\"CodeRay\">\n  <div class=\"code\"><pre>require <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">rake</span><span style=\"color:#710\">&quot;</span></span>\n<span style=\"color:#036;font-weight:bold\">YourApp</span>::<span style=\"color:#036;font-weight:bold\">Application</span>.load_tasks\n<span style=\"color:#036;font-weight:bold\">Rake</span>::<span style=\"color:#036;font-weight:bold\">Task</span>[<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">some_task_name</span><span style=\"color:#710\">&quot;</span></span>].invoke\n</pre></div>\n</div>\n\n        </div>\n"},
  {id: 366, name: "Background worker alternative", category_id: 3, body: "<a href=\"https://github.com/brandonhilkert/sucker_punch\"><code>https://github.com/brandonhilkert/sucker_punch</code></a> is\n an interesting alternative to Sidekiq. This will start the workers in \nthe same process as your Rails/Sinatra app. May be good for platforms \nsuch as Heroku.", created_at: "2013-12-13 19:56:08", updated_at: "2013-12-13 19:56:08", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "<a href=\"https://github.com/brandonhilkert/sucker_punch\"><code>https://github.com/brandonhilkert/sucker_punch</code></a> is\n an interesting alternative to Sidekiq. This will start the workers in \nthe same process as your Rails/Sinatra app. May be good for platforms \nsuch as Heroku.", pretty_preview: "<a href=\"https://github.com/brandonhilkert/sucker_punch\"><code>https://github.com/brandonhilkert/sucker_punch</code></a> is\n an interesting alternative to Sidekiq. This will start the workers in \nthe same process as your Rails/Sinatra app. May be good for platforms \nsuch as Heroku."},
  {id: 367, name: "serving gzipped assets from your Rails app", category_id: 3, body: "<p>One good practice for your assets is to gzip them and serve them \ncompressed. To do this in your Rails app, you can make use of the <code>Rack::Deflater</code> middleware. Make sure that you use it in your middleware stack, before the middleware that does the handling of static assets.<br><br>For example, if you're using <code>ActionDispatch::Static</code><span style=\"font-family: inherit;\">, you'd want </span><code>Rack::Deflater</code><span style=\"font-family: inherit;\"> before it. Here's how you do such a thing:</span><br><span style=\"font-family: inherit;\"><br></span>\n<span style=\"font-family: inherit;\">- open your </span><span style=\"font-family: Courier New, Courier, monospace;\"><code>config/environments/production.rb</code></span><br><span style=\"font-family: inherit;\">- add this:</span><br></p>\n<pre><code class=\"ruby\">config.middleware.insert_before ActionDispatch::Static, Rack::Deflater</code></pre>", created_at: "2013-12-13 19:56:09", updated_at: "2013-12-13 19:56:09", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "<p>One good practice for your assets is to gzip them and serve them \ncompressed. To do this in your Rails app, you can make use of the <code>Rack::Deflater</code> middleware. Make sure that you use it in your middleware stack, before the middleware that does the handling of static assets.<br><br>For example, if you're using <code>ActionDispatch::Static</code><span style=\"font-family: inherit;\">, you'd want </span><code>Rack::Deflater</code><span style=\"font-family: inherit;\"> before it. Here's how you do such a thing:</span><br><span style=\"font-family: inherit;\"><br></span>\n<span style=\"font-family: inherit;\">- open your </span><span style=\"font-family: Courier New, Courier, monospace;\"><code>config/environments/production.rb</code></span><br><span style=\"font-family: inherit;\">- add this:</span><br></p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n</pre></td>\n  <td class=\"code\"><pre>config.middleware.insert_before <span style=\"color:#036;font-weight:bold\">ActionDispatch</span>::<span style=\"color:#036;font-weight:bold\">Static</span>, <span style=\"color:#036;font-weight:bold\">Rack</span>::<span style=\"color:#036;font-weight:bold\">Deflater</span>\n</pre></td>\n</tr></table>\n\n        </div>\n", pretty_preview: "<p>One good practice for your assets is to gzip them and serve them \ncompressed. To do this in your Rails app, you can make use of the <code>Rack::Deflater</code> middleware. Make sure that you use it in your middleware stack, before the middleware that does the hand...<br></p>"},
  {id: 368, name: "Wiselinks with Rails 4", category_id: 3, body: "<a href=\"https://github.com/rails/turbolinks/\"><code>Turbolinks</code></a> is a new feature of Rails 4 to improve loading of web pages. But it by default works on every links, unless otherwise opt-out. If you uses some javascript frameworks which are not compatible with turbolinks, it might not worth the effort to use turbolinks at all.<br><br><a href=\"https://github.com/igor-alexandrov/wiselinks\"><code>Wiselinks</code></a> works similarly to turbolinks, but links need to opt-in. In this case, you can selectively use wiselinks on places where you know it will work. I use Angular.js in many places of my web application and it doesn't work with turbolinks well. A whitelist of links using wiselinks might be a better choice than turbolinks.<br><br>To demonstrate wiselinks, let's put it in a paginated index page. First, create a new scaffold called Post:<br><pre><code class=\"bash\">rails g post title content</code></pre>And you can populate posts through rails console.<br><br>To paginate it, try <a href=\"https://github.com/amatsuda/kaminari\"><code>kaminari</code></a> and modify these files:<br><pre><code class=\"ruby\"># app/controllers/posts_controller.rb<br>  def index<br>    @posts = Post.order(:updated_at).page(params[:page]).per(10)<br>  end</code></pre>// At the end of <code>app/views/posts/index.html.erb</code><br><pre><code class=\"erb\">...<br>&lt;%= paginate @posts %&gt;<br>...</code></pre>Now, to use wiselinks, you need to add it into your Gemfile and install it. Then add it into your javascript like this:<br><pre><code class=\"javascript\">$(document).ready(function() {<br>  window.wiselinks = new Wiselinks($('#content'));<br>});</code></pre>Here I assume you have an application layout and <span style=\"font-weight: bold;\">yield</span> is inside a <span style=\"font-weight: bold;\">div</span> with <span style=\"font-weight: bold;\">id</span> of <span style=\"font-weight: bold;\">content</span>. Unlike turbolinks, wiselinks allow you to replace any DIV besides body.<br><br>To add parameters into links of paginator, you need to generate views of paginator from kaminari:<br><pre><code class=\"bash\">rails g kaminari:views default</code></pre>Then add wiselink parameter in the <code>app/views/kaminari/_page.html.erb</code> like this:<br><pre><code class=\"erb\">&lt;span class=\"page&lt;%= ' current' if page.current? %&gt;\"&gt;<br>  &lt;%= link_to_unless page.current?, page, url, {:remote =&gt; remote, :rel =&gt; page.next? ? 'next' : page.prev? ? 'prev' : nil, :'data-push' =&gt; 'true', :'data-target' =&gt; '#content'} %&gt;<br>&lt;/span&gt;</code></pre>To check whether it works, you just need to click on the page number of paginator and look at the log of your web server. It will show something like this:<br><pre><code class=\"ruby\">Started GET \"/posts\" for 127.0.0.1 at 2013-08-07 16:47:41  0800<br>  ActiveRecord::SchemaMigration Load (0.8ms)  SELECT \"schema_migrations\".* FROM \"schema_migrations\"<br>Processing by PostsController#index as HTML<br>  [wiselinks] Processing template request<br>  Post Load (12.9ms)  SELECT \"posts\".* FROM \"posts\" ORDER BY \"posts\".updated_at ASC LIMIT 10 OFFSET 0<br>   (0.2ms)  SELECT COUNT(*) FROM \"posts\"<br>  Rendered posts/index.html.erb within layouts/wiselinks (196.1ms)<br>Completed 200 OK in 270ms (Views: 252.3ms | ActiveRecord: 13.7ms)</code></pre>It says the page is rendered within <code>layouts/wiselinks</code> instead of <code>layouts/application</code>. And it will not load all your assets.<br><br>Assume that you want to track pages loaded by users and update the UI accordingly, you might have a layout like this:<br><pre><code class=\"erb\">&lt;body&gt;<br>  &lt;div&gt;<br>    &lt;p&gt;Navigate: {{breadcrumb}}&lt;/p&gt;<br>  &lt;/div&gt;<br>  &lt;hr/&gt;<br>  &lt;div id='content'&gt;<br>    &lt;%= yield %&gt;<br>  &lt;/div&gt;<br>&lt;/body&gt;</code></pre>And remember to initiate Angular.js like this:<br><pre><code class=\"erb\">&lt;html ng-app='myapp'&gt;</code></pre>\n<pre><code class=\"javascript\">var myapp = angular.module('myapp', []);</code></pre>In previous, you can update the <span style=\"font-weight: bold;\">{{breadcrumb}}</span> from <span style=\"font-weight: bold;\">page:done</span> event. The only problem is that you need to call Angular.js outside its scope. And the answer is easy like this:<br><pre><code class=\"javascript\">$(document).ready(function() {<br>  window.wiselinks = new Wiselinks($('#content'));<br><br>  $(document).off('page:done').on(<br>    'page:done',<br>    function(event, $target, render, url) {<br>      s = angular.element($('html')).scope();<br>      s.$apply('breadcrumb= \"' url '\"');<br>    }<br>  );<br>});</code></pre>Here, we retrieve the scope from HTML element, then use <span style=\"font-weight: bold;\">$apply()</span> to update the UI.<br><br>If you have directive in pages loaded by wiselinks like this:<br><pre><code class=\"erb\">&lt;!-- in your partial --&gt;<br>&lt;div id='present'&gt;<br>  &lt;span data-my-directive&gt;{{now}}&lt;/span&gt;<br>&lt;/div&gt;</code></pre>\n<pre><code class=\"javascript\">myapp.directive('myDirective', function($http) {<br>  return {<br>    restrict: 'A',<br>    scope: true,<br>    link: function(scope, element, attrs, controller) {<br>      scope.now = new Date();<br>    }<br>  }<br>});<br></code></pre>It will work on full-page loading, but not wiselinks. The reason is that this directive is not compiled by Angular.js. To compile a HTML element outside scope take a little bit effort. First, we need a global controller like this:<br><pre><code class=\"javascript\">myapp.controller('GlobalCtrl', ['$scope', '$compile', function($scope, $compile) {<br>  $scope.compile_content = function(data) {<br>    $compile(data)($scope);<br>    $scope.$apply();<br>  }<br>}]);</code></pre>In this controller, we injects <span style=\"font-weight: bold;\">$compile</span> service. Then add this controller to html tag:<br><pre><code class=\"erb\">&lt;html ng-app='myapp' ng-controller='GlobalCtrl'&gt;</code></pre>Now, you can call <span style=\"font-weight: bold;\">$scope.compile_content(data)</span> to compile elements loaded by wiselinks.<br><pre><code class=\"javascript\">$(document).ready(function() {<br>  window.wiselinks = new Wiselinks($('#content'));<br><br>  $(document).off('page:done').on(<br>    'page:done',<br>    function(event, $target, render, url) {<br>      console.log(\"done:\" url \" to \" $target.selector \" within \" render)<br>      s = angular.element($('html')).scope();<br>      p = $('#present');<br>      s.compile_content(p.contents());<br>    }<br>  );<br>}); </code></pre>", created_at: "2013-12-13 19:56:09", updated_at: "2013-12-13 19:56:09", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "<a href=\"https://github.com/rails/turbolinks/\"><code>Turbolinks</code></a> is a new feature of Rails 4 to improve loading of web pages. But it by default works on every links, unless otherwise opt-out. If you uses some javascript frameworks which are not compatible with turbolinks, it might not worth the effort to use turbolinks at all.<br><br><a href=\"https://github.com/igor-alexandrov/wiselinks\"><code>Wiselinks</code></a> works similarly to turbolinks, but links need to opt-in. In this case, you can selectively use wiselinks on places where you know it will work. I use Angular.js in many places of my web application and it doesn't work with turbolinks well. A whitelist of links using wiselinks might be a better choice than turbolinks.<br><br>To demonstrate wiselinks, let's put it in a paginated index page. First, create a new scaffold called Post:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/bash.png' alt='bash'/>\n              </div>\n          <pre><code class=\"bash\">rails g post title content</code></pre>\n        </div>\nAnd you can populate posts through rails console.<br><br>To paginate it, try <a href=\"https://github.com/amatsuda/kaminari\"><code>kaminari</code></a> and modify these files:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#777\"># app/controllers/posts_controller.rb</span>\n  <span style=\"color:#080;font-weight:bold\">def</span> <span style=\"color:#06B;font-weight:bold\">index</span>\n    <span style=\"color:#33B\">@posts</span> = <span style=\"color:#036;font-weight:bold\">Post</span>.order(<span style=\"color:#A60\">:updated_at</span>).page(params[<span style=\"color:#A60\">:page</span>]).per(<span style=\"color:#00D\">10</span>)\n  <span style=\"color:#080;font-weight:bold\">end</span>\n</pre></td>\n</tr></table>\n\n        </div>\n// At the end of <code>app/views/posts/index.html.erb</code><br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/erb.png' alt='erb'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n</pre></td>\n  <td class=\"code\"><pre>...\n<span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> paginate <span style=\"color:#33B\">@posts</span> <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>\n...\n</pre></td>\n</tr></table>\n\n        </div>\nNow, to use wiselinks, you need to add it into your Gemfile and install it. Then add it into your javascript like this:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/javascript.png' alt='javascript'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#369;font-weight:bold\">$</span>(document).ready(<span style=\"color:#080;font-weight:bold\">function</span>() {\n<span style=\"color:#F00;background-color:#FAA\"> </span> window.wiselinks = <span style=\"color:#080;font-weight:bold\">new</span> Wiselinks(<span style=\"color:#369;font-weight:bold\">$</span>(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">#content</span><span style=\"color:#710\">'</span></span>));\n});\n</pre></td>\n</tr></table>\n\n        </div>\nHere I assume you have an application layout and <span style=\"font-weight: bold;\">yield</span> is inside a <span style=\"font-weight: bold;\">div</span> with <span style=\"font-weight: bold;\">id</span> of <span style=\"font-weight: bold;\">content</span>. Unlike turbolinks, wiselinks allow you to replace any DIV besides body.<br><br>To add parameters into links of paginator, you need to generate views of paginator from kaminari:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/bash.png' alt='bash'/>\n              </div>\n          <pre><code class=\"bash\">rails g kaminari:views default</code></pre>\n        </div>\nThen add wiselink parameter in the <code>app/views/kaminari/_page.html.erb</code> like this:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/erb.png' alt='erb'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#070;font-weight:bold\">&lt;span</span> <span style=\"color:#b48\">class</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">page</span></span><span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\"> current</span><span style=\"color:#710\">'</span></span> <span style=\"color:#080;font-weight:bold\">if</span> page.current? <span style=\"font-weight:bold;color:#666\">%&gt;</span></span><span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span>\n  <span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> link_to_unless page.current?, page, url, {<span style=\"color:#A60\">:remote</span> =&gt; remote, <span style=\"color:#A60\">:rel</span> =&gt; page.next? ? <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">next</span><span style=\"color:#710\">'</span></span> : page.prev? ? <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">prev</span><span style=\"color:#710\">'</span></span> : <span style=\"color:#069\">nil</span>, <span style=\"color:#A60\"><span style=\"color:#A60\">:</span><span style=\"color:#740\">'</span><span style=\"color:#A60\">data-push</span><span style=\"color:#740\">'</span></span> =&gt; <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">true</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#A60\"><span style=\"color:#A60\">:</span><span style=\"color:#740\">'</span><span style=\"color:#A60\">data-target</span><span style=\"color:#740\">'</span></span> =&gt; <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">#content</span><span style=\"color:#710\">'</span></span>} <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>\n<span style=\"color:#070;font-weight:bold\">&lt;/span&gt;</span>\n</pre></td>\n</tr></table>\n\n        </div>\nTo check whether it works, you just need to click on the page number of paginator and look at the log of your web server. It will show something like this:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n<a href=\"#n8\" name=\"n8\">8</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#036;font-weight:bold\">Started</span> <span style=\"color:#036;font-weight:bold\">GET</span> <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">/posts</span><span style=\"color:#710\">&quot;</span></span> <span style=\"color:#080;font-weight:bold\">for</span> <span style=\"color:#60E\">127.0</span>.<span style=\"color:#F00;background-color:#FAA\">0.1</span> at <span style=\"color:#00D\">2013</span>-<span style=\"color:#00D\">08</span>-<span style=\"color:#00D\">07</span> <span style=\"color:#00D\">16</span>:<span style=\"color:#00D\">47</span>:<span style=\"color:#00D\">41</span>  <span style=\"color:#00D\">0800</span>\n  <span style=\"color:#036;font-weight:bold\">ActiveRecord</span>::<span style=\"color:#036;font-weight:bold\">SchemaMigration</span> <span style=\"color:#036;font-weight:bold\">Load</span> (<span style=\"color:#60E\">0.8</span>ms)  <span style=\"color:#036;font-weight:bold\">SELECT</span> <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">schema_migrations</span><span style=\"color:#710\">&quot;</span></span>.* <span style=\"color:#036;font-weight:bold\">FROM</span> <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">schema_migrations</span><span style=\"color:#710\">&quot;</span></span>\n<span style=\"color:#036;font-weight:bold\">Processing</span> by <span style=\"color:#036;font-weight:bold\">PostsController</span><span style=\"color:#777\">#index as HTML</span>\n  [wiselinks] <span style=\"color:#036;font-weight:bold\">Processing</span> template request\n  <span style=\"color:#036;font-weight:bold\">Post</span> <span style=\"color:#036;font-weight:bold\">Load</span> (<span style=\"color:#60E\">12.9</span>ms)  <span style=\"color:#036;font-weight:bold\">SELECT</span> <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">posts</span><span style=\"color:#710\">&quot;</span></span>.* <span style=\"color:#036;font-weight:bold\">FROM</span> <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">posts</span><span style=\"color:#710\">&quot;</span></span> <span style=\"color:#036;font-weight:bold\">ORDER</span> <span style=\"color:#036;font-weight:bold\">BY</span> <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">posts</span><span style=\"color:#710\">&quot;</span></span>.updated_at <span style=\"color:#036;font-weight:bold\">ASC</span> <span style=\"color:#036;font-weight:bold\">LIMIT</span> <span style=\"color:#00D\">10</span> <span style=\"color:#036;font-weight:bold\">OFFSET</span> <span style=\"color:#00D\">0</span>\n   (<span style=\"color:#60E\">0.2</span>ms)  <span style=\"color:#036;font-weight:bold\">SELECT</span> COUNT(*) <span style=\"color:#036;font-weight:bold\">FROM</span> <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">posts</span><span style=\"color:#710\">&quot;</span></span>\n  <span style=\"color:#036;font-weight:bold\">Rendered</span> posts/index.html.erb within layouts/wiselinks (<span style=\"color:#60E\">196.1</span>ms)\n<span style=\"color:#036;font-weight:bold\">Completed</span> <span style=\"color:#00D\">200</span> <span style=\"color:#036;font-weight:bold\">OK</span> <span style=\"color:#080;font-weight:bold\">in</span> <span style=\"color:#00D\">270</span>ms (<span style=\"color:#606\">Views</span>: <span style=\"color:#60E\">252.3</span>ms | <span style=\"color:#606\">ActiveRecord</span>: <span style=\"color:#60E\">13.7</span>ms)\n</pre></td>\n</tr></table>\n\n        </div>\nIt says the page is rendered within <code>layouts/wiselinks</code> instead of <code>layouts/application</code>. And it will not load all your assets.<br><br>Assume that you want to track pages loaded by users and update the UI accordingly, you might have a layout like this:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/erb.png' alt='erb'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n<a href=\"#n8\" name=\"n8\">8</a>\n<a href=\"#n9\" name=\"n9\">9</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#070;font-weight:bold\">&lt;body&gt;</span>\n  <span style=\"color:#070;font-weight:bold\">&lt;div&gt;</span>\n    <span style=\"color:#070;font-weight:bold\">&lt;p&gt;</span>Navigate: {{breadcrumb}}<span style=\"color:#070;font-weight:bold\">&lt;/p&gt;</span>\n  <span style=\"color:#070;font-weight:bold\">&lt;/div&gt;</span>\n  <span style=\"color:#070;font-weight:bold\">&lt;hr</span><span style=\"color:#070;font-weight:bold\">/&gt;</span>\n  <span style=\"color:#070;font-weight:bold\">&lt;div</span> <span style=\"color:#b48\">id</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">content</span><span style=\"color:#710\">'</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span>\n    <span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> <span style=\"color:#080;font-weight:bold\">yield</span> <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>\n  <span style=\"color:#070;font-weight:bold\">&lt;/div&gt;</span>\n<span style=\"color:#070;font-weight:bold\">&lt;/body&gt;</span>\n</pre></td>\n</tr></table>\n\n        </div>\nAnd remember to initiate Angular.js like this:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/erb.png' alt='erb'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#070;font-weight:bold\">&lt;html</span> <span style=\"color:#b48\">ng-app</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">myapp</span><span style=\"color:#710\">'</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span>\n</pre></td>\n</tr></table>\n\n        </div>\n\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/javascript.png' alt='javascript'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#080;font-weight:bold\">var</span> myapp = angular.module(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">myapp</span><span style=\"color:#710\">'</span></span>, []);\n</pre></td>\n</tr></table>\n\n        </div>\nIn previous, you can update the <span style=\"font-weight: bold;\">{{breadcrumb}}</span> from <span style=\"font-weight: bold;\">page:done</span> event. The only problem is that you need to call Angular.js outside its scope. And the answer is easy like this:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/javascript.png' alt='javascript'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n<a href=\"#n8\" name=\"n8\">8</a>\n<a href=\"#n9\" name=\"n9\">9</a>\n<strong><a href=\"#n10\" name=\"n10\">10</a></strong>\n<a href=\"#n11\" name=\"n11\">11</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#369;font-weight:bold\">$</span>(document).ready(<span style=\"color:#080;font-weight:bold\">function</span>() {\n<span style=\"color:#F00;background-color:#FAA\"> </span> window.wiselinks = <span style=\"color:#080;font-weight:bold\">new</span> Wiselinks(<span style=\"color:#369;font-weight:bold\">$</span>(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">#content</span><span style=\"color:#710\">'</span></span>));\n\n<span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#369;font-weight:bold\">$</span>(document).off(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">page:done</span><span style=\"color:#710\">'</span></span>).on(\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">page:done</span><span style=\"color:#710\">'</span></span>,\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#080;font-weight:bold\">function</span>(event, <span style=\"color:#369;font-weight:bold\">$target</span>, render, url) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> s = angular.element(<span style=\"color:#369;font-weight:bold\">$</span>(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">html</span><span style=\"color:#710\">'</span></span>)).scope();\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> s.<span style=\"color:#369;font-weight:bold\">$apply</span>(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">breadcrumb= &quot;</span><span style=\"color:#710\">'</span></span> url <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">&quot;</span><span style=\"color:#710\">'</span></span>);\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> }\n<span style=\"color:#F00;background-color:#FAA\"> </span> );\n});\n</pre></td>\n</tr></table>\n\n        </div>\nHere, we retrieve the scope from HTML element, then use <span style=\"font-weight: bold;\">$apply()</span> to update the UI.<br><br>If you have directive in pages loaded by wiselinks like this:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/erb.png' alt='erb'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#777\">&lt;!-- in your partial --&gt;</span>\n<span style=\"color:#070;font-weight:bold\">&lt;div</span> <span style=\"color:#b48\">id</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">present</span><span style=\"color:#710\">'</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span>\n  <span style=\"color:#070;font-weight:bold\">&lt;span</span> <span style=\"color:#b48\">data-my-directive</span><span style=\"color:#070;font-weight:bold\">&gt;</span>{{now}}<span style=\"color:#070;font-weight:bold\">&lt;/span&gt;</span>\n<span style=\"color:#070;font-weight:bold\">&lt;/div&gt;</span>\n</pre></td>\n</tr></table>\n\n        </div>\n\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/javascript.png' alt='javascript'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n<a href=\"#n8\" name=\"n8\">8</a>\n<a href=\"#n9\" name=\"n9\">9</a>\n<strong><a href=\"#n10\" name=\"n10\">10</a></strong>\n</pre></td>\n  <td class=\"code\"><pre>myapp.directive(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">myDirective</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#080;font-weight:bold\">function</span>(<span style=\"color:#369;font-weight:bold\">$http</span>) {\n<span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#080;font-weight:bold\">return</span> {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#606\">restrict</span>: <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">A</span><span style=\"color:#710\">'</span></span>,\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#606\">scope</span>: <span style=\"color:#069\">true</span>,\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#06B;font-weight:bold\">link</span>: <span style=\"color:#080;font-weight:bold\">function</span>(scope, element, attrs, controller) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> scope.now = <span style=\"color:#080;font-weight:bold\">new</span> Date();\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> }\n<span style=\"color:#F00;background-color:#FAA\"> </span> }\n});\n\n</pre></td>\n</tr></table>\n\n        </div>\nIt will work on full-page loading, but not wiselinks. The reason is that this directive is not compiled by Angular.js. To compile a HTML element outside scope take a little bit effort. First, we need a global controller like this:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/javascript.png' alt='javascript'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n</pre></td>\n  <td class=\"code\"><pre>myapp.controller(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">GlobalCtrl</span><span style=\"color:#710\">'</span></span>, [<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">$scope</span><span style=\"color:#710\">'</span></span>, <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">$compile</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#080;font-weight:bold\">function</span>(<span style=\"color:#369;font-weight:bold\">$scope</span>, <span style=\"color:#369;font-weight:bold\">$compile</span>) {\n<span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#369;font-weight:bold\">$scope</span>.<span style=\"color:#06B;font-weight:bold\">compile_content</span> = <span style=\"color:#080;font-weight:bold\">function</span>(data) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#369;font-weight:bold\">$compile</span>(data)(<span style=\"color:#369;font-weight:bold\">$scope</span>);\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#369;font-weight:bold\">$scope</span>.<span style=\"color:#369;font-weight:bold\">$apply</span>();\n<span style=\"color:#F00;background-color:#FAA\"> </span> }\n}]);\n</pre></td>\n</tr></table>\n\n        </div>\nIn this controller, we injects <span style=\"font-weight: bold;\">$compile</span> service. Then add this controller to html tag:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/erb.png' alt='erb'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#070;font-weight:bold\">&lt;html</span> <span style=\"color:#b48\">ng-app</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">myapp</span><span style=\"color:#710\">'</span></span> <span style=\"color:#b48\">ng-controller</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">GlobalCtrl</span><span style=\"color:#710\">'</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span>\n</pre></td>\n</tr></table>\n\n        </div>\nNow, you can call <span style=\"font-weight: bold;\">$scope.compile_content(data)</span> to compile elements loaded by wiselinks.<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/javascript.png' alt='javascript'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n<a href=\"#n8\" name=\"n8\">8</a>\n<a href=\"#n9\" name=\"n9\">9</a>\n<strong><a href=\"#n10\" name=\"n10\">10</a></strong>\n<a href=\"#n11\" name=\"n11\">11</a>\n<a href=\"#n12\" name=\"n12\">12</a>\n<a href=\"#n13\" name=\"n13\">13</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#369;font-weight:bold\">$</span>(document).ready(<span style=\"color:#080;font-weight:bold\">function</span>() {\n<span style=\"color:#F00;background-color:#FAA\"> </span> window.wiselinks = <span style=\"color:#080;font-weight:bold\">new</span> Wiselinks(<span style=\"color:#369;font-weight:bold\">$</span>(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">#content</span><span style=\"color:#710\">'</span></span>));\n\n<span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#369;font-weight:bold\">$</span>(document).off(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">page:done</span><span style=\"color:#710\">'</span></span>).on(\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">page:done</span><span style=\"color:#710\">'</span></span>,\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#080;font-weight:bold\">function</span>(event, <span style=\"color:#369;font-weight:bold\">$target</span>, render, url) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> console.log(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">done:</span><span style=\"color:#710\">&quot;</span></span> url <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\"> to </span><span style=\"color:#710\">&quot;</span></span> <span style=\"color:#369;font-weight:bold\">$target</span>.selector <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\"> within </span><span style=\"color:#710\">&quot;</span></span> render)\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> s = angular.element(<span style=\"color:#369;font-weight:bold\">$</span>(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">html</span><span style=\"color:#710\">'</span></span>)).scope();\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> p = <span style=\"color:#369;font-weight:bold\">$</span>(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">#present</span><span style=\"color:#710\">'</span></span>);\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> s.compile_content(p.contents());\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> }\n<span style=\"color:#F00;background-color:#FAA\"> </span> );\n}); \n</pre></td>\n</tr></table>\n\n        </div>\n", pretty_preview: "<a href=\"https://github.com/rails/turbolinks/\"><code>Turbolinks</code></a> is a new feature of Rails 4 to improve loading of web pages. But it by default works on every links, unless otherwise opt-out. If you uses some javascript frameworks which are not compatible with turbolinks, it might not worth the effort to use turbo...<br>"},
  {id: 369, name: "how to order regardless on the order defined on a has_many", category_id: 3, body: "<p>Say you have this:<br></p>\n<pre><code class=\"ruby\">class Whatever &lt; ActiveRecord::Base<br>  has_many :somethings, :order =&gt; \"something ASC\"<br>end</code></pre>Now, everytime you'd access the somethings association, you'd get the order based on something. Sometimes, you want to apply a different order, maybe with a scope. Here's how you could do this:<br><pre><code class=\"ruby\">scope :some_scope, reorder(\"some_other_field ASC\")</code></pre>", created_at: "2013-12-13 19:56:09", updated_at: "2013-12-13 19:56:09", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "<p>Say you have this:<br></p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#080;font-weight:bold\">class</span> <span style=\"color:#B06;font-weight:bold\">Whatever</span> &lt; <span style=\"color:#036;font-weight:bold\">ActiveRecord</span>::<span style=\"color:#036;font-weight:bold\">Base</span>\n  has_many <span style=\"color:#A60\">:somethings</span>, <span style=\"color:#A60\">:order</span> =&gt; <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">something ASC</span><span style=\"color:#710\">&quot;</span></span>\n<span style=\"color:#080;font-weight:bold\">end</span>\n</pre></td>\n</tr></table>\n\n        </div>\nNow, everytime you'd access the somethings association, you'd get the order based on something. Sometimes, you want to apply a different order, maybe with a scope. Here's how you could do this:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n</pre></td>\n  <td class=\"code\"><pre>scope <span style=\"color:#A60\">:some_scope</span>, reorder(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">some_other_field ASC</span><span style=\"color:#710\">&quot;</span></span>)\n</pre></td>\n</tr></table>\n\n        </div>\n", pretty_preview: "<p>Say you have this:<br></p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <div class=\"CodeRay\">\n  <div class=\"code\"><pre><span style=\"color:#080;font-weight:bold\">class</span> <span style=\"color:#B06;font-weight:bold\">Whatever</span> &lt; <span style=\"color:#036;font-weight:bold\">ActiveRecord</span>::<span style=\"color:#036;font-weight:bold\">Base</span>\n  has_many <span style=\"color:#A60\">:somethings</span>, <span style=\"color:#A60\">:order</span> =&gt; <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">something ASC</span><span style=\"color:#710\">&quot;</span></span>\n<span style=\"color:#080;font-weight:bold\">end</span>\n</pre></div>\n</div>\n\n        </div>\nNow, everytime you'd access the somethings association, you'd get the order based on something. Sometimes, you want to apply a different order, m...<br>"},
  {id: 370, name: "rails integration session cookies", category_id: 3, body: "<pre><code class=\"ruby\">app.post_via_redirect \"/active_admin/login\", \"admin_user[password]\" =&gt; \"some_password\", \"admin_user[email]\" =&gt; \"some@mail.com\"</code></pre>Use the response of the server:<br><pre><code class=\"ruby\">app.response </code></pre>Particularly the Set-Cookie header:<br><pre><code class=\"ruby\">\"Set-Cookie\"=&gt;<br>    \"some_cookie; path=/; HttpOnly\"<br>app.get \"/some_protected_admin_page\",{},{\"COOKIE\" =&gt; \"some_cookie; path=/; HttpOnly\"}</code></pre>", created_at: "2013-12-13 19:56:09", updated_at: "2013-12-13 19:56:09", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n</pre></td>\n  <td class=\"code\"><pre>app.post_via_redirect <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">/active_admin/login</span><span style=\"color:#710\">&quot;</span></span>, <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">admin_user[password]</span><span style=\"color:#710\">&quot;</span></span> =&gt; <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">some_password</span><span style=\"color:#710\">&quot;</span></span>, <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">admin_user[email]</span><span style=\"color:#710\">&quot;</span></span> =&gt; <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">some@mail.com</span><span style=\"color:#710\">&quot;</span></span>\n</pre></td>\n</tr></table>\n\n        </div>\nUse the response of the server:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n</pre></td>\n  <td class=\"code\"><pre>app.response \n</pre></td>\n</tr></table>\n\n        </div>\nParticularly the Set-Cookie header:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">Set-Cookie</span><span style=\"color:#710\">&quot;</span></span>=&gt;\n    <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">some_cookie; path=/; HttpOnly</span><span style=\"color:#710\">&quot;</span></span>\napp.get <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">/some_protected_admin_page</span><span style=\"color:#710\">&quot;</span></span>,{},{<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">COOKIE</span><span style=\"color:#710\">&quot;</span></span> =&gt; <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">some_cookie; path=/; HttpOnly</span><span style=\"color:#710\">&quot;</span></span>}\n</pre></td>\n</tr></table>\n\n        </div>\n", pretty_preview: "        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <div class=\"CodeRay\">\n  <div class=\"code\"><pre>app.post_via_redirect <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">/active_admin/login</span><span style=\"color:#710\">&quot;</span></span>, <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">admin_user[password]</span><span style=\"color:#710\">&quot;</span></span> =&gt; <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">some_password</span><span style=\"color:#710\">&quot;</span></span>, <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">admin_user[email]</span><span style=\"color:#710\">&quot;</span></span> =&gt; <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">some@mail.com</span><span style=\"color:#710\">&quot;</span></span>\n</pre></div>\n</div>\n\n        </div>\nUse the response of the server:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <div class=\"CodeRay\">\n  <div class=\"code\"><pre>app.response \n</pre></div>\n</div>\n\n        </div>\nParticularly the Set-Cookie header:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <div class=\"CodeRay\">\n  <div class=\"code\"><pre><span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">Set-Cookie</span><span style=\"color:#710\">&quot;</span></span>=&gt;\n    <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">some_cookie; path=/; HttpOn...\n\n</span></span></pre></div>\n</div>\n\n        </div>\n"},
  {id: 371, name: "Tutorials on Angular.js and Rails", category_id: 3, body: "<p>Many web applications use Rails as backend and client-side javascript for user interface. While there are many choices of javascript frameworks, I found <a href=\"http://angularjs.org/\"><code>Angular.js</code></a> is small enough to use with Rails. Here is a serials on making a todo list by <a href=\"http://angularjs.org/\"><code>Angular.js</code></a> and Rails.<br><br>First, generate a basic Rails application called <span style=\"font-weight: bold;\">momentum</span>:<br></p>\n<pre><code class=\"bash\">rails new momentum --skip-bundle -T<br>cd momentum/<br>rails g scaffold task title:string finished:boolean<br>rake db:create<br>rake db:migrate<br>rm public/index.html</code></pre>Edit <code>config/routes.rb</code> to have root point to 'tasks#index':<br><pre><code class=\"ruby\">root :to =&gt; 'tasks#index'</code></pre>Then start the web server by running 'rails server' and point your web browser to localhost:3000. Now, you have a very basic rails application. To use its JSON facility, just add '.json' extension to the url, for example, localhost:3000/tasks.json. (Be sure to add new tasks first to see the list). To begin with Angular.js, copy this file into <code>app/assets/javascripts</code>/:<br><br>angular-1.0.1.min.js<br><br>In <code>app/views/layout/application.html.erb</code>, add Angular.js:<br><pre><code class=\"erb\">&lt;html ng-app&gt; </code></pre>Then write the tasks controller to angular.js in <code>app/assets/javascripts/tasks_controller.js</code>:<br><pre><code class=\"javascript\">function TasksCtrl($scope) {<br>  $scope.tasks = [<br>    {\"title\":\"Buy milk\", \"finished\":false},<br>    {\"title\":\"Wash car\", \"finished\":true}<br>  ]<br>} </code></pre>This provides a hard-coded data for now. Finally, in <code>app/views/tasks/index.html.erb</code>, add:<br><pre><code class=\"erb\">&lt;div ng-controller='TasksCtrl'&gt;<br>  &lt;ul&gt;<br>    &lt;li ng-repeat='task in tasks'&gt;<br>    {{task.title}}, {{task.finished}}<br>    &lt;/li&gt;<br>  &lt;/ul&gt;<br>&lt;/div&gt;</code></pre>This TasksCtrl in views refers to the one defined in tasks_controller.js. Therefore, tasks in view refers to <code>$scope.tasks</code> defined in controller. When you check localhost:3000, you will see the tasks rendered by Angular.js. Now, We want the real data from Rails. The easily way is to $http service from angular.js:<br><pre><code class=\"javascript\">/* app/assets/javascripts/tasks_controller.js */<br><br>function TasksCtrl($scope, $http) {<br>  $http.get('/tasks.json').success(function(data) {<br>    $scope.tasks = data;<br>    console.log(data);<br>  });<br>}</code></pre>It fetches the tasks.json when loaded. This $http is a service of Angular.js. We can write our own services later to fit Rails convention better.<br>", created_at: "2013-12-13 19:56:09", updated_at: "2013-12-13 19:56:09", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "<p>Many web applications use Rails as backend and client-side javascript for user interface. While there are many choices of javascript frameworks, I found <a href=\"http://angularjs.org/\"><code>Angular.js</code></a> is small enough to use with Rails. Here is a serials on making a todo list by <a href=\"http://angularjs.org/\"><code>Angular.js</code></a> and Rails.<br><br>First, generate a basic Rails application called <span style=\"font-weight: bold;\">momentum</span>:<br></p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/bash.png' alt='bash'/>\n              </div>\n          <pre><code class=\"bash\">rails new momentum --skip-bundle -T<br>cd momentum/<br>rails g scaffold task title:string finished:boolean<br>rake db:create<br>rake db:migrate<br>rm public/index.html</code></pre>\n        </div>\nEdit <code>config/routes.rb</code> to have root point to 'tasks#index':<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n</pre></td>\n  <td class=\"code\"><pre>root <span style=\"color:#A60\">:to</span> =&gt; <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">tasks#index</span><span style=\"color:#710\">'</span></span>\n</pre></td>\n</tr></table>\n\n        </div>\nThen start the web server by running 'rails server' and point your web browser to localhost:3000. Now, you have a very basic rails application. To use its JSON facility, just add '.json' extension to the url, for example, localhost:3000/tasks.json. (Be sure to add new tasks first to see the list). To begin with Angular.js, copy this file into <code>app/assets/javascripts</code>/:<br><br>angular-1.0.1.min.js<br><br>In <code>app/views/layout/application.html.erb</code>, add Angular.js:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/erb.png' alt='erb'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#070;font-weight:bold\">&lt;html</span> <span style=\"color:#b48\">ng-app</span><span style=\"color:#070;font-weight:bold\">&gt;</span> \n</pre></td>\n</tr></table>\n\n        </div>\nThen write the tasks controller to angular.js in <code>app/assets/javascripts/tasks_controller.js</code>:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/javascript.png' alt='javascript'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#080;font-weight:bold\">function</span> <span style=\"color:#06B;font-weight:bold\">TasksCtrl</span>(<span style=\"color:#369;font-weight:bold\">$scope</span>) {\n<span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#369;font-weight:bold\">$scope</span>.tasks = [\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> {<span style=\"color:#606\"><span style=\"color:#404\">&quot;</span><span>title</span><span style=\"color:#404\">&quot;</span></span>:<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">Buy milk</span><span style=\"color:#710\">&quot;</span></span>, <span style=\"color:#606\"><span style=\"color:#404\">&quot;</span><span>finished</span><span style=\"color:#404\">&quot;</span></span>:<span style=\"color:#069\">false</span>},\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> {<span style=\"color:#606\"><span style=\"color:#404\">&quot;</span><span>title</span><span style=\"color:#404\">&quot;</span></span>:<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">Wash car</span><span style=\"color:#710\">&quot;</span></span>, <span style=\"color:#606\"><span style=\"color:#404\">&quot;</span><span>finished</span><span style=\"color:#404\">&quot;</span></span>:<span style=\"color:#069\">true</span>}\n<span style=\"color:#F00;background-color:#FAA\"> </span> ]\n} \n</pre></td>\n</tr></table>\n\n        </div>\nThis provides a hard-coded data for now. Finally, in <code>app/views/tasks/index.html.erb</code>, add:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/erb.png' alt='erb'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#070;font-weight:bold\">&lt;div</span> <span style=\"color:#b48\">ng-controller</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">TasksCtrl</span><span style=\"color:#710\">'</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span>\n  <span style=\"color:#070;font-weight:bold\">&lt;ul&gt;</span>\n    <span style=\"color:#070;font-weight:bold\">&lt;li</span> <span style=\"color:#b48\">ng-repeat</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">task in tasks</span><span style=\"color:#710\">'</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span>\n    {{task.title}}, {{task.finished}}\n    <span style=\"color:#070;font-weight:bold\">&lt;/li&gt;</span>\n  <span style=\"color:#070;font-weight:bold\">&lt;/ul&gt;</span>\n<span style=\"color:#070;font-weight:bold\">&lt;/div&gt;</span>\n</pre></td>\n</tr></table>\n\n        </div>\nThis TasksCtrl in views refers to the one defined in tasks_controller.js. Therefore, tasks in view refers to <code>$scope.tasks</code> defined in controller. When you check localhost:3000, you will see the tasks rendered by Angular.js. Now, We want the real data from Rails. The easily way is to $http service from angular.js:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/javascript.png' alt='javascript'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n<a href=\"#n8\" name=\"n8\">8</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#777\">/* app/assets/javascripts/tasks_controller.js */</span>\n\n<span style=\"color:#080;font-weight:bold\">function</span> <span style=\"color:#06B;font-weight:bold\">TasksCtrl</span>(<span style=\"color:#369;font-weight:bold\">$scope</span>, <span style=\"color:#369;font-weight:bold\">$http</span>) {\n<span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#369;font-weight:bold\">$http</span>.get(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">/tasks.json</span><span style=\"color:#710\">'</span></span>).success(<span style=\"color:#080;font-weight:bold\">function</span>(data) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#369;font-weight:bold\">$scope</span>.tasks = data;\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> console.log(data);\n<span style=\"color:#F00;background-color:#FAA\"> </span> });\n}\n</pre></td>\n</tr></table>\n\n        </div>\nIt fetches the tasks.json when loaded. This $http is a service of Angular.js. We can write our own services later to fit Rails convention better.<br>", pretty_preview: "<p>Many web applications use Rails as backend and client-side javascript for user interface. While there are many choices of javascript frameworks, I found <a href=\"http://angularjs.org/\"><code>Angular.js</code></a> is small enough to use with Rails. Here is a serials on making a todo list by <a href=\"http://angularjs.org/\"><code>Angular.js</code></a> and Rails.<br><br>First, g...<span style=\"font-weight: bold;\">...</span></p>"},
  {id: 372, name: "Best Practice of Using Angular.js with Rails: Views", category_id: 3, body: "<p>Angular.js can easily manipulate views, in many cases, better than rails. If possible, you should move some logic from Rails server side to Angular.js on client side.<br><br><font style=\"font-size: 18px;\"><span style=\"font-weight: bold;\">CSS attributes</span></font><br><br>The powerful <a href=\"http://docs.angularjs.org/api/ng.directive:ngClass\"><code>ngClass</code></a> allows you to change classes of element easily. For example, if you have a menu and use Bootstrap to highlight the selected action like this:<br></p>\n<pre><code class=\"html\">&lt;ul class=\"nav nav-tabs\"&gt;<br>  &lt;li class=\"active\"&gt;<br>    &lt;a href=\"#\"&gt;Inbox&lt;/a&gt;<br>  &lt;/li&gt;<br>  &lt;li&gt;&lt;a href=\"#\"&gt;Outbox&lt;/a&gt;&lt;/li&gt;<br>  &lt;li&gt;&lt;a href=\"#\"&gt;Draft&lt;/a&gt;&lt;/li&gt;<br>&lt;/ul&gt;</code></pre>You need to decide which <span style=\"font-weight: bold;\">li</span> element has the class <span style=\"font-weight: bold;\">active</span>. In rails, you might do something like this:<br><pre><code class=\"erb\">&lt;ul class=\"nav nav-tabs\"&gt;<br>  &lt;li class='&lt;%= current_page?(:controller =&gt; :mails, :action =&gt; :inbox) ? 'active' : ''&gt;<br>    &lt;%= link_to mails_inbox_path, 'Inbox' %&gt;<br>  &lt;/li&gt;<br>  &lt;li class='&lt;%= current_page?(:controller =&gt; :mails, :action =&gt; :outbox) ? 'active' : ''&gt;<br>    &lt;%= link_to mails_outbox_path, 'Outbox' %&gt;<br>  &lt;/li&gt;<br>  &lt;li class='&lt;%= current_page?(:controller =&gt; :mails, :action =&gt; :draft) ? 'active' : ''&gt;<br>    &lt;%= link_to mails_draft_path, 'Draft' %&gt;<br>  &lt;/li&gt;<br>&lt;/ul&gt;</code></pre>You have to evaluate the <code>current_page?</code> for each menu item, and this menu cannot be cached. To move this logic to client side, you can try this:<br><pre><code class=\"ruby\"># app/controllers/mails_controller.rb<br>def inbox<br>  ...<br>  @current_page = :inbox<br>  ...<br>end<br><br>def outbox<br>  ...<br>  @current_page = :outbox<br>  ...<br>end<br><br>def draft<br>  ...<br>  @current_page = :draft<br>  ...<br>end</code></pre>\n<pre><code class=\"erb\">&lt;div data-ng-init='mailbox.selected = \"&lt;%= @current_page %&gt;\"'&gt;<br>&lt;ul class=\"nav nav-tabs\"&gt;<br>  &lt;li data-ng-class='{active: (mailbox.selected == \"inbox\")}'&gt;<br>    &lt;%= link_to mails_inbox_path, 'Inbox' %&gt;<br>  &lt;/li&gt;<br>  &lt;li data-ng-class='{active: (mailbox.selected == \"outbox\")}'&gt;<br>    &lt;%= link_to mails_outbox_path, 'Outbox' %&gt;<br>  &lt;/li&gt;<br>  &lt;li data-ng-class='{active: (mailbox.selected == \"draft\")}'&gt;<br>    &lt;%= link_to mails_draft_path, 'Draft' %&gt;<br>  &lt;/li&gt;<br>&lt;/ul&gt;<br>&lt;/div&gt;</code></pre>The class will be <span style=\"font-weight: bold;\">active</span> only when the expression is evaluated to be true. You can read more on at Angular.js <a href=\"http://docs.angularjs.org/misc/faq\"><code>FAQ</code></a> (find the section on ng-class). And since this menu has no dynamic content from Rails, you can cache the <span style=\"font-weight: bold;\">ul</span> element easily (not the <span style=\"font-weight: bold;\">div</span> with data-ng-init).<br><br><font style=\"font-size: 18px;\"><span style=\"font-weight: bold;\">Partials</span></font><br><br>Both Rails and Angular.js provides ways to render a piece of views as partials. It is better to keep localized string on the server side, thus, you should use Rails to render partials. This such case, Angular.js is only used to manipulate the HTML like this:<br><pre><code class=\"erb\">&lt;!-- app/views/mails/index.html.erb --&gt;<br>&lt;%= render @mails %&gt;</code></pre>\n<pre><code class=\"erb\">&lt;!-- app/views/mails/_mail.html.erb --&gt;<br>&lt;div data-mail&gt;<br>&lt;%= mail.title %&gt;<br>&lt;% if mail.has_reply? %&gt;<br>  &lt;i class='icon-ok'&gt;&lt;/i&gt;<br>&lt;% end %&gt;<br>&lt;br/&gt;<br>&lt;%= I18n.t('mail.from') %&gt;: &lt;%= mail.sender %&gt;<br>&lt;/div&gt;</code></pre>\n<pre><code class=\"javascript\">myapp.directive('mail', function($http) {<br>  return {<br>    restrict: 'A',<br>    scope: true,<br>    controller: function($scope, $attrs) {<br>    },<br>    link: function(scope, element, attrs) {<br>      element.popover(...); // To add popover or you can do something else<br>    }<br>  }<br>});</code></pre>To better use Angular.js, you can use <code>ngRepeat</code> to render collection by ajax approach like this:<br><pre><code class=\"erb\">&lt;!-- app/views/mails/index.html.erb --&gt;<br>&lt;div data-mails&gt;<br>&lt;div data-ng-repeat='mail in mails'&gt;<br>  {{mail.title}}<br>  &lt;i class='icon-ok' data-ng-show=\"mail.replied\"&gt;&lt;/i&gt;<br>  &lt;br/&gt;<br>  &lt;%= I18n.t('mail.from') %&gt;: {{mail.sender}}<br>&lt;/div&gt;<br>&lt;/div&gt;</code></pre>\n<pre><code class=\"javascript\">myapp.directive('mails', function($http) {<br>  return {<br>    restrict: 'A',<br>    scope: true,<br>    controller: function($scope, $attrs) {<br>      $http.get('/mails'<br>         ).success(function(data) {<br>           $scope.mails = data;<br>        }).error(function(data) {<br>           console.log('error: ' data);<br>        });<br>    },<br>    link: function(scope, element, attrs) {<br>    }<br>  }<br>});</code></pre>And we use jbuilder to return json:<br><pre><code class=\"ruby\"># app/controllers/mails_controller.rb<br>def inbox<br>  @mails = Mail.all<br>  @current_page = :inbox<br>  respond_to do |format|<br>    format.html<br>    format.json<br>  end<br>end</code></pre>\n<pre><code class=\"ruby\"># app/views/mails/index.json.jbuilder<br>json.array!(@mails) do |mail|<br>  json.cache! mail do<br>    json.title mail.title<br>    json.sender mail.sender<br>    json.replied mail.has_reply?<br>  end<br>end</code></pre>There is a caveat here. To render a page here, it costs two request to server: first for index.html and second for index.json. Another caveat is that if you use <code><a href=\"https://github.com/amatsuda/kaminari\">kaminari</a></code> for pagination, you need to keep @mails available for both index.html and index.json.<br><br>You can also use <span style=\"font-weight: bold;\">templateUrl</span> in <code><a href=\"http://docs.angularjs.org/guide/directive\">directives</a></code> and <a href=\"http://docs.angularjs.org/api/ng.directive:ngInclude\"><code>ngInclude</code></a> to make a partial reusable by retrieving partials from server and render them by Angular.js. These partials can be properly localized, but you pay the price for a HTTP request to retrieve the template. For rendering a collection, it might be worth the price.<br><pre><code class=\"erb\">&lt;!-- app/views/mails/index.html.erb --&gt;<br>&lt;div data-mails&gt;<br>&lt;div data-ng-repeat='mail in mails'&gt;<br>  &lt;div data-ng-include src='/mails/mail'&gt;&lt;/div&gt;<br>&lt;/div&gt;<br>&lt;/div&gt;</code></pre>\n<pre><code class=\"erb\">&lt;!-- app/views/mails/mail.html.erb --&gt;<br>{{mail.title}}<br>&lt;i class='icon-ok' data-ng-show=\"mail.replied\"&gt;&lt;/i&gt;<br>&lt;br/&gt;<br>&lt;%= I18n.t('mail.from') %&gt;: {{mail.sender}}</code></pre>Be sure to render without layout:<br><pre><code class=\"ruby\"># app/controllers/mails_controller.rb<br>def mail<br>  respond_to do |format|<br>    format.html { :layout =&gt; false }<br>  end<br>end</code></pre>", created_at: "2013-12-13 19:56:09", updated_at: "2013-12-13 19:56:09", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "<p>Angular.js can easily manipulate views, in many cases, better than rails. If possible, you should move some logic from Rails server side to Angular.js on client side.<br><br><font style=\"font-size: 18px;\"><span style=\"font-weight: bold;\">CSS attributes</span></font><br><br>The powerful <a href=\"http://docs.angularjs.org/api/ng.directive:ngClass\"><code>ngClass</code></a> allows you to change classes of element easily. For example, if you have a menu and use Bootstrap to highlight the selected action like this:<br></p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/html.png' alt='html'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#070;font-weight:bold\">&lt;ul</span> <span style=\"color:#b48\">class</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">nav nav-tabs</span><span style=\"color:#710\">&quot;</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span>\n  <span style=\"color:#070;font-weight:bold\">&lt;li</span> <span style=\"color:#b48\">class</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">active</span><span style=\"color:#710\">&quot;</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span>\n    <span style=\"color:#070;font-weight:bold\">&lt;a</span> <span style=\"color:#b48\">href</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">#</span><span style=\"color:#710\">&quot;</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span>Inbox<span style=\"color:#070;font-weight:bold\">&lt;/a&gt;</span>\n  <span style=\"color:#070;font-weight:bold\">&lt;/li&gt;</span>\n  <span style=\"color:#070;font-weight:bold\">&lt;li&gt;</span><span style=\"color:#070;font-weight:bold\">&lt;a</span> <span style=\"color:#b48\">href</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">#</span><span style=\"color:#710\">&quot;</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span>Outbox<span style=\"color:#070;font-weight:bold\">&lt;/a&gt;</span><span style=\"color:#070;font-weight:bold\">&lt;/li&gt;</span>\n  <span style=\"color:#070;font-weight:bold\">&lt;li&gt;</span><span style=\"color:#070;font-weight:bold\">&lt;a</span> <span style=\"color:#b48\">href</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">#</span><span style=\"color:#710\">&quot;</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span>Draft<span style=\"color:#070;font-weight:bold\">&lt;/a&gt;</span><span style=\"color:#070;font-weight:bold\">&lt;/li&gt;</span>\n<span style=\"color:#070;font-weight:bold\">&lt;/ul&gt;</span>\n</pre></td>\n</tr></table>\n\n        </div>\nYou need to decide which <span style=\"font-weight: bold;\">li</span> element has the class <span style=\"font-weight: bold;\">active</span>. In rails, you might do something like this:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/erb.png' alt='erb'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n<a href=\"#n8\" name=\"n8\">8</a>\n<a href=\"#n9\" name=\"n9\">9</a>\n<strong><a href=\"#n10\" name=\"n10\">10</a></strong>\n<a href=\"#n11\" name=\"n11\">11</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#070;font-weight:bold\">&lt;ul</span> <span style=\"color:#b48\">class</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">nav nav-tabs</span><span style=\"color:#710\">&quot;</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span>\n  <span style=\"color:#070;font-weight:bold\">&lt;li</span> <span style=\"color:#b48\">class</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span></span><span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> current_page?(<span style=\"color:#A60\">:controller</span> =&gt; <span style=\"color:#A60\">:mails</span>, <span style=\"color:#A60\">:action</span> =&gt; <span style=\"color:#A60\">:inbox</span>) ? <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">active</span><span style=\"color:#710\">'</span></span> : <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#710\">'</span></span>&gt;\n    &lt;<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">%=</span><span style=\"color:#D20\"> link_to mails_inbox_path, 'Inbox' </span></span><span style=\"font-weight:bold;color:#666\">%&gt;</span></span><span style=\"background-color:hsla(0,100%,50%,0.05)\">\n<span style=\"color:#D20\">  &lt;/li</span></span><span style=\"color:#F00;background-color:#FAA\">&gt;</span>\n  <span style=\"color:#070;font-weight:bold\">&lt;li</span> <span style=\"color:#b48\">class</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span></span><span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> current_page?(<span style=\"color:#A60\">:controller</span> =&gt; <span style=\"color:#A60\">:mails</span>, <span style=\"color:#A60\">:action</span> =&gt; <span style=\"color:#A60\">:outbox</span>) ? <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">active</span><span style=\"color:#710\">'</span></span> : <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#710\">'</span></span>&gt;\n    &lt;<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">%=</span><span style=\"color:#D20\"> link_to mails_outbox_path, 'Outbox' </span></span><span style=\"font-weight:bold;color:#666\">%&gt;</span></span><span style=\"background-color:hsla(0,100%,50%,0.05)\">\n<span style=\"color:#D20\">  &lt;/li</span></span><span style=\"color:#F00;background-color:#FAA\">&gt;</span>\n  <span style=\"color:#070;font-weight:bold\">&lt;li</span> <span style=\"color:#b48\">class</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span></span><span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> current_page?(<span style=\"color:#A60\">:controller</span> =&gt; <span style=\"color:#A60\">:mails</span>, <span style=\"color:#A60\">:action</span> =&gt; <span style=\"color:#A60\">:draft</span>) ? <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">active</span><span style=\"color:#710\">'</span></span> : <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#710\">'</span></span>&gt;\n    &lt;<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">%=</span><span style=\"color:#D20\"> link_to mails_draft_path, 'Draft' </span></span><span style=\"font-weight:bold;color:#666\">%&gt;</span></span><span style=\"background-color:hsla(0,100%,50%,0.05)\">\n<span style=\"color:#D20\">  &lt;/li</span></span><span style=\"color:#F00;background-color:#FAA\">&gt;</span>\n<span style=\"color:#070;font-weight:bold\">&lt;/ul&gt;</span>\n</pre></td>\n</tr></table>\n\n        </div>\nYou have to evaluate the <code>current_page?</code> for each menu item, and this menu cannot be cached. To move this logic to client side, you can try this:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n<a href=\"#n8\" name=\"n8\">8</a>\n<a href=\"#n9\" name=\"n9\">9</a>\n<strong><a href=\"#n10\" name=\"n10\">10</a></strong>\n<a href=\"#n11\" name=\"n11\">11</a>\n<a href=\"#n12\" name=\"n12\">12</a>\n<a href=\"#n13\" name=\"n13\">13</a>\n<a href=\"#n14\" name=\"n14\">14</a>\n<a href=\"#n15\" name=\"n15\">15</a>\n<a href=\"#n16\" name=\"n16\">16</a>\n<a href=\"#n17\" name=\"n17\">17</a>\n<a href=\"#n18\" name=\"n18\">18</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#777\"># app/controllers/mails_controller.rb</span>\n<span style=\"color:#080;font-weight:bold\">def</span> <span style=\"color:#06B;font-weight:bold\">inbox</span>\n  ...\n  <span style=\"color:#33B\">@current_page</span> = <span style=\"color:#A60\">:inbox</span>\n  ...\n<span style=\"color:#080;font-weight:bold\">end</span>\n\n<span style=\"color:#080;font-weight:bold\">def</span> <span style=\"color:#06B;font-weight:bold\">outbox</span>\n  ...\n  <span style=\"color:#33B\">@current_page</span> = <span style=\"color:#A60\">:outbox</span>\n  ...\n<span style=\"color:#080;font-weight:bold\">end</span>\n\n<span style=\"color:#080;font-weight:bold\">def</span> <span style=\"color:#06B;font-weight:bold\">draft</span>\n  ...\n  <span style=\"color:#33B\">@current_page</span> = <span style=\"color:#A60\">:draft</span>\n  ...\n<span style=\"color:#080;font-weight:bold\">end</span>\n</pre></td>\n</tr></table>\n\n        </div>\n\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/erb.png' alt='erb'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n<a href=\"#n8\" name=\"n8\">8</a>\n<a href=\"#n9\" name=\"n9\">9</a>\n<strong><a href=\"#n10\" name=\"n10\">10</a></strong>\n<a href=\"#n11\" name=\"n11\">11</a>\n<a href=\"#n12\" name=\"n12\">12</a>\n<a href=\"#n13\" name=\"n13\">13</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#070;font-weight:bold\">&lt;div</span> <span style=\"color:#b48\">data-ng-init</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">mailbox.selected = &quot;</span></span><span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> <span style=\"color:#33B\">@current_page</span> <span style=\"font-weight:bold;color:#666\">%&gt;</span></span><span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#D20\">&quot;</span><span style=\"color:#710\">'</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span>\n<span style=\"color:#070;font-weight:bold\">&lt;ul</span> <span style=\"color:#b48\">class</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">nav nav-tabs</span><span style=\"color:#710\">&quot;</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span>\n  <span style=\"color:#070;font-weight:bold\">&lt;li</span> <span style=\"color:#b48\">data-ng-class</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">{active: (mailbox.selected == &quot;inbox&quot;)}</span><span style=\"color:#710\">'</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span>\n    <span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> link_to mails_inbox_path, <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">Inbox</span><span style=\"color:#710\">'</span></span> <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>\n  <span style=\"color:#070;font-weight:bold\">&lt;/li&gt;</span>\n  <span style=\"color:#070;font-weight:bold\">&lt;li</span> <span style=\"color:#b48\">data-ng-class</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">{active: (mailbox.selected == &quot;outbox&quot;)}</span><span style=\"color:#710\">'</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span>\n    <span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> link_to mails_outbox_path, <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">Outbox</span><span style=\"color:#710\">'</span></span> <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>\n  <span style=\"color:#070;font-weight:bold\">&lt;/li&gt;</span>\n  <span style=\"color:#070;font-weight:bold\">&lt;li</span> <span style=\"color:#b48\">data-ng-class</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">{active: (mailbox.selected == &quot;draft&quot;)}</span><span style=\"color:#710\">'</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span>\n    <span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> link_to mails_draft_path, <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">Draft</span><span style=\"color:#710\">'</span></span> <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>\n  <span style=\"color:#070;font-weight:bold\">&lt;/li&gt;</span>\n<span style=\"color:#070;font-weight:bold\">&lt;/ul&gt;</span>\n<span style=\"color:#070;font-weight:bold\">&lt;/div&gt;</span>\n</pre></td>\n</tr></table>\n\n        </div>\nThe class will be <span style=\"font-weight: bold;\">active</span> only when the expression is evaluated to be true. You can read more on at Angular.js <a href=\"http://docs.angularjs.org/misc/faq\"><code>FAQ</code></a> (find the section on ng-class). And since this menu has no dynamic content from Rails, you can cache the <span style=\"font-weight: bold;\">ul</span> element easily (not the <span style=\"font-weight: bold;\">div</span> with data-ng-init).<br><br><font style=\"font-size: 18px;\"><span style=\"font-weight: bold;\">Partials</span></font><br><br>Both Rails and Angular.js provides ways to render a piece of views as partials. It is better to keep localized string on the server side, thus, you should use Rails to render partials. This such case, Angular.js is only used to manipulate the HTML like this:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/erb.png' alt='erb'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#777\">&lt;!-- app/views/mails/index.html.erb --&gt;</span>\n<span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> render <span style=\"color:#33B\">@mails</span> <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>\n</pre></td>\n</tr></table>\n\n        </div>\n\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/erb.png' alt='erb'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n<a href=\"#n8\" name=\"n8\">8</a>\n<a href=\"#n9\" name=\"n9\">9</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#777\">&lt;!-- app/views/mails/_mail.html.erb --&gt;</span>\n<span style=\"color:#070;font-weight:bold\">&lt;div</span> <span style=\"color:#b48\">data-mail</span><span style=\"color:#070;font-weight:bold\">&gt;</span>\n<span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> mail.title <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>\n<span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%</span> <span style=\"color:#080;font-weight:bold\">if</span> mail.has_reply? <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>\n  <span style=\"color:#070;font-weight:bold\">&lt;i</span> <span style=\"color:#b48\">class</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">icon-ok</span><span style=\"color:#710\">'</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span><span style=\"color:#070;font-weight:bold\">&lt;/i&gt;</span>\n<span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%</span> <span style=\"color:#080;font-weight:bold\">end</span> <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>\n<span style=\"color:#070;font-weight:bold\">&lt;br</span><span style=\"color:#070;font-weight:bold\">/&gt;</span>\n<span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> <span style=\"color:#036;font-weight:bold\">I18n</span>.t(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">mail.from</span><span style=\"color:#710\">'</span></span>) <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>: <span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> mail.sender <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>\n<span style=\"color:#070;font-weight:bold\">&lt;/div&gt;</span>\n</pre></td>\n</tr></table>\n\n        </div>\n\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/javascript.png' alt='javascript'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n<a href=\"#n8\" name=\"n8\">8</a>\n<a href=\"#n9\" name=\"n9\">9</a>\n<strong><a href=\"#n10\" name=\"n10\">10</a></strong>\n<a href=\"#n11\" name=\"n11\">11</a>\n</pre></td>\n  <td class=\"code\"><pre>myapp.directive(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">mail</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#080;font-weight:bold\">function</span>(<span style=\"color:#369;font-weight:bold\">$http</span>) {\n<span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#080;font-weight:bold\">return</span> {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#606\">restrict</span>: <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">A</span><span style=\"color:#710\">'</span></span>,\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#606\">scope</span>: <span style=\"color:#069\">true</span>,\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#06B;font-weight:bold\">controller</span>: <span style=\"color:#080;font-weight:bold\">function</span>(<span style=\"color:#369;font-weight:bold\">$scope</span>, <span style=\"color:#369;font-weight:bold\">$attrs</span>) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> },\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#06B;font-weight:bold\">link</span>: <span style=\"color:#080;font-weight:bold\">function</span>(scope, element, attrs) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> element.popover(...); <span style=\"color:#777\">// To add popover or you can do something else</span>\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> }\n<span style=\"color:#F00;background-color:#FAA\"> </span> }\n});\n</pre></td>\n</tr></table>\n\n        </div>\nTo better use Angular.js, you can use <code>ngRepeat</code> to render collection by ajax approach like this:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/erb.png' alt='erb'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n<a href=\"#n8\" name=\"n8\">8</a>\n<a href=\"#n9\" name=\"n9\">9</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#777\">&lt;!-- app/views/mails/index.html.erb --&gt;</span>\n<span style=\"color:#070;font-weight:bold\">&lt;div</span> <span style=\"color:#b48\">data-mails</span><span style=\"color:#070;font-weight:bold\">&gt;</span>\n<span style=\"color:#070;font-weight:bold\">&lt;div</span> <span style=\"color:#b48\">data-ng-repeat</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">mail in mails</span><span style=\"color:#710\">'</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span>\n  {{mail.title}}\n  <span style=\"color:#070;font-weight:bold\">&lt;i</span> <span style=\"color:#b48\">class</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">icon-ok</span><span style=\"color:#710\">'</span></span> <span style=\"color:#b48\">data-ng-show</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">mail.replied</span><span style=\"color:#710\">&quot;</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span><span style=\"color:#070;font-weight:bold\">&lt;/i&gt;</span>\n  <span style=\"color:#070;font-weight:bold\">&lt;br</span><span style=\"color:#070;font-weight:bold\">/&gt;</span>\n  <span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> <span style=\"color:#036;font-weight:bold\">I18n</span>.t(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">mail.from</span><span style=\"color:#710\">'</span></span>) <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>: {{mail.sender}}\n<span style=\"color:#070;font-weight:bold\">&lt;/div&gt;</span>\n<span style=\"color:#070;font-weight:bold\">&lt;/div&gt;</span>\n</pre></td>\n</tr></table>\n\n        </div>\n\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/javascript.png' alt='javascript'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n<a href=\"#n8\" name=\"n8\">8</a>\n<a href=\"#n9\" name=\"n9\">9</a>\n<strong><a href=\"#n10\" name=\"n10\">10</a></strong>\n<a href=\"#n11\" name=\"n11\">11</a>\n<a href=\"#n12\" name=\"n12\">12</a>\n<a href=\"#n13\" name=\"n13\">13</a>\n<a href=\"#n14\" name=\"n14\">14</a>\n<a href=\"#n15\" name=\"n15\">15</a>\n<a href=\"#n16\" name=\"n16\">16</a>\n</pre></td>\n  <td class=\"code\"><pre>myapp.directive(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">mails</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#080;font-weight:bold\">function</span>(<span style=\"color:#369;font-weight:bold\">$http</span>) {\n<span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#080;font-weight:bold\">return</span> {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#606\">restrict</span>: <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">A</span><span style=\"color:#710\">'</span></span>,\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#606\">scope</span>: <span style=\"color:#069\">true</span>,\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#06B;font-weight:bold\">controller</span>: <span style=\"color:#080;font-weight:bold\">function</span>(<span style=\"color:#369;font-weight:bold\">$scope</span>, <span style=\"color:#369;font-weight:bold\">$attrs</span>) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#369;font-weight:bold\">$http</span>.get(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">/mails</span><span style=\"color:#710\">'</span></span>\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> ).success(<span style=\"color:#080;font-weight:bold\">function</span>(data) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#369;font-weight:bold\">$scope</span>.mails = data;\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> }).error(<span style=\"color:#080;font-weight:bold\">function</span>(data) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> console.log(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">error: </span><span style=\"color:#710\">'</span></span> data);\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> });\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> },\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#06B;font-weight:bold\">link</span>: <span style=\"color:#080;font-weight:bold\">function</span>(scope, element, attrs) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> }\n<span style=\"color:#F00;background-color:#FAA\"> </span> }\n});\n</pre></td>\n</tr></table>\n\n        </div>\nAnd we use jbuilder to return json:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n<a href=\"#n8\" name=\"n8\">8</a>\n<a href=\"#n9\" name=\"n9\">9</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#777\"># app/controllers/mails_controller.rb</span>\n<span style=\"color:#080;font-weight:bold\">def</span> <span style=\"color:#06B;font-weight:bold\">inbox</span>\n  <span style=\"color:#33B\">@mails</span> = <span style=\"color:#036;font-weight:bold\">Mail</span>.all\n  <span style=\"color:#33B\">@current_page</span> = <span style=\"color:#A60\">:inbox</span>\n  respond_to <span style=\"color:#080;font-weight:bold\">do</span> |format|\n    format.html\n    format.json\n  <span style=\"color:#080;font-weight:bold\">end</span>\n<span style=\"color:#080;font-weight:bold\">end</span>\n</pre></td>\n</tr></table>\n\n        </div>\n\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n<a href=\"#n8\" name=\"n8\">8</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#777\"># app/views/mails/index.json.jbuilder</span>\njson.array!(<span style=\"color:#33B\">@mails</span>) <span style=\"color:#080;font-weight:bold\">do</span> |mail|\n  json.cache! mail <span style=\"color:#080;font-weight:bold\">do</span>\n    json.title mail.title\n    json.sender mail.sender\n    json.replied mail.has_reply?\n  <span style=\"color:#080;font-weight:bold\">end</span>\n<span style=\"color:#080;font-weight:bold\">end</span>\n</pre></td>\n</tr></table>\n\n        </div>\nThere is a caveat here. To render a page here, it costs two request to server: first for index.html and second for index.json. Another caveat is that if you use <code><a href=\"https://github.com/amatsuda/kaminari\">kaminari</a></code> for pagination, you need to keep @mails available for both index.html and index.json.<br><br>You can also use <span style=\"font-weight: bold;\">templateUrl</span> in <code><a href=\"http://docs.angularjs.org/guide/directive\">directives</a></code> and <a href=\"http://docs.angularjs.org/api/ng.directive:ngInclude\"><code>ngInclude</code></a> to make a partial reusable by retrieving partials from server and render them by Angular.js. These partials can be properly localized, but you pay the price for a HTTP request to retrieve the template. For rendering a collection, it might be worth the price.<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/erb.png' alt='erb'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#777\">&lt;!-- app/views/mails/index.html.erb --&gt;</span>\n<span style=\"color:#070;font-weight:bold\">&lt;div</span> <span style=\"color:#b48\">data-mails</span><span style=\"color:#070;font-weight:bold\">&gt;</span>\n<span style=\"color:#070;font-weight:bold\">&lt;div</span> <span style=\"color:#b48\">data-ng-repeat</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">mail in mails</span><span style=\"color:#710\">'</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span>\n  <span style=\"color:#070;font-weight:bold\">&lt;div</span> <span style=\"color:#b48\">data-ng-include</span> <span style=\"color:#b48\">src</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">/mails/mail</span><span style=\"color:#710\">'</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span><span style=\"color:#070;font-weight:bold\">&lt;/div&gt;</span>\n<span style=\"color:#070;font-weight:bold\">&lt;/div&gt;</span>\n<span style=\"color:#070;font-weight:bold\">&lt;/div&gt;</span>\n</pre></td>\n</tr></table>\n\n        </div>\n\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/erb.png' alt='erb'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#777\">&lt;!-- app/views/mails/mail.html.erb --&gt;</span>\n{{mail.title}}\n<span style=\"color:#070;font-weight:bold\">&lt;i</span> <span style=\"color:#b48\">class</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">icon-ok</span><span style=\"color:#710\">'</span></span> <span style=\"color:#b48\">data-ng-show</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">mail.replied</span><span style=\"color:#710\">&quot;</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span><span style=\"color:#070;font-weight:bold\">&lt;/i&gt;</span>\n<span style=\"color:#070;font-weight:bold\">&lt;br</span><span style=\"color:#070;font-weight:bold\">/&gt;</span>\n<span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> <span style=\"color:#036;font-weight:bold\">I18n</span>.t(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">mail.from</span><span style=\"color:#710\">'</span></span>) <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>: {{mail.sender}}\n</pre></td>\n</tr></table>\n\n        </div>\nBe sure to render without layout:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#777\"># app/controllers/mails_controller.rb</span>\n<span style=\"color:#080;font-weight:bold\">def</span> <span style=\"color:#06B;font-weight:bold\">mail</span>\n  respond_to <span style=\"color:#080;font-weight:bold\">do</span> |format|\n    format.html { <span style=\"color:#A60\">:layout</span> =&gt; <span style=\"color:#069\">false</span> }\n  <span style=\"color:#080;font-weight:bold\">end</span>\n<span style=\"color:#080;font-weight:bold\">end</span>\n</pre></td>\n</tr></table>\n\n        </div>\n", pretty_preview: "<p>Angular.js can easily manipulate views, in many cases, better than rails. If possible, you should move some logic from Rails server side to Angular.js on client side.<br><br><font style=\"font-size: 18px;\"><span style=\"font-weight: bold;\">CSS attributes</span></font><br><br>The powerful <a href=\"http://docs.angularjs.org/api/ng.directive:ngClass\"><code>ngClass</code></a> allows you to change classes of element easily. For examp...<br></p>"},
  {id: 373, name: "Best Practice of Using Angular.js with Rails: Form", category_id: 3, body: "<p>Form is one important feature of Angular.js. Unfortunately, it conflicts with Rails in some ways. For a standard Rails form like this:<br></p>\n<pre><code class=\"erb\">&lt;%= form_for @post do |f| %&gt;<br>  &lt;%= f.text_field :title %&gt;<br>  &lt;%= f.text_area :content %&gt;<br><br>  &lt;%= f.submit %&gt;<br>&lt;% end %&gt;</code></pre>Then you can hook up Angular.js like this:<br><pre><code class=\"erb\">&lt;-- _form.html.erb --&gt;<br>&lt;%= form_for @post, :html =&gt; {:'data-post-form' =&gt; @post.id || 0} do |f| %&gt;<br>  &lt;%= f.text_field :title, { :'ng-model' =&gt; 'post.title'} %&gt;<br>  &lt;%= f.text_area :content, { :'ng-model' =&gt; 'post.content'} %&gt;<br>  &lt;%= f.submit %&gt;<br>&lt;% end %&gt;</code></pre>\n<pre><code class=\"javascript\">// post.js<br>myapp.directive('postForm', function($http) {<br>  return {<br>    restrict: 'A',<br>    scope: true,<br>    controller: function($scope, $attrs) {<br>      if ($attrs.postForm == 0) {<br>        console.log('new post');<br>      } else {<br>        console.log('old post');<br>      } <br>    },<br>    link: function(scope, element, attrs) {<br>    }     <br>  }<br>});</code></pre>It looks fine on the first glance and work for new post. But if you use this form for edit, the existing <span style=\"font-weight: bold;\">title</span> and <span style=\"font-weight: bold;\">content</span> will not show properly. A careful inspection shows that Rails properly set the value for text field and text area, but because <code>ng-model</code> is empty, that text field and area looks empty due to Angular.js.<br><br>Then the question is: should I spend another ajax call to retrieve <code>@post</code> whose content is already rendered by Rails ?<br><br>The question is no, but you need some extra work like this:<br><pre><code class=\"javascript\">// post.js<br>myapp.directive('postForm', function($http) {<br>  return {<br>    restrict: 'A',<br>    scope: true,<br>    controller: function($scope, $attrs) {<br>      if ($attrs.postForm == 0) {<br>        console.log('new post');<br>      } else {<br>        $scope.post = {<br>          title: $('#post_title').val();<br>          content: $('#post_content').val();<br>        }<br>        console.log('old post');<br>      } <br>    },<br>    link: function(scope, element, attrs) {<br>    }     <br>  }<br>});</code></pre>From here, you can make use of Angular.js freely. But be careful about using submit from Rails. If you have more than one buttons in form, Angular.js might <a href=\"http://docs.angularjs.org/api/ng.directive:form\">trigger the form submission unexpectedly</a> (read section <span style=\"font-weight: bold;\">'Submitting a form and preventing default action'</span>).<br><br>If you have buttons using <code>ng-click</code> and want to prevent the submission of form, try this:<br><pre><code class=\"erb\">&lt;-- _form.html.erb --&gt;<br>&lt;%= form_for @post, :html =&gt; {:'data-post-form' =&gt; @post.id} do |f| %&gt;<br>  &lt;%= f.text_field :title, { :'ng-model' =&gt; 'post.title'} %&gt;<br>  &lt;%= f.text_area :content, { :'ng-model' =&gt; 'post.content'} %&gt;<br>  &lt;%= f.submit %&gt;<br>  &lt;button ng-click='anotherAction(post, $event)'&gt;Action&lt;/button&gt;<br>&lt;% end %&gt;</code></pre>\n<pre><code class=\"javascript\">// post.js<br>myapp.directive('postForm', function($http) {<br>  return {<br>    restrict: 'A',<br>    scope: true,<br>    controller: function($scope, $attrs) {<br>      if ($attrs.postForm == 0) {<br>        console.log('new post');<br>      } else {<br>        $scope.post = {<br>          title: $('#post_title').val();<br>          content: $('#post_content').val();<br>        }<br>        console.log('old post');<br>      } <br><br>      $scope.anotherAction = function(p, event) {<br>        event.preventDefault();<br>        console.log('another action');<br>        console.log(p);<br>      }<br>    },<br>    link: function(scope, element, attrs) {<br>    }     <br>  }<br>});</code></pre>A <code>$event</code> is add as parameter of <code>ng-click</code> and in controller, we prevent this event from firing. Thus, you can have many buttons in a form.<br><br>One use of form with Angular.js and Rails is editing <code><a href=\"http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html\">nested attributes</a></code>. Assume you have people in different group. You want to edit the people in the group using form from Rails like this:<br><pre><code class=\"erb\">&lt;%= form_for @group do |g| %&gt;<br>  &lt;%= g.text_field :name %&gt;<br>  &lt;%= g.fields_for :members do |m| %&gt;<br>      Name: &lt;%= m.text_field :name %&gt;<br>  &lt;% end %&gt;<br>&lt;% end %&gt;</code></pre>This form does not allow you to add or remove member easily. You need some javascript to help. And here comes Angular.js:<br><pre><code class=\"erb\">&lt;%= form_for @group, :html =&gt; { :'data-group-form' =&gt; @group.id || 0 } do |g| %&gt;<br>  &lt;%= g.text_field :name, :'ng-model' =&gt; 'group.name' %&gt;<br>  &lt;div data-ng-repeat = 'member in members'&gt;<br>    &lt;%= text_field_tag 'group[members_attributes][][name]', nil, :'ng-model' =&gt; 'member.name' %&gt;<br>    &lt;%= hidden_field_tag 'group[members_attributes][][id]', '{{member.id}}' %&gt;<br>  &lt;/div&gt;<br>&lt;% end %&gt;</code></pre>\n<pre><code class=\"javascript\">// group.js<br>myapp.directive('groupForm', function($http) {<br>  return {<br>    restrict: 'A',<br>    scope: true,<br>    controller: function($scope, $attrs) {<br>      if ($attrs.groupForm == 0) {<br>        console.log('new group');<br>        $scope.members = [];<br>      } else {<br>        console.log('old group');<br>        $scope.group = {<br>          name: $('#group_name').val();<br>        }<br>        $http.get('/group/' $attrs.groupForm '/members'<br>          ).success(function(data) {<br>            console.log('success');<br>          $scope.members = data;<br>         }).error(function(data) {<br>            console.log('error');<br>         });<br>      } <br>    },<br>    link: function(scope, element, attrs) {<br>    }     <br>  }<br>});</code></pre>Note the use of hidden_field for <span style=\"font-weight: bold;\">id</span> of existing member. <code>ng-model</code> does not work in hidden field, thus, use {{member.id}} instead.<br><br>To add member, you simply push a empty object into <span style=\"font-weight: bold;\">members</span> like this:<br><pre><code class=\"javascript\">// group.js<br>myapp.directive('groupForm', function($http) {<br>  return {<br>    restrict: 'A',<br>    scope: true,<br>    controller: function($scope, $attrs) {<br>      if ($attrs.groupForm == 0) {<br>        console.log('new group');<br>        $scope.members = [];<br>      } else {<br>        console.log('old group');<br>        $scope.group = {<br>          name: $('#group_name').val();<br>        }<br>        $http.get('/group/' $attrs.groupForm '/members'<br>          ).success(function(data) {<br>            console.log('success');<br>          $scope.members = data;<br>         }).error(function(data) {<br>            console.log('error');<br>         });<br>      } <br><br>      $scope.addMember = function(event) {<br>        event.preventDefault();<br>        $scope.member.push({<br>          name: 'new member'<br>        });<br>      };<br>    },<br>    link: function(scope, element, attrs) {<br>    }     <br>  }<br>});</code></pre>And add this button in the form:<br><pre><code class=\"erb\">&lt;button :ng-click='addMember($event)'&gt;Add Member&lt;/button&gt;</code></pre>To remove member, Rails provides an easy <span style=\"font-weight: bold;\">_destroy</span> field. Thus, just add a hidden <span style=\"font-weight: bold;\">_destroy</span> to delete existing record, or remove it from <span style=\"font-weight: bold;\">$scope.members</span> for non-existing member (the one added, but not yet saved).<br><pre><code class=\"erb\">&lt;%= form_for @group, :html =&gt; { :'data-group-form' =&gt; @group.id || 0 } do |g| %&gt;<br>  &lt;%= g.text_field :name, :'ng-model' =&gt; 'group.name' %&gt;<br>  &lt;div data-ng-repeat = 'member in members' data-ng-hide='member.destroy'&gt;<br>    &lt;%= text_field_tag 'group[members_attributes][][name]', nil, :'ng-model' =&gt; 'member.name' %&gt;<br>    &lt;%= hidden_field_tag 'group[members_attributes][][id]', '{{member.id}}' %&gt;<br>    &lt;%= hidden_field_tag 'group[members_attributes][][_destroy]', '{{member.destroy}}' %&gt;<br>    &lt;a href='#' ng-click='delete(member)'&gt;remove&lt;/a&gt;<br>  &lt;/div&gt;<br>  &lt;button :ng-click='addMember($event)'&gt;Add Member&lt;/button&gt;<br>&lt;% end %&gt;</code></pre>Note the use of <code>ng-hide</code> to hide destroyed record.<br><pre><code class=\"javascript\">// group.js<br>myapp.directive('groupForm', function($http) {<br>  return {<br>    restrict: 'A',<br>    scope: true,<br>    controller: function($scope, $attrs) {<br>      if ($attrs.groupForm == 0) {<br>        console.log('new group');<br>        $scope.members = [];<br>      } else {<br>        console.log('old group');<br>        $scope.group = {<br>          name: $('#group_name').val();<br>        }<br>        $http.get('/group/' $attrs.groupForm '/members'<br>          ).success(function(data) {<br>            console.log('success');<br>          $scope.members = data;<br>         }).error(function(data) {<br>            console.log('error');<br>         });<br>      } <br><br>      $scope.addMember = function(event) {<br>        event.preventDefault();<br>        $scope.member.push({<br>          name: 'new member'<br>        });<br>      };<br><br>      $scope.delete = function(member) {<br>        if (member.id) {<br>          // saved member<br>          member.destroy = 1;<br>        } else {<br>          // unsaved member, remove it from members.<br>          $scope.members.splice( $.inArray(member, $scope.members), 1 );<br>        }<br>      };<br>    },<br>    link: function(scope, element, attrs) {<br>    }     <br>  }<br>});</code></pre>Now, you can freely add and remove member under the group until you submit the form to save both group and members into database through Rails. <br>", created_at: "2013-12-13 19:56:09", updated_at: "2013-12-13 19:56:09", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "<p>Form is one important feature of Angular.js. Unfortunately, it conflicts with Rails in some ways. For a standard Rails form like this:<br></p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/erb.png' alt='erb'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> form_for <span style=\"color:#33B\">@post</span> <span style=\"color:#080;font-weight:bold\">do</span> |f| <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>\n  <span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> f.text_field <span style=\"color:#A60\">:title</span> <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>\n  <span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> f.text_area <span style=\"color:#A60\">:content</span> <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>\n\n  <span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> f.submit <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>\n<span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%</span> <span style=\"color:#080;font-weight:bold\">end</span> <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>\n</pre></td>\n</tr></table>\n\n        </div>\nThen you can hook up Angular.js like this:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/erb.png' alt='erb'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#070;font-weight:bold\">&lt;--</span> <span style=\"color:#b48\">_form.html.erb</span> <span style=\"color:#b48\">--</span><span style=\"color:#070;font-weight:bold\">&gt;</span>\n<span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> form_for <span style=\"color:#33B\">@post</span>, <span style=\"color:#A60\">:html</span> =&gt; {<span style=\"color:#A60\"><span style=\"color:#A60\">:</span><span style=\"color:#740\">'</span><span style=\"color:#A60\">data-post-form</span><span style=\"color:#740\">'</span></span> =&gt; <span style=\"color:#33B\">@post</span>.id || <span style=\"color:#00D\">0</span>} <span style=\"color:#080;font-weight:bold\">do</span> |f| <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>\n  <span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> f.text_field <span style=\"color:#A60\">:title</span>, { <span style=\"color:#A60\"><span style=\"color:#A60\">:</span><span style=\"color:#740\">'</span><span style=\"color:#A60\">ng-model</span><span style=\"color:#740\">'</span></span> =&gt; <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">post.title</span><span style=\"color:#710\">'</span></span>} <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>\n  <span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> f.text_area <span style=\"color:#A60\">:content</span>, { <span style=\"color:#A60\"><span style=\"color:#A60\">:</span><span style=\"color:#740\">'</span><span style=\"color:#A60\">ng-model</span><span style=\"color:#740\">'</span></span> =&gt; <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">post.content</span><span style=\"color:#710\">'</span></span>} <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>\n  <span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> f.submit <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>\n<span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%</span> <span style=\"color:#080;font-weight:bold\">end</span> <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>\n</pre></td>\n</tr></table>\n\n        </div>\n\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/javascript.png' alt='javascript'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n<a href=\"#n8\" name=\"n8\">8</a>\n<a href=\"#n9\" name=\"n9\">9</a>\n<strong><a href=\"#n10\" name=\"n10\">10</a></strong>\n<a href=\"#n11\" name=\"n11\">11</a>\n<a href=\"#n12\" name=\"n12\">12</a>\n<a href=\"#n13\" name=\"n13\">13</a>\n<a href=\"#n14\" name=\"n14\">14</a>\n<a href=\"#n15\" name=\"n15\">15</a>\n<a href=\"#n16\" name=\"n16\">16</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#777\">// post.js</span>\nmyapp.directive(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">postForm</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#080;font-weight:bold\">function</span>(<span style=\"color:#369;font-weight:bold\">$http</span>) {\n<span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#080;font-weight:bold\">return</span> {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#606\">restrict</span>: <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">A</span><span style=\"color:#710\">'</span></span>,\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#606\">scope</span>: <span style=\"color:#069\">true</span>,\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#06B;font-weight:bold\">controller</span>: <span style=\"color:#080;font-weight:bold\">function</span>(<span style=\"color:#369;font-weight:bold\">$scope</span>, <span style=\"color:#369;font-weight:bold\">$attrs</span>) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#080;font-weight:bold\">if</span> (<span style=\"color:#369;font-weight:bold\">$attrs</span>.postForm == <span style=\"color:#00D\">0</span>) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> console.log(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">new post</span><span style=\"color:#710\">'</span></span>);\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> } <span style=\"color:#080;font-weight:bold\">else</span> {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> console.log(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">old post</span><span style=\"color:#710\">'</span></span>);\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> } \n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> },\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#06B;font-weight:bold\">link</span>: <span style=\"color:#080;font-weight:bold\">function</span>(scope, element, attrs) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> }<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#F00;background-color:#FAA\"> </span>\n<span style=\"color:#F00;background-color:#FAA\"> </span> }\n});\n</pre></td>\n</tr></table>\n\n        </div>\nIt looks fine on the first glance and work for new post. But if you use this form for edit, the existing <span style=\"font-weight: bold;\">title</span> and <span style=\"font-weight: bold;\">content</span> will not show properly. A careful inspection shows that Rails properly set the value for text field and text area, but because <code>ng-model</code> is empty, that text field and area looks empty due to Angular.js.<br><br>Then the question is: should I spend another ajax call to retrieve <code>@post</code> whose content is already rendered by Rails ?<br><br>The question is no, but you need some extra work like this:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/javascript.png' alt='javascript'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n<a href=\"#n8\" name=\"n8\">8</a>\n<a href=\"#n9\" name=\"n9\">9</a>\n<strong><a href=\"#n10\" name=\"n10\">10</a></strong>\n<a href=\"#n11\" name=\"n11\">11</a>\n<a href=\"#n12\" name=\"n12\">12</a>\n<a href=\"#n13\" name=\"n13\">13</a>\n<a href=\"#n14\" name=\"n14\">14</a>\n<a href=\"#n15\" name=\"n15\">15</a>\n<a href=\"#n16\" name=\"n16\">16</a>\n<a href=\"#n17\" name=\"n17\">17</a>\n<a href=\"#n18\" name=\"n18\">18</a>\n<a href=\"#n19\" name=\"n19\">19</a>\n<strong><a href=\"#n20\" name=\"n20\">20</a></strong>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#777\">// post.js</span>\nmyapp.directive(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">postForm</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#080;font-weight:bold\">function</span>(<span style=\"color:#369;font-weight:bold\">$http</span>) {\n<span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#080;font-weight:bold\">return</span> {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#606\">restrict</span>: <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">A</span><span style=\"color:#710\">'</span></span>,\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#606\">scope</span>: <span style=\"color:#069\">true</span>,\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#06B;font-weight:bold\">controller</span>: <span style=\"color:#080;font-weight:bold\">function</span>(<span style=\"color:#369;font-weight:bold\">$scope</span>, <span style=\"color:#369;font-weight:bold\">$attrs</span>) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#080;font-weight:bold\">if</span> (<span style=\"color:#369;font-weight:bold\">$attrs</span>.postForm == <span style=\"color:#00D\">0</span>) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> console.log(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">new post</span><span style=\"color:#710\">'</span></span>);\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> } <span style=\"color:#080;font-weight:bold\">else</span> {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#369;font-weight:bold\">$scope</span>.post = {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#606\">title</span>: <span style=\"color:#369;font-weight:bold\">$</span>(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">#post_title</span><span style=\"color:#710\">'</span></span>).val();\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> content: <span style=\"color:#369;font-weight:bold\">$</span>(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">#post_content</span><span style=\"color:#710\">'</span></span>).val();\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> }\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> console.log(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">old post</span><span style=\"color:#710\">'</span></span>);\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> } \n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> },\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#06B;font-weight:bold\">link</span>: <span style=\"color:#080;font-weight:bold\">function</span>(scope, element, attrs) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> }<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#F00;background-color:#FAA\"> </span>\n<span style=\"color:#F00;background-color:#FAA\"> </span> }\n});\n</pre></td>\n</tr></table>\n\n        </div>\nFrom here, you can make use of Angular.js freely. But be careful about using submit from Rails. If you have more than one buttons in form, Angular.js might <a href=\"http://docs.angularjs.org/api/ng.directive:form\">trigger the form submission unexpectedly</a> (read section <span style=\"font-weight: bold;\">'Submitting a form and preventing default action'</span>).<br><br>If you have buttons using <code>ng-click</code> and want to prevent the submission of form, try this:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/erb.png' alt='erb'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#070;font-weight:bold\">&lt;--</span> <span style=\"color:#b48\">_form.html.erb</span> <span style=\"color:#b48\">--</span><span style=\"color:#070;font-weight:bold\">&gt;</span>\n<span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> form_for <span style=\"color:#33B\">@post</span>, <span style=\"color:#A60\">:html</span> =&gt; {<span style=\"color:#A60\"><span style=\"color:#A60\">:</span><span style=\"color:#740\">'</span><span style=\"color:#A60\">data-post-form</span><span style=\"color:#740\">'</span></span> =&gt; <span style=\"color:#33B\">@post</span>.id} <span style=\"color:#080;font-weight:bold\">do</span> |f| <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>\n  <span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> f.text_field <span style=\"color:#A60\">:title</span>, { <span style=\"color:#A60\"><span style=\"color:#A60\">:</span><span style=\"color:#740\">'</span><span style=\"color:#A60\">ng-model</span><span style=\"color:#740\">'</span></span> =&gt; <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">post.title</span><span style=\"color:#710\">'</span></span>} <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>\n  <span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> f.text_area <span style=\"color:#A60\">:content</span>, { <span style=\"color:#A60\"><span style=\"color:#A60\">:</span><span style=\"color:#740\">'</span><span style=\"color:#A60\">ng-model</span><span style=\"color:#740\">'</span></span> =&gt; <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">post.content</span><span style=\"color:#710\">'</span></span>} <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>\n  <span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> f.submit <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>\n  <span style=\"color:#070;font-weight:bold\">&lt;button</span> <span style=\"color:#b48\">ng-click</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">anotherAction(post, $event)</span><span style=\"color:#710\">'</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span>Action<span style=\"color:#070;font-weight:bold\">&lt;/button&gt;</span>\n<span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%</span> <span style=\"color:#080;font-weight:bold\">end</span> <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>\n</pre></td>\n</tr></table>\n\n        </div>\n\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/javascript.png' alt='javascript'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n<a href=\"#n8\" name=\"n8\">8</a>\n<a href=\"#n9\" name=\"n9\">9</a>\n<strong><a href=\"#n10\" name=\"n10\">10</a></strong>\n<a href=\"#n11\" name=\"n11\">11</a>\n<a href=\"#n12\" name=\"n12\">12</a>\n<a href=\"#n13\" name=\"n13\">13</a>\n<a href=\"#n14\" name=\"n14\">14</a>\n<a href=\"#n15\" name=\"n15\">15</a>\n<a href=\"#n16\" name=\"n16\">16</a>\n<a href=\"#n17\" name=\"n17\">17</a>\n<a href=\"#n18\" name=\"n18\">18</a>\n<a href=\"#n19\" name=\"n19\">19</a>\n<strong><a href=\"#n20\" name=\"n20\">20</a></strong>\n<a href=\"#n21\" name=\"n21\">21</a>\n<a href=\"#n22\" name=\"n22\">22</a>\n<a href=\"#n23\" name=\"n23\">23</a>\n<a href=\"#n24\" name=\"n24\">24</a>\n<a href=\"#n25\" name=\"n25\">25</a>\n<a href=\"#n26\" name=\"n26\">26</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#777\">// post.js</span>\nmyapp.directive(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">postForm</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#080;font-weight:bold\">function</span>(<span style=\"color:#369;font-weight:bold\">$http</span>) {\n<span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#080;font-weight:bold\">return</span> {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#606\">restrict</span>: <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">A</span><span style=\"color:#710\">'</span></span>,\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#606\">scope</span>: <span style=\"color:#069\">true</span>,\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#06B;font-weight:bold\">controller</span>: <span style=\"color:#080;font-weight:bold\">function</span>(<span style=\"color:#369;font-weight:bold\">$scope</span>, <span style=\"color:#369;font-weight:bold\">$attrs</span>) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#080;font-weight:bold\">if</span> (<span style=\"color:#369;font-weight:bold\">$attrs</span>.postForm == <span style=\"color:#00D\">0</span>) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> console.log(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">new post</span><span style=\"color:#710\">'</span></span>);\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> } <span style=\"color:#080;font-weight:bold\">else</span> {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#369;font-weight:bold\">$scope</span>.post = {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#606\">title</span>: <span style=\"color:#369;font-weight:bold\">$</span>(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">#post_title</span><span style=\"color:#710\">'</span></span>).val();\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> content: <span style=\"color:#369;font-weight:bold\">$</span>(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">#post_content</span><span style=\"color:#710\">'</span></span>).val();\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> }\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> console.log(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">old post</span><span style=\"color:#710\">'</span></span>);\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> } \n\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#369;font-weight:bold\">$scope</span>.<span style=\"color:#06B;font-weight:bold\">anotherAction</span> = <span style=\"color:#080;font-weight:bold\">function</span>(p, event) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> event.preventDefault();\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> console.log(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">another action</span><span style=\"color:#710\">'</span></span>);\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> console.log(p);\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> }\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> },\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#06B;font-weight:bold\">link</span>: <span style=\"color:#080;font-weight:bold\">function</span>(scope, element, attrs) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> }<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#F00;background-color:#FAA\"> </span>\n<span style=\"color:#F00;background-color:#FAA\"> </span> }\n});\n</pre></td>\n</tr></table>\n\n        </div>\nA <code>$event</code> is add as parameter of <code>ng-click</code> and in controller, we prevent this event from firing. Thus, you can have many buttons in a form.<br><br>One use of form with Angular.js and Rails is editing <code><a href=\"http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html\">nested attributes</a></code>. Assume you have people in different group. You want to edit the people in the group using form from Rails like this:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/erb.png' alt='erb'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> form_for <span style=\"color:#33B\">@group</span> <span style=\"color:#080;font-weight:bold\">do</span> |g| <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>\n  <span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> g.text_field <span style=\"color:#A60\">:name</span> <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>\n  <span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> g.fields_for <span style=\"color:#A60\">:members</span> <span style=\"color:#080;font-weight:bold\">do</span> |m| <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>\n      Name: <span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> m.text_field <span style=\"color:#A60\">:name</span> <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>\n  <span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%</span> <span style=\"color:#080;font-weight:bold\">end</span> <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>\n<span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%</span> <span style=\"color:#080;font-weight:bold\">end</span> <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>\n</pre></td>\n</tr></table>\n\n        </div>\nThis form does not allow you to add or remove member easily. You need some javascript to help. And here comes Angular.js:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/erb.png' alt='erb'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> form_for <span style=\"color:#33B\">@group</span>, <span style=\"color:#A60\">:html</span> =&gt; { <span style=\"color:#A60\"><span style=\"color:#A60\">:</span><span style=\"color:#740\">'</span><span style=\"color:#A60\">data-group-form</span><span style=\"color:#740\">'</span></span> =&gt; <span style=\"color:#33B\">@group</span>.id || <span style=\"color:#00D\">0</span> } <span style=\"color:#080;font-weight:bold\">do</span> |g| <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>\n  <span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> g.text_field <span style=\"color:#A60\">:name</span>, <span style=\"color:#A60\"><span style=\"color:#A60\">:</span><span style=\"color:#740\">'</span><span style=\"color:#A60\">ng-model</span><span style=\"color:#740\">'</span></span> =&gt; <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">group.name</span><span style=\"color:#710\">'</span></span> <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>\n  <span style=\"color:#070;font-weight:bold\">&lt;div</span> <span style=\"color:#b48\">data-ng-repeat</span> = <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">member in members</span><span style=\"color:#710\">'</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span>\n    <span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> text_field_tag <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">group[members_attributes][][name]</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#069\">nil</span>, <span style=\"color:#A60\"><span style=\"color:#A60\">:</span><span style=\"color:#740\">'</span><span style=\"color:#A60\">ng-model</span><span style=\"color:#740\">'</span></span> =&gt; <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">member.name</span><span style=\"color:#710\">'</span></span> <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>\n    <span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> hidden_field_tag <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">group[members_attributes][][id]</span><span style=\"color:#710\">'</span></span>, <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">{{member.id}}</span><span style=\"color:#710\">'</span></span> <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>\n  <span style=\"color:#070;font-weight:bold\">&lt;/div&gt;</span>\n<span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%</span> <span style=\"color:#080;font-weight:bold\">end</span> <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>\n</pre></td>\n</tr></table>\n\n        </div>\n\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/javascript.png' alt='javascript'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n<a href=\"#n8\" name=\"n8\">8</a>\n<a href=\"#n9\" name=\"n9\">9</a>\n<strong><a href=\"#n10\" name=\"n10\">10</a></strong>\n<a href=\"#n11\" name=\"n11\">11</a>\n<a href=\"#n12\" name=\"n12\">12</a>\n<a href=\"#n13\" name=\"n13\">13</a>\n<a href=\"#n14\" name=\"n14\">14</a>\n<a href=\"#n15\" name=\"n15\">15</a>\n<a href=\"#n16\" name=\"n16\">16</a>\n<a href=\"#n17\" name=\"n17\">17</a>\n<a href=\"#n18\" name=\"n18\">18</a>\n<a href=\"#n19\" name=\"n19\">19</a>\n<strong><a href=\"#n20\" name=\"n20\">20</a></strong>\n<a href=\"#n21\" name=\"n21\">21</a>\n<a href=\"#n22\" name=\"n22\">22</a>\n<a href=\"#n23\" name=\"n23\">23</a>\n<a href=\"#n24\" name=\"n24\">24</a>\n<a href=\"#n25\" name=\"n25\">25</a>\n<a href=\"#n26\" name=\"n26\">26</a>\n<a href=\"#n27\" name=\"n27\">27</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#777\">// group.js</span>\nmyapp.directive(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">groupForm</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#080;font-weight:bold\">function</span>(<span style=\"color:#369;font-weight:bold\">$http</span>) {\n<span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#080;font-weight:bold\">return</span> {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#606\">restrict</span>: <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">A</span><span style=\"color:#710\">'</span></span>,\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#606\">scope</span>: <span style=\"color:#069\">true</span>,\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#06B;font-weight:bold\">controller</span>: <span style=\"color:#080;font-weight:bold\">function</span>(<span style=\"color:#369;font-weight:bold\">$scope</span>, <span style=\"color:#369;font-weight:bold\">$attrs</span>) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#080;font-weight:bold\">if</span> (<span style=\"color:#369;font-weight:bold\">$attrs</span>.groupForm == <span style=\"color:#00D\">0</span>) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> console.log(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">new group</span><span style=\"color:#710\">'</span></span>);\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#369;font-weight:bold\">$scope</span>.members = [];\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> } <span style=\"color:#080;font-weight:bold\">else</span> {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> console.log(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">old group</span><span style=\"color:#710\">'</span></span>);\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#369;font-weight:bold\">$scope</span>.group = {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#606\">name</span>: <span style=\"color:#369;font-weight:bold\">$</span>(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">#group_name</span><span style=\"color:#710\">'</span></span>).val();\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> }\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#369;font-weight:bold\">$http</span>.get(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">/group/</span><span style=\"color:#710\">'</span></span> <span style=\"color:#369;font-weight:bold\">$attrs</span>.groupForm <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">/members</span><span style=\"color:#710\">'</span></span>\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> ).success(<span style=\"color:#080;font-weight:bold\">function</span>(data) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> console.log(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">success</span><span style=\"color:#710\">'</span></span>);\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#369;font-weight:bold\">$scope</span>.members = data;\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> }).error(<span style=\"color:#080;font-weight:bold\">function</span>(data) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> console.log(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">error</span><span style=\"color:#710\">'</span></span>);\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> });\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> } \n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> },\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#06B;font-weight:bold\">link</span>: <span style=\"color:#080;font-weight:bold\">function</span>(scope, element, attrs) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> }<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#F00;background-color:#FAA\"> </span>\n<span style=\"color:#F00;background-color:#FAA\"> </span> }\n});\n</pre></td>\n</tr></table>\n\n        </div>\nNote the use of hidden_field for <span style=\"font-weight: bold;\">id</span> of existing member. <code>ng-model</code> does not work in hidden field, thus, use {{member.id}} instead.<br><br>To add member, you simply push a empty object into <span style=\"font-weight: bold;\">members</span> like this:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/javascript.png' alt='javascript'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n<a href=\"#n8\" name=\"n8\">8</a>\n<a href=\"#n9\" name=\"n9\">9</a>\n<strong><a href=\"#n10\" name=\"n10\">10</a></strong>\n<a href=\"#n11\" name=\"n11\">11</a>\n<a href=\"#n12\" name=\"n12\">12</a>\n<a href=\"#n13\" name=\"n13\">13</a>\n<a href=\"#n14\" name=\"n14\">14</a>\n<a href=\"#n15\" name=\"n15\">15</a>\n<a href=\"#n16\" name=\"n16\">16</a>\n<a href=\"#n17\" name=\"n17\">17</a>\n<a href=\"#n18\" name=\"n18\">18</a>\n<a href=\"#n19\" name=\"n19\">19</a>\n<strong><a href=\"#n20\" name=\"n20\">20</a></strong>\n<a href=\"#n21\" name=\"n21\">21</a>\n<a href=\"#n22\" name=\"n22\">22</a>\n<a href=\"#n23\" name=\"n23\">23</a>\n<a href=\"#n24\" name=\"n24\">24</a>\n<a href=\"#n25\" name=\"n25\">25</a>\n<a href=\"#n26\" name=\"n26\">26</a>\n<a href=\"#n27\" name=\"n27\">27</a>\n<a href=\"#n28\" name=\"n28\">28</a>\n<a href=\"#n29\" name=\"n29\">29</a>\n<strong><a href=\"#n30\" name=\"n30\">30</a></strong>\n<a href=\"#n31\" name=\"n31\">31</a>\n<a href=\"#n32\" name=\"n32\">32</a>\n<a href=\"#n33\" name=\"n33\">33</a>\n<a href=\"#n34\" name=\"n34\">34</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#777\">// group.js</span>\nmyapp.directive(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">groupForm</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#080;font-weight:bold\">function</span>(<span style=\"color:#369;font-weight:bold\">$http</span>) {\n<span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#080;font-weight:bold\">return</span> {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#606\">restrict</span>: <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">A</span><span style=\"color:#710\">'</span></span>,\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#606\">scope</span>: <span style=\"color:#069\">true</span>,\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#06B;font-weight:bold\">controller</span>: <span style=\"color:#080;font-weight:bold\">function</span>(<span style=\"color:#369;font-weight:bold\">$scope</span>, <span style=\"color:#369;font-weight:bold\">$attrs</span>) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#080;font-weight:bold\">if</span> (<span style=\"color:#369;font-weight:bold\">$attrs</span>.groupForm == <span style=\"color:#00D\">0</span>) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> console.log(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">new group</span><span style=\"color:#710\">'</span></span>);\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#369;font-weight:bold\">$scope</span>.members = [];\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> } <span style=\"color:#080;font-weight:bold\">else</span> {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> console.log(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">old group</span><span style=\"color:#710\">'</span></span>);\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#369;font-weight:bold\">$scope</span>.group = {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#606\">name</span>: <span style=\"color:#369;font-weight:bold\">$</span>(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">#group_name</span><span style=\"color:#710\">'</span></span>).val();\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> }\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#369;font-weight:bold\">$http</span>.get(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">/group/</span><span style=\"color:#710\">'</span></span> <span style=\"color:#369;font-weight:bold\">$attrs</span>.groupForm <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">/members</span><span style=\"color:#710\">'</span></span>\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> ).success(<span style=\"color:#080;font-weight:bold\">function</span>(data) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> console.log(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">success</span><span style=\"color:#710\">'</span></span>);\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#369;font-weight:bold\">$scope</span>.members = data;\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> }).error(<span style=\"color:#080;font-weight:bold\">function</span>(data) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> console.log(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">error</span><span style=\"color:#710\">'</span></span>);\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> });\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> } \n\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#369;font-weight:bold\">$scope</span>.<span style=\"color:#06B;font-weight:bold\">addMember</span> = <span style=\"color:#080;font-weight:bold\">function</span>(event) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> event.preventDefault();\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#369;font-weight:bold\">$scope</span>.member.push({\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#606\">name</span>: <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">new member</span><span style=\"color:#710\">'</span></span>\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> });\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> };\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> },\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#06B;font-weight:bold\">link</span>: <span style=\"color:#080;font-weight:bold\">function</span>(scope, element, attrs) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> }<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#F00;background-color:#FAA\"> </span>\n<span style=\"color:#F00;background-color:#FAA\"> </span> }\n});\n</pre></td>\n</tr></table>\n\n        </div>\nAnd add this button in the form:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/erb.png' alt='erb'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#070;font-weight:bold\">&lt;button</span> <span style=\"color:#b48\">:ng-click</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">addMember($event)</span><span style=\"color:#710\">'</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span>Add Member<span style=\"color:#070;font-weight:bold\">&lt;/button&gt;</span>\n</pre></td>\n</tr></table>\n\n        </div>\nTo remove member, Rails provides an easy <span style=\"font-weight: bold;\">_destroy</span> field. Thus, just add a hidden <span style=\"font-weight: bold;\">_destroy</span> to delete existing record, or remove it from <span style=\"font-weight: bold;\">$scope.members</span> for non-existing member (the one added, but not yet saved).<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/erb.png' alt='erb'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n<a href=\"#n8\" name=\"n8\">8</a>\n<a href=\"#n9\" name=\"n9\">9</a>\n<strong><a href=\"#n10\" name=\"n10\">10</a></strong>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> form_for <span style=\"color:#33B\">@group</span>, <span style=\"color:#A60\">:html</span> =&gt; { <span style=\"color:#A60\"><span style=\"color:#A60\">:</span><span style=\"color:#740\">'</span><span style=\"color:#A60\">data-group-form</span><span style=\"color:#740\">'</span></span> =&gt; <span style=\"color:#33B\">@group</span>.id || <span style=\"color:#00D\">0</span> } <span style=\"color:#080;font-weight:bold\">do</span> |g| <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>\n  <span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> g.text_field <span style=\"color:#A60\">:name</span>, <span style=\"color:#A60\"><span style=\"color:#A60\">:</span><span style=\"color:#740\">'</span><span style=\"color:#A60\">ng-model</span><span style=\"color:#740\">'</span></span> =&gt; <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">group.name</span><span style=\"color:#710\">'</span></span> <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>\n  <span style=\"color:#070;font-weight:bold\">&lt;div</span> <span style=\"color:#b48\">data-ng-repeat</span> = <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">member in members</span><span style=\"color:#710\">'</span></span> <span style=\"color:#b48\">data-ng-hide</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">member.destroy</span><span style=\"color:#710\">'</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span>\n    <span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> text_field_tag <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">group[members_attributes][][name]</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#069\">nil</span>, <span style=\"color:#A60\"><span style=\"color:#A60\">:</span><span style=\"color:#740\">'</span><span style=\"color:#A60\">ng-model</span><span style=\"color:#740\">'</span></span> =&gt; <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">member.name</span><span style=\"color:#710\">'</span></span> <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>\n    <span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> hidden_field_tag <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">group[members_attributes][][id]</span><span style=\"color:#710\">'</span></span>, <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">{{member.id}}</span><span style=\"color:#710\">'</span></span> <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>\n    <span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> hidden_field_tag <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">group[members_attributes][][_destroy]</span><span style=\"color:#710\">'</span></span>, <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">{{member.destroy}}</span><span style=\"color:#710\">'</span></span> <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>\n    <span style=\"color:#070;font-weight:bold\">&lt;a</span> <span style=\"color:#b48\">href</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">#</span><span style=\"color:#710\">'</span></span> <span style=\"color:#b48\">ng-click</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">delete(member)</span><span style=\"color:#710\">'</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span>remove<span style=\"color:#070;font-weight:bold\">&lt;/a&gt;</span>\n  <span style=\"color:#070;font-weight:bold\">&lt;/div&gt;</span>\n  <span style=\"color:#070;font-weight:bold\">&lt;button</span> <span style=\"color:#b48\">:ng-click</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">addMember($event)</span><span style=\"color:#710\">'</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span>Add Member<span style=\"color:#070;font-weight:bold\">&lt;/button&gt;</span>\n<span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%</span> <span style=\"color:#080;font-weight:bold\">end</span> <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>\n</pre></td>\n</tr></table>\n\n        </div>\nNote the use of <code>ng-hide</code> to hide destroyed record.<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/javascript.png' alt='javascript'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n<a href=\"#n8\" name=\"n8\">8</a>\n<a href=\"#n9\" name=\"n9\">9</a>\n<strong><a href=\"#n10\" name=\"n10\">10</a></strong>\n<a href=\"#n11\" name=\"n11\">11</a>\n<a href=\"#n12\" name=\"n12\">12</a>\n<a href=\"#n13\" name=\"n13\">13</a>\n<a href=\"#n14\" name=\"n14\">14</a>\n<a href=\"#n15\" name=\"n15\">15</a>\n<a href=\"#n16\" name=\"n16\">16</a>\n<a href=\"#n17\" name=\"n17\">17</a>\n<a href=\"#n18\" name=\"n18\">18</a>\n<a href=\"#n19\" name=\"n19\">19</a>\n<strong><a href=\"#n20\" name=\"n20\">20</a></strong>\n<a href=\"#n21\" name=\"n21\">21</a>\n<a href=\"#n22\" name=\"n22\">22</a>\n<a href=\"#n23\" name=\"n23\">23</a>\n<a href=\"#n24\" name=\"n24\">24</a>\n<a href=\"#n25\" name=\"n25\">25</a>\n<a href=\"#n26\" name=\"n26\">26</a>\n<a href=\"#n27\" name=\"n27\">27</a>\n<a href=\"#n28\" name=\"n28\">28</a>\n<a href=\"#n29\" name=\"n29\">29</a>\n<strong><a href=\"#n30\" name=\"n30\">30</a></strong>\n<a href=\"#n31\" name=\"n31\">31</a>\n<a href=\"#n32\" name=\"n32\">32</a>\n<a href=\"#n33\" name=\"n33\">33</a>\n<a href=\"#n34\" name=\"n34\">34</a>\n<a href=\"#n35\" name=\"n35\">35</a>\n<a href=\"#n36\" name=\"n36\">36</a>\n<a href=\"#n37\" name=\"n37\">37</a>\n<a href=\"#n38\" name=\"n38\">38</a>\n<a href=\"#n39\" name=\"n39\">39</a>\n<strong><a href=\"#n40\" name=\"n40\">40</a></strong>\n<a href=\"#n41\" name=\"n41\">41</a>\n<a href=\"#n42\" name=\"n42\">42</a>\n<a href=\"#n43\" name=\"n43\">43</a>\n<a href=\"#n44\" name=\"n44\">44</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#777\">// group.js</span>\nmyapp.directive(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">groupForm</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#080;font-weight:bold\">function</span>(<span style=\"color:#369;font-weight:bold\">$http</span>) {\n<span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#080;font-weight:bold\">return</span> {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#606\">restrict</span>: <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">A</span><span style=\"color:#710\">'</span></span>,\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#606\">scope</span>: <span style=\"color:#069\">true</span>,\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#06B;font-weight:bold\">controller</span>: <span style=\"color:#080;font-weight:bold\">function</span>(<span style=\"color:#369;font-weight:bold\">$scope</span>, <span style=\"color:#369;font-weight:bold\">$attrs</span>) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#080;font-weight:bold\">if</span> (<span style=\"color:#369;font-weight:bold\">$attrs</span>.groupForm == <span style=\"color:#00D\">0</span>) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> console.log(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">new group</span><span style=\"color:#710\">'</span></span>);\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#369;font-weight:bold\">$scope</span>.members = [];\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> } <span style=\"color:#080;font-weight:bold\">else</span> {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> console.log(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">old group</span><span style=\"color:#710\">'</span></span>);\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#369;font-weight:bold\">$scope</span>.group = {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#606\">name</span>: <span style=\"color:#369;font-weight:bold\">$</span>(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">#group_name</span><span style=\"color:#710\">'</span></span>).val();\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> }\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#369;font-weight:bold\">$http</span>.get(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">/group/</span><span style=\"color:#710\">'</span></span> <span style=\"color:#369;font-weight:bold\">$attrs</span>.groupForm <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">/members</span><span style=\"color:#710\">'</span></span>\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> ).success(<span style=\"color:#080;font-weight:bold\">function</span>(data) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> console.log(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">success</span><span style=\"color:#710\">'</span></span>);\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#369;font-weight:bold\">$scope</span>.members = data;\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> }).error(<span style=\"color:#080;font-weight:bold\">function</span>(data) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> console.log(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">error</span><span style=\"color:#710\">'</span></span>);\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> });\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> } \n\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#369;font-weight:bold\">$scope</span>.<span style=\"color:#06B;font-weight:bold\">addMember</span> = <span style=\"color:#080;font-weight:bold\">function</span>(event) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> event.preventDefault();\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#369;font-weight:bold\">$scope</span>.member.push({\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#606\">name</span>: <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">new member</span><span style=\"color:#710\">'</span></span>\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> });\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> };\n\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#369;font-weight:bold\">$scope</span>.<span style=\"color:#080;font-weight:bold\">delete</span> = <span style=\"color:#080;font-weight:bold\">function</span>(member) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#080;font-weight:bold\">if</span> (member.id) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#777\">// saved member</span>\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> member.destroy = <span style=\"color:#00D\">1</span>;\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> } <span style=\"color:#080;font-weight:bold\">else</span> {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#777\">// unsaved member, remove it from members.</span>\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#369;font-weight:bold\">$scope</span>.members.splice( <span style=\"color:#369;font-weight:bold\">$</span>.inArray(member, <span style=\"color:#369;font-weight:bold\">$scope</span>.members), <span style=\"color:#00D\">1</span> );\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> }\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> };\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> },\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#06B;font-weight:bold\">link</span>: <span style=\"color:#080;font-weight:bold\">function</span>(scope, element, attrs) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> }<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#F00;background-color:#FAA\"> </span>\n<span style=\"color:#F00;background-color:#FAA\"> </span> }\n});\n</pre></td>\n</tr></table>\n\n        </div>\nNow, you can freely add and remove member under the group until you submit the form to save both group and members into database through Rails. <br>", pretty_preview: "<p>Form is one important feature of Angular.js. Unfortunately, it conflicts with Rails in some ways. For a standard Rails form like this:<br></p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/erb.png' alt='erb'/>\n              </div>\n          <div class=\"CodeRay\">\n  <div class=\"code\"><pre><span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> form_for <span style=\"color:#33B\">@post</span> <span style=\"color:#080;font-weight:bold\">do</span> |f| <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>\n  <span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> f.text_field <span style=\"color:#A60\">:title</span> <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>\n  <span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> f.text_area <span style=\"color:#A60\">:content</span> <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>\n\n  <span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> f.submit <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>\n<span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%</span> <span style=\"color:#080;font-weight:bold\">end</span> <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>\n</pre></div>\n</div>\n\n        </div>\nThen ...<br>"},
  {id: 374, name: "Use Middleman to write internationalized web site", category_id: 3, body: "<a href=\"http://middlemanapp.com/\"><code>Middleman</code></a> allows you to create a static web in a very similar way to Rails. If you are building a web site which updates occasionally, such as news or personal blog, you might not need a dynamic frameworks. Hosting a static web site now is almost free. In many cases, you just need to use git to push it to a remote repository.<br><br>In some cases, your web site might have pages in different languages. It can be very easily created by middleman.<br><br>Once you <a href=\"http://middlemanapp.com/getting-started/\"><code>install middleman</code></a> and create a web site, you can active the <a href=\"http://middlemanapp.com/advanced/localization/\"><code>i18n extension</code></a> in your <span style=\"font-weight: bold;\">config.rb</span>:<br><pre><code class=\"ruby\">activate :i18n, :mount_at_root =&gt; false</code></pre>Note that we do not set any language as default. Thus, pages in English will stay in /en and so on.<br><br>For layout, you probably want to localize the text since text in layout is often fewer than content.<br><br>Similar to what Rails does, you create locales under your project directory, create en.yml for English translation:<br><pre><code>---<br>en:<br>  hello: 'hello in English'</code></pre>then use this in your <span style=\"font-weight: bold;\">layout.erb</span>:<br><pre><code class=\"erb\">&lt;%= I18n.t('hello') %&gt;;</code></pre>For content of each page, it is not convenient to put long text in yml file. Therefore, you can create localized template. For example, if you have <span style=\"font-weight: bold;\">index.html.erb</span>, you can create <span style=\"font-weight: bold;\">index.en.html.erb</span> with content in English. This file will be converted to <span style=\"font-weight: bold;\">/en/index.html</span> and <span style=\"font-weight: bold;\">/index.en.html</span> by middleman. Therefore, all pages in English will live under /en<br><br>To link pages in the same language in layout or pages, you can use link like this:<br><pre><code class=\"erb\">&lt;a href='&lt;%= \"/\#{I18n.locale}/about.html\" %&gt;'&gt;About&lt;/a&gt;</code></pre>If you navigate to pages under /en, I18n.locale is en. It knows your current locale.<br><br>Since we set <span style=\"font-weight: bold;\">mount_at_root</span> as false, there is not default <span style=\"font-weight: bold;\">index.html</span> under root directory. You can create a virtual one in config.ru:<br><pre><code class=\"ruby\">page \"/index.html\", :proxy =&gt; \"/index.en.html\"</code></pre>We set <span style=\"font-weight: bold;\">proxy</span> to <span style=\"font-weight: bold;\">/index.en.html</span> because <span style=\"font-weight: bold;\">/en/index.html</span> is also a virtual one, which cannot be linked.<br><br>By this way, you provide a single entrance page in English. Once users click to other pages, <span style=\"font-weight: bold;\">I18n.locale</span> will know which language they are reading, and all links are locale-aware.<br><br>To allow users to select language, you can simply create a list (or pulldown menu) like this:<br><pre><code class=\"erb\">&lt;ul class='dropdown-menu pull-right' role='menu'&gt;<br>&lt;li&gt;<br>  &lt;a href=\"/en/index.html\"&gt;English&lt;/a&gt;<br>&lt;/li&gt;<br>&lt;li&gt;<br>  &lt;a href=\"/jp/index.html\"&gt;Japanese&lt;/a&gt;<br>&lt;/li&gt;<br>&lt;/ul&gt;</code></pre>Once they jump to a language, all links are under the same locale. Therefore, you can build your web site in multiple languages. <br>", created_at: "2013-12-13 19:56:09", updated_at: "2013-12-13 19:56:09", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "<a href=\"http://middlemanapp.com/\"><code>Middleman</code></a> allows you to create a static web in a very similar way to Rails. If you are building a web site which updates occasionally, such as news or personal blog, you might not need a dynamic frameworks. Hosting a static web site now is almost free. In many cases, you just need to use git to push it to a remote repository.<br><br>In some cases, your web site might have pages in different languages. It can be very easily created by middleman.<br><br>Once you <a href=\"http://middlemanapp.com/getting-started/\"><code>install middleman</code></a> and create a web site, you can active the <a href=\"http://middlemanapp.com/advanced/localization/\"><code>i18n extension</code></a> in your <span style=\"font-weight: bold;\">config.rb</span>:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n</pre></td>\n  <td class=\"code\"><pre>activate <span style=\"color:#A60\">:i18n</span>, <span style=\"color:#A60\">:mount_at_root</span> =&gt; <span style=\"color:#069\">false</span>\n</pre></td>\n</tr></table>\n\n        </div>\nNote that we do not set any language as default. Thus, pages in English will stay in /en and so on.<br><br>For layout, you probably want to localize the text since text in layout is often fewer than content.<br><br>Similar to what Rails does, you create locales under your project directory, create en.yml for English translation:<br>        <div class='oa clearfix'>\n          \n          <pre><code>---<br>en:<br>  hello: 'hello in English'</code></pre>\n        </div>\nthen use this in your <span style=\"font-weight: bold;\">layout.erb</span>:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/erb.png' alt='erb'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> <span style=\"color:#036;font-weight:bold\">I18n</span>.t(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">hello</span><span style=\"color:#710\">'</span></span>) <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>;\n</pre></td>\n</tr></table>\n\n        </div>\nFor content of each page, it is not convenient to put long text in yml file. Therefore, you can create localized template. For example, if you have <span style=\"font-weight: bold;\">index.html.erb</span>, you can create <span style=\"font-weight: bold;\">index.en.html.erb</span> with content in English. This file will be converted to <span style=\"font-weight: bold;\">/en/index.html</span> and <span style=\"font-weight: bold;\">/index.en.html</span> by middleman. Therefore, all pages in English will live under /en<br><br>To link pages in the same language in layout or pages, you can use link like this:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/erb.png' alt='erb'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#070;font-weight:bold\">&lt;a</span> <span style=\"color:#b48\">href</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span></span><span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">/</span><span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">\#{</span><span style=\"color:#036;font-weight:bold\">I18n</span>.locale<span style=\"font-weight:bold;color:#666\">}</span></span><span style=\"color:#D20\">/about.html</span><span style=\"color:#710\">&quot;</span></span> <span style=\"font-weight:bold;color:#666\">%&gt;</span></span><span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span>About<span style=\"color:#070;font-weight:bold\">&lt;/a&gt;</span>\n</pre></td>\n</tr></table>\n\n        </div>\nIf you navigate to pages under /en, I18n.locale is en. It knows your current locale.<br><br>Since we set <span style=\"font-weight: bold;\">mount_at_root</span> as false, there is not default <span style=\"font-weight: bold;\">index.html</span> under root directory. You can create a virtual one in config.ru:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n</pre></td>\n  <td class=\"code\"><pre>page <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">/index.html</span><span style=\"color:#710\">&quot;</span></span>, <span style=\"color:#A60\">:proxy</span> =&gt; <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">/index.en.html</span><span style=\"color:#710\">&quot;</span></span>\n</pre></td>\n</tr></table>\n\n        </div>\nWe set <span style=\"font-weight: bold;\">proxy</span> to <span style=\"font-weight: bold;\">/index.en.html</span> because <span style=\"font-weight: bold;\">/en/index.html</span> is also a virtual one, which cannot be linked.<br><br>By this way, you provide a single entrance page in English. Once users click to other pages, <span style=\"font-weight: bold;\">I18n.locale</span> will know which language they are reading, and all links are locale-aware.<br><br>To allow users to select language, you can simply create a list (or pulldown menu) like this:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/erb.png' alt='erb'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n<a href=\"#n8\" name=\"n8\">8</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#070;font-weight:bold\">&lt;ul</span> <span style=\"color:#b48\">class</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">dropdown-menu pull-right</span><span style=\"color:#710\">'</span></span> <span style=\"color:#b48\">role</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">menu</span><span style=\"color:#710\">'</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span>\n<span style=\"color:#070;font-weight:bold\">&lt;li&gt;</span>\n  <span style=\"color:#070;font-weight:bold\">&lt;a</span> <span style=\"color:#b48\">href</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">/en/index.html</span><span style=\"color:#710\">&quot;</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span>English<span style=\"color:#070;font-weight:bold\">&lt;/a&gt;</span>\n<span style=\"color:#070;font-weight:bold\">&lt;/li&gt;</span>\n<span style=\"color:#070;font-weight:bold\">&lt;li&gt;</span>\n  <span style=\"color:#070;font-weight:bold\">&lt;a</span> <span style=\"color:#b48\">href</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">/jp/index.html</span><span style=\"color:#710\">&quot;</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span>Japanese<span style=\"color:#070;font-weight:bold\">&lt;/a&gt;</span>\n<span style=\"color:#070;font-weight:bold\">&lt;/li&gt;</span>\n<span style=\"color:#070;font-weight:bold\">&lt;/ul&gt;</span>\n</pre></td>\n</tr></table>\n\n        </div>\nOnce they jump to a language, all links are under the same locale. Therefore, you can build your web site in multiple languages. <br>", pretty_preview: "<a href=\"http://middlemanapp.com/\"><code>Middleman</code></a> allows you to create a static web in a very similar way to Rails. If you are building a web site which updates occasionally, such as news or personal blog, you might not need a dynamic frameworks. Hosting a static web site now is almost free. In many...<br>"},
  {id: 375, name: "Best Practice of Using Angular.js with Rails: Basic Usage", category_id: 3, body: "<p>After deploying <a href=\"http://angularjs.org/\"><code>Angular.js</code></a> with a Rails application for some time, I draw a few conclusions on the best practice of using Angular.js with Rails. While you can write a whole application with Angular.js, Rails might provide more facilities for complicated applications.<br><br><font style=\"font-size: 18px;\"><span style=\"font-weight: bold;\">Installation</span></font><br><br>To use Angular.js in Rails, you can simply add its javascript library into Rails assets, use CDN from google, or use <code><a href=\"https://rubygems.org/gems/angular-rails-engine\">angular-rails-engine</a></code> gem.<br><br><font style=\"font-size: 18px;\"><span style=\"font-weight: bold;\">Access Angular.js in Rails</span></font><br><br>To make Angular.js accessible for Rails, create a variable referring to angular like this:<br></p>\n<pre><code class=\"javascript\">&lt;!-- app/assets/javascripts/angular_app.js --&gt;<br>var myapp = angular.module('myapp', [])<br>  .config([\"$httpProvider\", function(provider) {<br>    provider.defaults.headers.common['X-CSRF-Token'] = $('meta[name=csrf-token]').attr('content');<br>  }])</code></pre>Then include module in layout template:<br><pre><code class=\"html\">&lt;!DOCTYPE html&gt;<br>&lt;html ng-app='myapp'&gt;<br>&lt;head&gt;<br>...</code></pre>Then you can use this variable <span style=\"font-weight: bold;\">myapp</span> in your javscript everywhere and use Angular.js directive in views.<br><br><span style=\"font-weight: bold;\"><font style=\"font-size: 18px;\">Use Directive Where You Can</font></span><br><br>While Angular.js provides <a href=\"http://docs.angularjs.org/guide/dev_guide.mvc.understanding_controller\"><code>Controller</code></a>, it is better to use <a href=\"http://docs.angularjs.org/guide/directive\"><code>Directive</code></a>, which has its own controller already. A basic form of directive looks like this:<br><pre><code class=\"javascript\">myapp.directive('postIndex', function($http) {<br>  return {<br>    restrict: 'A',<br>    scope: true,<br>    controller: function($scope, $attrs) {<br>    },<br>    link: function(scope, element, attrs) {<br>    }<br>  }<br>});</code></pre>And use it in your HTML:<br><pre><code class=\"html\">&lt;div data-post-index&gt;<br>...<br>&lt;/div&gt;</code></pre>Even for very trivial javascript codes, using Directive allows you to find the corresponding javascript from your views easily. For example, to use popover from Bootstrap, the traditional way is:<br><pre><code class=\"html\">&lt;-- View --&gt;<br>&lt;div id='post_1' data-content='a popover'&gt;<br>  Post Title<br>&lt;/div&gt;</code></pre>\n<pre><code class=\"javascript\">// Javascript<br>$('post_1').popover({placement: 'left'});</code></pre>It is not obvious that div with id='post_1' has popover attached to it. By using Directive, it is more clear due to the use of <span style=\"font-weight: bold;\">data-</span> attribute:<br><pre><code class=\"html\">&lt;-- View --&gt;<br>&lt;div id='post_1' data-popover='a popover'&gt;<br>  Post Title<br>&lt;/div&gt;</code></pre>\n<pre><code class=\"javascript\">myapp.directive('popover', function($http) {<br>  return {<br>    restrict: 'A',<br>    scope: true,<br>    controller: function($scope, $attrs) {<br>    },<br>    link: function(scope, element, attrs) {<br>      element.popover({<br>        content: attrs.popover,<br>        placement: 'left'<br>      });<br>    }<br>  }<br>});</code></pre>By linking <span style=\"font-weight: bold;\">data-popover</span> in views to <span style=\"font-weight: bold;\">popover directive</span>, you can easily find the involved javscript code from view. Instead of using <code>ng-controller</code>, you can also directly use controller in directive, which makes your javascript asset cleaner. <br>", created_at: "2013-12-13 19:56:09", updated_at: "2013-12-13 19:56:09", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "<p>After deploying <a href=\"http://angularjs.org/\"><code>Angular.js</code></a> with a Rails application for some time, I draw a few conclusions on the best practice of using Angular.js with Rails. While you can write a whole application with Angular.js, Rails might provide more facilities for complicated applications.<br><br><font style=\"font-size: 18px;\"><span style=\"font-weight: bold;\">Installation</span></font><br><br>To use Angular.js in Rails, you can simply add its javascript library into Rails assets, use CDN from google, or use <code><a href=\"https://rubygems.org/gems/angular-rails-engine\">angular-rails-engine</a></code> gem.<br><br><font style=\"font-size: 18px;\"><span style=\"font-weight: bold;\">Access Angular.js in Rails</span></font><br><br>To make Angular.js accessible for Rails, create a variable referring to angular like this:<br></p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/javascript.png' alt='javascript'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n</pre></td>\n  <td class=\"code\"><pre>&lt;!-- app/assets/javascripts/angular_app.js --&gt;\n<span style=\"color:#080;font-weight:bold\">var</span> myapp = angular.module(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">myapp</span><span style=\"color:#710\">'</span></span>, [])\n<span style=\"color:#F00;background-color:#FAA\"> </span> .config([<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">$httpProvider</span><span style=\"color:#710\">&quot;</span></span>, <span style=\"color:#080;font-weight:bold\">function</span>(provider) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> provider.defaults.headers.common[<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">X-CSRF-Token</span><span style=\"color:#710\">'</span></span>] = <span style=\"color:#369;font-weight:bold\">$</span>(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">meta[name=csrf-token]</span><span style=\"color:#710\">'</span></span>).attr(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">content</span><span style=\"color:#710\">'</span></span>);\n<span style=\"color:#F00;background-color:#FAA\"> </span> }])\n</pre></td>\n</tr></table>\n\n        </div>\nThen include module in layout template:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/html.png' alt='html'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#34b\">&lt;!DOCTYPE html&gt;</span>\n<span style=\"color:#070;font-weight:bold\">&lt;html</span> <span style=\"color:#b48\">ng-app</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">myapp</span><span style=\"color:#710\">'</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span>\n<span style=\"color:#070;font-weight:bold\">&lt;head&gt;</span>\n...\n</pre></td>\n</tr></table>\n\n        </div>\nThen you can use this variable <span style=\"font-weight: bold;\">myapp</span> in your javscript everywhere and use Angular.js directive in views.<br><br><span style=\"font-weight: bold;\"><font style=\"font-size: 18px;\">Use Directive Where You Can</font></span><br><br>While Angular.js provides <a href=\"http://docs.angularjs.org/guide/dev_guide.mvc.understanding_controller\"><code>Controller</code></a>, it is better to use <a href=\"http://docs.angularjs.org/guide/directive\"><code>Directive</code></a>, which has its own controller already. A basic form of directive looks like this:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/javascript.png' alt='javascript'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n<a href=\"#n8\" name=\"n8\">8</a>\n<a href=\"#n9\" name=\"n9\">9</a>\n<strong><a href=\"#n10\" name=\"n10\">10</a></strong>\n</pre></td>\n  <td class=\"code\"><pre>myapp.directive(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">postIndex</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#080;font-weight:bold\">function</span>(<span style=\"color:#369;font-weight:bold\">$http</span>) {\n<span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#080;font-weight:bold\">return</span> {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#606\">restrict</span>: <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">A</span><span style=\"color:#710\">'</span></span>,\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#606\">scope</span>: <span style=\"color:#069\">true</span>,\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#06B;font-weight:bold\">controller</span>: <span style=\"color:#080;font-weight:bold\">function</span>(<span style=\"color:#369;font-weight:bold\">$scope</span>, <span style=\"color:#369;font-weight:bold\">$attrs</span>) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> },\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#06B;font-weight:bold\">link</span>: <span style=\"color:#080;font-weight:bold\">function</span>(scope, element, attrs) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> }\n<span style=\"color:#F00;background-color:#FAA\"> </span> }\n});\n</pre></td>\n</tr></table>\n\n        </div>\nAnd use it in your HTML:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/html.png' alt='html'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#070;font-weight:bold\">&lt;div</span> <span style=\"color:#b48\">data-post-index</span><span style=\"color:#070;font-weight:bold\">&gt;</span>\n...\n<span style=\"color:#070;font-weight:bold\">&lt;/div&gt;</span>\n</pre></td>\n</tr></table>\n\n        </div>\nEven for very trivial javascript codes, using Directive allows you to find the corresponding javascript from your views easily. For example, to use popover from Bootstrap, the traditional way is:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/html.png' alt='html'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#070;font-weight:bold\">&lt;--</span> <span style=\"color:#b48\">View</span> <span style=\"color:#b48\">--</span><span style=\"color:#070;font-weight:bold\">&gt;</span>\n<span style=\"color:#070;font-weight:bold\">&lt;div</span> <span style=\"color:#b48\">id</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">post_1</span><span style=\"color:#710\">'</span></span> <span style=\"color:#b48\">data-content</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">a popover</span><span style=\"color:#710\">'</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span>\n  Post Title\n<span style=\"color:#070;font-weight:bold\">&lt;/div&gt;</span>\n</pre></td>\n</tr></table>\n\n        </div>\n\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/javascript.png' alt='javascript'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#777\">// Javascript</span>\n<span style=\"color:#369;font-weight:bold\">$</span>(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">post_1</span><span style=\"color:#710\">'</span></span>).popover({<span style=\"color:#606\">placement</span>: <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">left</span><span style=\"color:#710\">'</span></span>});\n</pre></td>\n</tr></table>\n\n        </div>\nIt is not obvious that div with id='post_1' has popover attached to it. By using Directive, it is more clear due to the use of <span style=\"font-weight: bold;\">data-</span> attribute:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/html.png' alt='html'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#070;font-weight:bold\">&lt;--</span> <span style=\"color:#b48\">View</span> <span style=\"color:#b48\">--</span><span style=\"color:#070;font-weight:bold\">&gt;</span>\n<span style=\"color:#070;font-weight:bold\">&lt;div</span> <span style=\"color:#b48\">id</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">post_1</span><span style=\"color:#710\">'</span></span> <span style=\"color:#b48\">data-popover</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">a popover</span><span style=\"color:#710\">'</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span>\n  Post Title\n<span style=\"color:#070;font-weight:bold\">&lt;/div&gt;</span>\n</pre></td>\n</tr></table>\n\n        </div>\n\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/javascript.png' alt='javascript'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n<a href=\"#n8\" name=\"n8\">8</a>\n<a href=\"#n9\" name=\"n9\">9</a>\n<strong><a href=\"#n10\" name=\"n10\">10</a></strong>\n<a href=\"#n11\" name=\"n11\">11</a>\n<a href=\"#n12\" name=\"n12\">12</a>\n<a href=\"#n13\" name=\"n13\">13</a>\n<a href=\"#n14\" name=\"n14\">14</a>\n</pre></td>\n  <td class=\"code\"><pre>myapp.directive(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">popover</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#080;font-weight:bold\">function</span>(<span style=\"color:#369;font-weight:bold\">$http</span>) {\n<span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#080;font-weight:bold\">return</span> {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#606\">restrict</span>: <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">A</span><span style=\"color:#710\">'</span></span>,\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#606\">scope</span>: <span style=\"color:#069\">true</span>,\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#06B;font-weight:bold\">controller</span>: <span style=\"color:#080;font-weight:bold\">function</span>(<span style=\"color:#369;font-weight:bold\">$scope</span>, <span style=\"color:#369;font-weight:bold\">$attrs</span>) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> },\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#06B;font-weight:bold\">link</span>: <span style=\"color:#080;font-weight:bold\">function</span>(scope, element, attrs) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> element.popover({\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#606\">content</span>: attrs.popover,\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#606\">placement</span>: <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">left</span><span style=\"color:#710\">'</span></span>\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> });\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> }\n<span style=\"color:#F00;background-color:#FAA\"> </span> }\n});\n</pre></td>\n</tr></table>\n\n        </div>\nBy linking <span style=\"font-weight: bold;\">data-popover</span> in views to <span style=\"font-weight: bold;\">popover directive</span>, you can easily find the involved javscript code from view. Instead of using <code>ng-controller</code>, you can also directly use controller in directive, which makes your javascript asset cleaner. <br>", pretty_preview: "<p>After deploying <a href=\"http://angularjs.org/\"><code>Angular.js</code></a> with a Rails application for some time, I draw a few conclusions on the best practice of using Angular.js with Rails. While you can write a whole application with Angular.js, Rails might provide more facilities for complicated applica...<br></p>"},
  {id: 376, name: "Assets Compression with Angular.js", category_id: 3, body: "<p>If you use Angular.js with Rails, you will know that <a href=\"http://blog.berylliumwork.com/2012/12/rails-assets-with-angularjs.html\"><code>assets compression</code></a> will interfere with Angular.js. In <span style=\"font-weight: bold;\">Rails 3</span>, the solution is to set compressor in <span style=\"font-weight: bold;\">config/environments/production.rb</span>:<br></p>\n<pre><code class=\"ruby\">config.assets.js_compressor = Sprockets::LazyCompressor.new { Uglifier.new(:mangle =&gt; false) }</code></pre>In <span style=\"font-weight: bold;\">Rails 4</span>, <code>Sprockets::LazyCompressor</code> is gone. The solution is simpler, but not obvious:<br><pre><code class=\"ruby\">config.assets.js_compressor = Uglifier.new(:mangle =&gt; false)</code></pre>The reason it works is because in <span style=\"font-weight: bold;\">Rails 4</span>, you can have <a href=\"http://guides.rubyonrails.org/asset_pipeline.html#javascript-compression\"><code>your own compressor</code></a> as long as it has method <span style=\"font-weight: bold;\">:compress</span>, and <a href=\"https://github.com/lautis/uglifier/blob/master/lib/uglifier.rb\"><code>uglifier</code></a> does (as an alias of <span style=\"font-weight: bold;\">:compile</span>). <br>", created_at: "2013-12-13 19:56:09", updated_at: "2013-12-13 19:56:09", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "<p>If you use Angular.js with Rails, you will know that <a href=\"http://blog.berylliumwork.com/2012/12/rails-assets-with-angularjs.html\"><code>assets compression</code></a> will interfere with Angular.js. In <span style=\"font-weight: bold;\">Rails 3</span>, the solution is to set compressor in <span style=\"font-weight: bold;\">config/environments/production.rb</span>:<br></p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n</pre></td>\n  <td class=\"code\"><pre>config.assets.js_compressor = <span style=\"color:#036;font-weight:bold\">Sprockets</span>::<span style=\"color:#036;font-weight:bold\">LazyCompressor</span>.new { <span style=\"color:#036;font-weight:bold\">Uglifier</span>.new(<span style=\"color:#A60\">:mangle</span> =&gt; <span style=\"color:#069\">false</span>) }\n</pre></td>\n</tr></table>\n\n        </div>\nIn <span style=\"font-weight: bold;\">Rails 4</span>, <code>Sprockets::LazyCompressor</code> is gone. The solution is simpler, but not obvious:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n</pre></td>\n  <td class=\"code\"><pre>config.assets.js_compressor = <span style=\"color:#036;font-weight:bold\">Uglifier</span>.new(<span style=\"color:#A60\">:mangle</span> =&gt; <span style=\"color:#069\">false</span>)\n</pre></td>\n</tr></table>\n\n        </div>\nThe reason it works is because in <span style=\"font-weight: bold;\">Rails 4</span>, you can have <a href=\"http://guides.rubyonrails.org/asset_pipeline.html#javascript-compression\"><code>your own compressor</code></a> as long as it has method <span style=\"font-weight: bold;\">:compress</span>, and <a href=\"https://github.com/lautis/uglifier/blob/master/lib/uglifier.rb\"><code>uglifier</code></a> does (as an alias of <span style=\"font-weight: bold;\">:compile</span>). <br>", pretty_preview: "<p>If you use Angular.js with Rails, you will know that <a href=\"http://blog.berylliumwork.com/2012/12/rails-assets-with-angularjs.html\"><code>assets compression</code></a> will interfere with Angular.js. In <span style=\"font-weight: bold;\">Rails 3</span>, the solution is to set compressor in <span style=\"font-weight: bold;\">config/environments/production.rb</span>:<br></p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <div class=\"CodeRay\">\n  <div class=\"code\"><pre>config.assets.js_compressor = <span style=\"color:#036;font-weight:bold\">Sprockets</span>::<span style=\"color:#036;font-weight:bold\">LazyCompressor</span>.new { <span style=\"color:#036;font-weight:bold\">Uglifier</span>.new(<span style=\"color:#A60\">:mangl</span>...\n</pre></div>\n</div>\n\n        </div>\n"},
  {id: 377, name: "Asset Precompile during Pushing Rails 4 to Heroku", category_id: 3, body: "<p>If you push your application to heroku, it will precompile your assets automatically. It might fail if your assets contain references to environment variables such as hostname of database. To fix this problem, in Rails 3, you can disable initialization in your <span style=\"font-weight: bold;\">config/application.rb</span> during assets precompilation.<br></p>\n<pre><code class=\"ruby\">config.assets.initialize_on_precompile = false</code></pre>This setting is not used anymore in Rails 4, but I still get errors while assets are precompiled on Heroku. The problem is where the secret is setup in <span style=\"font-weight: bold;\">config/initializers/secret_token.rb</span>:<br><pre><code class=\"ruby\">secret = Figaro.env.myapp_secret<br>if secret.nil? || secret.length &lt; 30<br>  raise \"Secret token cannot be loaded\"<br>else<br>  Myapp::Application.config.secret_key_base = secret<br>end</code></pre>I use <a href=\"https://github.com/laserlemon/figaro\"><code>Figaro</code></a> to keep sensitive information out of git repository. For some reason, during assets precompilation, this initializer is called. To fix this problem, Heroku suggests to \"<a href=\"https://devcenter.heroku.com/articles/rails-asset-pipeline\"><code>gracefully handle the nil case</code></a>\". Thus, the code is changed to this:<br><pre><code class=\"ruby\">secret = ENV['MYAPP_SECRET']<br>if secret.nil? || secret.length &lt; 30<br>  puts \"Secret token cannot be loaded\"<br>else<br>  Myapp::Application.config.secret_key_base = secret<br>end</code></pre>", created_at: "2013-12-13 19:56:09", updated_at: "2013-12-13 19:56:09", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "<p>If you push your application to heroku, it will precompile your assets automatically. It might fail if your assets contain references to environment variables such as hostname of database. To fix this problem, in Rails 3, you can disable initialization in your <span style=\"font-weight: bold;\">config/application.rb</span> during assets precompilation.<br></p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n</pre></td>\n  <td class=\"code\"><pre>config.assets.initialize_on_precompile = <span style=\"color:#069\">false</span>\n</pre></td>\n</tr></table>\n\n        </div>\nThis setting is not used anymore in Rails 4, but I still get errors while assets are precompiled on Heroku. The problem is where the secret is setup in <span style=\"font-weight: bold;\">config/initializers/secret_token.rb</span>:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n</pre></td>\n  <td class=\"code\"><pre>secret = <span style=\"color:#036;font-weight:bold\">Figaro</span>.env.myapp_secret\n<span style=\"color:#080;font-weight:bold\">if</span> secret.nil? || secret.length &lt; <span style=\"color:#00D\">30</span>\n  raise <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">Secret token cannot be loaded</span><span style=\"color:#710\">&quot;</span></span>\n<span style=\"color:#080;font-weight:bold\">else</span>\n  <span style=\"color:#036;font-weight:bold\">Myapp</span>::<span style=\"color:#036;font-weight:bold\">Application</span>.config.secret_key_base = secret\n<span style=\"color:#080;font-weight:bold\">end</span>\n</pre></td>\n</tr></table>\n\n        </div>\nI use <a href=\"https://github.com/laserlemon/figaro\"><code>Figaro</code></a> to keep sensitive information out of git repository. For some reason, during assets precompilation, this initializer is called. To fix this problem, Heroku suggests to \"<a href=\"https://devcenter.heroku.com/articles/rails-asset-pipeline\"><code>gracefully handle the nil case</code></a>\". Thus, the code is changed to this:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n</pre></td>\n  <td class=\"code\"><pre>secret = <span style=\"color:#069\">ENV</span>[<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">MYAPP_SECRET</span><span style=\"color:#710\">'</span></span>]\n<span style=\"color:#080;font-weight:bold\">if</span> secret.nil? || secret.length &lt; <span style=\"color:#00D\">30</span>\n  puts <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">Secret token cannot be loaded</span><span style=\"color:#710\">&quot;</span></span>\n<span style=\"color:#080;font-weight:bold\">else</span>\n  <span style=\"color:#036;font-weight:bold\">Myapp</span>::<span style=\"color:#036;font-weight:bold\">Application</span>.config.secret_key_base = secret\n<span style=\"color:#080;font-weight:bold\">end</span>\n</pre></td>\n</tr></table>\n\n        </div>\n", pretty_preview: "<p>If you push your application to heroku, it will precompile your assets automatically. It might fail if your assets contain references to environment variables such as hostname of database. To fix this problem, in Rails 3, you can disable initializatio...<span style=\"font-weight: bold;\">config/appl...</span></p>"},
  {id: 378, name: "Rails 4, Devise 3, MiniTest and Capybara for user login", category_id: 3, body: "<p>First, to get capybara work with minitest, you need gem 'minitest-rails-capybara' in your test group and this <span style=\"font-weight: bold;\">test_helper.rb</span>:<br></p>\n<pre><code class=\"ruby\">ENV[\"RAILS_ENV\"] ||= \"test\"<br>require File.expand_path('../../config/environment', __FILE__)<br>require \"rails/test_help\"<br>require \"minitest/rails\"<br><br># Add `gem \"minitest-rails-capybara\"` to the test group of your Gemfile<br># and uncomment the following if you want Capybara feature tests<br>require \"capybara/rails\"<br>require \"capybara/rspec/matchers\"<br>require \"minitest/rails/capybara\"<br>...<br></code></pre>Note that it requires more files than what minitest-rails-capybara website says.<br><br>Now, you can try the simplest test like this (under <span style=\"font-weight: bold;\">test/features/</span>):<br><pre><code class=\"ruby\">require \"test_helper\"<br><br>class SimpleTest &lt; Capybara::Rails::TestCase<br>  test \"sanity\" do<br>    visit root_path<br>    assert page.has_content?(\"index\")<br>    refute page.has_content?(\"xxxxx\")<br>  end<br>end</code></pre>Note it is slightly different from what minitest-rails-capybara generates.<br><br>Once it works, you can try to use real web browser for testing. You need these two gems: \"selenium-webdriver\" and \"chromedriver-helper\". The later one saves you some time of setting up chrome driver. Without it, capybara will use firefox.<br><br>To ask capybara to use chrome, add this into <span style=\"font-weight: bold;\">test_helper.rb</span>:<br><pre><code class=\"ruby\">Capybara.register_driver :selenium do |app|<br>  Capybara::Selenium::Driver.new(app, :browser =&gt; :chrome)<br>end</code></pre>You might found different versions of this setting online. This one does work. To test it, use this test:<br><pre><code class=\"ruby\">require \"test_helper\"<br><br>class SimpleTest &lt; Capybara::Rails::TestCase<br>  test \"sanity\" do<br>    Capybara.current_driver = :selenium<br><br>    visit root_path<br>    assert page.has_content?(\"index\")<br>    refute page.has_content?(\"xxxxx\")<br>  end<br>end</code></pre>Now, to test real login, the problem is related to database: Capybara does not read what was saved into database. First, add gem '<span style=\"font-weight: bold;\">database_cleaner</span>' in order to clean database for each test. Then try this one:<br><pre><code class=\"ruby\">require \"test_helper\"<br>require \"database_cleaner\"<br><br>DatabaseCleaner.strategy = :truncation<br><br>class LoginTest &lt; Capybara::Rails::TestCase<br>  self.use_transactional_fixtures = false<br><br>  setup do<br>    DatabaseCleaner.start<br>  end<br><br>  teardown do<br>    DatabaseCleaner.clean<br>  end<br><br>  test \"login\" do<br>    Capybara.current_driver = :selenium<br><br>    @user = FactoryGirl.create(:user, :email =&gt; 'test@gmail.com')<br><br>    visit root_path<br>    click_link 'Login'<br><br>    fill_in \"email\", with: 'test@gmail.com'<br>    click_button \"Sign In\"<br>  end<br>end</code></pre>What makes it work is to set <span style=\"font-weight: bold;\">use_transactional_fixtures</span> to <span style=\"font-weight: bold;\">false</span>. Then you need the help from database_cleaner to clean the data.<br><br>Although it is the correct way to log in through browser, it takes too much time for each test. To bypass this process, Devise provides solutions in the wiki. It basically looks like this:<br><pre><code class=\"ruby\">require \"test_helper\"<br><br>class BasicTest &lt; Capybara::Rails::TestCase<br>  include Warden::Test::Helpers<br>  Warden.test_mode!<br><br>  setup do<br>    Capybara.current_driver = :selenium<br><br>    @user = FactoryGirl.create(:user, :email =&gt; 'test@gmail.com')<br>    login_as(@user, :scope =&gt; :user)<br>  end<br><br>  teardown do<br>    Warden.test_reset!<br>  end<br><br>  test \"already login\" do<br>    visit root_path<br>  end<br>end</code></pre>You include the helpers from <span style=\"font-weight: bold;\">Warden</span>, which is what <span style=\"font-weight: bold;\">Devise</span> uses, then run into test mode. After that, you can use <span style=\"font-weight: bold;\">login_as</span> for login. And remember to <code>Warden.test_reset!</code> after each test.", created_at: "2013-12-13 19:56:09", updated_at: "2013-12-13 19:56:09", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "<p>First, to get capybara work with minitest, you need gem 'minitest-rails-capybara' in your test group and this <span style=\"font-weight: bold;\">test_helper.rb</span>:<br></p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n<a href=\"#n8\" name=\"n8\">8</a>\n<a href=\"#n9\" name=\"n9\">9</a>\n<strong><a href=\"#n10\" name=\"n10\">10</a></strong>\n<a href=\"#n11\" name=\"n11\">11</a>\n<a href=\"#n12\" name=\"n12\">12</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#069\">ENV</span>[<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">RAILS_ENV</span><span style=\"color:#710\">&quot;</span></span>] ||= <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">test</span><span style=\"color:#710\">&quot;</span></span>\nrequire <span style=\"color:#036;font-weight:bold\">File</span>.expand_path(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">../../config/environment</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#069\">__FILE__</span>)\nrequire <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">rails/test_help</span><span style=\"color:#710\">&quot;</span></span>\nrequire <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">minitest/rails</span><span style=\"color:#710\">&quot;</span></span>\n\n<span style=\"color:#777\"># Add `gem &quot;minitest-rails-capybara&quot;` to the test group of your Gemfile</span>\n<span style=\"color:#777\"># and uncomment the following if you want Capybara feature tests</span>\nrequire <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">capybara/rails</span><span style=\"color:#710\">&quot;</span></span>\nrequire <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">capybara/rspec/matchers</span><span style=\"color:#710\">&quot;</span></span>\nrequire <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">minitest/rails/capybara</span><span style=\"color:#710\">&quot;</span></span>\n...\n\n</pre></td>\n</tr></table>\n\n        </div>\nNote that it requires more files than what minitest-rails-capybara website says.<br><br>Now, you can try the simplest test like this (under <span style=\"font-weight: bold;\">test/features/</span>):<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n<a href=\"#n8\" name=\"n8\">8</a>\n<a href=\"#n9\" name=\"n9\">9</a>\n</pre></td>\n  <td class=\"code\"><pre>require <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">test_helper</span><span style=\"color:#710\">&quot;</span></span>\n\n<span style=\"color:#080;font-weight:bold\">class</span> <span style=\"color:#B06;font-weight:bold\">SimpleTest</span> &lt; <span style=\"color:#036;font-weight:bold\">Capybara</span>::<span style=\"color:#036;font-weight:bold\">Rails</span>::<span style=\"color:#036;font-weight:bold\">TestCase</span>\n  test <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">sanity</span><span style=\"color:#710\">&quot;</span></span> <span style=\"color:#080;font-weight:bold\">do</span>\n    visit root_path\n    assert page.has_content?(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">index</span><span style=\"color:#710\">&quot;</span></span>)\n    refute page.has_content?(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">xxxxx</span><span style=\"color:#710\">&quot;</span></span>)\n  <span style=\"color:#080;font-weight:bold\">end</span>\n<span style=\"color:#080;font-weight:bold\">end</span>\n</pre></td>\n</tr></table>\n\n        </div>\nNote it is slightly different from what minitest-rails-capybara generates.<br><br>Once it works, you can try to use real web browser for testing. You need these two gems: \"selenium-webdriver\" and \"chromedriver-helper\". The later one saves you some time of setting up chrome driver. Without it, capybara will use firefox.<br><br>To ask capybara to use chrome, add this into <span style=\"font-weight: bold;\">test_helper.rb</span>:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#036;font-weight:bold\">Capybara</span>.register_driver <span style=\"color:#A60\">:selenium</span> <span style=\"color:#080;font-weight:bold\">do</span> |app|\n  <span style=\"color:#036;font-weight:bold\">Capybara</span>::<span style=\"color:#036;font-weight:bold\">Selenium</span>::<span style=\"color:#036;font-weight:bold\">Driver</span>.new(app, <span style=\"color:#A60\">:browser</span> =&gt; <span style=\"color:#A60\">:chrome</span>)\n<span style=\"color:#080;font-weight:bold\">end</span>\n</pre></td>\n</tr></table>\n\n        </div>\nYou might found different versions of this setting online. This one does work. To test it, use this test:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n<a href=\"#n8\" name=\"n8\">8</a>\n<a href=\"#n9\" name=\"n9\">9</a>\n<strong><a href=\"#n10\" name=\"n10\">10</a></strong>\n<a href=\"#n11\" name=\"n11\">11</a>\n</pre></td>\n  <td class=\"code\"><pre>require <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">test_helper</span><span style=\"color:#710\">&quot;</span></span>\n\n<span style=\"color:#080;font-weight:bold\">class</span> <span style=\"color:#B06;font-weight:bold\">SimpleTest</span> &lt; <span style=\"color:#036;font-weight:bold\">Capybara</span>::<span style=\"color:#036;font-weight:bold\">Rails</span>::<span style=\"color:#036;font-weight:bold\">TestCase</span>\n  test <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">sanity</span><span style=\"color:#710\">&quot;</span></span> <span style=\"color:#080;font-weight:bold\">do</span>\n    <span style=\"color:#036;font-weight:bold\">Capybara</span>.current_driver = <span style=\"color:#A60\">:selenium</span>\n\n    visit root_path\n    assert page.has_content?(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">index</span><span style=\"color:#710\">&quot;</span></span>)\n    refute page.has_content?(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">xxxxx</span><span style=\"color:#710\">&quot;</span></span>)\n  <span style=\"color:#080;font-weight:bold\">end</span>\n<span style=\"color:#080;font-weight:bold\">end</span>\n</pre></td>\n</tr></table>\n\n        </div>\nNow, to test real login, the problem is related to database: Capybara does not read what was saved into database. First, add gem '<span style=\"font-weight: bold;\">database_cleaner</span>' in order to clean database for each test. Then try this one:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n<a href=\"#n8\" name=\"n8\">8</a>\n<a href=\"#n9\" name=\"n9\">9</a>\n<strong><a href=\"#n10\" name=\"n10\">10</a></strong>\n<a href=\"#n11\" name=\"n11\">11</a>\n<a href=\"#n12\" name=\"n12\">12</a>\n<a href=\"#n13\" name=\"n13\">13</a>\n<a href=\"#n14\" name=\"n14\">14</a>\n<a href=\"#n15\" name=\"n15\">15</a>\n<a href=\"#n16\" name=\"n16\">16</a>\n<a href=\"#n17\" name=\"n17\">17</a>\n<a href=\"#n18\" name=\"n18\">18</a>\n<a href=\"#n19\" name=\"n19\">19</a>\n<strong><a href=\"#n20\" name=\"n20\">20</a></strong>\n<a href=\"#n21\" name=\"n21\">21</a>\n<a href=\"#n22\" name=\"n22\">22</a>\n<a href=\"#n23\" name=\"n23\">23</a>\n<a href=\"#n24\" name=\"n24\">24</a>\n<a href=\"#n25\" name=\"n25\">25</a>\n<a href=\"#n26\" name=\"n26\">26</a>\n<a href=\"#n27\" name=\"n27\">27</a>\n<a href=\"#n28\" name=\"n28\">28</a>\n</pre></td>\n  <td class=\"code\"><pre>require <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">test_helper</span><span style=\"color:#710\">&quot;</span></span>\nrequire <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">database_cleaner</span><span style=\"color:#710\">&quot;</span></span>\n\n<span style=\"color:#036;font-weight:bold\">DatabaseCleaner</span>.strategy = <span style=\"color:#A60\">:truncation</span>\n\n<span style=\"color:#080;font-weight:bold\">class</span> <span style=\"color:#B06;font-weight:bold\">LoginTest</span> &lt; <span style=\"color:#036;font-weight:bold\">Capybara</span>::<span style=\"color:#036;font-weight:bold\">Rails</span>::<span style=\"color:#036;font-weight:bold\">TestCase</span>\n  <span style=\"color:#069\">self</span>.use_transactional_fixtures = <span style=\"color:#069\">false</span>\n\n  setup <span style=\"color:#080;font-weight:bold\">do</span>\n    <span style=\"color:#036;font-weight:bold\">DatabaseCleaner</span>.start\n  <span style=\"color:#080;font-weight:bold\">end</span>\n\n  teardown <span style=\"color:#080;font-weight:bold\">do</span>\n    <span style=\"color:#036;font-weight:bold\">DatabaseCleaner</span>.clean\n  <span style=\"color:#080;font-weight:bold\">end</span>\n\n  test <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">login</span><span style=\"color:#710\">&quot;</span></span> <span style=\"color:#080;font-weight:bold\">do</span>\n    <span style=\"color:#036;font-weight:bold\">Capybara</span>.current_driver = <span style=\"color:#A60\">:selenium</span>\n\n    <span style=\"color:#33B\">@user</span> = <span style=\"color:#036;font-weight:bold\">FactoryGirl</span>.create(<span style=\"color:#A60\">:user</span>, <span style=\"color:#A60\">:email</span> =&gt; <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">test@gmail.com</span><span style=\"color:#710\">'</span></span>)\n\n    visit root_path\n    click_link <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">Login</span><span style=\"color:#710\">'</span></span>\n\n    fill_in <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">email</span><span style=\"color:#710\">&quot;</span></span>, <span style=\"color:#606\">with</span>: <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">test@gmail.com</span><span style=\"color:#710\">'</span></span>\n    click_button <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">Sign In</span><span style=\"color:#710\">&quot;</span></span>\n  <span style=\"color:#080;font-weight:bold\">end</span>\n<span style=\"color:#080;font-weight:bold\">end</span>\n</pre></td>\n</tr></table>\n\n        </div>\nWhat makes it work is to set <span style=\"font-weight: bold;\">use_transactional_fixtures</span> to <span style=\"font-weight: bold;\">false</span>. Then you need the help from database_cleaner to clean the data.<br><br>Although it is the correct way to log in through browser, it takes too much time for each test. To bypass this process, Devise provides solutions in the wiki. It basically looks like this:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n<a href=\"#n8\" name=\"n8\">8</a>\n<a href=\"#n9\" name=\"n9\">9</a>\n<strong><a href=\"#n10\" name=\"n10\">10</a></strong>\n<a href=\"#n11\" name=\"n11\">11</a>\n<a href=\"#n12\" name=\"n12\">12</a>\n<a href=\"#n13\" name=\"n13\">13</a>\n<a href=\"#n14\" name=\"n14\">14</a>\n<a href=\"#n15\" name=\"n15\">15</a>\n<a href=\"#n16\" name=\"n16\">16</a>\n<a href=\"#n17\" name=\"n17\">17</a>\n<a href=\"#n18\" name=\"n18\">18</a>\n<a href=\"#n19\" name=\"n19\">19</a>\n<strong><a href=\"#n20\" name=\"n20\">20</a></strong>\n<a href=\"#n21\" name=\"n21\">21</a>\n</pre></td>\n  <td class=\"code\"><pre>require <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">test_helper</span><span style=\"color:#710\">&quot;</span></span>\n\n<span style=\"color:#080;font-weight:bold\">class</span> <span style=\"color:#B06;font-weight:bold\">BasicTest</span> &lt; <span style=\"color:#036;font-weight:bold\">Capybara</span>::<span style=\"color:#036;font-weight:bold\">Rails</span>::<span style=\"color:#036;font-weight:bold\">TestCase</span>\n  include <span style=\"color:#036;font-weight:bold\">Warden</span>::<span style=\"color:#036;font-weight:bold\">Test</span>::<span style=\"color:#036;font-weight:bold\">Helpers</span>\n  <span style=\"color:#036;font-weight:bold\">Warden</span>.test_mode!\n\n  setup <span style=\"color:#080;font-weight:bold\">do</span>\n    <span style=\"color:#036;font-weight:bold\">Capybara</span>.current_driver = <span style=\"color:#A60\">:selenium</span>\n\n    <span style=\"color:#33B\">@user</span> = <span style=\"color:#036;font-weight:bold\">FactoryGirl</span>.create(<span style=\"color:#A60\">:user</span>, <span style=\"color:#A60\">:email</span> =&gt; <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">test@gmail.com</span><span style=\"color:#710\">'</span></span>)\n    login_as(<span style=\"color:#33B\">@user</span>, <span style=\"color:#A60\">:scope</span> =&gt; <span style=\"color:#A60\">:user</span>)\n  <span style=\"color:#080;font-weight:bold\">end</span>\n\n  teardown <span style=\"color:#080;font-weight:bold\">do</span>\n    <span style=\"color:#036;font-weight:bold\">Warden</span>.test_reset!\n  <span style=\"color:#080;font-weight:bold\">end</span>\n\n  test <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">already login</span><span style=\"color:#710\">&quot;</span></span> <span style=\"color:#080;font-weight:bold\">do</span>\n    visit root_path\n  <span style=\"color:#080;font-weight:bold\">end</span>\n<span style=\"color:#080;font-weight:bold\">end</span>\n</pre></td>\n</tr></table>\n\n        </div>\nYou include the helpers from <span style=\"font-weight: bold;\">Warden</span>, which is what <span style=\"font-weight: bold;\">Devise</span> uses, then run into test mode. After that, you can use <span style=\"font-weight: bold;\">login_as</span> for login. And remember to <code>Warden.test_reset!</code> after each test.", pretty_preview: "<p>First, to get capybara work with minitest, you need gem 'minitest-rails-capybara' in your test group and this <span style=\"font-weight: bold;\">test_helper.rb</span>:<br></p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <div class=\"CodeRay\">\n  <div class=\"code\"><pre><span style=\"color:#069\">ENV</span>[<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">RAILS_ENV</span><span style=\"color:#710\">&quot;</span></span>] ||= <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">test</span><span style=\"color:#710\">&quot;</span></span>\nrequire <span style=\"color:#036;font-weight:bold\">File</span>.expand_path(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">../../config/environment</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#069\">__FILE__</span>)\nrequire <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">rails/test_help</span><span style=\"color:#710\">&quot;</span></span>\nrequire <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">mi...\n\n</span></span></pre></div>\n</div>\n\n        </div>\n"},
  {id: 379, name: "ActiveModel::Name", category_id: 3, body: "<p>In <span style=\"font-weight: bold;\">Rails 3</span>, a call to model_name return <code>ActiveModel::Name</code>, which behaves like string. In <span style=\"font-weight: bold;\">Rails 4</span>, it doesn't. If you use something like this in <span style=\"font-weight: bold;\">Rails 3</span>:<br></p>\n<pre><code class=\"ruby\">Post.model_name.tableize</code></pre>you need to change it in <span style=\"font-weight: bold;\">Rails 4</span>:<br><pre><code class=\"ruby\">Post.model_name.to_s.tableize</code></pre>", created_at: "2013-12-13 19:56:09", updated_at: "2013-12-13 19:56:09", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "<p>In <span style=\"font-weight: bold;\">Rails 3</span>, a call to model_name return <code>ActiveModel::Name</code>, which behaves like string. In <span style=\"font-weight: bold;\">Rails 4</span>, it doesn't. If you use something like this in <span style=\"font-weight: bold;\">Rails 3</span>:<br></p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#036;font-weight:bold\">Post</span>.model_name.tableize\n</pre></td>\n</tr></table>\n\n        </div>\nyou need to change it in <span style=\"font-weight: bold;\">Rails 4</span>:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#036;font-weight:bold\">Post</span>.model_name.to_s.tableize\n</pre></td>\n</tr></table>\n\n        </div>\n", pretty_preview: "<p>In <span style=\"font-weight: bold;\">Rails 3</span>, a call to model_name return <code>ActiveModel::Name</code>, which behaves like string. In <span style=\"font-weight: bold;\">Rails 4</span>, it doesn't. If you use something like this in <span style=\"font-weight: bold;\">Rails 3</span>:<br></p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <div class=\"CodeRay\">\n  <div class=\"code\"><pre><span style=\"color:#036;font-weight:bold\">Post</span>.model_name.tableize\n</pre></div>\n</div>\n\n        </div>\nyou need to change it in <span style=\"font-weight: bold;\">Rails 4</span>:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <div class=\"CodeRay\">\n  <div class=\"code\"><pre><span style=\"color:#036;font-weight:bold\">Post</span>.model_name.to_s.tableize\n</pre></div>\n</div>\n\n        </div>\n"},
  {id: 380, name: "Rails 4: many-to-many :through and :uniq", category_id: 3, body: "<p>It is common to use <span style=\"font-weight: bold;\">:through</span> and <span style=\"font-weight: bold;\">:uniq</span> in <span style=\"font-weight: bold;\">Rails 3</span> like this:<br></p>\n<pre><code class=\"ruby\">has_many :tags, :through =&gt; :taggings, :uniq =&gt; true</code></pre>In <span style=\"font-weight: bold;\">Rails 4</span>, you need to use <a href=\"http://guides.rubyonrails.org/association_basics.html#has-many-association-reference\"><code>scopes</code></a> for that:<br><pre><code class=\"ruby\">has_many :tags, -&gt; { distinct }, :through =&gt; :taggings</code></pre>and be sure to put scope block before <span style=\"font-weight: bold;\">:through</span>. <br>", created_at: "2013-12-13 19:56:09", updated_at: "2013-12-13 19:56:09", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "<p>It is common to use <span style=\"font-weight: bold;\">:through</span> and <span style=\"font-weight: bold;\">:uniq</span> in <span style=\"font-weight: bold;\">Rails 3</span> like this:<br></p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n</pre></td>\n  <td class=\"code\"><pre>has_many <span style=\"color:#A60\">:tags</span>, <span style=\"color:#A60\">:through</span> =&gt; <span style=\"color:#A60\">:taggings</span>, <span style=\"color:#A60\">:uniq</span> =&gt; <span style=\"color:#069\">true</span>\n</pre></td>\n</tr></table>\n\n        </div>\nIn <span style=\"font-weight: bold;\">Rails 4</span>, you need to use <a href=\"http://guides.rubyonrails.org/association_basics.html#has-many-association-reference\"><code>scopes</code></a> for that:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n</pre></td>\n  <td class=\"code\"><pre>has_many <span style=\"color:#A60\">:tags</span>, -&gt; { distinct }, <span style=\"color:#A60\">:through</span> =&gt; <span style=\"color:#A60\">:taggings</span>\n</pre></td>\n</tr></table>\n\n        </div>\nand be sure to put scope block before <span style=\"font-weight: bold;\">:through</span>. <br>", pretty_preview: "<p>It is common to use <span style=\"font-weight: bold;\">:through</span> and <span style=\"font-weight: bold;\">:uniq</span> in <span style=\"font-weight: bold;\">Rails 3</span> like this:<br></p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <div class=\"CodeRay\">\n  <div class=\"code\"><pre>has_many <span style=\"color:#A60\">:tags</span>, <span style=\"color:#A60\">:through</span> =&gt; <span style=\"color:#A60\">:taggings</span>, <span style=\"color:#A60\">:uniq</span> =&gt; <span style=\"color:#069\">true</span>\n</pre></div>\n</div>\n\n        </div>\nIn <span style=\"font-weight: bold;\">Rails 4</span>, you need to use <a href=\"http://guides.rubyonrails.org/association_basics.html#has-many-association-reference\"><code>scopes</code></a> for that:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <div class=\"CodeRay\">\n  <div class=\"code\"><pre>has_many <span style=\"color:#A60\">:tags</span>, -&gt; { distinct }, <span style=\"color:#A60\">:through</span> =&gt; <span style=\"color:#A60\">:taggings</span>\n</pre></div>\n</div>\n\n        </div>\nand be sure to put scope block before <span style=\"font-weight: bold;\">:through...</span>"},
  {id: 381, name: "Набор unicode символов", category_id: 4, body: "<a href=\"http://copypastecharacter.com/all-characters\">http://copypastecharacter.com/all-characters</a>", created_at: "2013-12-13 19:56:09", updated_at: "2013-12-13 19:56:09", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "<a href=\"http://copypastecharacter.com/all-characters\">http://copypastecharacter.com/all-characters</a>", pretty_preview: "<a href=\"http://copypastecharacter.com/all-characters\">http://copypastecharacter.com/all-characters</a>"},
  {id: 382, name: "Static websites", category_id: 3, body: "<p>You can host static website for free at many places, such as github and google app engine. To create one, I used to use <code><a href=\"http://nanoc.ws/\">nanoc</a></code>. Github use <code><a href=\"https://github.com/mojombo/jekyll\">jekyll</a></code>. If you are familiar with Rails, you might want to try <a href=\"http://middlemanapp.com/\"><code>middleman</code></a>. It gives you the same feel of writing an Rails application. To make a static website more interactive, you can use <a href=\"http://angularjs.org/\"><code>Angular.js</code></a>.</p>", created_at: "2013-12-13 19:56:09", updated_at: "2013-12-13 19:56:09", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "<p>You can host static website for free at many places, such as github and google app engine. To create one, I used to use <code><a href=\"http://nanoc.ws/\">nanoc</a></code>. Github use <code><a href=\"https://github.com/mojombo/jekyll\">jekyll</a></code>. If you are familiar with Rails, you might want to try <a href=\"http://middlemanapp.com/\"><code>middleman</code></a>. It gives you the same feel of writing an Rails application. To make a static website more interactive, you can use <a href=\"http://angularjs.org/\"><code>Angular.js</code></a>.</p>", pretty_preview: "<p>You can host static website for free at many places, such as github and google app engine. To create one, I used to use <code><a href=\"http://nanoc.ws/\">nanoc</a></code>. Github use <code><a href=\"https://github.com/mojombo/jekyll\">jekyll</a></code>. If you are familiar with Rails, you might want to try <a href=\"http://middlemanapp.com/\"><code>middleman</code></a>. It gives you the same feel of writing an Rails application. ...<a href=\"http://angularjs.org/\"><code>Angular.js</code></a></p>"},
  {id: 383, name: "Use session in Rails as cache to reduce the loading of database", category_id: 3, body: "<p>It is common to save users' preferences in database. Many of preference settings will be called in every request to server, for example, locale and nickname of a user. To determining the locale to use, it is sometimes done like this:<br></p>\n<pre><code class=\"ruby\">class ApplicationController &lt; ActionController::Base<br>  before_filter :set_locale<br><br>  def set_locale<br>    if current_user <br>      return if I18n.locale = current_user.preference.locale<br>    end<br><br>    # use gem 'http_accept_language'<br>    locale = request.preferred_language_from(I18n.available_locales)<br>    locale ||= request.compatible_language_from(I18n.available_locales)<br>    I18n.locale = locale || I18n.default_locale<br>  end<br>end</code></pre>In this case, <span style=\"font-weight: bold;\">I18n.locale</span> will be set for every action, and current_user.preference will be called every time, thus, a request to database. If you cache this information in session, which goes with current_user, you can reduce the loading of database like this:<br><pre><code class=\"ruby\">  def set_locale<br>    if current_user <br>      session[:locale] ||= current_user.preference.locale<br>      return if I18n.locale = session[:locale]<br>    end<br><br>    # use gem 'http_accept_language'<br>    locale = request.preferred_language_from(I18n.available_locales)<br>    locale ||= request.compatible_language_from(I18n.available_locales)<br>    I18n.locale = locale || I18n.default_locale<br>  end</code></pre>Note <span style=\"font-weight: bold;\">session</span> in Rails goes along with user while <span style=\"font-weight: bold;\">cookies</span> goes with browser. If you use cookies instead of session in this case, you need to taking care of user log in and out. The preferred locale of users might be different from of browsers in some cases. <br>", created_at: "2013-12-13 19:56:09", updated_at: "2013-12-13 19:56:09", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "<p>It is common to save users' preferences in database. Many of preference settings will be called in every request to server, for example, locale and nickname of a user. To determining the locale to use, it is sometimes done like this:<br></p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n<a href=\"#n8\" name=\"n8\">8</a>\n<a href=\"#n9\" name=\"n9\">9</a>\n<strong><a href=\"#n10\" name=\"n10\">10</a></strong>\n<a href=\"#n11\" name=\"n11\">11</a>\n<a href=\"#n12\" name=\"n12\">12</a>\n<a href=\"#n13\" name=\"n13\">13</a>\n<a href=\"#n14\" name=\"n14\">14</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#080;font-weight:bold\">class</span> <span style=\"color:#B06;font-weight:bold\">ApplicationController</span> &lt; <span style=\"color:#036;font-weight:bold\">ActionController</span>::<span style=\"color:#036;font-weight:bold\">Base</span>\n  before_filter <span style=\"color:#A60\">:set_locale</span>\n\n  <span style=\"color:#080;font-weight:bold\">def</span> <span style=\"color:#06B;font-weight:bold\">set_locale</span>\n    <span style=\"color:#080;font-weight:bold\">if</span> current_user \n      <span style=\"color:#080;font-weight:bold\">return</span> <span style=\"color:#080;font-weight:bold\">if</span> <span style=\"color:#036;font-weight:bold\">I18n</span>.locale = current_user.preference.locale\n    <span style=\"color:#080;font-weight:bold\">end</span>\n\n    <span style=\"color:#777\"># use gem 'http_accept_language'</span>\n    locale = request.preferred_language_from(<span style=\"color:#036;font-weight:bold\">I18n</span>.available_locales)\n    locale ||= request.compatible_language_from(<span style=\"color:#036;font-weight:bold\">I18n</span>.available_locales)\n    <span style=\"color:#036;font-weight:bold\">I18n</span>.locale = locale || <span style=\"color:#036;font-weight:bold\">I18n</span>.default_locale\n  <span style=\"color:#080;font-weight:bold\">end</span>\n<span style=\"color:#080;font-weight:bold\">end</span>\n</pre></td>\n</tr></table>\n\n        </div>\nIn this case, <span style=\"font-weight: bold;\">I18n.locale</span> will be set for every action, and current_user.preference will be called every time, thus, a request to database. If you cache this information in session, which goes with current_user, you can reduce the loading of database like this:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n<a href=\"#n8\" name=\"n8\">8</a>\n<a href=\"#n9\" name=\"n9\">9</a>\n<strong><a href=\"#n10\" name=\"n10\">10</a></strong>\n<a href=\"#n11\" name=\"n11\">11</a>\n</pre></td>\n  <td class=\"code\"><pre>  <span style=\"color:#080;font-weight:bold\">def</span> <span style=\"color:#06B;font-weight:bold\">set_locale</span>\n    <span style=\"color:#080;font-weight:bold\">if</span> current_user \n      session[<span style=\"color:#A60\">:locale</span>] ||= current_user.preference.locale\n      <span style=\"color:#080;font-weight:bold\">return</span> <span style=\"color:#080;font-weight:bold\">if</span> <span style=\"color:#036;font-weight:bold\">I18n</span>.locale = session[<span style=\"color:#A60\">:locale</span>]\n    <span style=\"color:#080;font-weight:bold\">end</span>\n\n    <span style=\"color:#777\"># use gem 'http_accept_language'</span>\n    locale = request.preferred_language_from(<span style=\"color:#036;font-weight:bold\">I18n</span>.available_locales)\n    locale ||= request.compatible_language_from(<span style=\"color:#036;font-weight:bold\">I18n</span>.available_locales)\n    <span style=\"color:#036;font-weight:bold\">I18n</span>.locale = locale || <span style=\"color:#036;font-weight:bold\">I18n</span>.default_locale\n  <span style=\"color:#080;font-weight:bold\">end</span>\n</pre></td>\n</tr></table>\n\n        </div>\nNote <span style=\"font-weight: bold;\">session</span> in Rails goes along with user while <span style=\"font-weight: bold;\">cookies</span> goes with browser. If you use cookies instead of session in this case, you need to taking care of user log in and out. The preferred locale of users might be different from of browsers in some cases. <br>", pretty_preview: "<p>It is common to save users' preferences in database. Many of preference settings will be called in every request to server, for example, locale and nickname of a user. To determining the locale to use, it is sometimes done like this:<br></p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <div class=\"CodeRay\">\n  <div class=\"code\"><pre><span style=\"color:#080;font-weight:bold\">class</span> <span style=\"color:#B06;font-weight:bold\">Application</span>...\n\n</pre></div>\n</div>\n\n        </div>\n"},
  {id: 384, name: "Printing with Bootstrap", category_id: 1, body: "<p>Bootstrap supports different views with <code><a href=\"http://twitter.github.io/bootstrap/scaffolding.html#responsive\">responsive design</a></code>. Although not obviously, it also supports printing view via <a href=\"http://stackoverflow.com/a/15692445\"><code>print.css</code></a>. What you need to do is to set media as '<span style=\"font-weight: bold;\">all</span>' instead of '<span style=\"font-weight: bold;\">screen</span>' like this:<br></p>\n<pre><code class=\"html\">&lt;link href=\"css/bootstrap.min.css\" rel=\"stylesheet\" media=\"all\"&gt;</code></pre>Then add class hidden-print to the DOM which you don't want to be printed.<br><br>Bootstrap by defaults add url after the title of links. To get ride of it, you can <a href=\"http://drupal.stackexchange.com/questions/59900/how-to-get-rid-of-added-urls-when-printing-a-bootstrap-themed-page\"><code>use CSS like this</code></a>:<br><pre><code class=\"css\">@media print {<br>  a[href]:after {<br>    content: none;<br>  }<br>}</code></pre>Add this after bootstrap.css. For more refined approach, try CSS from Bootstrap 3.0.", created_at: "2013-12-13 19:56:09", updated_at: "2013-12-13 19:56:09", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "<p>Bootstrap supports different views with <code><a href=\"http://twitter.github.io/bootstrap/scaffolding.html#responsive\">responsive design</a></code>. Although not obviously, it also supports printing view via <a href=\"http://stackoverflow.com/a/15692445\"><code>print.css</code></a>. What you need to do is to set media as '<span style=\"font-weight: bold;\">all</span>' instead of '<span style=\"font-weight: bold;\">screen</span>' like this:<br></p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/html.png' alt='html'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#070;font-weight:bold\">&lt;link</span> <span style=\"color:#b48\">href</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">css/bootstrap.min.css</span><span style=\"color:#710\">&quot;</span></span> <span style=\"color:#b48\">rel</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">stylesheet</span><span style=\"color:#710\">&quot;</span></span> <span style=\"color:#b48\">media</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">all</span><span style=\"color:#710\">&quot;</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span>\n</pre></td>\n</tr></table>\n\n        </div>\nThen add class hidden-print to the DOM which you don't want to be printed.<br><br>Bootstrap by defaults add url after the title of links. To get ride of it, you can <a href=\"http://drupal.stackexchange.com/questions/59900/how-to-get-rid-of-added-urls-when-printing-a-bootstrap-themed-page\"><code>use CSS like this</code></a>:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/css.png' alt='css'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#088;font-weight:bold\">@media</span> <span style=\"color:#339;font-weight:bold\">print</span> {\n<span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#070;font-weight:bold\">a</span>[<span style=\"color:#b48\">href</span>]<span style=\"color:#00C;font-weight:bold\">:after</span> {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#606\">content</span>: <span style=\"color:#088\">none</span>;\n<span style=\"color:#F00;background-color:#FAA\"> </span> }\n}\n</pre></td>\n</tr></table>\n\n        </div>\nAdd this after bootstrap.css. For more refined approach, try CSS from Bootstrap 3.0.", pretty_preview: "<p>Bootstrap supports different views with <code><a href=\"http://twitter.github.io/bootstrap/scaffolding.html#responsive\">responsive design</a></code>. Although not obviously, it also supports printing view via <a href=\"http://stackoverflow.com/a/15692445\"><code>print.css</code></a>. What you need to do is to set media as '<span style=\"font-weight: bold;\">all</span>' instead of '<span style=\"font-weight: bold;\">screen</span>' like this:<br></p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/html.png' alt='html'/>\n              </div>\n          <div class=\"CodeRay\">\n  <div class=\"code\"><pre><span style=\"color:#070;font-weight:bold\">&lt;link</span> <span style=\"color:#b48\">href</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">css/bootstrap.min.css</span><span style=\"color:#710\">&quot;</span></span> <span style=\"color:#b48\">rel</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">stylesheet</span><span style=\"color:#710\">&quot;</span></span> <span style=\"color:#b48\">media</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">all</span><span style=\"color:#710\">&quot;</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span>\n</pre></div>\n</div>\n\n        </div>\nThen add...<br>"},
  {id: 385, name: "Implement Search Bar for Rails Application", category_id: 3, body: "<p>Searching is an essential function of Rails application. To implement a \ngood one take efforts. If you try to index all your data, your can try \nsomething like Solr and others. If you decide to stay with database \nquery, <code><a href=\"https://github.com/ernie/ransack\">Ransack</a></code> is a good \nchoice. It provides basic and advanced mode with nice user interface, \nallowing you to search by fields and supporting matching any and all. \nUnfortunately, it takes a form to search by fields. If you want \nsomething like Google, where you can specify fields in the same search \nbar, <a href=\"https://github.com/bruce/keyword_search\"><code>keyword_search</code></a> seems to be a good choice. The latest development is under branch <a href=\"https://github.com/bruce/keyword_search/tree/1-5-rel\"><code>1-5-rel</code></a>. It uses <code><a href=\"http://www.complang.org/ragel/\">Ragel</a></code> to parse the search string like this: \"<span style=\"font-weight: bold;\">account has:attachment \nsince:2006-12-03 -description:crazy</span>\". You can modify the Ragel statement\n to fit your especial need. The parsed terms can be combined into a SQL \nquery, thus, gives you the power to control your database query \nefficiently, for example, use <b>ILIKE</b> in PostgreSQL for case-insensitive search. </p>", created_at: "2013-12-13 19:56:09", updated_at: "2013-12-13 19:56:09", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "<p>Searching is an essential function of Rails application. To implement a \ngood one take efforts. If you try to index all your data, your can try \nsomething like Solr and others. If you decide to stay with database \nquery, <code><a href=\"https://github.com/ernie/ransack\">Ransack</a></code> is a good \nchoice. It provides basic and advanced mode with nice user interface, \nallowing you to search by fields and supporting matching any and all. \nUnfortunately, it takes a form to search by fields. If you want \nsomething like Google, where you can specify fields in the same search \nbar, <a href=\"https://github.com/bruce/keyword_search\"><code>keyword_search</code></a> seems to be a good choice. The latest development is under branch <a href=\"https://github.com/bruce/keyword_search/tree/1-5-rel\"><code>1-5-rel</code></a>. It uses <code><a href=\"http://www.complang.org/ragel/\">Ragel</a></code> to parse the search string like this: \"<span style=\"font-weight: bold;\">account has:attachment \nsince:2006-12-03 -description:crazy</span>\". You can modify the Ragel statement\n to fit your especial need. The parsed terms can be combined into a SQL \nquery, thus, gives you the power to control your database query \nefficiently, for example, use <b>ILIKE</b> in PostgreSQL for case-insensitive search. </p>", pretty_preview: "<p>Searching is an essential function of Rails application. To implement a \ngood one take efforts. If you try to index all your data, your can try \nsomething like Solr and others. If you decide to stay with database \nquery, <code><a href=\"https://github.com/ernie/ransack\">Ransack</a></code> is a good \nchoice. It provides basic and advanced mode with nice user interface, \na...<a href=\"https://github.com/bruce/keyword_search\"><code>keyword_search</code></a></p>"},
  {id: 386, name: "Time and TimeZone in Rails and Javascript", category_id: 3, body: "<p>Dealing with time and timezone is not trivial in Rails and Javascript. Here is a nice article to read.<br><br>Let's begin on Rails side. To get time correctly, try these approaches:<br></p>\n<pre><code class=\"ruby\">&gt; Time.zone.now<br>=&gt; Thu, 10 Jan 2013 01:33:55 UTC  00:00<br>&gt; 1.hour.from_now<br>=&gt; Thu, 10 Jan 2013 02:34:00 UTC  00:00<br>&gt; 1.hour.ago<br>=&gt; Thu, 10 Jan 2013 00:34:02 UTC  00:00<br>&gt; 1.hour.ago.class<br>=&gt; ActiveSupport::TimeWithZone</code></pre>Note that every time is in UTC, which is the default setting in Rails, and I do not suggest you change it. And the class of these time are <span style=\"font-weight: bold;\">ActiveSupport::TimeWithZone</span>.<br><br>To use other zone, try this:<br><pre><code class=\"ruby\">&gt; zone = ActiveSupport::TimeZone['Taipei']<br>=&gt; (GMT 08:00) Taipei<br>&gt; zone.now<br>=&gt; Thu, 10 Jan 2013 09:38:22 CST  08:00<br>&gt; zone.parse('2013-01-01 00:00')<br>=&gt; Tue, 01 Jan 2013 00:00:00 CST  08:00<br>&gt; zone.now.advance(:hours =&gt; 1)<br>=&gt; Thu, 10 Jan 2013 10:39:29 CST  08:00</code></pre>As you see, all have <span style=\"font-weight: bold;\"> 08:00</span> time zone.<br><br>To change the time zone without actually change the time, use this:<br><pre><code class=\"ruby\">&gt; time = Time.zone.parse('2013-01-01 00:00')<br>=&gt; Tue, 01 Jan 2013 00:00:00 UTC  00:00<br>&gt; time.in_time_zone('Taipei')<br>=&gt; Tue, 01 Jan 2013 08:00:00 CST  08:00</code></pre>\n<span style=\"font-weight: bold;\">2013-01-01 00:00  00:00</span> is exactly the same time as <span style=\"font-weight: bold;\">2013-01-01 08:00  08:00</span>.<br><br>And Rails automatically save all time in UTC time zone (or default time zone in your Rails settings):<br><pre><code class=\"ruby\">&gt; zone<br>=&gt; (GMT 08:00) Taipei<br>&gt; zone.now<br>=&gt; Thu, 10 Jan 2013 09:50:57 CST  08:00<br>&gt; task = Task.new(:title =&gt; 'Task', :due_at =&gt; zone.now)<br>=&gt; #<br>&gt; task.due_at<br>=&gt; 2013-01-10 01:51:25 UTC<br>&gt; task.due_at.zone<br>=&gt; \"UTC\"<br>&gt; task.due_at.in_time_zone('Taipei')<br>=&gt; Thu, 10 Jan 2013 09:51:25 CST  08:00</code></pre>Even though you create the time <span style=\"font-weight: bold;\">due_at</span> in <span style=\"font-weight: bold;\">Taipei</span> time zone, it is saved in UTC without changing the time. You can get it back by specifying the time zone <span style=\"font-weight: bold;\">Taipei</span>. In another word, you should not only save the time, but also the time zone associated with it. Or let users set a default time zone of his own.<br><br>On the <span style=\"font-weight: bold;\">Javascript</span> side, here is how to get time:<br><pre><code class=\"javascript\">&gt; new Date<br>Thu Jan 10 2013 09:45:32 GMT 0800 (CST)<br>&gt; new XDate<br>[Thu Jan 10 2013 09:32:50 GMT 0800 (CST)]<br>&gt; new XDate(true)<br>[Thu, 10 Jan 2013 01:46:12 GMT]<br>&gt; new Date('2013-1-1')<br>Tue Jan 01 2013 00:00:00 GMT 0800 (CST)<br>&gt; new XDate('2013-1-1')<br>[Tue Jan 01 2013 00:00:00 GMT 0800 (CST)]<br>&gt; new XDate('2013-1-1', true)<br>[Mon, 31 Dec 2012 16:00:00 GMT]</code></pre>As you see, it use default browser time zone, <span style=\"font-weight: bold;\">CST</span>. <a href=\"http://arshaw.com/xdate/\"><code>XDate</code></a> is a modern library for Javascript and I will use it through this article. By passing <span style=\"font-weight: bold;\">true</span> to XDate, you got the same time, but in UTC time zone.<br><br>Now, here is the problem: <span style=\"font-weight: bold;\">users usually don't know the default time zone of their browser and service they use</span>. So if you let them set time as '2013-01-01 12:00', it can be in UTC time or in other time zone. And passing string between Rails and Javascript is not very convenient.<br><br>A better way is to pass time in <span style=\"font-weight: bold;\">milliseconds since the UTC epoch</span>. Here is how Rails does:<br><pre><code class=\"ruby\">&gt; time = Time.zone.parse('2013-1-1 00:00')<br>=&gt; Tue, 01 Jan 2013 00:00:00 UTC  00:00<br>&gt; time.to_i<br>=&gt; 1356998400<br>&gt; zone = ActiveSupport::TimeZone['Taipei']<br>=&gt; (GMT 08:00) Taipei<br>&gt; taipei_time = time.in_time_zone('Taipei')<br>=&gt; Tue, 01 Jan 2013 08:00:00 CST  08:00<br>&gt; taipei_time.to_i<br>=&gt; 1356998400<br>&gt; Time.zone.at(1356998400)<br>=&gt; Tue, 01 Jan 2013 00:00:00 UTC  00:00<br>&gt; Time.zone.at(-1356998400)<br>=&gt; Sat, 01 Jan 1927 00:00:00 UTC  00:00</code></pre>The seconds from UTC epoch is the same regarding to time zone because it is counted from UTC. Note that as long as you use <span style=\"font-weight: bold;\">at()</span>, you got same time regardless of time zone. <span style=\"font-weight: bold;\">zone.at(1356998400)</span> is the same time as <span style=\"font-weight: bold;\">Time.zone.at(1356998400)</span>, only different in time zone.<br><br>To pass this one to <span style=\"font-weight: bold;\">Javascript</span>, you need to multiply it by 1000 into milliseconds:<br><pre><code class=\"javascript\">&gt; new Date(1356998400*1000)<br>Tue Jan 01 2013 08:00:00 GMT 0800 (CST)<br>&gt; new XDate(1356998400*1000)<br>[Tue Jan 01 2013 08:00:00 GMT 0800 (CST)]<br>&gt; new XDate(1356998400*1000, true)<br>[Tue, 01 Jan 2013 00:00:00 GMT]</code></pre>Thus, you can safely pass time between Rails and Javascripts without worrying the time zone.<br><br>What if you want to change time from '2013-01-01 00:00  08:00' to '2013-01-01 00:00 UTC' ? In another word, you want to adjust the timezone offset. Here is what I do in Rails:<br><pre><code class=\"ruby\">&gt; taipei = ActiveSupport::TimeZone['Taipei']<br>=&gt; (GMT 08:00) Taipei<br>&gt; taipei_new_year = taipei.parse('2013-1-1 00:00')<br>=&gt; Tue, 01 Jan 2013 00:00:00 CST  08:00<br>&gt; taipei_new_year.to_i<br>=&gt; 1356969600<br>&gt; taipei.at(1356969600)<br>=&gt; Tue, 01 Jan 2013 00:00:00 CST  08:00<br>&gt; Time.zone.at(1356969600)<br>=&gt; Mon, 31 Dec 2012 16:00:00 UTC  00:00<br>&gt; taipei.utc_to_local(taipei_new_year.to_i)<br>=&gt; 1356998400<br>&gt; Time.zone.at(1356998400)<br>=&gt; Tue, 01 Jan 2013 00:00:00 UTC  00:00</code></pre>By using <span style=\"font-weight: bold;\">utc_to_local</span>, you can get '2013-01-01 00:00 UTC'. And reversely:<br><pre><code class=\"ruby\">&gt; taipei = ActiveSupport::TimeZone['Taipei']<br>=&gt; (GMT 08:00) Taipei<br>&gt; new_year = Time.zone.parse('2013-1-1 00:00')<br>=&gt; Tue, 01 Jan 2013 00:00:00 UTC  00:00<br>&gt; new_year.to_i<br>=&gt; 1356998400<br>&gt; taipei.local_to_utc(new_year.to_i)<br>=&gt; 1356969600<br>&gt; taipei.at(1356969600)<br>=&gt; Tue, 01 Jan 2013 00:00:00 CST  08:00</code></pre>Then you got from '2013-1-1 00:00  00:00' to '2013-1-1 00:00  08:00'.<br><br>Remember, seconds in Rails and milliseconds in Javascript is always counted in UTC time zone.", created_at: "2013-12-13 19:56:09", updated_at: "2013-12-13 19:56:09", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "<p>Dealing with time and timezone is not trivial in Rails and Javascript. Here is a nice article to read.<br><br>Let's begin on Rails side. To get time correctly, try these approaches:<br></p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n<a href=\"#n8\" name=\"n8\">8</a>\n</pre></td>\n  <td class=\"code\"><pre>&gt; <span style=\"color:#036;font-weight:bold\">Time</span>.zone.now\n=&gt; <span style=\"color:#036;font-weight:bold\">Thu</span>, <span style=\"color:#00D\">10</span> <span style=\"color:#036;font-weight:bold\">Jan</span> <span style=\"color:#00D\">2013</span> <span style=\"color:#00D\">01</span>:<span style=\"color:#00D\">33</span>:<span style=\"color:#00D\">55</span> <span style=\"color:#036;font-weight:bold\">UTC</span>  <span style=\"color:#00D\">00</span>:<span style=\"color:#00D\">00</span>\n&gt; <span style=\"color:#00D\">1</span>.hour.from_now\n=&gt; <span style=\"color:#036;font-weight:bold\">Thu</span>, <span style=\"color:#00D\">10</span> <span style=\"color:#036;font-weight:bold\">Jan</span> <span style=\"color:#00D\">2013</span> <span style=\"color:#00D\">02</span>:<span style=\"color:#00D\">34</span>:<span style=\"color:#00D\">00</span> <span style=\"color:#036;font-weight:bold\">UTC</span>  <span style=\"color:#00D\">00</span>:<span style=\"color:#00D\">00</span>\n&gt; <span style=\"color:#00D\">1</span>.hour.ago\n=&gt; <span style=\"color:#036;font-weight:bold\">Thu</span>, <span style=\"color:#00D\">10</span> <span style=\"color:#036;font-weight:bold\">Jan</span> <span style=\"color:#00D\">2013</span> <span style=\"color:#00D\">00</span>:<span style=\"color:#00D\">34</span>:<span style=\"color:#00D\">02</span> <span style=\"color:#036;font-weight:bold\">UTC</span>  <span style=\"color:#00D\">00</span>:<span style=\"color:#00D\">00</span>\n&gt; <span style=\"color:#00D\">1</span>.hour.ago.class\n=&gt; <span style=\"color:#036;font-weight:bold\">ActiveSupport</span>::<span style=\"color:#036;font-weight:bold\">TimeWithZone</span>\n</pre></td>\n</tr></table>\n\n        </div>\nNote that every time is in UTC, which is the default setting in Rails, and I do not suggest you change it. And the class of these time are <span style=\"font-weight: bold;\">ActiveSupport::TimeWithZone</span>.<br><br>To use other zone, try this:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n<a href=\"#n8\" name=\"n8\">8</a>\n</pre></td>\n  <td class=\"code\"><pre>&gt; zone = <span style=\"color:#036;font-weight:bold\">ActiveSupport</span>::<span style=\"color:#036;font-weight:bold\">TimeZone</span>[<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">Taipei</span><span style=\"color:#710\">'</span></span>]\n=&gt; (<span style=\"color:#036;font-weight:bold\">GMT</span> <span style=\"color:#00D\">08</span>:<span style=\"color:#00D\">00</span>) <span style=\"color:#036;font-weight:bold\">Taipei</span>\n&gt; zone.now\n=&gt; <span style=\"color:#036;font-weight:bold\">Thu</span>, <span style=\"color:#00D\">10</span> <span style=\"color:#036;font-weight:bold\">Jan</span> <span style=\"color:#00D\">2013</span> <span style=\"color:#00D\">09</span>:<span style=\"color:#00D\">38</span>:<span style=\"color:#00D\">22</span> <span style=\"color:#036;font-weight:bold\">CST</span>  <span style=\"color:#00D\">08</span>:<span style=\"color:#00D\">00</span>\n&gt; zone.parse(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">2013-01-01 00:00</span><span style=\"color:#710\">'</span></span>)\n=&gt; <span style=\"color:#036;font-weight:bold\">Tue</span>, <span style=\"color:#00D\">01</span> <span style=\"color:#036;font-weight:bold\">Jan</span> <span style=\"color:#00D\">2013</span> <span style=\"color:#00D\">00</span>:<span style=\"color:#00D\">00</span>:<span style=\"color:#00D\">00</span> <span style=\"color:#036;font-weight:bold\">CST</span>  <span style=\"color:#00D\">08</span>:<span style=\"color:#00D\">00</span>\n&gt; zone.now.advance(<span style=\"color:#A60\">:hours</span> =&gt; <span style=\"color:#00D\">1</span>)\n=&gt; <span style=\"color:#036;font-weight:bold\">Thu</span>, <span style=\"color:#00D\">10</span> <span style=\"color:#036;font-weight:bold\">Jan</span> <span style=\"color:#00D\">2013</span> <span style=\"color:#00D\">10</span>:<span style=\"color:#00D\">39</span>:<span style=\"color:#00D\">29</span> <span style=\"color:#036;font-weight:bold\">CST</span>  <span style=\"color:#00D\">08</span>:<span style=\"color:#00D\">00</span>\n</pre></td>\n</tr></table>\n\n        </div>\nAs you see, all have <span style=\"font-weight: bold;\"> 08:00</span> time zone.<br><br>To change the time zone without actually change the time, use this:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n</pre></td>\n  <td class=\"code\"><pre>&gt; time = <span style=\"color:#036;font-weight:bold\">Time</span>.zone.parse(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">2013-01-01 00:00</span><span style=\"color:#710\">'</span></span>)\n=&gt; <span style=\"color:#036;font-weight:bold\">Tue</span>, <span style=\"color:#00D\">01</span> <span style=\"color:#036;font-weight:bold\">Jan</span> <span style=\"color:#00D\">2013</span> <span style=\"color:#00D\">00</span>:<span style=\"color:#00D\">00</span>:<span style=\"color:#00D\">00</span> <span style=\"color:#036;font-weight:bold\">UTC</span>  <span style=\"color:#00D\">00</span>:<span style=\"color:#00D\">00</span>\n&gt; time.in_time_zone(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">Taipei</span><span style=\"color:#710\">'</span></span>)\n=&gt; <span style=\"color:#036;font-weight:bold\">Tue</span>, <span style=\"color:#00D\">01</span> <span style=\"color:#036;font-weight:bold\">Jan</span> <span style=\"color:#00D\">2013</span> <span style=\"color:#00D\">08</span>:<span style=\"color:#00D\">00</span>:<span style=\"color:#00D\">00</span> <span style=\"color:#036;font-weight:bold\">CST</span>  <span style=\"color:#00D\">08</span>:<span style=\"color:#00D\">00</span>\n</pre></td>\n</tr></table>\n\n        </div>\n\n<span style=\"font-weight: bold;\">2013-01-01 00:00  00:00</span> is exactly the same time as <span style=\"font-weight: bold;\">2013-01-01 08:00  08:00</span>.<br><br>And Rails automatically save all time in UTC time zone (or default time zone in your Rails settings):<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n<a href=\"#n8\" name=\"n8\">8</a>\n<a href=\"#n9\" name=\"n9\">9</a>\n<strong><a href=\"#n10\" name=\"n10\">10</a></strong>\n<a href=\"#n11\" name=\"n11\">11</a>\n<a href=\"#n12\" name=\"n12\">12</a>\n</pre></td>\n  <td class=\"code\"><pre>&gt; zone\n=&gt; (<span style=\"color:#036;font-weight:bold\">GMT</span> <span style=\"color:#00D\">08</span>:<span style=\"color:#00D\">00</span>) <span style=\"color:#036;font-weight:bold\">Taipei</span>\n&gt; zone.now\n=&gt; <span style=\"color:#036;font-weight:bold\">Thu</span>, <span style=\"color:#00D\">10</span> <span style=\"color:#036;font-weight:bold\">Jan</span> <span style=\"color:#00D\">2013</span> <span style=\"color:#00D\">09</span>:<span style=\"color:#00D\">50</span>:<span style=\"color:#00D\">57</span> <span style=\"color:#036;font-weight:bold\">CST</span>  <span style=\"color:#00D\">08</span>:<span style=\"color:#00D\">00</span>\n&gt; task = <span style=\"color:#036;font-weight:bold\">Task</span>.new(<span style=\"color:#A60\">:title</span> =&gt; <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">Task</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#A60\">:due_at</span> =&gt; zone.now)\n=&gt; <span style=\"color:#777\">#</span>\n&gt; task.due_at\n=&gt; <span style=\"color:#00D\">2013</span>-<span style=\"color:#00D\">01</span>-<span style=\"color:#00D\">10</span> <span style=\"color:#00D\">01</span>:<span style=\"color:#00D\">51</span>:<span style=\"color:#00D\">25</span> <span style=\"color:#036;font-weight:bold\">UTC</span>\n&gt; task.due_at.zone\n=&gt; <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">UTC</span><span style=\"color:#710\">&quot;</span></span>\n&gt; task.due_at.in_time_zone(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">Taipei</span><span style=\"color:#710\">'</span></span>)\n=&gt; <span style=\"color:#036;font-weight:bold\">Thu</span>, <span style=\"color:#00D\">10</span> <span style=\"color:#036;font-weight:bold\">Jan</span> <span style=\"color:#00D\">2013</span> <span style=\"color:#00D\">09</span>:<span style=\"color:#00D\">51</span>:<span style=\"color:#00D\">25</span> <span style=\"color:#036;font-weight:bold\">CST</span>  <span style=\"color:#00D\">08</span>:<span style=\"color:#00D\">00</span>\n</pre></td>\n</tr></table>\n\n        </div>\nEven though you create the time <span style=\"font-weight: bold;\">due_at</span> in <span style=\"font-weight: bold;\">Taipei</span> time zone, it is saved in UTC without changing the time. You can get it back by specifying the time zone <span style=\"font-weight: bold;\">Taipei</span>. In another word, you should not only save the time, but also the time zone associated with it. Or let users set a default time zone of his own.<br><br>On the <span style=\"font-weight: bold;\">Javascript</span> side, here is how to get time:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/javascript.png' alt='javascript'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n<a href=\"#n8\" name=\"n8\">8</a>\n<a href=\"#n9\" name=\"n9\">9</a>\n<strong><a href=\"#n10\" name=\"n10\">10</a></strong>\n<a href=\"#n11\" name=\"n11\">11</a>\n<a href=\"#n12\" name=\"n12\">12</a>\n</pre></td>\n  <td class=\"code\"><pre>&gt; <span style=\"color:#080;font-weight:bold\">new</span> Date\nThu Jan <span style=\"color:#00D\">10</span> <span style=\"color:#00D\">2013</span> <span style=\"color:#00D\">09</span>:<span style=\"color:#00D\">45</span>:<span style=\"color:#00D\">32</span> GMT <span style=\"color:#00D\">0800</span> (CST)\n&gt; <span style=\"color:#080;font-weight:bold\">new</span> XDate\n[Thu Jan <span style=\"color:#00D\">10</span> <span style=\"color:#00D\">2013</span> <span style=\"color:#00D\">09</span>:<span style=\"color:#00D\">32</span>:<span style=\"color:#00D\">50</span> GMT <span style=\"color:#00D\">0800</span> (CST)]\n&gt; <span style=\"color:#080;font-weight:bold\">new</span> XDate(<span style=\"color:#069\">true</span>)\n[Thu, <span style=\"color:#00D\">10</span> Jan <span style=\"color:#00D\">2013</span> <span style=\"color:#40E\">01</span>:<span style=\"color:#00D\">46</span>:<span style=\"color:#00D\">12</span> GMT]\n&gt; <span style=\"color:#080;font-weight:bold\">new</span> Date(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">2013-1-1</span><span style=\"color:#710\">'</span></span>)\nTue Jan <span style=\"color:#40E\">01</span> <span style=\"color:#00D\">2013</span> <span style=\"color:#40E\">00</span>:<span style=\"color:#40E\">00</span>:<span style=\"color:#40E\">00</span> GMT <span style=\"color:#00D\">0800</span> (CST)\n&gt; <span style=\"color:#080;font-weight:bold\">new</span> XDate(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">2013-1-1</span><span style=\"color:#710\">'</span></span>)\n[Tue Jan <span style=\"color:#40E\">01</span> <span style=\"color:#00D\">2013</span> <span style=\"color:#40E\">00</span>:<span style=\"color:#40E\">00</span>:<span style=\"color:#40E\">00</span> GMT <span style=\"color:#00D\">0800</span> (CST)]\n&gt; <span style=\"color:#080;font-weight:bold\">new</span> XDate(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">2013-1-1</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#069\">true</span>)\n[Mon, <span style=\"color:#00D\">31</span> Dec <span style=\"color:#00D\">2012</span> <span style=\"color:#00D\">16</span>:<span style=\"color:#40E\">00</span>:<span style=\"color:#40E\">00</span> GMT]\n</pre></td>\n</tr></table>\n\n        </div>\nAs you see, it use default browser time zone, <span style=\"font-weight: bold;\">CST</span>. <a href=\"http://arshaw.com/xdate/\"><code>XDate</code></a> is a modern library for Javascript and I will use it through this article. By passing <span style=\"font-weight: bold;\">true</span> to XDate, you got the same time, but in UTC time zone.<br><br>Now, here is the problem: <span style=\"font-weight: bold;\">users usually don't know the default time zone of their browser and service they use</span>. So if you let them set time as '2013-01-01 12:00', it can be in UTC time or in other time zone. And passing string between Rails and Javascript is not very convenient.<br><br>A better way is to pass time in <span style=\"font-weight: bold;\">milliseconds since the UTC epoch</span>. Here is how Rails does:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n<a href=\"#n8\" name=\"n8\">8</a>\n<a href=\"#n9\" name=\"n9\">9</a>\n<strong><a href=\"#n10\" name=\"n10\">10</a></strong>\n<a href=\"#n11\" name=\"n11\">11</a>\n<a href=\"#n12\" name=\"n12\">12</a>\n<a href=\"#n13\" name=\"n13\">13</a>\n<a href=\"#n14\" name=\"n14\">14</a>\n</pre></td>\n  <td class=\"code\"><pre>&gt; time = <span style=\"color:#036;font-weight:bold\">Time</span>.zone.parse(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">2013-1-1 00:00</span><span style=\"color:#710\">'</span></span>)\n=&gt; <span style=\"color:#036;font-weight:bold\">Tue</span>, <span style=\"color:#00D\">01</span> <span style=\"color:#036;font-weight:bold\">Jan</span> <span style=\"color:#00D\">2013</span> <span style=\"color:#00D\">00</span>:<span style=\"color:#00D\">00</span>:<span style=\"color:#00D\">00</span> <span style=\"color:#036;font-weight:bold\">UTC</span>  <span style=\"color:#00D\">00</span>:<span style=\"color:#00D\">00</span>\n&gt; time.to_i\n=&gt; <span style=\"color:#00D\">1356998400</span>\n&gt; zone = <span style=\"color:#036;font-weight:bold\">ActiveSupport</span>::<span style=\"color:#036;font-weight:bold\">TimeZone</span>[<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">Taipei</span><span style=\"color:#710\">'</span></span>]\n=&gt; (<span style=\"color:#036;font-weight:bold\">GMT</span> <span style=\"color:#00D\">08</span>:<span style=\"color:#00D\">00</span>) <span style=\"color:#036;font-weight:bold\">Taipei</span>\n&gt; taipei_time = time.in_time_zone(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">Taipei</span><span style=\"color:#710\">'</span></span>)\n=&gt; <span style=\"color:#036;font-weight:bold\">Tue</span>, <span style=\"color:#00D\">01</span> <span style=\"color:#036;font-weight:bold\">Jan</span> <span style=\"color:#00D\">2013</span> <span style=\"color:#00D\">08</span>:<span style=\"color:#00D\">00</span>:<span style=\"color:#00D\">00</span> <span style=\"color:#036;font-weight:bold\">CST</span>  <span style=\"color:#00D\">08</span>:<span style=\"color:#00D\">00</span>\n&gt; taipei_time.to_i\n=&gt; <span style=\"color:#00D\">1356998400</span>\n&gt; <span style=\"color:#036;font-weight:bold\">Time</span>.zone.at(<span style=\"color:#00D\">1356998400</span>)\n=&gt; <span style=\"color:#036;font-weight:bold\">Tue</span>, <span style=\"color:#00D\">01</span> <span style=\"color:#036;font-weight:bold\">Jan</span> <span style=\"color:#00D\">2013</span> <span style=\"color:#00D\">00</span>:<span style=\"color:#00D\">00</span>:<span style=\"color:#00D\">00</span> <span style=\"color:#036;font-weight:bold\">UTC</span>  <span style=\"color:#00D\">00</span>:<span style=\"color:#00D\">00</span>\n&gt; <span style=\"color:#036;font-weight:bold\">Time</span>.zone.at(<span style=\"color:#00D\">-1356998400</span>)\n=&gt; <span style=\"color:#036;font-weight:bold\">Sat</span>, <span style=\"color:#00D\">01</span> <span style=\"color:#036;font-weight:bold\">Jan</span> <span style=\"color:#00D\">1927</span> <span style=\"color:#00D\">00</span>:<span style=\"color:#00D\">00</span>:<span style=\"color:#00D\">00</span> <span style=\"color:#036;font-weight:bold\">UTC</span>  <span style=\"color:#00D\">00</span>:<span style=\"color:#00D\">00</span>\n</pre></td>\n</tr></table>\n\n        </div>\nThe seconds from UTC epoch is the same regarding to time zone because it is counted from UTC. Note that as long as you use <span style=\"font-weight: bold;\">at()</span>, you got same time regardless of time zone. <span style=\"font-weight: bold;\">zone.at(1356998400)</span> is the same time as <span style=\"font-weight: bold;\">Time.zone.at(1356998400)</span>, only different in time zone.<br><br>To pass this one to <span style=\"font-weight: bold;\">Javascript</span>, you need to multiply it by 1000 into milliseconds:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/javascript.png' alt='javascript'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n</pre></td>\n  <td class=\"code\"><pre>&gt; <span style=\"color:#080;font-weight:bold\">new</span> Date(<span style=\"color:#00D\">1356998400</span>*<span style=\"color:#00D\">1000</span>)\nTue Jan <span style=\"color:#40E\">01</span> <span style=\"color:#00D\">2013</span> <span style=\"color:#00D\">08</span>:<span style=\"color:#40E\">00</span>:<span style=\"color:#40E\">00</span> GMT <span style=\"color:#00D\">0800</span> (CST)\n&gt; <span style=\"color:#080;font-weight:bold\">new</span> XDate(<span style=\"color:#00D\">1356998400</span>*<span style=\"color:#00D\">1000</span>)\n[Tue Jan <span style=\"color:#40E\">01</span> <span style=\"color:#00D\">2013</span> <span style=\"color:#00D\">08</span>:<span style=\"color:#40E\">00</span>:<span style=\"color:#40E\">00</span> GMT <span style=\"color:#00D\">0800</span> (CST)]\n&gt; <span style=\"color:#080;font-weight:bold\">new</span> XDate(<span style=\"color:#00D\">1356998400</span>*<span style=\"color:#00D\">1000</span>, <span style=\"color:#069\">true</span>)\n[Tue, <span style=\"color:#40E\">01</span> Jan <span style=\"color:#00D\">2013</span> <span style=\"color:#40E\">00</span>:<span style=\"color:#40E\">00</span>:<span style=\"color:#40E\">00</span> GMT]\n</pre></td>\n</tr></table>\n\n        </div>\nThus, you can safely pass time between Rails and Javascripts without worrying the time zone.<br><br>What if you want to change time from '2013-01-01 00:00  08:00' to '2013-01-01 00:00 UTC' ? In another word, you want to adjust the timezone offset. Here is what I do in Rails:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n<a href=\"#n8\" name=\"n8\">8</a>\n<a href=\"#n9\" name=\"n9\">9</a>\n<strong><a href=\"#n10\" name=\"n10\">10</a></strong>\n<a href=\"#n11\" name=\"n11\">11</a>\n<a href=\"#n12\" name=\"n12\">12</a>\n<a href=\"#n13\" name=\"n13\">13</a>\n<a href=\"#n14\" name=\"n14\">14</a>\n</pre></td>\n  <td class=\"code\"><pre>&gt; taipei = <span style=\"color:#036;font-weight:bold\">ActiveSupport</span>::<span style=\"color:#036;font-weight:bold\">TimeZone</span>[<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">Taipei</span><span style=\"color:#710\">'</span></span>]\n=&gt; (<span style=\"color:#036;font-weight:bold\">GMT</span> <span style=\"color:#00D\">08</span>:<span style=\"color:#00D\">00</span>) <span style=\"color:#036;font-weight:bold\">Taipei</span>\n&gt; taipei_new_year = taipei.parse(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">2013-1-1 00:00</span><span style=\"color:#710\">'</span></span>)\n=&gt; <span style=\"color:#036;font-weight:bold\">Tue</span>, <span style=\"color:#00D\">01</span> <span style=\"color:#036;font-weight:bold\">Jan</span> <span style=\"color:#00D\">2013</span> <span style=\"color:#00D\">00</span>:<span style=\"color:#00D\">00</span>:<span style=\"color:#00D\">00</span> <span style=\"color:#036;font-weight:bold\">CST</span>  <span style=\"color:#00D\">08</span>:<span style=\"color:#00D\">00</span>\n&gt; taipei_new_year.to_i\n=&gt; <span style=\"color:#00D\">1356969600</span>\n&gt; taipei.at(<span style=\"color:#00D\">1356969600</span>)\n=&gt; <span style=\"color:#036;font-weight:bold\">Tue</span>, <span style=\"color:#00D\">01</span> <span style=\"color:#036;font-weight:bold\">Jan</span> <span style=\"color:#00D\">2013</span> <span style=\"color:#00D\">00</span>:<span style=\"color:#00D\">00</span>:<span style=\"color:#00D\">00</span> <span style=\"color:#036;font-weight:bold\">CST</span>  <span style=\"color:#00D\">08</span>:<span style=\"color:#00D\">00</span>\n&gt; <span style=\"color:#036;font-weight:bold\">Time</span>.zone.at(<span style=\"color:#00D\">1356969600</span>)\n=&gt; <span style=\"color:#036;font-weight:bold\">Mon</span>, <span style=\"color:#00D\">31</span> <span style=\"color:#036;font-weight:bold\">Dec</span> <span style=\"color:#00D\">2012</span> <span style=\"color:#00D\">16</span>:<span style=\"color:#00D\">00</span>:<span style=\"color:#00D\">00</span> <span style=\"color:#036;font-weight:bold\">UTC</span>  <span style=\"color:#00D\">00</span>:<span style=\"color:#00D\">00</span>\n&gt; taipei.utc_to_local(taipei_new_year.to_i)\n=&gt; <span style=\"color:#00D\">1356998400</span>\n&gt; <span style=\"color:#036;font-weight:bold\">Time</span>.zone.at(<span style=\"color:#00D\">1356998400</span>)\n=&gt; <span style=\"color:#036;font-weight:bold\">Tue</span>, <span style=\"color:#00D\">01</span> <span style=\"color:#036;font-weight:bold\">Jan</span> <span style=\"color:#00D\">2013</span> <span style=\"color:#00D\">00</span>:<span style=\"color:#00D\">00</span>:<span style=\"color:#00D\">00</span> <span style=\"color:#036;font-weight:bold\">UTC</span>  <span style=\"color:#00D\">00</span>:<span style=\"color:#00D\">00</span>\n</pre></td>\n</tr></table>\n\n        </div>\nBy using <span style=\"font-weight: bold;\">utc_to_local</span>, you can get '2013-01-01 00:00 UTC'. And reversely:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n<a href=\"#n8\" name=\"n8\">8</a>\n<a href=\"#n9\" name=\"n9\">9</a>\n<strong><a href=\"#n10\" name=\"n10\">10</a></strong>\n</pre></td>\n  <td class=\"code\"><pre>&gt; taipei = <span style=\"color:#036;font-weight:bold\">ActiveSupport</span>::<span style=\"color:#036;font-weight:bold\">TimeZone</span>[<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">Taipei</span><span style=\"color:#710\">'</span></span>]\n=&gt; (<span style=\"color:#036;font-weight:bold\">GMT</span> <span style=\"color:#00D\">08</span>:<span style=\"color:#00D\">00</span>) <span style=\"color:#036;font-weight:bold\">Taipei</span>\n&gt; new_year = <span style=\"color:#036;font-weight:bold\">Time</span>.zone.parse(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">2013-1-1 00:00</span><span style=\"color:#710\">'</span></span>)\n=&gt; <span style=\"color:#036;font-weight:bold\">Tue</span>, <span style=\"color:#00D\">01</span> <span style=\"color:#036;font-weight:bold\">Jan</span> <span style=\"color:#00D\">2013</span> <span style=\"color:#00D\">00</span>:<span style=\"color:#00D\">00</span>:<span style=\"color:#00D\">00</span> <span style=\"color:#036;font-weight:bold\">UTC</span>  <span style=\"color:#00D\">00</span>:<span style=\"color:#00D\">00</span>\n&gt; new_year.to_i\n=&gt; <span style=\"color:#00D\">1356998400</span>\n&gt; taipei.local_to_utc(new_year.to_i)\n=&gt; <span style=\"color:#00D\">1356969600</span>\n&gt; taipei.at(<span style=\"color:#00D\">1356969600</span>)\n=&gt; <span style=\"color:#036;font-weight:bold\">Tue</span>, <span style=\"color:#00D\">01</span> <span style=\"color:#036;font-weight:bold\">Jan</span> <span style=\"color:#00D\">2013</span> <span style=\"color:#00D\">00</span>:<span style=\"color:#00D\">00</span>:<span style=\"color:#00D\">00</span> <span style=\"color:#036;font-weight:bold\">CST</span>  <span style=\"color:#00D\">08</span>:<span style=\"color:#00D\">00</span>\n</pre></td>\n</tr></table>\n\n        </div>\nThen you got from '2013-1-1 00:00  00:00' to '2013-1-1 00:00  08:00'.<br><br>Remember, seconds in Rails and milliseconds in Javascript is always counted in UTC time zone.", pretty_preview: "<p>Dealing with time and timezone is not trivial in Rails and Javascript. Here is a nice article to read.<br><br>Let's begin on Rails side. To get time correctly, try these approaches:<br></p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <div class=\"CodeRay\">\n  <div class=\"code\"><pre>&gt; <span style=\"color:#036;font-weight:bold\">Time</span>.zone.now\n=&gt; <span style=\"color:#036;font-weight:bold\">Thu</span>, <span style=\"color:#00D\">10</span> <span style=\"color:#036;font-weight:bold\">Jan</span> <span style=\"color:#00D\">2013</span> <span style=\"color:#00D\">01</span>:<span style=\"color:#00D\">33</span>:<span style=\"color:#00D\">55</span> <span style=\"color:#036;font-weight:bold\">UTC</span>  <span style=\"color:#00D\">00</span>:<span style=\"color:#00D\">00</span>\n&gt; <span style=\"color:#00D\">1</span>.hour.from_now\n=&gt; <span style=\"color:#036;font-weight:bold\">Thu</span>...\n\n</pre></div>\n</div>\n\n        </div>\n"},
  {id: 387, name: "Set Ruby Version with RVM and Gemfile", category_id: 3, body: "<p>Heroku <a href=\"https://devcenter.heroku.com/articles/ruby-versions\"><code>specifies ruby version</code></a> by inserting it into Gemfile. If you do so, rvm uses it, too. It causes an unfortunate situation because in Gemfile, you only specify the version of ruby, but not the gemsets. For example, you have ruby-2.0.0-p0 and ruby-2.0.0-p0@rails4 installed by rvm. Once you change directory to a project containing a Gemfile specifying ruby version, it will use ruby-2.0.0-p0. To fix this problem, rvm support <span style=\"font-weight: bold;\">ruby-version</span> and <span style=\"font-weight: bold;\">ruby-gemset</span> according to <a href=\"https://github.com/wayneeseguin/rvm/issues/1517\"><code>issue #1517</code></a>. Now, you can specify ruby version and gemset separately without the use of slower rvmrc. My setting looks like this now (without .rvmrc):<br></p>\n<pre><code class=\"bash\">cat .ruby-version<br>ruby-2.0.0-p0<br>cat .ruby-gemset<br>rails32</code></pre>You can use `rvm list gemsets` to check current ruby version and gemset under your project directory. <br><pre><code class=\"bash\">rvm rvmrc to .ruby-version</code></pre>", created_at: "2013-12-13 19:56:09", updated_at: "2013-12-13 19:56:09", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "<p>Heroku <a href=\"https://devcenter.heroku.com/articles/ruby-versions\"><code>specifies ruby version</code></a> by inserting it into Gemfile. If you do so, rvm uses it, too. It causes an unfortunate situation because in Gemfile, you only specify the version of ruby, but not the gemsets. For example, you have ruby-2.0.0-p0 and ruby-2.0.0-p0@rails4 installed by rvm. Once you change directory to a project containing a Gemfile specifying ruby version, it will use ruby-2.0.0-p0. To fix this problem, rvm support <span style=\"font-weight: bold;\">ruby-version</span> and <span style=\"font-weight: bold;\">ruby-gemset</span> according to <a href=\"https://github.com/wayneeseguin/rvm/issues/1517\"><code>issue #1517</code></a>. Now, you can specify ruby version and gemset separately without the use of slower rvmrc. My setting looks like this now (without .rvmrc):<br></p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/bash.png' alt='bash'/>\n              </div>\n          <pre><code class=\"bash\">cat .ruby-version<br>ruby-2.0.0-p0<br>cat .ruby-gemset<br>rails32</code></pre>\n        </div>\nYou can use `rvm list gemsets` to check current ruby version and gemset under your project directory. <br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/bash.png' alt='bash'/>\n              </div>\n          <pre><code class=\"bash\">rvm rvmrc to .ruby-version</code></pre>\n        </div>\n", pretty_preview: "<p>Heroku <a href=\"https://devcenter.heroku.com/articles/ruby-versions\"><code>specifies ruby version</code></a> by inserting it into Gemfile. If you do so, rvm uses it, too. It causes an unfortunate situation because in Gemfile, you only specify the version of ruby, but not the gemsets. For example, you have ruby-2.0.0-p0 and ruby-2.0.0-p0@rails4 instal...<span style=\"font-weight: bold;\">...</span></p>"},
  {id: 388, name: "Google+ Sign-In with Javascript SDK, Angular.js and Rails", category_id: 3, body: "<p>Google  also provide <a href=\"https://developers.google.com/%20/features/sign-in\"><code>sign-in service</code></a> similar to <a href=\"http://blog.berylliumwork.com/2013/04/facebook-login-with-javascript-sdk.html\"><code>Facebook Login</code></a>. And there is an official <code><a href=\"https://github.com/google/google-api-ruby-client\">Google API client for ruby</a></code> to access Google service. You can follow the <a href=\"https://developers.google.com/%20/web/signin/\"><code>quick start guide</code></a> to get everything ready. Here are the codes for reference:\n<br></p>\n<pre><code class=\"javascript\">function google_plus_sign_in_render() {<br>  angular.element($('#signinButton')).scope().render();<br>}<br><br>myapp.directive('google', function($http) {<br>  return {<br>    restrict: 'A',<br>    scope: true,<br>    controller: function($scope, $attrs) {<br>      // Load the SDK Asynchronously<br>      (function() {<br>        var po = document.createElement('script');<br>        po.type = 'text/javascript'; po.async = true;<br>        po.src = 'https://apis.google.com/js/client:plusone.js?onload=google_plus_sign_in_render';<br>        var s = document.getElementsByTagName('script')[0];<br>        s.parentNode.insertBefore(po, s);<br>      })();<br><br>      function fetch() {<br>        $http.post('/google/fetch', $scope.auth<br>                   ).success(function(data) {<br>                     window.location.reload(true);<br>                     $scope.fetch_status = data.status;<br>                  }).error(function(data) {<br>                    console.log('error: ' data);<br>                    $scope.fetch_status = data.status;<br>                  });<br>      }<br><br>      $scope.render = function() {<br>        gapi.signin.render('signinButton', {<br>          callback: function(authResult) {<br>            if (authResult['access_token']) {<br>              console.log('google success');<br>              $scope.auth = authResult<br>              //console.log(authResult);<br>              // Successfully authorized<br>              // Hide the sign-in button now that the user is authorized, for example:<br>              //document.getElementById('signinButton').setAttribute('style', 'display: none');<br>              $scope.login_status = 'connected'<br>            } else if (authResult['error']) {<br>              // There was an error.<br>              // Possible error codes:<br>              //   \"access_denied\" - User denied access to your app<br>              //   \"immediate_failed\" - Could not automatially log in the user<br>              console.log('There was an error: '   authResult['error']);<br>              $scope.login_status = authResult['error'];<br>            }<br>            $scope.$apply();<br>          },<br>          clientid: $attrs.google,<br>          cookiepolicy: \"single_host_origin\",<br>          // requestvisibleactions: \"http://schemas.google.com/AddActivity\",<br>          scope: \"https://www.googleapis.com/auth/plus.login\"<br>        });<br>      }<br>      $scope.fetch = function() {<br>        if ($scope.login_status == 'connected') {<br>          console.log('fetch');<br>          fetch();<br>        } else {<br>          console.log('cannot fetch. login first');<br>//          login();<br>        }<br>      };<br><br>      $scope.revoke = function() {<br>        console.log('revoke');<br>        var revokeUrl = 'https://accounts.google.com/o/oauth2/revoke?token='  <br>          $scope.auth['access_token'];<br><br>          $.ajax({<br>            type: 'GET',<br>            url: revokeUrl,<br>            async: false,<br>            contentType: \"application/json\",<br>            dataType: 'jsonp',<br>            success: function(nullResponse) {<br>              console.log('disconnected');<br>              // Do something now that user is disconnected<br>              // The response is always undefined.<br>              $scope.login_status = 'disconnected'<br>              $scope.$apply();<br>            },<br>            error: function(e) {<br>              console.log('error in revoke');<br>              // Handle the error<br>              console.log(e);<br>              // You could point users to manually disconnect if unsuccessful<br>              // https://plus.google.com/apps<br>            }<br>          });<br>      }<br>    },<br>    link: function(scope, element, attrs, controller) {<br>    }<br>  }<br>});</code></pre>What's different from Facebook is that the Google Sign-In button is a button for sign-in and for checking the sign-in status. Facebook provide different API for sign-in and for checking sing-in status. And it uses the global callback for sign-in. It might be easier for simple use, but make customization more difficult. Here is the HTML for this <span style=\"font-weight: bold;\">Angular.js</span> directive:<br><pre><code class=\"erb\">&lt;div data-google='&lt;%= Figaro.env.google_key %&gt;'&gt;<br>  &lt;a href='#' class='btn btn-danger pull-right' ng-click='revoke()' ng-show='login_status == \"connected\"'&gt;revoke&lt;/a&gt;<br>  &lt;span id=\"signinButton\" ng-hide='login_status == \"connected\"'&gt;<br>    &lt;button class='btn btn-primary'&gt;Google &lt;/button&gt;<br>  &lt;/span&gt;<br>  &lt;button class='btn btn-primary' ng-click='fetch()' ng-show='login_status == \"connected\"'&gt;fetch&lt;/button&gt;<br>&lt;/div&gt;</code></pre>We provide three buttons, one for sign-in, another for fetching, and the other for revoke permission. Once Google  Sign-In SDK is loaded (see onload parameters), it check the sign-in status. If user already signed in, it hide the sign-in button and show the fetch one.<br><br>Finally, the controller in Rails:<br><pre><code class=\"ruby\">class GoogleController <br>  def fetch<br>    access_token = params['access_token']<br>    client = Google::APIClient.new(:application_name =&gt; 'myapp',<br>                                     :application_version =&gt; '0.1')<br>    client.authorization.access_token = access_token<br>    plus = client.discovered_api('plus')<br>    result = client.execute(:api_method =&gt; plus.people.get,<br>                            :parameters =&gt; { :userId =&gt; 'me'}<br>                           )<br><br>    if result.data &amp;&amp; result.data.id<br>       # valid token<br>    end<br>  end<br>end</code></pre>It uses the access token to verify authentication and use Google API client to fetch information. Now, you can access data from google easily. <br>", created_at: "2013-12-13 19:56:09", updated_at: "2013-12-13 19:56:09", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "<p>Google  also provide <a href=\"https://developers.google.com/%20/features/sign-in\"><code>sign-in service</code></a> similar to <a href=\"http://blog.berylliumwork.com/2013/04/facebook-login-with-javascript-sdk.html\"><code>Facebook Login</code></a>. And there is an official <code><a href=\"https://github.com/google/google-api-ruby-client\">Google API client for ruby</a></code> to access Google service. You can follow the <a href=\"https://developers.google.com/%20/web/signin/\"><code>quick start guide</code></a> to get everything ready. Here are the codes for reference:\n<br></p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/javascript.png' alt='javascript'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n<a href=\"#n8\" name=\"n8\">8</a>\n<a href=\"#n9\" name=\"n9\">9</a>\n<strong><a href=\"#n10\" name=\"n10\">10</a></strong>\n<a href=\"#n11\" name=\"n11\">11</a>\n<a href=\"#n12\" name=\"n12\">12</a>\n<a href=\"#n13\" name=\"n13\">13</a>\n<a href=\"#n14\" name=\"n14\">14</a>\n<a href=\"#n15\" name=\"n15\">15</a>\n<a href=\"#n16\" name=\"n16\">16</a>\n<a href=\"#n17\" name=\"n17\">17</a>\n<a href=\"#n18\" name=\"n18\">18</a>\n<a href=\"#n19\" name=\"n19\">19</a>\n<strong><a href=\"#n20\" name=\"n20\">20</a></strong>\n<a href=\"#n21\" name=\"n21\">21</a>\n<a href=\"#n22\" name=\"n22\">22</a>\n<a href=\"#n23\" name=\"n23\">23</a>\n<a href=\"#n24\" name=\"n24\">24</a>\n<a href=\"#n25\" name=\"n25\">25</a>\n<a href=\"#n26\" name=\"n26\">26</a>\n<a href=\"#n27\" name=\"n27\">27</a>\n<a href=\"#n28\" name=\"n28\">28</a>\n<a href=\"#n29\" name=\"n29\">29</a>\n<strong><a href=\"#n30\" name=\"n30\">30</a></strong>\n<a href=\"#n31\" name=\"n31\">31</a>\n<a href=\"#n32\" name=\"n32\">32</a>\n<a href=\"#n33\" name=\"n33\">33</a>\n<a href=\"#n34\" name=\"n34\">34</a>\n<a href=\"#n35\" name=\"n35\">35</a>\n<a href=\"#n36\" name=\"n36\">36</a>\n<a href=\"#n37\" name=\"n37\">37</a>\n<a href=\"#n38\" name=\"n38\">38</a>\n<a href=\"#n39\" name=\"n39\">39</a>\n<strong><a href=\"#n40\" name=\"n40\">40</a></strong>\n<a href=\"#n41\" name=\"n41\">41</a>\n<a href=\"#n42\" name=\"n42\">42</a>\n<a href=\"#n43\" name=\"n43\">43</a>\n<a href=\"#n44\" name=\"n44\">44</a>\n<a href=\"#n45\" name=\"n45\">45</a>\n<a href=\"#n46\" name=\"n46\">46</a>\n<a href=\"#n47\" name=\"n47\">47</a>\n<a href=\"#n48\" name=\"n48\">48</a>\n<a href=\"#n49\" name=\"n49\">49</a>\n<strong><a href=\"#n50\" name=\"n50\">50</a></strong>\n<a href=\"#n51\" name=\"n51\">51</a>\n<a href=\"#n52\" name=\"n52\">52</a>\n<a href=\"#n53\" name=\"n53\">53</a>\n<a href=\"#n54\" name=\"n54\">54</a>\n<a href=\"#n55\" name=\"n55\">55</a>\n<a href=\"#n56\" name=\"n56\">56</a>\n<a href=\"#n57\" name=\"n57\">57</a>\n<a href=\"#n58\" name=\"n58\">58</a>\n<a href=\"#n59\" name=\"n59\">59</a>\n<strong><a href=\"#n60\" name=\"n60\">60</a></strong>\n<a href=\"#n61\" name=\"n61\">61</a>\n<a href=\"#n62\" name=\"n62\">62</a>\n<a href=\"#n63\" name=\"n63\">63</a>\n<a href=\"#n64\" name=\"n64\">64</a>\n<a href=\"#n65\" name=\"n65\">65</a>\n<a href=\"#n66\" name=\"n66\">66</a>\n<a href=\"#n67\" name=\"n67\">67</a>\n<a href=\"#n68\" name=\"n68\">68</a>\n<a href=\"#n69\" name=\"n69\">69</a>\n<strong><a href=\"#n70\" name=\"n70\">70</a></strong>\n<a href=\"#n71\" name=\"n71\">71</a>\n<a href=\"#n72\" name=\"n72\">72</a>\n<a href=\"#n73\" name=\"n73\">73</a>\n<a href=\"#n74\" name=\"n74\">74</a>\n<a href=\"#n75\" name=\"n75\">75</a>\n<a href=\"#n76\" name=\"n76\">76</a>\n<a href=\"#n77\" name=\"n77\">77</a>\n<a href=\"#n78\" name=\"n78\">78</a>\n<a href=\"#n79\" name=\"n79\">79</a>\n<strong><a href=\"#n80\" name=\"n80\">80</a></strong>\n<a href=\"#n81\" name=\"n81\">81</a>\n<a href=\"#n82\" name=\"n82\">82</a>\n<a href=\"#n83\" name=\"n83\">83</a>\n<a href=\"#n84\" name=\"n84\">84</a>\n<a href=\"#n85\" name=\"n85\">85</a>\n<a href=\"#n86\" name=\"n86\">86</a>\n<a href=\"#n87\" name=\"n87\">87</a>\n<a href=\"#n88\" name=\"n88\">88</a>\n<a href=\"#n89\" name=\"n89\">89</a>\n<strong><a href=\"#n90\" name=\"n90\">90</a></strong>\n<a href=\"#n91\" name=\"n91\">91</a>\n<a href=\"#n92\" name=\"n92\">92</a>\n<a href=\"#n93\" name=\"n93\">93</a>\n<a href=\"#n94\" name=\"n94\">94</a>\n<a href=\"#n95\" name=\"n95\">95</a>\n<a href=\"#n96\" name=\"n96\">96</a>\n<a href=\"#n97\" name=\"n97\">97</a>\n<a href=\"#n98\" name=\"n98\">98</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#080;font-weight:bold\">function</span> <span style=\"color:#06B;font-weight:bold\">google_plus_sign_in_render</span>() {\n<span style=\"color:#F00;background-color:#FAA\"> </span> angular.element(<span style=\"color:#369;font-weight:bold\">$</span>(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">#signinButton</span><span style=\"color:#710\">'</span></span>)).scope().render();\n}\n\nmyapp.directive(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">google</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#080;font-weight:bold\">function</span>(<span style=\"color:#369;font-weight:bold\">$http</span>) {\n<span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#080;font-weight:bold\">return</span> {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#606\">restrict</span>: <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">A</span><span style=\"color:#710\">'</span></span>,\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#606\">scope</span>: <span style=\"color:#069\">true</span>,\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#06B;font-weight:bold\">controller</span>: <span style=\"color:#080;font-weight:bold\">function</span>(<span style=\"color:#369;font-weight:bold\">$scope</span>, <span style=\"color:#369;font-weight:bold\">$attrs</span>) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#777\">// Load the SDK Asynchronously</span>\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> (<span style=\"color:#080;font-weight:bold\">function</span>() {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#080;font-weight:bold\">var</span> po = document.createElement(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">script</span><span style=\"color:#710\">'</span></span>);\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> po.type = <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">text/javascript</span><span style=\"color:#710\">'</span></span>; po.async = <span style=\"color:#069\">true</span>;\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> po.src = <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">https://apis.google.com/js/client:plusone.js?onload=google_plus_sign_in_render</span><span style=\"color:#710\">'</span></span>;\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#080;font-weight:bold\">var</span> s = document.getElementsByTagName(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">script</span><span style=\"color:#710\">'</span></span>)[<span style=\"color:#00D\">0</span>];\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> s.parentNode.insertBefore(po, s);\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> })();\n\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#080;font-weight:bold\">function</span> <span style=\"color:#06B;font-weight:bold\">fetch</span>() {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#369;font-weight:bold\">$http</span>.post(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">/google/fetch</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#369;font-weight:bold\">$scope</span>.auth\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> ).success(<span style=\"color:#080;font-weight:bold\">function</span>(data) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> window.location.reload(<span style=\"color:#069\">true</span>);\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#369;font-weight:bold\">$scope</span>.fetch_status = data.status;\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> }).error(<span style=\"color:#080;font-weight:bold\">function</span>(data) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> console.log(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">error: </span><span style=\"color:#710\">'</span></span> data);\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#369;font-weight:bold\">$scope</span>.fetch_status = data.status;\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> });\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> }\n\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#369;font-weight:bold\">$scope</span>.<span style=\"color:#06B;font-weight:bold\">render</span> = <span style=\"color:#080;font-weight:bold\">function</span>() {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> gapi.signin.render(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">signinButton</span><span style=\"color:#710\">'</span></span>, {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#06B;font-weight:bold\">callback</span>: <span style=\"color:#080;font-weight:bold\">function</span>(authResult) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#080;font-weight:bold\">if</span> (authResult[<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">access_token</span><span style=\"color:#710\">'</span></span>]) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> console.log(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">google success</span><span style=\"color:#710\">'</span></span>);\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#369;font-weight:bold\">$scope</span>.auth = authResult\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#777\">//console.log(authResult);</span>\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#777\">// Successfully authorized</span>\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#777\">// Hide the sign-in button now that the user is authorized, for example:</span>\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#777\">//document.getElementById('signinButton').setAttribute('style', 'display: none');</span>\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#369;font-weight:bold\">$scope</span>.login_status = <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">connected</span><span style=\"color:#710\">'</span></span>\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> } <span style=\"color:#080;font-weight:bold\">else</span> <span style=\"color:#080;font-weight:bold\">if</span> (authResult[<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">error</span><span style=\"color:#710\">'</span></span>]) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#777\">// There was an error.</span>\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#777\">// Possible error codes:</span>\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#777\">//   &quot;access_denied&quot; - User denied access to your app</span>\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#777\">//   &quot;immediate_failed&quot; - Could not automatially log in the user</span>\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> console.log(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">There was an error: </span><span style=\"color:#710\">'</span></span>   authResult[<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">error</span><span style=\"color:#710\">'</span></span>]);\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#369;font-weight:bold\">$scope</span>.login_status = authResult[<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">error</span><span style=\"color:#710\">'</span></span>];\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> }\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#369;font-weight:bold\">$scope</span>.<span style=\"color:#369;font-weight:bold\">$apply</span>();\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> },\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#606\">clientid</span>: <span style=\"color:#369;font-weight:bold\">$attrs</span>.google,\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#606\">cookiepolicy</span>: <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">single_host_origin</span><span style=\"color:#710\">&quot;</span></span>,\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#777\">// requestvisibleactions: &quot;http://schemas.google.com/AddActivity&quot;,</span>\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#606\">scope</span>: <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">https://www.googleapis.com/auth/plus.login</span><span style=\"color:#710\">&quot;</span></span>\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> });\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> }\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#369;font-weight:bold\">$scope</span>.<span style=\"color:#06B;font-weight:bold\">fetch</span> = <span style=\"color:#080;font-weight:bold\">function</span>() {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#080;font-weight:bold\">if</span> (<span style=\"color:#369;font-weight:bold\">$scope</span>.login_status == <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">connected</span><span style=\"color:#710\">'</span></span>) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> console.log(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">fetch</span><span style=\"color:#710\">'</span></span>);\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> fetch();\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> } <span style=\"color:#080;font-weight:bold\">else</span> {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> console.log(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">cannot fetch. login first</span><span style=\"color:#710\">'</span></span>);\n<span style=\"color:#777\">//          login();</span>\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> }\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> };\n\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#369;font-weight:bold\">$scope</span>.<span style=\"color:#06B;font-weight:bold\">revoke</span> = <span style=\"color:#080;font-weight:bold\">function</span>() {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> console.log(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">revoke</span><span style=\"color:#710\">'</span></span>);\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#080;font-weight:bold\">var</span> revokeUrl = <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">https://accounts.google.com/o/oauth2/revoke?token=</span><span style=\"color:#710\">'</span></span>  \n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#369;font-weight:bold\">$scope</span>.auth[<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">access_token</span><span style=\"color:#710\">'</span></span>];\n\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#369;font-weight:bold\">$</span>.ajax({\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#606\">type</span>: <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">GET</span><span style=\"color:#710\">'</span></span>,\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#606\">url</span>: revokeUrl,\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#606\">async</span>: <span style=\"color:#069\">false</span>,\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#606\">contentType</span>: <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">application/json</span><span style=\"color:#710\">&quot;</span></span>,\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#606\">dataType</span>: <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">jsonp</span><span style=\"color:#710\">'</span></span>,\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#06B;font-weight:bold\">success</span>: <span style=\"color:#080;font-weight:bold\">function</span>(nullResponse) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> console.log(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">disconnected</span><span style=\"color:#710\">'</span></span>);\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#777\">// Do something now that user is disconnected</span>\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#777\">// The response is always undefined.</span>\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#369;font-weight:bold\">$scope</span>.login_status = <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">disconnected</span><span style=\"color:#710\">'</span></span>\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#369;font-weight:bold\">$scope</span>.<span style=\"color:#369;font-weight:bold\">$apply</span>();\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> },\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#06B;font-weight:bold\">error</span>: <span style=\"color:#080;font-weight:bold\">function</span>(e) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> console.log(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">error in revoke</span><span style=\"color:#710\">'</span></span>);\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#777\">// Handle the error</span>\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> console.log(e);\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#777\">// You could point users to manually disconnect if unsuccessful</span>\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#777\">// https://plus.google.com/apps</span>\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> }\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> });\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> }\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> },\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#06B;font-weight:bold\">link</span>: <span style=\"color:#080;font-weight:bold\">function</span>(scope, element, attrs, controller) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> }\n<span style=\"color:#F00;background-color:#FAA\"> </span> }\n});\n</pre></td>\n</tr></table>\n\n        </div>\nWhat's different from Facebook is that the Google Sign-In button is a button for sign-in and for checking the sign-in status. Facebook provide different API for sign-in and for checking sing-in status. And it uses the global callback for sign-in. It might be easier for simple use, but make customization more difficult. Here is the HTML for this <span style=\"font-weight: bold;\">Angular.js</span> directive:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/erb.png' alt='erb'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#070;font-weight:bold\">&lt;div</span> <span style=\"color:#b48\">data-google</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span></span><span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> <span style=\"color:#036;font-weight:bold\">Figaro</span>.env.google_key <span style=\"font-weight:bold;color:#666\">%&gt;</span></span><span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span>\n  <span style=\"color:#070;font-weight:bold\">&lt;a</span> <span style=\"color:#b48\">href</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">#</span><span style=\"color:#710\">'</span></span> <span style=\"color:#b48\">class</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">btn btn-danger pull-right</span><span style=\"color:#710\">'</span></span> <span style=\"color:#b48\">ng-click</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">revoke()</span><span style=\"color:#710\">'</span></span> <span style=\"color:#b48\">ng-show</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">login_status == &quot;connected&quot;</span><span style=\"color:#710\">'</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span>revoke<span style=\"color:#070;font-weight:bold\">&lt;/a&gt;</span>\n  <span style=\"color:#070;font-weight:bold\">&lt;span</span> <span style=\"color:#b48\">id</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">signinButton</span><span style=\"color:#710\">&quot;</span></span> <span style=\"color:#b48\">ng-hide</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">login_status == &quot;connected&quot;</span><span style=\"color:#710\">'</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span>\n    <span style=\"color:#070;font-weight:bold\">&lt;button</span> <span style=\"color:#b48\">class</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">btn btn-primary</span><span style=\"color:#710\">'</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span>Google <span style=\"color:#070;font-weight:bold\">&lt;/button&gt;</span>\n  <span style=\"color:#070;font-weight:bold\">&lt;/span&gt;</span>\n  <span style=\"color:#070;font-weight:bold\">&lt;button</span> <span style=\"color:#b48\">class</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">btn btn-primary</span><span style=\"color:#710\">'</span></span> <span style=\"color:#b48\">ng-click</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">fetch()</span><span style=\"color:#710\">'</span></span> <span style=\"color:#b48\">ng-show</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">login_status == &quot;connected&quot;</span><span style=\"color:#710\">'</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span>fetch<span style=\"color:#070;font-weight:bold\">&lt;/button&gt;</span>\n<span style=\"color:#070;font-weight:bold\">&lt;/div&gt;</span>\n</pre></td>\n</tr></table>\n\n        </div>\nWe provide three buttons, one for sign-in, another for fetching, and the other for revoke permission. Once Google  Sign-In SDK is loaded (see onload parameters), it check the sign-in status. If user already signed in, it hide the sign-in button and show the fetch one.<br><br>Finally, the controller in Rails:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n<a href=\"#n8\" name=\"n8\">8</a>\n<a href=\"#n9\" name=\"n9\">9</a>\n<strong><a href=\"#n10\" name=\"n10\">10</a></strong>\n<a href=\"#n11\" name=\"n11\">11</a>\n<a href=\"#n12\" name=\"n12\">12</a>\n<a href=\"#n13\" name=\"n13\">13</a>\n<a href=\"#n14\" name=\"n14\">14</a>\n<a href=\"#n15\" name=\"n15\">15</a>\n<a href=\"#n16\" name=\"n16\">16</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#080;font-weight:bold\">class</span> <span style=\"color:#B06;font-weight:bold\">GoogleController</span> \n  <span style=\"color:#080;font-weight:bold\">def</span> <span style=\"color:#06B;font-weight:bold\">fetch</span>\n    access_token = params[<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">access_token</span><span style=\"color:#710\">'</span></span>]\n    client = <span style=\"color:#036;font-weight:bold\">Google</span>::<span style=\"color:#036;font-weight:bold\">APIClient</span>.new(<span style=\"color:#A60\">:application_name</span> =&gt; <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">myapp</span><span style=\"color:#710\">'</span></span>,\n                                     <span style=\"color:#A60\">:application_version</span> =&gt; <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">0.1</span><span style=\"color:#710\">'</span></span>)\n    client.authorization.access_token = access_token\n    plus = client.discovered_api(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">plus</span><span style=\"color:#710\">'</span></span>)\n    result = client.execute(<span style=\"color:#A60\">:api_method</span> =&gt; plus.people.get,\n                            <span style=\"color:#A60\">:parameters</span> =&gt; { <span style=\"color:#A60\">:userId</span> =&gt; <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">me</span><span style=\"color:#710\">'</span></span>}\n                           )\n\n    <span style=\"color:#080;font-weight:bold\">if</span> result.data &amp;&amp; result.data.id\n       <span style=\"color:#777\"># valid token</span>\n    <span style=\"color:#080;font-weight:bold\">end</span>\n  <span style=\"color:#080;font-weight:bold\">end</span>\n<span style=\"color:#080;font-weight:bold\">end</span>\n</pre></td>\n</tr></table>\n\n        </div>\nIt uses the access token to verify authentication and use Google API client to fetch information. Now, you can access data from google easily. <br>", pretty_preview: "<p>Google  also provide <a href=\"https://developers.google.com/%20/features/sign-in\"><code>sign-in service</code></a> similar to <a href=\"http://blog.berylliumwork.com/2013/04/facebook-login-with-javascript-sdk.html\"><code>Facebook Login</code></a>. And there is an official <code><a href=\"https://github.com/google/google-api-ruby-client\">Google API client for ruby</a></code> to access Google service. You can follow the <a href=\"https://developers.google.com/%20/web/signin/\"><code>quick start guide</code></a> to get everything ready. Here are the codes for reference:\n<br></p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/javascript.png' alt='javascript'/>\n              </div>\n          <div class=\"CodeRay\">\n  <div class=\"code\"><pre><span style=\"color:#080;font-weight:bold\">function</span> <span style=\"color:#06B;font-weight:bold\">google_plus_sign_in_render</span>() {\n<span style=\"color:#F00;background-color:#FAA\"> </span> angular.element(<span style=\"color:#369;font-weight:bold\">$</span>(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">#signinButton</span><span style=\"color:#710\">'</span></span>)).scope()...\n\n</pre></div>\n</div>\n\n        </div>\n"},
  {id: 389, name: "Facebook Login with Javascript SDK, Angular.js and Rails", category_id: 3, body: "<p>Many people try to integrate <a href=\"https://developers.facebook.com/docs/concepts/login/\"><code>Facebook Login</code></a> with their web apps. Facebook use OAuth 2.0 for authentication. There is <a href=\"https://github.com/intridea/omniauth\"><code>omniauth</code></a>\n gem for Rails to handle OAuth. To use Omniauth with Facebook, you need \nseveral gems: omniauth, omniauth-oauth2, omniauth-facebook. Though \neasier than before, you might still meet some problems here and there. \nFacebook provide <a href=\"https://developers.facebook.com/docs/howtos/login/getting-started/\"><code>Javascript SDK</code></a>\n for client-side authentication. One important advantage of this \napproach is that Facebook maintain this SDK and it will always work. And\n communication for authentication happens between your browser (or \nmobile phone) and facebook server, which reduces the load of your web \napp. All you need is an access token from facebook. With the help of \nFacebook Javascript SDK, you do not need omniauth for authentication. \nWhile omniauth-faceook still provides some useful methods, they can be \nreplace by <code><a href=\"https://github.com/nov/fb_graph\">fb_graph</a></code>.\n<br><br>\nThe workflow are:\n</p>\n<ol>\n<li>Web browser or mobile phone connect to your web app. Web app use Facebook SDK to determine whether user is logged in.</li>\n<li>Provide a button or user interface to ask user to login in.</li>\n<li>User login from Facebook, retrieve access token, and post this token to your web app.</li>\n<li>Web app check the validation of this access token, and use it to talk with Facebook.</li>\n</ol>\nYou can notice that there are at least two security concerns: one is how\n to post access token to web app without being intercepted; the other is\n how to make sure this access token is authentic. Answer to first \nquestion is use SSL, and to second question is to check access token \nwith facebook before using it. If access token is not authentic, it will\n not work with facebook.\n<br><br>\nLet wrap the Facebook Login into Angular.js like this:<br><pre><code class=\"javascript\">myapp.directive('facebook', function($http) {<br>  return {<br>    restrict: 'A',<br>    scope: true,<br>    controller: function($scope, $attrs) {<br>      // Load the SDK Asynchronously<br>      (function(d){<br>        var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];<br>        if (d.getElementById(id)) {return;}<br>        js = d.createElement('script'); js.id = id; js.async = true;<br>        js.src = \"//connect.facebook.net/en_US/all.js\";<br>        ref.parentNode.insertBefore(js, ref);<br>      }(document));<br><br>      function login() {<br>        FB.login(function(response) {<br>          if (response.authResponse) {<br>            console.log('FB.login connected');<br>            fetch();<br>          } else {<br>            console.log('FB.login cancelled');<br>          }<br>          }, { scope: 'email,read_stream' }<br>        );<br>      };<br><br>      function fetch() {<br>        $http.post('/facebook/fetch', $scope.auth<br>           ).success(function(data) {<br>            window.location.reload(true);<br>            $scope.fetch_status = data.status;<br>          }).error(function(data) {<br>            console.log('error: ' data);<br>            $scope.fetch_status = data.status;<br>          });<br>      }<br><br>      $scope.fetch = function() {<br>        if ($scope.login_status == 'connected') {<br>          console.log('fetch');<br>          fetch();<br>        } else {<br>          login();<br>        }<br>      };<br>    },<br>    link: function(scope, element, attrs, controller) {<br>      // Additional JS functions here<br>      window.fbAsyncInit = function() {<br>        FB.init({<br>          appId      : attrs.facebook, // App ID<br>          channelUrl : '//localhost:3000/channel.html', // Channel File<br>          status     : true, // check login status<br>          cookie     : true, // enable cookies to allow the server to access the session<br>          xfbml      : true  // parse XFBML<br>        });<br><br>        // Additional init code here<br>        FB.getLoginStatus(function(response) {<br>          if (response.status === 'connected') {<br>            // connected<br>            scope.auth = response.authResponse;<br>          } else if (response.status === 'not_authorized') {<br>            // not_authorized<br>          } else {<br>            // not_logged_in<br>          }<br>          scope.login_status = response.status;<br>          scope.$apply();<br>        });<br>      }; // end of fbAsyncInit<br>    }<br>  }<br>});</code></pre>\n<pre><code class=\"erb\">&lt;div data-facebook='&lt;%= Figaro.env.facebook_key %&gt;'&gt;<br>  &lt;div id=\"fb-root\"&gt;&lt;/div&gt;<br>  &lt;div&gt;<br>    &lt;a href='#' data-ng-click='fetch()' class='btn btn-primary'&gt;fetch&lt;/a&gt; {{login_status}}<br>  &lt;/div&gt;<br>&lt;/div&gt;</code></pre>First, you can check the status of user with <span style=\"font-weight: bold;\">$scope.login_status</span>. If user is logged in, you can fetch their information by passing access token to <span style=\"font-weight: bold;\">/facebook/fetch</span> in this case:<br><pre><code class=\"ruby\">class FacebookController &lt; ApplicationController<br>  def fetch<br>    access_token = params['accessToken']<br><br>    begin<br>      user = FbGraph::User.me(access_token).fetch<br>    rescue =&gt; the_error<br>      @error = the_error.message<br>      puts \"Error \#{the_error.message}\"<br>    end<br><br>    if user &amp;&amp; user.email<br>       # valid token<br>    end<br>  end<br>end</code></pre>By using Facebook Javascript SDK, you do not need to go through the workflow provided by omniauth, which might be easier for your web app. To use with devise, you can always use access token to retrieve users information from facebook directly instead of relying on what web browser or mobile phone post to your web app. You can create user and login with devise directly in your controller. The less the middleware, the less the problems. <br>", created_at: "2013-12-13 19:56:09", updated_at: "2013-12-13 19:56:09", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "<p>Many people try to integrate <a href=\"https://developers.facebook.com/docs/concepts/login/\"><code>Facebook Login</code></a> with their web apps. Facebook use OAuth 2.0 for authentication. There is <a href=\"https://github.com/intridea/omniauth\"><code>omniauth</code></a>\n gem for Rails to handle OAuth. To use Omniauth with Facebook, you need \nseveral gems: omniauth, omniauth-oauth2, omniauth-facebook. Though \neasier than before, you might still meet some problems here and there. \nFacebook provide <a href=\"https://developers.facebook.com/docs/howtos/login/getting-started/\"><code>Javascript SDK</code></a>\n for client-side authentication. One important advantage of this \napproach is that Facebook maintain this SDK and it will always work. And\n communication for authentication happens between your browser (or \nmobile phone) and facebook server, which reduces the load of your web \napp. All you need is an access token from facebook. With the help of \nFacebook Javascript SDK, you do not need omniauth for authentication. \nWhile omniauth-faceook still provides some useful methods, they can be \nreplace by <code><a href=\"https://github.com/nov/fb_graph\">fb_graph</a></code>.\n<br><br>\nThe workflow are:\n</p>\n<ol>\n<li>Web browser or mobile phone connect to your web app. Web app use Facebook SDK to determine whether user is logged in.</li>\n<li>Provide a button or user interface to ask user to login in.</li>\n<li>User login from Facebook, retrieve access token, and post this token to your web app.</li>\n<li>Web app check the validation of this access token, and use it to talk with Facebook.</li>\n</ol>\nYou can notice that there are at least two security concerns: one is how\n to post access token to web app without being intercepted; the other is\n how to make sure this access token is authentic. Answer to first \nquestion is use SSL, and to second question is to check access token \nwith facebook before using it. If access token is not authentic, it will\n not work with facebook.\n<br><br>\nLet wrap the Facebook Login into Angular.js like this:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/javascript.png' alt='javascript'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n<a href=\"#n8\" name=\"n8\">8</a>\n<a href=\"#n9\" name=\"n9\">9</a>\n<strong><a href=\"#n10\" name=\"n10\">10</a></strong>\n<a href=\"#n11\" name=\"n11\">11</a>\n<a href=\"#n12\" name=\"n12\">12</a>\n<a href=\"#n13\" name=\"n13\">13</a>\n<a href=\"#n14\" name=\"n14\">14</a>\n<a href=\"#n15\" name=\"n15\">15</a>\n<a href=\"#n16\" name=\"n16\">16</a>\n<a href=\"#n17\" name=\"n17\">17</a>\n<a href=\"#n18\" name=\"n18\">18</a>\n<a href=\"#n19\" name=\"n19\">19</a>\n<strong><a href=\"#n20\" name=\"n20\">20</a></strong>\n<a href=\"#n21\" name=\"n21\">21</a>\n<a href=\"#n22\" name=\"n22\">22</a>\n<a href=\"#n23\" name=\"n23\">23</a>\n<a href=\"#n24\" name=\"n24\">24</a>\n<a href=\"#n25\" name=\"n25\">25</a>\n<a href=\"#n26\" name=\"n26\">26</a>\n<a href=\"#n27\" name=\"n27\">27</a>\n<a href=\"#n28\" name=\"n28\">28</a>\n<a href=\"#n29\" name=\"n29\">29</a>\n<strong><a href=\"#n30\" name=\"n30\">30</a></strong>\n<a href=\"#n31\" name=\"n31\">31</a>\n<a href=\"#n32\" name=\"n32\">32</a>\n<a href=\"#n33\" name=\"n33\">33</a>\n<a href=\"#n34\" name=\"n34\">34</a>\n<a href=\"#n35\" name=\"n35\">35</a>\n<a href=\"#n36\" name=\"n36\">36</a>\n<a href=\"#n37\" name=\"n37\">37</a>\n<a href=\"#n38\" name=\"n38\">38</a>\n<a href=\"#n39\" name=\"n39\">39</a>\n<strong><a href=\"#n40\" name=\"n40\">40</a></strong>\n<a href=\"#n41\" name=\"n41\">41</a>\n<a href=\"#n42\" name=\"n42\">42</a>\n<a href=\"#n43\" name=\"n43\">43</a>\n<a href=\"#n44\" name=\"n44\">44</a>\n<a href=\"#n45\" name=\"n45\">45</a>\n<a href=\"#n46\" name=\"n46\">46</a>\n<a href=\"#n47\" name=\"n47\">47</a>\n<a href=\"#n48\" name=\"n48\">48</a>\n<a href=\"#n49\" name=\"n49\">49</a>\n<strong><a href=\"#n50\" name=\"n50\">50</a></strong>\n<a href=\"#n51\" name=\"n51\">51</a>\n<a href=\"#n52\" name=\"n52\">52</a>\n<a href=\"#n53\" name=\"n53\">53</a>\n<a href=\"#n54\" name=\"n54\">54</a>\n<a href=\"#n55\" name=\"n55\">55</a>\n<a href=\"#n56\" name=\"n56\">56</a>\n<a href=\"#n57\" name=\"n57\">57</a>\n<a href=\"#n58\" name=\"n58\">58</a>\n<a href=\"#n59\" name=\"n59\">59</a>\n<strong><a href=\"#n60\" name=\"n60\">60</a></strong>\n<a href=\"#n61\" name=\"n61\">61</a>\n<a href=\"#n62\" name=\"n62\">62</a>\n<a href=\"#n63\" name=\"n63\">63</a>\n<a href=\"#n64\" name=\"n64\">64</a>\n<a href=\"#n65\" name=\"n65\">65</a>\n<a href=\"#n66\" name=\"n66\">66</a>\n<a href=\"#n67\" name=\"n67\">67</a>\n<a href=\"#n68\" name=\"n68\">68</a>\n<a href=\"#n69\" name=\"n69\">69</a>\n<strong><a href=\"#n70\" name=\"n70\">70</a></strong>\n<a href=\"#n71\" name=\"n71\">71</a>\n<a href=\"#n72\" name=\"n72\">72</a>\n<a href=\"#n73\" name=\"n73\">73</a>\n<a href=\"#n74\" name=\"n74\">74</a>\n</pre></td>\n  <td class=\"code\"><pre>myapp.directive(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">facebook</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#080;font-weight:bold\">function</span>(<span style=\"color:#369;font-weight:bold\">$http</span>) {\n<span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#080;font-weight:bold\">return</span> {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#606\">restrict</span>: <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">A</span><span style=\"color:#710\">'</span></span>,\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#606\">scope</span>: <span style=\"color:#069\">true</span>,\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#06B;font-weight:bold\">controller</span>: <span style=\"color:#080;font-weight:bold\">function</span>(<span style=\"color:#369;font-weight:bold\">$scope</span>, <span style=\"color:#369;font-weight:bold\">$attrs</span>) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#777\">// Load the SDK Asynchronously</span>\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> (<span style=\"color:#080;font-weight:bold\">function</span>(d){\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#080;font-weight:bold\">var</span> js, id = <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">facebook-jssdk</span><span style=\"color:#710\">'</span></span>, ref = d.getElementsByTagName(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">script</span><span style=\"color:#710\">'</span></span>)[<span style=\"color:#00D\">0</span>];\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#080;font-weight:bold\">if</span> (d.getElementById(id)) {<span style=\"color:#080;font-weight:bold\">return</span>;}\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> js = d.createElement(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">script</span><span style=\"color:#710\">'</span></span>); js.id = id; js.async = <span style=\"color:#069\">true</span>;\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> js.src = <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">//connect.facebook.net/en_US/all.js</span><span style=\"color:#710\">&quot;</span></span>;\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> ref.parentNode.insertBefore(js, ref);\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> }(document));\n\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#080;font-weight:bold\">function</span> <span style=\"color:#06B;font-weight:bold\">login</span>() {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> FB.login(<span style=\"color:#080;font-weight:bold\">function</span>(response) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#080;font-weight:bold\">if</span> (response.authResponse) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> console.log(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">FB.login connected</span><span style=\"color:#710\">'</span></span>);\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> fetch();\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> } <span style=\"color:#080;font-weight:bold\">else</span> {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> console.log(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">FB.login cancelled</span><span style=\"color:#710\">'</span></span>);\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> }\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> }, { <span style=\"color:#606\">scope</span>: <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">email,read_stream</span><span style=\"color:#710\">'</span></span> }\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> );\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> };\n\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#080;font-weight:bold\">function</span> <span style=\"color:#06B;font-weight:bold\">fetch</span>() {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#369;font-weight:bold\">$http</span>.post(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">/facebook/fetch</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#369;font-weight:bold\">$scope</span>.auth\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> ).success(<span style=\"color:#080;font-weight:bold\">function</span>(data) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> window.location.reload(<span style=\"color:#069\">true</span>);\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#369;font-weight:bold\">$scope</span>.fetch_status = data.status;\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> }).error(<span style=\"color:#080;font-weight:bold\">function</span>(data) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> console.log(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">error: </span><span style=\"color:#710\">'</span></span> data);\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#369;font-weight:bold\">$scope</span>.fetch_status = data.status;\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> });\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> }\n\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#369;font-weight:bold\">$scope</span>.<span style=\"color:#06B;font-weight:bold\">fetch</span> = <span style=\"color:#080;font-weight:bold\">function</span>() {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#080;font-weight:bold\">if</span> (<span style=\"color:#369;font-weight:bold\">$scope</span>.login_status == <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">connected</span><span style=\"color:#710\">'</span></span>) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> console.log(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">fetch</span><span style=\"color:#710\">'</span></span>);\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> fetch();\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> } <span style=\"color:#080;font-weight:bold\">else</span> {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> login();\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> }\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> };\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> },\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#06B;font-weight:bold\">link</span>: <span style=\"color:#080;font-weight:bold\">function</span>(scope, element, attrs, controller) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#777\">// Additional JS functions here</span>\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> window.<span style=\"color:#06B;font-weight:bold\">fbAsyncInit</span> = <span style=\"color:#080;font-weight:bold\">function</span>() {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> FB.init({\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> appId<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> : attrs.facebook, <span style=\"color:#777\">// App ID</span>\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#606\">channelUrl</span> : <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">//localhost:3000/channel.html</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#777\">// Channel File</span>\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> status<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> : <span style=\"color:#069\">true</span>, <span style=\"color:#777\">// check login status</span>\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> cookie<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> : <span style=\"color:#069\">true</span>, <span style=\"color:#777\">// enable cookies to allow the server to access the session</span>\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> xfbml<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> : <span style=\"color:#069\">true</span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#777\">// parse XFBML</span>\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> });\n\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#777\">// Additional init code here</span>\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> FB.getLoginStatus(<span style=\"color:#080;font-weight:bold\">function</span>(response) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#080;font-weight:bold\">if</span> (response.status === <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">connected</span><span style=\"color:#710\">'</span></span>) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#777\">// connected</span>\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> scope.auth = response.authResponse;\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> } <span style=\"color:#080;font-weight:bold\">else</span> <span style=\"color:#080;font-weight:bold\">if</span> (response.status === <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">not_authorized</span><span style=\"color:#710\">'</span></span>) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#777\">// not_authorized</span>\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> } <span style=\"color:#080;font-weight:bold\">else</span> {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#777\">// not_logged_in</span>\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> }\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> scope.login_status = response.status;\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> scope.<span style=\"color:#369;font-weight:bold\">$apply</span>();\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> });\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> }; <span style=\"color:#777\">// end of fbAsyncInit</span>\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> }\n<span style=\"color:#F00;background-color:#FAA\"> </span> }\n});\n</pre></td>\n</tr></table>\n\n        </div>\n\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/erb.png' alt='erb'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#070;font-weight:bold\">&lt;div</span> <span style=\"color:#b48\">data-facebook</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span></span><span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> <span style=\"color:#036;font-weight:bold\">Figaro</span>.env.facebook_key <span style=\"font-weight:bold;color:#666\">%&gt;</span></span><span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span>\n  <span style=\"color:#070;font-weight:bold\">&lt;div</span> <span style=\"color:#b48\">id</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">fb-root</span><span style=\"color:#710\">&quot;</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span><span style=\"color:#070;font-weight:bold\">&lt;/div&gt;</span>\n  <span style=\"color:#070;font-weight:bold\">&lt;div&gt;</span>\n    <span style=\"color:#070;font-weight:bold\">&lt;a</span> <span style=\"color:#b48\">href</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">#</span><span style=\"color:#710\">'</span></span> <span style=\"color:#b48\">data-ng-click</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">fetch()</span><span style=\"color:#710\">'</span></span> <span style=\"color:#b48\">class</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">btn btn-primary</span><span style=\"color:#710\">'</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span>fetch<span style=\"color:#070;font-weight:bold\">&lt;/a&gt;</span> {{login_status}}\n  <span style=\"color:#070;font-weight:bold\">&lt;/div&gt;</span>\n<span style=\"color:#070;font-weight:bold\">&lt;/div&gt;</span>\n</pre></td>\n</tr></table>\n\n        </div>\nFirst, you can check the status of user with <span style=\"font-weight: bold;\">$scope.login_status</span>. If user is logged in, you can fetch their information by passing access token to <span style=\"font-weight: bold;\">/facebook/fetch</span> in this case:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n<a href=\"#n8\" name=\"n8\">8</a>\n<a href=\"#n9\" name=\"n9\">9</a>\n<strong><a href=\"#n10\" name=\"n10\">10</a></strong>\n<a href=\"#n11\" name=\"n11\">11</a>\n<a href=\"#n12\" name=\"n12\">12</a>\n<a href=\"#n13\" name=\"n13\">13</a>\n<a href=\"#n14\" name=\"n14\">14</a>\n<a href=\"#n15\" name=\"n15\">15</a>\n<a href=\"#n16\" name=\"n16\">16</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#080;font-weight:bold\">class</span> <span style=\"color:#B06;font-weight:bold\">FacebookController</span> &lt; <span style=\"color:#036;font-weight:bold\">ApplicationController</span>\n  <span style=\"color:#080;font-weight:bold\">def</span> <span style=\"color:#06B;font-weight:bold\">fetch</span>\n    access_token = params[<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">accessToken</span><span style=\"color:#710\">'</span></span>]\n\n    <span style=\"color:#080;font-weight:bold\">begin</span>\n      user = <span style=\"color:#036;font-weight:bold\">FbGraph</span>::<span style=\"color:#036;font-weight:bold\">User</span>.me(access_token).fetch\n    <span style=\"color:#080;font-weight:bold\">rescue</span> =&gt; the_error\n      <span style=\"color:#33B\">@error</span> = the_error.message\n      puts <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">Error </span><span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">\#{</span>the_error.message<span style=\"font-weight:bold;color:#666\">}</span></span><span style=\"color:#710\">&quot;</span></span>\n    <span style=\"color:#080;font-weight:bold\">end</span>\n\n    <span style=\"color:#080;font-weight:bold\">if</span> user &amp;&amp; user.email\n       <span style=\"color:#777\"># valid token</span>\n    <span style=\"color:#080;font-weight:bold\">end</span>\n  <span style=\"color:#080;font-weight:bold\">end</span>\n<span style=\"color:#080;font-weight:bold\">end</span>\n</pre></td>\n</tr></table>\n\n        </div>\nBy using Facebook Javascript SDK, you do not need to go through the workflow provided by omniauth, which might be easier for your web app. To use with devise, you can always use access token to retrieve users information from facebook directly instead of relying on what web browser or mobile phone post to your web app. You can create user and login with devise directly in your controller. The less the middleware, the less the problems. <br>", pretty_preview: "<p>Many people try to integrate <a href=\"https://developers.facebook.com/docs/concepts/login/\"><code>Facebook Login</code></a> with their web apps. Facebook use OAuth 2.0 for authentication. There is <a href=\"https://github.com/intridea/omniauth\"><code>omniauth</code></a>\n gem for Rails to handle OAuth. To use Omniauth with Facebook, you need \nseveral gems: omniauth, omniauth-oauth2, omniauth-facebook. Though \neasier than before, you might still meet some problems here and there. \nF...<a href=\"https://developers.facebook.com/docs/howtos/login/getting-started/\"><code>Javascript SDK</code></a></p>"},
  {id: 390, name: "Rails and Time Zone", category_id: 3, body: "<span style=\"font-weight: bold;\"><font style=\"font-size: 14px;\">Configure your Rails app</font></span><br><br>So what tools do we have at our disposal as Rails developers? The most important one is the <span style=\"font-weight: bold;\">config.time_zone</span> configuration in your <span style=\"font-weight: bold;\">config/application.rb</span> file. ActiveRecord will help you convert from and to (which the documentation fails to explain) UTC and the time zone of your choice. This means that if all you’re doing is having users post times through a form and use Active Record to persist it you’re good to go.<br><br><font style=\"font-size: 14px;\"><span style=\"font-weight: bold;\">Parsing</span></font><br><br>When parsing time information it’s important to never do it without specifying the time zone. The best way to do this is to use <span style=\"font-weight: bold;\">Time.zone.parse</span> (which will use the time zone specified in <span style=\"font-weight: bold;\">config.time_zone</span>) instead of just <span style=\"font-weight: bold;\">Time.parse</span> (which will use the computer’s time zone).<br>Work with Numerical and ActiveRecord attributes<br><br>Method calls like <span style=\"font-weight: bold;\">2.hours.ago</span> uses the time zone you’ve configured, so use these if you can! The same thing is true for time attributes on ActiveRecord models.<br><pre><code class=\"ruby\">post = Post.first<br>post.published_at #=&gt; Thu, 22 Mar 2012 00:00:00 CDT -05:00</code></pre>ActiveRecord fetches the UTC time from the database and converts it to the time zone in <span style=\"font-weight: bold;\">config.time_zone</span> for you.<br><br><font style=\"font-size: 14px;\"><span style=\"font-weight: bold;\">Date vs Time</span></font><br><br>Time has date information but Date does NOT have time information. Even if you don’t think you care you might realize that you do sooner then later. Be safe and use Time (or DateTime if you need support for times very far from the present).<br><br>But let’s say you’re stuck with a Date that you need to treat as a Time, at least make sure to convert it to your configured time zone:<br><pre><code class=\"ruby\">1.day.from_now # =&gt; Fri, 03 Mar 2012 22:04:47 JST  09:00<br>Date.today.to_time_in_current_zone # =&gt; Fri, 02 Mar 2012 00:00:00 JST  09:00</code></pre>\n<span style=\"font-weight: bold;\"><span style=\"color: rgb(255, 0, 0);\">Never use:</span></span><br><pre><code class=\"ruby\">Date.today.to_time # =&gt; 2012-03-02 00:00:00  0100</code></pre>\n<font style=\"font-size: 14px;\"><span style=\"font-weight: bold;\"><br>Querying</span></font><br><br>Since Rails know that your time information is stored as UTC in the database it will convert any time you give it to UTC.<br><pre><code class=\"ruby\">Post.where([\"posts.publised_at &gt; ?\", Time.zone.now])</code></pre>Just be sure to never construct the query string by hand and always use Time.zone.now as the base and you should be safe.<br><br><font style=\"font-size: 14px;\"><span style=\"font-weight: bold;\">Supplying</span></font><br><br>Building a web API for others to consume? Make sure to always send all time data as UTC (and specify that this is the case).<br><pre><code class=\"ruby\">Time.zone.now.utc.iso8601 #=&gt; \"2012-03-16T14:55:33Z\"</code></pre>Read more about why iso8601 is advisable here: <a href=\"http://devblog.avdi.org/2009/10/25/iso8601-dates-in-ruby/\"><code>http://devblog.avdi.org/2009/10/25/iso8601-dates-in-ruby/</code></a><br><br><font style=\"font-size: 14px;\"><span style=\"font-weight: bold;\">Consuming</span></font><br><br>When you get the time information from an external API which you don’t have control over you simply need to figure out the format and time zone it’s sent to you with. Because Time.zone.parse might not work with the format you receive you might need to use:<br><pre><code class=\"ruby\">Time.strptime(time_string, '%Y-%m-%dT%H:%M:%S%z').in_time_zone(Time.zone)</code></pre>Why there’s no <span style=\"font-weight: bold;\">#strptime method</span> on <span style=\"font-weight: bold;\">Time.zone</span> when there’s a #parse beats me. However don’t forget to call <span style=\"font-weight: bold;\">in_time_zone(Time.zone)</span> on your result!<br><br><font style=\"font-size: 14px;\"><span style=\"font-weight: bold;\">Working with multiple user time zones</span></font><br><br>Many systems needs to support users entering and viewing time information in a variety of time zones. To achieve this you need to store each user’s time zone (probably just one of the time zone string names found in <span style=\"font-weight: bold;\">rake time:zones:all</span>). Then to actually use that time zone the most common pattern is to simply create a private method in your ActionController and run it as an around filter.<br><pre><code class=\"ruby\">around_filter :user_time_zone, :if =&gt; :current_user<br>def user_time_zone(&amp;block)<br>  Time.use_zone(current_user.time_zone, &amp;block)<br>end</code></pre>This will do the same thing as <span style=\"font-weight: bold;\">config.time_zone</span> but on a per request basis. I still recommend to change the default <span style=\"font-weight: bold;\">config.time_zone</span> to a time zone that is a good default for your users. (Thank you Matt Bridges for pointing out the potential problems with using a before_filter instead of an around_filter.)<br><br><font style=\"font-size: 14px;\"><span style=\"font-weight: bold;\">Testing</span></font><br><br>All the above is something that your tests should catch for you. The problem is that you as the user and your computer as the development server happen to reside in the same time zone. This is rarely the case once you push things to production.<br><br>Highgroove just released <a href=\"https://github.com/highgroove/zonebie\"><code>Zonebie</code></a>, a gem that helps you deal with this. I haven’t had time to try it out myself yet, but it looks very promising. If you find this to be overkill, at least make sure that your tests run with <span style=\"font-weight: bold;\">Time.zone</span> set to another time zone than the one your development machine is in!<br><br><font style=\"font-size: 14px;\"><span style=\"font-weight: bold;\">Bug in Time.zone.parse</span></font><br><br>Jarkko Laine (@jarkko) pointed out that there’s currently a bug in Rails that can have <span style=\"font-weight: bold;\">Time.zone.parse</span> lose an hour when your system time is in DST (daylight saving time) and your configured time zone isn’t. Jarkko has posted an issue on Rails’ issue tracker and written a <a href=\"https://github.com/jarkko/rails/commit/bb4a1d68f6db8bf99d2b6e21eee72a19d494dee0\"><code>patch</code></a> to correct the bug. Until the patch has been accepted or if you’re running with older versions of Rails the only safe way to avoid this bug is to either monkey patch Rails in your app with Jarkko’s fix or use:<br><pre><code class=\"ruby\"># use<br>ActiveSupport::TimeWithZone.new(nil, Time.zone, DateTime.parse(\"2012-03-25 03:29\"))<br># =&gt; Sun, 25 Mar 2012 03:29:00 PDT -07:00<br><br># or if possible pass the time zone in the string<br>Time.zone.parse(\"2012-03-25 03:29 PDT\")<br># =&gt; Sun, 25 Mar 2012 03:29:00 PDT -07:00<br><br># instead of<br>Time.zone.parse(\"2012-03-25 03:29\")<br># =&gt; Sun, 25 Mar 2012 04:29:00 PDT -07:00</code></pre>It should however be mentioned that it’s pretty rare that this bug surfaces and when it does it can only lose you one hour. If you can live with that you probably do best by just waiting for the patch to be accepted.<br><br><font style=\"font-size: 14px;\"><span style=\"font-weight: bold;\">Cheat Sheet</span></font><br><br><span style=\"font-weight: bold;\">DOs</span><br><pre><code class=\"ruby\">2.hours.ago # =&gt; Fri, 02 Mar 2012 20:04:47 JST  09:00<br>1.day.from_now # =&gt; Fri, 03 Mar 2012 22:04:47 JST  09:00<br>Date.today.to_time_in_current_zone # =&gt; Fri, 02 Mar 2012 22:04:47 JST  09:00<br>Date.current # =&gt; Fri, 02 Mar<br>Time.zone.parse(\"2012-03-02 16:05:37\") # =&gt; Fri, 02 Mar 2012 16:05:37 JST  09:00<br>Time.zone.now # =&gt; Fri, 02 Mar 2012 22:04:47 JST  09:00<br>Time.current # Same thing but shorter. (Thank you Lukas Sarnacki pointing this out.)<br>Time.zone.today # If you really can't have a Time or DateTime for some reason<br>Time.zone.now.utc.iso8601 # When supliyng an API (you can actually skip .zone here, but I find it better to always use it, than miss it when it's needed)<br>Time.strptime(time_string, '%Y-%m-%dT%H:%M:%S%z').in_time_zone(Time.zone) # If you can't use Time#parse<br></code></pre>\n<span style=\"font-weight: bold;\">DON’Ts</span><br><pre><code class=\"ruby\">Time.now # =&gt; Returns system time and ignores your configured time zone.<br>Time.parse(\"2012-03-02 16:05:37\") # =&gt; Will assume time string given is in the system's time zone.<br>Time.strptime(time_string, '%Y-%m-%dT%H:%M:%S%z') # Same problem as with Time#parse.<br>Date.today # This could be yesterday or tomorrow depending on the machine's time zone.<br>Date.today.to_time # =&gt; # Still not the configured time zone.</code></pre>", created_at: "2013-12-13 19:56:09", updated_at: "2013-12-13 19:56:09", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "<span style=\"font-weight: bold;\"><font style=\"font-size: 14px;\">Configure your Rails app</font></span><br><br>So what tools do we have at our disposal as Rails developers? The most important one is the <span style=\"font-weight: bold;\">config.time_zone</span> configuration in your <span style=\"font-weight: bold;\">config/application.rb</span> file. ActiveRecord will help you convert from and to (which the documentation fails to explain) UTC and the time zone of your choice. This means that if all you’re doing is having users post times through a form and use Active Record to persist it you’re good to go.<br><br><font style=\"font-size: 14px;\"><span style=\"font-weight: bold;\">Parsing</span></font><br><br>When parsing time information it’s important to never do it without specifying the time zone. The best way to do this is to use <span style=\"font-weight: bold;\">Time.zone.parse</span> (which will use the time zone specified in <span style=\"font-weight: bold;\">config.time_zone</span>) instead of just <span style=\"font-weight: bold;\">Time.parse</span> (which will use the computer’s time zone).<br>Work with Numerical and ActiveRecord attributes<br><br>Method calls like <span style=\"font-weight: bold;\">2.hours.ago</span> uses the time zone you’ve configured, so use these if you can! The same thing is true for time attributes on ActiveRecord models.<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n</pre></td>\n  <td class=\"code\"><pre>post = <span style=\"color:#036;font-weight:bold\">Post</span>.first\npost.published_at <span style=\"color:#777\">#=&gt; Thu, 22 Mar 2012 00:00:00 CDT -05:00</span>\n</pre></td>\n</tr></table>\n\n        </div>\nActiveRecord fetches the UTC time from the database and converts it to the time zone in <span style=\"font-weight: bold;\">config.time_zone</span> for you.<br><br><font style=\"font-size: 14px;\"><span style=\"font-weight: bold;\">Date vs Time</span></font><br><br>Time has date information but Date does NOT have time information. Even if you don’t think you care you might realize that you do sooner then later. Be safe and use Time (or DateTime if you need support for times very far from the present).<br><br>But let’s say you’re stuck with a Date that you need to treat as a Time, at least make sure to convert it to your configured time zone:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#00D\">1</span>.day.from_now <span style=\"color:#777\"># =&gt; Fri, 03 Mar 2012 22:04:47 JST  09:00</span>\n<span style=\"color:#036;font-weight:bold\">Date</span>.today.to_time_in_current_zone <span style=\"color:#777\"># =&gt; Fri, 02 Mar 2012 00:00:00 JST  09:00</span>\n</pre></td>\n</tr></table>\n\n        </div>\n\n<span style=\"font-weight: bold;\"><span style=\"color: rgb(255, 0, 0);\">Never use:</span></span><br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#036;font-weight:bold\">Date</span>.today.to_time <span style=\"color:#777\"># =&gt; 2012-03-02 00:00:00  0100</span>\n</pre></td>\n</tr></table>\n\n        </div>\n\n<font style=\"font-size: 14px;\"><span style=\"font-weight: bold;\"><br>Querying</span></font><br><br>Since Rails know that your time information is stored as UTC in the database it will convert any time you give it to UTC.<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#036;font-weight:bold\">Post</span>.where([<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">posts.publised_at &gt; ?</span><span style=\"color:#710\">&quot;</span></span>, <span style=\"color:#036;font-weight:bold\">Time</span>.zone.now])\n</pre></td>\n</tr></table>\n\n        </div>\nJust be sure to never construct the query string by hand and always use Time.zone.now as the base and you should be safe.<br><br><font style=\"font-size: 14px;\"><span style=\"font-weight: bold;\">Supplying</span></font><br><br>Building a web API for others to consume? Make sure to always send all time data as UTC (and specify that this is the case).<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#036;font-weight:bold\">Time</span>.zone.now.utc.iso8601 <span style=\"color:#777\">#=&gt; &quot;2012-03-16T14:55:33Z&quot;</span>\n</pre></td>\n</tr></table>\n\n        </div>\nRead more about why iso8601 is advisable here: <a href=\"http://devblog.avdi.org/2009/10/25/iso8601-dates-in-ruby/\"><code>http://devblog.avdi.org/2009/10/25/iso8601-dates-in-ruby/</code></a><br><br><font style=\"font-size: 14px;\"><span style=\"font-weight: bold;\">Consuming</span></font><br><br>When you get the time information from an external API which you don’t have control over you simply need to figure out the format and time zone it’s sent to you with. Because Time.zone.parse might not work with the format you receive you might need to use:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#036;font-weight:bold\">Time</span>.strptime(time_string, <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">%Y-%m-%dT%H:%M:%S%z</span><span style=\"color:#710\">'</span></span>).in_time_zone(<span style=\"color:#036;font-weight:bold\">Time</span>.zone)\n</pre></td>\n</tr></table>\n\n        </div>\nWhy there’s no <span style=\"font-weight: bold;\">#strptime method</span> on <span style=\"font-weight: bold;\">Time.zone</span> when there’s a #parse beats me. However don’t forget to call <span style=\"font-weight: bold;\">in_time_zone(Time.zone)</span> on your result!<br><br><font style=\"font-size: 14px;\"><span style=\"font-weight: bold;\">Working with multiple user time zones</span></font><br><br>Many systems needs to support users entering and viewing time information in a variety of time zones. To achieve this you need to store each user’s time zone (probably just one of the time zone string names found in <span style=\"font-weight: bold;\">rake time:zones:all</span>). Then to actually use that time zone the most common pattern is to simply create a private method in your ActionController and run it as an around filter.<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n</pre></td>\n  <td class=\"code\"><pre>around_filter <span style=\"color:#A60\">:user_time_zone</span>, <span style=\"color:#A60\">:if</span> =&gt; <span style=\"color:#A60\">:current_user</span>\n<span style=\"color:#080;font-weight:bold\">def</span> <span style=\"color:#06B;font-weight:bold\">user_time_zone</span>(&amp;block)\n  <span style=\"color:#036;font-weight:bold\">Time</span>.use_zone(current_user.time_zone, &amp;block)\n<span style=\"color:#080;font-weight:bold\">end</span>\n</pre></td>\n</tr></table>\n\n        </div>\nThis will do the same thing as <span style=\"font-weight: bold;\">config.time_zone</span> but on a per request basis. I still recommend to change the default <span style=\"font-weight: bold;\">config.time_zone</span> to a time zone that is a good default for your users. (Thank you Matt Bridges for pointing out the potential problems with using a before_filter instead of an around_filter.)<br><br><font style=\"font-size: 14px;\"><span style=\"font-weight: bold;\">Testing</span></font><br><br>All the above is something that your tests should catch for you. The problem is that you as the user and your computer as the development server happen to reside in the same time zone. This is rarely the case once you push things to production.<br><br>Highgroove just released <a href=\"https://github.com/highgroove/zonebie\"><code>Zonebie</code></a>, a gem that helps you deal with this. I haven’t had time to try it out myself yet, but it looks very promising. If you find this to be overkill, at least make sure that your tests run with <span style=\"font-weight: bold;\">Time.zone</span> set to another time zone than the one your development machine is in!<br><br><font style=\"font-size: 14px;\"><span style=\"font-weight: bold;\">Bug in Time.zone.parse</span></font><br><br>Jarkko Laine (@jarkko) pointed out that there’s currently a bug in Rails that can have <span style=\"font-weight: bold;\">Time.zone.parse</span> lose an hour when your system time is in DST (daylight saving time) and your configured time zone isn’t. Jarkko has posted an issue on Rails’ issue tracker and written a <a href=\"https://github.com/jarkko/rails/commit/bb4a1d68f6db8bf99d2b6e21eee72a19d494dee0\"><code>patch</code></a> to correct the bug. Until the patch has been accepted or if you’re running with older versions of Rails the only safe way to avoid this bug is to either monkey patch Rails in your app with Jarkko’s fix or use:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n<a href=\"#n8\" name=\"n8\">8</a>\n<a href=\"#n9\" name=\"n9\">9</a>\n<strong><a href=\"#n10\" name=\"n10\">10</a></strong>\n<a href=\"#n11\" name=\"n11\">11</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#777\"># use</span>\n<span style=\"color:#036;font-weight:bold\">ActiveSupport</span>::<span style=\"color:#036;font-weight:bold\">TimeWithZone</span>.new(<span style=\"color:#069\">nil</span>, <span style=\"color:#036;font-weight:bold\">Time</span>.zone, <span style=\"color:#036;font-weight:bold\">DateTime</span>.parse(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">2012-03-25 03:29</span><span style=\"color:#710\">&quot;</span></span>))\n<span style=\"color:#777\"># =&gt; Sun, 25 Mar 2012 03:29:00 PDT -07:00</span>\n\n<span style=\"color:#777\"># or if possible pass the time zone in the string</span>\n<span style=\"color:#036;font-weight:bold\">Time</span>.zone.parse(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">2012-03-25 03:29 PDT</span><span style=\"color:#710\">&quot;</span></span>)\n<span style=\"color:#777\"># =&gt; Sun, 25 Mar 2012 03:29:00 PDT -07:00</span>\n\n<span style=\"color:#777\"># instead of</span>\n<span style=\"color:#036;font-weight:bold\">Time</span>.zone.parse(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">2012-03-25 03:29</span><span style=\"color:#710\">&quot;</span></span>)\n<span style=\"color:#777\"># =&gt; Sun, 25 Mar 2012 04:29:00 PDT -07:00</span>\n</pre></td>\n</tr></table>\n\n        </div>\nIt should however be mentioned that it’s pretty rare that this bug surfaces and when it does it can only lose you one hour. If you can live with that you probably do best by just waiting for the patch to be accepted.<br><br><font style=\"font-size: 14px;\"><span style=\"font-weight: bold;\">Cheat Sheet</span></font><br><br><span style=\"font-weight: bold;\">DOs</span><br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n<a href=\"#n8\" name=\"n8\">8</a>\n<a href=\"#n9\" name=\"n9\">9</a>\n<strong><a href=\"#n10\" name=\"n10\">10</a></strong>\n<a href=\"#n11\" name=\"n11\">11</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#00D\">2</span>.hours.ago <span style=\"color:#777\"># =&gt; Fri, 02 Mar 2012 20:04:47 JST  09:00</span>\n<span style=\"color:#00D\">1</span>.day.from_now <span style=\"color:#777\"># =&gt; Fri, 03 Mar 2012 22:04:47 JST  09:00</span>\n<span style=\"color:#036;font-weight:bold\">Date</span>.today.to_time_in_current_zone <span style=\"color:#777\"># =&gt; Fri, 02 Mar 2012 22:04:47 JST  09:00</span>\n<span style=\"color:#036;font-weight:bold\">Date</span>.current <span style=\"color:#777\"># =&gt; Fri, 02 Mar</span>\n<span style=\"color:#036;font-weight:bold\">Time</span>.zone.parse(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">2012-03-02 16:05:37</span><span style=\"color:#710\">&quot;</span></span>) <span style=\"color:#777\"># =&gt; Fri, 02 Mar 2012 16:05:37 JST  09:00</span>\n<span style=\"color:#036;font-weight:bold\">Time</span>.zone.now <span style=\"color:#777\"># =&gt; Fri, 02 Mar 2012 22:04:47 JST  09:00</span>\n<span style=\"color:#036;font-weight:bold\">Time</span>.current <span style=\"color:#777\"># Same thing but shorter. (Thank you Lukas Sarnacki pointing this out.)</span>\n<span style=\"color:#036;font-weight:bold\">Time</span>.zone.today <span style=\"color:#777\"># If you really can't have a Time or DateTime for some reason</span>\n<span style=\"color:#036;font-weight:bold\">Time</span>.zone.now.utc.iso8601 <span style=\"color:#777\"># When supliyng an API (you can actually skip .zone here, but I find it better to always use it, than miss it when it's needed)</span>\n<span style=\"color:#036;font-weight:bold\">Time</span>.strptime(time_string, <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">%Y-%m-%dT%H:%M:%S%z</span><span style=\"color:#710\">'</span></span>).in_time_zone(<span style=\"color:#036;font-weight:bold\">Time</span>.zone) <span style=\"color:#777\"># If you can't use Time#parse</span>\n\n</pre></td>\n</tr></table>\n\n        </div>\n\n<span style=\"font-weight: bold;\">DON’Ts</span><br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#036;font-weight:bold\">Time</span>.now <span style=\"color:#777\"># =&gt; Returns system time and ignores your configured time zone.</span>\n<span style=\"color:#036;font-weight:bold\">Time</span>.parse(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">2012-03-02 16:05:37</span><span style=\"color:#710\">&quot;</span></span>) <span style=\"color:#777\"># =&gt; Will assume time string given is in the system's time zone.</span>\n<span style=\"color:#036;font-weight:bold\">Time</span>.strptime(time_string, <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">%Y-%m-%dT%H:%M:%S%z</span><span style=\"color:#710\">'</span></span>) <span style=\"color:#777\"># Same problem as with Time#parse.</span>\n<span style=\"color:#036;font-weight:bold\">Date</span>.today <span style=\"color:#777\"># This could be yesterday or tomorrow depending on the machine's time zone.</span>\n<span style=\"color:#036;font-weight:bold\">Date</span>.today.to_time <span style=\"color:#777\"># =&gt; # Still not the configured time zone.</span>\n</pre></td>\n</tr></table>\n\n        </div>\n", pretty_preview: "<span style=\"font-weight: bold;\"><font style=\"font-size: 14px;\">Configure your Rails app</font></span><br><br>So what tools do we have at our disposal as Rails developers? The most important one is the <span style=\"font-weight: bold;\">config.time_zone</span> configuration in your <span style=\"font-weight: bold;\">config/application.rb</span> file. ActiveRecord will help you convert from and to (which the documentat...<br>"},
  {id: 391, name: "Migrate from RSpec to MiniTest with Rails", category_id: 3, body: "<p>Rails will use <a href=\"https://github.com/seattlerb/minitest\"><code>MiniTest</code></a>\n as testing framework. Here are steps to convert your original RSpec \ntest to minitest. Please note that MiniTest might not offer as much \nfeatures as RSpec, but it is lightweight and utilize many testing \nfunctionality provided by Rails.\n<br><br>\nTo install MiniTest, here are the step:\n</p>\n<ol>\n<li>Add 'gem <a href=\"https://github.com/blowmage/minitest-rails\"><code>minitest_rails</code></a>' into Gemfile under 'group :development, :test'</li>\n<li>run 'rails generate mini_test:install' will create test/ directory</li>\n<li>\n<a href=\"http://stackoverflow.com/questions/13497628/controller-testing-with-minitest-and-devise-failing\"><code>Support Devise</code></a> if you use it.<pre><code class=\"ruby\">    # test/minitest_helper.rb <br><br>    class MiniTest::Rails::ActionController::TestCase<br>      include Devise::TestHelpers<br>    end</code></pre>\n</li>\n<li>FactoryGirl can find factories under spec/, thus, there is no need \nto move it. But remember to keep it or put them into test/ if you decide\n to remove rspec from rails</li>\n<li>MiniTest::Mock is not power enough. Try <code><a href=\"https://github.com/freerange/mocha\">Mocha</a></code>. Please read its README for installation like this for Rails:\n<pre><code class=\"ruby\">    # Gemfile in Rails app<br>    gem \"mocha\", :require =&gt; false</code></pre>\n<pre><code class=\"ruby\">    # At bottom of test/minitest_helper.rb<br>    require \"mocha/setup\"</code></pre>\n</li>\n<li>MiniTest by default read *_test.rb no matter you are using unit test or spec. You can <a href=\"http://mallibone.wordpress.com/2012/02/14/run-your-tests-with-a-single-command/\"><code>fine-tune it through Rakefile</code></a>\n</li>\n</ol>\nThe difference between RSpec and MiniTest is <code><a href=\"http://docs.seattlerb.org/minitest/MiniTest/Expectations.html\">minor</a></code>. Here are some examples:\n<br><pre><code class=\"ruby\"># RSpec<br>obj.should eq(2)<br><br># MiniTest<br>obj.must_equal(2)</code></pre>\n<pre><code class=\"ruby\"># RSpec<br>obj.should be_nil<br><br># MiniTest<br>obj.must_be_nil</code></pre>\n<pre><code class=\"ruby\"># RSpec<br>obj.should be_empty<br><br># MiniTest<br>obj.must_be_empty</code></pre>\n<pre><code class=\"ruby\"># RSpec<br>expect {<br>  post :create, {:post =&gt; valid_attributes}<br>}.to change(Post, :count).by(1)<br><br># MiniTest<br>assert_difference 'Post.count', 1 do<br>  post :create, {:post =&gt; valid_attributes}<br>end</code></pre>\n<pre><code class=\"ruby\"># RSpec<br>assigns(:post).should be_a_new(Post)<br><br># MiniTest<br>assigns(:post).must_be_instance_of(Post)<br>assigns(:post).must_be(:new_record?)</code></pre>\n<pre><code class=\"ruby\"># RSpec<br>expect {<br>  get :show, {:id =&gt; @post.to_param}<br>}.to raise_error(ActiveRecord::RecordNotFound)<br><br># MiniTest<br>proc {<br>  get :show, {:id =&gt; @post.to_param}<br>}.must_raise(ActiveRecord::RecordNotFound)</code></pre>\n<pre><code class=\"ruby\"># RSpec<br>response.should redirect_to(@post)<br><br># MiniTest<br>assert_redirected_to(@post)</code></pre>\n<pre><code class=\"ruby\"># RSpec<br>response.should render_template(\"new\")<br><br># MiniTest<br>assert_template(\"new\")</code></pre>Mocking comes from Mocha.<br><pre><code class=\"ruby\"># RSpec<br>Post.any_instance.stub(:save).and_return(false)<br><br># MiniTest<br>Post.any_instance.stubs(:save).returns(false)</code></pre>\n<pre><code class=\"ruby\"># RSpec<br>Post.any_instance.should_receive(:update_attributes).with({ \"title\" =&gt; \"MyString\" })<br><br># MiniTest<br>Post.any_instance.expects(:update_attributes).with({ \"title\" =&gt; \"MyString\" })</code></pre>", created_at: "2013-12-13 19:56:09", updated_at: "2013-12-13 19:56:09", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "<p>Rails will use <a href=\"https://github.com/seattlerb/minitest\"><code>MiniTest</code></a>\n as testing framework. Here are steps to convert your original RSpec \ntest to minitest. Please note that MiniTest might not offer as much \nfeatures as RSpec, but it is lightweight and utilize many testing \nfunctionality provided by Rails.\n<br><br>\nTo install MiniTest, here are the step:\n</p>\n<ol>\n<li>Add 'gem <a href=\"https://github.com/blowmage/minitest-rails\"><code>minitest_rails</code></a>' into Gemfile under 'group :development, :test'</li>\n<li>run 'rails generate mini_test:install' will create test/ directory</li>\n<li>\n<a href=\"http://stackoverflow.com/questions/13497628/controller-testing-with-minitest-and-devise-failing\"><code>Support Devise</code></a> if you use it.        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n</pre></td>\n  <td class=\"code\"><pre>    <span style=\"color:#777\"># test/minitest_helper.rb </span>\n\n    <span style=\"color:#080;font-weight:bold\">class</span> <span style=\"color:#B06;font-weight:bold\">MiniTest::Rails::ActionController::TestCase</span>\n      include <span style=\"color:#036;font-weight:bold\">Devise</span>::<span style=\"color:#036;font-weight:bold\">TestHelpers</span>\n    <span style=\"color:#080;font-weight:bold\">end</span>\n</pre></td>\n</tr></table>\n\n        </div>\n\n</li>\n<li>FactoryGirl can find factories under spec/, thus, there is no need \nto move it. But remember to keep it or put them into test/ if you decide\n to remove rspec from rails</li>\n<li>MiniTest::Mock is not power enough. Try <code><a href=\"https://github.com/freerange/mocha\">Mocha</a></code>. Please read its README for installation like this for Rails:\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n</pre></td>\n  <td class=\"code\"><pre>    <span style=\"color:#777\"># Gemfile in Rails app</span>\n    gem <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">mocha</span><span style=\"color:#710\">&quot;</span></span>, <span style=\"color:#A60\">:require</span> =&gt; <span style=\"color:#069\">false</span>\n</pre></td>\n</tr></table>\n\n        </div>\n\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n</pre></td>\n  <td class=\"code\"><pre>    <span style=\"color:#777\"># At bottom of test/minitest_helper.rb</span>\n    require <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">mocha/setup</span><span style=\"color:#710\">&quot;</span></span>\n</pre></td>\n</tr></table>\n\n        </div>\n\n</li>\n<li>MiniTest by default read *_test.rb no matter you are using unit test or spec. You can <a href=\"http://mallibone.wordpress.com/2012/02/14/run-your-tests-with-a-single-command/\"><code>fine-tune it through Rakefile</code></a>\n</li>\n</ol>\nThe difference between RSpec and MiniTest is <code><a href=\"http://docs.seattlerb.org/minitest/MiniTest/Expectations.html\">minor</a></code>. Here are some examples:\n<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#777\"># RSpec</span>\nobj.should eq(<span style=\"color:#00D\">2</span>)\n\n<span style=\"color:#777\"># MiniTest</span>\nobj.must_equal(<span style=\"color:#00D\">2</span>)\n</pre></td>\n</tr></table>\n\n        </div>\n\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#777\"># RSpec</span>\nobj.should be_nil\n\n<span style=\"color:#777\"># MiniTest</span>\nobj.must_be_nil\n</pre></td>\n</tr></table>\n\n        </div>\n\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#777\"># RSpec</span>\nobj.should be_empty\n\n<span style=\"color:#777\"># MiniTest</span>\nobj.must_be_empty\n</pre></td>\n</tr></table>\n\n        </div>\n\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n<a href=\"#n8\" name=\"n8\">8</a>\n<a href=\"#n9\" name=\"n9\">9</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#777\"># RSpec</span>\nexpect {\n  post <span style=\"color:#A60\">:create</span>, {<span style=\"color:#A60\">:post</span> =&gt; valid_attributes}\n}.to change(<span style=\"color:#036;font-weight:bold\">Post</span>, <span style=\"color:#A60\">:count</span>).by(<span style=\"color:#00D\">1</span>)\n\n<span style=\"color:#777\"># MiniTest</span>\nassert_difference <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">Post.count</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#00D\">1</span> <span style=\"color:#080;font-weight:bold\">do</span>\n  post <span style=\"color:#A60\">:create</span>, {<span style=\"color:#A60\">:post</span> =&gt; valid_attributes}\n<span style=\"color:#080;font-weight:bold\">end</span>\n</pre></td>\n</tr></table>\n\n        </div>\n\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#777\"># RSpec</span>\nassigns(<span style=\"color:#A60\">:post</span>).should be_a_new(<span style=\"color:#036;font-weight:bold\">Post</span>)\n\n<span style=\"color:#777\"># MiniTest</span>\nassigns(<span style=\"color:#A60\">:post</span>).must_be_instance_of(<span style=\"color:#036;font-weight:bold\">Post</span>)\nassigns(<span style=\"color:#A60\">:post</span>).must_be(<span style=\"color:#A60\">:new_record?</span>)\n</pre></td>\n</tr></table>\n\n        </div>\n\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n<a href=\"#n8\" name=\"n8\">8</a>\n<a href=\"#n9\" name=\"n9\">9</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#777\"># RSpec</span>\nexpect {\n  get <span style=\"color:#A60\">:show</span>, {<span style=\"color:#A60\">:id</span> =&gt; <span style=\"color:#33B\">@post</span>.to_param}\n}.to raise_error(<span style=\"color:#036;font-weight:bold\">ActiveRecord</span>::<span style=\"color:#036;font-weight:bold\">RecordNotFound</span>)\n\n<span style=\"color:#777\"># MiniTest</span>\nproc {\n  get <span style=\"color:#A60\">:show</span>, {<span style=\"color:#A60\">:id</span> =&gt; <span style=\"color:#33B\">@post</span>.to_param}\n}.must_raise(<span style=\"color:#036;font-weight:bold\">ActiveRecord</span>::<span style=\"color:#036;font-weight:bold\">RecordNotFound</span>)\n</pre></td>\n</tr></table>\n\n        </div>\n\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#777\"># RSpec</span>\nresponse.should redirect_to(<span style=\"color:#33B\">@post</span>)\n\n<span style=\"color:#777\"># MiniTest</span>\nassert_redirected_to(<span style=\"color:#33B\">@post</span>)\n</pre></td>\n</tr></table>\n\n        </div>\n\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#777\"># RSpec</span>\nresponse.should render_template(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">new</span><span style=\"color:#710\">&quot;</span></span>)\n\n<span style=\"color:#777\"># MiniTest</span>\nassert_template(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">new</span><span style=\"color:#710\">&quot;</span></span>)\n</pre></td>\n</tr></table>\n\n        </div>\nMocking comes from Mocha.<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#777\"># RSpec</span>\n<span style=\"color:#036;font-weight:bold\">Post</span>.any_instance.stub(<span style=\"color:#A60\">:save</span>).and_return(<span style=\"color:#069\">false</span>)\n\n<span style=\"color:#777\"># MiniTest</span>\n<span style=\"color:#036;font-weight:bold\">Post</span>.any_instance.stubs(<span style=\"color:#A60\">:save</span>).returns(<span style=\"color:#069\">false</span>)\n</pre></td>\n</tr></table>\n\n        </div>\n\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#777\"># RSpec</span>\n<span style=\"color:#036;font-weight:bold\">Post</span>.any_instance.should_receive(<span style=\"color:#A60\">:update_attributes</span>).with({ <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">title</span><span style=\"color:#710\">&quot;</span></span> =&gt; <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">MyString</span><span style=\"color:#710\">&quot;</span></span> })\n\n<span style=\"color:#777\"># MiniTest</span>\n<span style=\"color:#036;font-weight:bold\">Post</span>.any_instance.expects(<span style=\"color:#A60\">:update_attributes</span>).with({ <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">title</span><span style=\"color:#710\">&quot;</span></span> =&gt; <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">MyString</span><span style=\"color:#710\">&quot;</span></span> })\n</pre></td>\n</tr></table>\n\n        </div>\n", pretty_preview: "<p>Rails will use <a href=\"https://github.com/seattlerb/minitest\"><code>MiniTest</code></a>\n as testing framework. Here are steps to convert your original RSpec \ntest to minitest. Please note that MiniTest might not offer as much \nfeatures as RSpec, but it is lightweight and utilize many testing \nfunctionality provided by Rails.\n...<br></p>"},
  {id: 392, name: "Cache in Jbuilder", category_id: 3, body: "<a href=\"https://github.com/rails/jbuilder\"><code>Jbuilder</code></a> provides a way to render JSON easily as views in Rails. In the previous article, we use <a href=\"http://blog.berylliumwork.com/2013/02/rails-low-level-caching-with-angularjs.html\"><code>low-leveling caching in Rails to cache JSON for Angular.js</code></a>. It can actually be easily done in Jbuilder, even with the <a href=\"https://github.com/rails/jbuilder/commit/e0d9acc9a0869c4014ca671c4bf92b9eec627c40\"><code>latest cache_digests</code></a> for Rails 4. Just write regular index.json.jbuilder like this:\n<br><pre><code class=\"ruby\">json.array!(topics) do |topic|<br>    json.title topic.title<br>    json.url topic_path(topic)<br>end</code></pre>And cache it like this:<br><pre><code class=\"ruby\">json.array!(topics) do |topic|<br>  json.cache! topic do<br>    json.title topic.title<br>    json.url topic_path(topic)<br>  end<br>end</code></pre>", created_at: "2013-12-13 19:56:09", updated_at: "2013-12-13 19:56:09", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "<a href=\"https://github.com/rails/jbuilder\"><code>Jbuilder</code></a> provides a way to render JSON easily as views in Rails. In the previous article, we use <a href=\"http://blog.berylliumwork.com/2013/02/rails-low-level-caching-with-angularjs.html\"><code>low-leveling caching in Rails to cache JSON for Angular.js</code></a>. It can actually be easily done in Jbuilder, even with the <a href=\"https://github.com/rails/jbuilder/commit/e0d9acc9a0869c4014ca671c4bf92b9eec627c40\"><code>latest cache_digests</code></a> for Rails 4. Just write regular index.json.jbuilder like this:\n<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n</pre></td>\n  <td class=\"code\"><pre>json.array!(topics) <span style=\"color:#080;font-weight:bold\">do</span> |topic|\n    json.title topic.title\n    json.url topic_path(topic)\n<span style=\"color:#080;font-weight:bold\">end</span>\n</pre></td>\n</tr></table>\n\n        </div>\nAnd cache it like this:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n</pre></td>\n  <td class=\"code\"><pre>json.array!(topics) <span style=\"color:#080;font-weight:bold\">do</span> |topic|\n  json.cache! topic <span style=\"color:#080;font-weight:bold\">do</span>\n    json.title topic.title\n    json.url topic_path(topic)\n  <span style=\"color:#080;font-weight:bold\">end</span>\n<span style=\"color:#080;font-weight:bold\">end</span>\n</pre></td>\n</tr></table>\n\n        </div>\n", pretty_preview: "<a href=\"https://github.com/rails/jbuilder\"><code>Jbuilder</code></a> provides a way to render JSON easily as views in Rails. In the previous article, we use <a href=\"http://blog.berylliumwork.com/2013/02/rails-low-level-caching-with-angularjs.html\"><code>low-leveling caching in Rails to cache JSON for Angular.js</code></a>. It can actually be easily done in Jbuilder, even with the <a href=\"https://github.com/rails/jbuilder/commit/e0d9acc9a0869c4014ca671c4bf92b9eec627c40\"><code>latest cache_digests</code></a> for Rails 4. Just write regular index.json.jbuilder like this:\n<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <div class=\"CodeRay\">\n  <div class=\"code\"><pre>json.array!(topics) <span style=\"color:#080;font-weight:bold\">do</span> |topic|\n    json...\n\n</pre></div>\n</div>\n\n        </div>\n"},
  {id: 393, name: "Hide Secret Token of Rails in Git", category_id: 3, body: "<p>Rails has a secret token to sign cookie. It is under config/initializers/secret_token.rb. This token is supposed to be secret, but many of them are pushed to git, including github and heroku. To fix this security issue, you can put this secret token into your environment variable like this:<br></p>\n<pre><code class=\"ruby\"># config/initializers/secret_token.rb<br><br>secret = ENV['MYAPP_SECRET']<br>if secret.length &lt; 30<br>  raise \"Secret token cannot be loaded\"<br>else<br>  Myapp::Application.config.secret_token = secret<br>end</code></pre>And set secret token in your shell script<br><pre><code># ~/.bash_profile<br>export MYAPP_SECRET=\"xsdf123fsgrewqrewe....</code></pre>If you already push this token into git, you can generate new one by:<br><pre><code class=\"bash\">rake secret</code></pre>The reason to do so is that you can set <a href=\"https://devcenter.heroku.com/articles/config-vars\"><code>persistent environment variables</code></a> in Heroku like this:<br><pre><code class=\"bash\">heroku config:add MYAPP_SECRET=\"xsdf123fsgrewqrewe....</code></pre>Thus, this approach works for both local development environment and heroku. And you can avoid push secret token in public. <br>", created_at: "2013-12-13 19:56:09", updated_at: "2013-12-13 19:56:09", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "<p>Rails has a secret token to sign cookie. It is under config/initializers/secret_token.rb. This token is supposed to be secret, but many of them are pushed to git, including github and heroku. To fix this security issue, you can put this secret token into your environment variable like this:<br></p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n<a href=\"#n8\" name=\"n8\">8</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#777\"># config/initializers/secret_token.rb</span>\n\nsecret = <span style=\"color:#069\">ENV</span>[<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">MYAPP_SECRET</span><span style=\"color:#710\">'</span></span>]\n<span style=\"color:#080;font-weight:bold\">if</span> secret.length &lt; <span style=\"color:#00D\">30</span>\n  raise <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">Secret token cannot be loaded</span><span style=\"color:#710\">&quot;</span></span>\n<span style=\"color:#080;font-weight:bold\">else</span>\n  <span style=\"color:#036;font-weight:bold\">Myapp</span>::<span style=\"color:#036;font-weight:bold\">Application</span>.config.secret_token = secret\n<span style=\"color:#080;font-weight:bold\">end</span>\n</pre></td>\n</tr></table>\n\n        </div>\nAnd set secret token in your shell script<br>        <div class='oa clearfix'>\n          \n          <pre><code># ~/.bash_profile<br>export MYAPP_SECRET=\"xsdf123fsgrewqrewe....</code></pre>\n        </div>\nIf you already push this token into git, you can generate new one by:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/bash.png' alt='bash'/>\n              </div>\n          <pre><code class=\"bash\">rake secret</code></pre>\n        </div>\nThe reason to do so is that you can set <a href=\"https://devcenter.heroku.com/articles/config-vars\"><code>persistent environment variables</code></a> in Heroku like this:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/bash.png' alt='bash'/>\n              </div>\n          <pre><code class=\"bash\">heroku config:add MYAPP_SECRET=\"xsdf123fsgrewqrewe....</code></pre>\n        </div>\nThus, this approach works for both local development environment and heroku. And you can avoid push secret token in public. <br>", pretty_preview: "<p>Rails has a secret token to sign cookie. It is under config/initializers/secret_token.rb. This token is supposed to be secret, but many of them are pushed to git, including github and heroku. To fix this security issue, you can put this secret token i...<br></p>"},
  {id: 394, name: "How to sign your Ruby gems", category_id: 3, body: "<p>In light of the recent <a href=\"http://news.ycombinator.com/item?id=5139583\"><code>Rubygems security issues</code></a>, I've been adding signatures to my own gems, and encouraging other gem authors to do the same by opening issues on various Github projects. Gem signing coupled with publication of a pubkey allows people to verify the authenticity of your published gems against your repository, so that they can be certain that the gems they are downloading from Rubygems (or where ever) are authentic and were actually released by you, the gem author (as opposed to, say, backdoored and uploaded to Rubygems by a malicious entity in the event of another security breach).<br><br>The how-to is here: <a href=\"http://docs.rubygems.org/read/chapter/21\"><code>http://docs.rubygems.org/read/chapter/21</code></a><br><br></p>\n<ol>\n<li>    <pre><code class=\"bash\">gem cert --build your@email.com</code></pre>\n</li>\n<li>Copy the private key somewhere safe (I use <span style=\"font-weight: bold;\">~/.gemcert</span>)</li>\n<li>Add the public key to the repo (<code>git add gem-public_cert.pem</code>)</li>\n<li>Update the gemspec with something like:    <pre><code class=\"ruby\">s.signing_key = '/home/chris/.gemcert/gem-private_key.pem'<br>s.cert_chain  = ['gem-public_cert.pem']</code></pre>\n</li>\n<li>Push and rake release</li>\n</ol>\n<br>While this does mean that your gem is signed by a self-signed certificate, and thus the lack of chain-of-trust means that your gem would not be verifiable if your Github credentials or machine housing your private key were compromised, it provides a layer of verification between source and package publication platforms, and would allow for much speedier community recovery in the event of a future breach.<br><br>This is quick, easy, and has no downside. I encourage all gem authors to immediately add signatures to their gems, and for all gem users to open or support issues on your favorite gem projects to encourage their maintainers to do the same.", created_at: "2013-12-13 19:56:09", updated_at: "2013-12-13 19:56:09", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "<p>In light of the recent <a href=\"http://news.ycombinator.com/item?id=5139583\"><code>Rubygems security issues</code></a>, I've been adding signatures to my own gems, and encouraging other gem authors to do the same by opening issues on various Github projects. Gem signing coupled with publication of a pubkey allows people to verify the authenticity of your published gems against your repository, so that they can be certain that the gems they are downloading from Rubygems (or where ever) are authentic and were actually released by you, the gem author (as opposed to, say, backdoored and uploaded to Rubygems by a malicious entity in the event of another security breach).<br><br>The how-to is here: <a href=\"http://docs.rubygems.org/read/chapter/21\"><code>http://docs.rubygems.org/read/chapter/21</code></a><br><br></p>\n<ol>\n<li>            <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/bash.png' alt='bash'/>\n              </div>\n          <pre><code class=\"bash\">gem cert --build your@email.com</code></pre>\n        </div>\n\n</li>\n<li>Copy the private key somewhere safe (I use <span style=\"font-weight: bold;\">~/.gemcert</span>)</li>\n<li>Add the public key to the repo (<code>git add gem-public_cert.pem</code>)</li>\n<li>Update the gemspec with something like:            <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n</pre></td>\n  <td class=\"code\"><pre>s.signing_key = <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">/home/chris/.gemcert/gem-private_key.pem</span><span style=\"color:#710\">'</span></span>\ns.cert_chain  = [<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">gem-public_cert.pem</span><span style=\"color:#710\">'</span></span>]\n</pre></td>\n</tr></table>\n\n        </div>\n\n</li>\n<li>Push and rake release</li>\n</ol>\n<br>While this does mean that your gem is signed by a self-signed certificate, and thus the lack of chain-of-trust means that your gem would not be verifiable if your Github credentials or machine housing your private key were compromised, it provides a layer of verification between source and package publication platforms, and would allow for much speedier community recovery in the event of a future breach.<br><br>This is quick, easy, and has no downside. I encourage all gem authors to immediately add signatures to their gems, and for all gem users to open or support issues on your favorite gem projects to encourage their maintainers to do the same.", pretty_preview: "<p>In light of the recent <a href=\"http://news.ycombinator.com/item?id=5139583\"><code>Rubygems security issues</code></a>, I've been adding signatures to my own gems, and encouraging other gem authors to do the same by opening issues on various Github projects. Gem signing coupled with publication of a pubkey allows people to verify the authentici...<br></p>"},
  {id: 395, name: "Improve Performance of Rails on Heroku", category_id: 3, body: "<p>To compare the cost of hosting Rails on Amazon EC2 and Heroku is \ndifficult because you have to consider the cost of running database and \nservers on your own on Amazon EC2. A dyno on Heroku is $35 per month \n(the first one is free). Thus, if you can improve the performance of \nyour rails application, Heroku might be a better choice of hosting your \nrails application. There are many ways to do so. Here are a few ones I \nfound very useful. I haven't try any of these, but they seem work well \nand can help you get more out of heroku.<br></p>\n<ol>\n<li>\n<a href=\"https://www.google.com/search?q=unicorn%20heroku%20rails&amp;aq=f&amp;oq=unicorn%20heroku%20rails&amp;aqs=chrome.0.57j0j60l2.4100&amp;sourceid=chrome&amp;ie=UTF-8#q=unicorn%20heroku%20rails&amp;hl=en&amp;tbo=d&amp;source=lnt&amp;tbs=qdr:y&amp;sa=X&amp;ei=-cAFUfOYJ8LTkwX3k4CoDw&amp;ved=0CB8QpwUoBQ&amp;bav=on.2,or.r_gc.r_pw.r_cp.r_qf.&amp;bvm=bv.41524429,d.dGI&amp;fp=2133deba519e1bd2&amp;biw=940&amp;bih=544\"><code>Use unicorn as web server</code></a>\n instead of thin. A heroku dyno provides 512MB ram and a typical rails \napplication takes about 100MB. Using Unicorn to run 4 process on one \ndyno can handle 4 requests at the same time, thus, 4 times performance. </li>\n<li>\n<a href=\"https://www.google.com/search?q=unicorn%20heroku%20rails&amp;aq=f&amp;oq=unicorn%20heroku%20rails&amp;aqs=chrome.0.57j0j60l2.4100&amp;sourceid=chrome&amp;ie=UTF-8#hl=en&amp;tbo=d&amp;tbs=qdr:y&amp;sclient=psy-ab&amp;q=heroku%20mamcachier&amp;oq=heroku%20mamcachier&amp;gs_l=serp.3..0i13.412754.416002.0.416554.17.16.0.0.0.0.107.770.15j1.16.0.les;..0.0...1c.1.lCOtLzUQcFU&amp;pbx=1&amp;bav=on.2,or.r_gc.r_pw.r_cp.r_qf.&amp;bvm=bv.41524429,d.dGI&amp;fp=2133deba519e1bd2&amp;biw=940&amp;bih=544\"><code>Use mancache</code></a> for fragment caching. Rails provides excellent fragment caching to speed up view rendering and reduce database query. <a href=\"http://37signals.com/svn/posts/3113-how-key-based-cache-expiration-works\"><code>In combination of memcache</code></a>, you got worry-free cache mechanism. Heroku provide 5MB ram free for <a href=\"https://addons.heroku.com/memcache\"><code>memcache add-on</code></a> and 25MR ram free for <a href=\"https://addons.heroku.com/memcachier\"><code>memcachier</code></a>. The latter seems to be a better choice. The steps to setup is <a href=\"https://devcenter.heroku.com/articles/memcachier#rails\"><code>well described</code></a>.</li>\n<li>\n<a href=\"https://www.google.com/search?q=amazon%20cloud%20front&amp;oq=amazon%20cloud%20front&amp;aqs=chrome.0.57l2j0j5j60j62.3669&amp;sourceid=chrome&amp;ie=UTF-8#q=amazon%20cloud%20front%20rails&amp;hl=en&amp;tbo=d&amp;source=lnt&amp;tbs=qdr:y&amp;sa=X&amp;ei=uQEFUYTBOY2ilQWbiIHYCw&amp;ved=0CBwQpwUoBQ&amp;bav=on.2,or.r_gc.r_pw.r_cp.r_qf.&amp;bvm=bv.41524429,d.dGI&amp;fp=2133deba519e1bd2&amp;biw=940&amp;bih=544\"><code>Use Amazon CloudFront for static assets</code></a> to reduce load on Heroku dyno. It is <a href=\"http://aws.amazon.com/cloudfront/#pricing\"><code>not free, but quite cheap</code></a>,\n and much cheaper than Heroku dyno. Some people host static assets on \nAmazon S3, which is not necessary. Amazon CloudFront cache assets, thus,\n host the assets for free. </li>\n<li>\n<a href=\"https://www.google.com.tw/search?q=rack%20deflater%20heroku&amp;hl=en&amp;client=firefox-a&amp;hs=rvd&amp;tbo=d&amp;rls=org.mozilla:en-US:official&amp;source=lnt&amp;tbs=qdr:y&amp;sa=X&amp;ei=38UFUezOMsyLkwXQsYGABw&amp;ved=0CBwQpwUoBQ&amp;biw=1113&amp;bih=573\"><code>Use Rack::Deflater to compress content</code></a>. To check whether your rails application serves compressed content, try this:</li>\n<pre><code class=\"bash\">curl -I -H 'Accept-Encoding: gzip,deflate' http://your.web.site</code></pre>\nIf it returns <b>Content-Encoding: gzip</b> or <b>Content-Encoding: deflate</b>,\n then it does compress your content. The way to add Rack::Deflater \nvaries, and the side effect is that images also get compressed. There is\n a <a href=\"https://github.com/romanbsd/heroku-deflater\"><code>heroku-deflater gem</code></a> to avoid that. It is very small and worth to read the source code even you plan to set up Rack::Deflacter manually.</ol>", created_at: "2013-12-13 19:56:09", updated_at: "2013-12-13 19:56:09", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "<p>To compare the cost of hosting Rails on Amazon EC2 and Heroku is \ndifficult because you have to consider the cost of running database and \nservers on your own on Amazon EC2. A dyno on Heroku is $35 per month \n(the first one is free). Thus, if you can improve the performance of \nyour rails application, Heroku might be a better choice of hosting your \nrails application. There are many ways to do so. Here are a few ones I \nfound very useful. I haven't try any of these, but they seem work well \nand can help you get more out of heroku.<br></p>\n<ol>\n<li>\n<a href=\"https://www.google.com/search?q=unicorn%20heroku%20rails&amp;aq=f&amp;oq=unicorn%20heroku%20rails&amp;aqs=chrome.0.57j0j60l2.4100&amp;sourceid=chrome&amp;ie=UTF-8#q=unicorn%20heroku%20rails&amp;hl=en&amp;tbo=d&amp;source=lnt&amp;tbs=qdr:y&amp;sa=X&amp;ei=-cAFUfOYJ8LTkwX3k4CoDw&amp;ved=0CB8QpwUoBQ&amp;bav=on.2,or.r_gc.r_pw.r_cp.r_qf.&amp;bvm=bv.41524429,d.dGI&amp;fp=2133deba519e1bd2&amp;biw=940&amp;bih=544\"><code>Use unicorn as web server</code></a>\n instead of thin. A heroku dyno provides 512MB ram and a typical rails \napplication takes about 100MB. Using Unicorn to run 4 process on one \ndyno can handle 4 requests at the same time, thus, 4 times performance. </li>\n<li>\n<a href=\"https://www.google.com/search?q=unicorn%20heroku%20rails&amp;aq=f&amp;oq=unicorn%20heroku%20rails&amp;aqs=chrome.0.57j0j60l2.4100&amp;sourceid=chrome&amp;ie=UTF-8#hl=en&amp;tbo=d&amp;tbs=qdr:y&amp;sclient=psy-ab&amp;q=heroku%20mamcachier&amp;oq=heroku%20mamcachier&amp;gs_l=serp.3..0i13.412754.416002.0.416554.17.16.0.0.0.0.107.770.15j1.16.0.les;..0.0...1c.1.lCOtLzUQcFU&amp;pbx=1&amp;bav=on.2,or.r_gc.r_pw.r_cp.r_qf.&amp;bvm=bv.41524429,d.dGI&amp;fp=2133deba519e1bd2&amp;biw=940&amp;bih=544\"><code>Use mancache</code></a> for fragment caching. Rails provides excellent fragment caching to speed up view rendering and reduce database query. <a href=\"http://37signals.com/svn/posts/3113-how-key-based-cache-expiration-works\"><code>In combination of memcache</code></a>, you got worry-free cache mechanism. Heroku provide 5MB ram free for <a href=\"https://addons.heroku.com/memcache\"><code>memcache add-on</code></a> and 25MR ram free for <a href=\"https://addons.heroku.com/memcachier\"><code>memcachier</code></a>. The latter seems to be a better choice. The steps to setup is <a href=\"https://devcenter.heroku.com/articles/memcachier#rails\"><code>well described</code></a>.</li>\n<li>\n<a href=\"https://www.google.com/search?q=amazon%20cloud%20front&amp;oq=amazon%20cloud%20front&amp;aqs=chrome.0.57l2j0j5j60j62.3669&amp;sourceid=chrome&amp;ie=UTF-8#q=amazon%20cloud%20front%20rails&amp;hl=en&amp;tbo=d&amp;source=lnt&amp;tbs=qdr:y&amp;sa=X&amp;ei=uQEFUYTBOY2ilQWbiIHYCw&amp;ved=0CBwQpwUoBQ&amp;bav=on.2,or.r_gc.r_pw.r_cp.r_qf.&amp;bvm=bv.41524429,d.dGI&amp;fp=2133deba519e1bd2&amp;biw=940&amp;bih=544\"><code>Use Amazon CloudFront for static assets</code></a> to reduce load on Heroku dyno. It is <a href=\"http://aws.amazon.com/cloudfront/#pricing\"><code>not free, but quite cheap</code></a>,\n and much cheaper than Heroku dyno. Some people host static assets on \nAmazon S3, which is not necessary. Amazon CloudFront cache assets, thus,\n host the assets for free. </li>\n<li>\n<a href=\"https://www.google.com.tw/search?q=rack%20deflater%20heroku&amp;hl=en&amp;client=firefox-a&amp;hs=rvd&amp;tbo=d&amp;rls=org.mozilla:en-US:official&amp;source=lnt&amp;tbs=qdr:y&amp;sa=X&amp;ei=38UFUezOMsyLkwXQsYGABw&amp;ved=0CBwQpwUoBQ&amp;biw=1113&amp;bih=573\"><code>Use Rack::Deflater to compress content</code></a>. To check whether your rails application serves compressed content, try this:</li>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/bash.png' alt='bash'/>\n              </div>\n          <pre><code class=\"bash\">curl -I -H 'Accept-Encoding: gzip,deflate' http://your.web.site</code></pre>\n        </div>\n\nIf it returns <b>Content-Encoding: gzip</b> or <b>Content-Encoding: deflate</b>,\n then it does compress your content. The way to add Rack::Deflater \nvaries, and the side effect is that images also get compressed. There is\n a <a href=\"https://github.com/romanbsd/heroku-deflater\"><code>heroku-deflater gem</code></a> to avoid that. It is very small and worth to read the source code even you plan to set up Rack::Deflacter manually.</ol>", pretty_preview: "<p>To compare the cost of hosting Rails on Amazon EC2 and Heroku is \ndifficult because you have to consider the cost of running database and \nservers on your own on Amazon EC2. A dyno on Heroku is $35 per month \n(the first one is free). Thus, if you can improve the performance of \ny...<br></p>"},
  {id: 396, name: "Rescue from redirect_to back errors", category_id: 3, body: "<pre><code class=\"ruby\">rescue_from 'ActionController::RedirectBackError', with: -&gt;{ redirect_to :root }</code></pre>", created_at: "2013-12-13 19:56:09", updated_at: "2013-12-13 19:56:09", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n</pre></td>\n  <td class=\"code\"><pre>rescue_from <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">ActionController::RedirectBackError</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#606\">with</span>: -&gt;{ redirect_to <span style=\"color:#A60\">:root</span> }\n</pre></td>\n</tr></table>\n\n        </div>\n", pretty_preview: "        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <div class=\"CodeRay\">\n  <div class=\"code\"><pre>rescue_from <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">ActionController::RedirectBackError</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#606\">with</span>: -&gt;{ redirect_to <span style=\"color:#A60\">:root</span> }\n</pre></div>\n</div>\n\n        </div>\n"},
  {id: 397, name: "Reset Heroku Database of Rails", category_id: 3, body: "<p>During the early development of Rails deploying on Heroku, sometimes you want to reset the database. Here are the steps:<br><br></p>\n<ol>\n<li><pre><code class=\"bash\">git push heroku</code></pre></li>\n<li>\n<pre><code class=\"bash\">heroku pg:reset DATABASE</code></pre>DATABASE means 'DATABASE', nothing else. Just copy and paste the command on your terminal and hit ENTER key</li>\n<li><pre><code class=\"bash\">heroku run rake db:migrate</code></pre></li>\n<li>\n<pre><code class=\"bash\">heroku run rake db:migrate:statue</code></pre>Step 4 ensures the migration is successful</li>\n<li>\n<pre><code class=\"bash\">heroku open</code></pre>If Step 5 fails, wait a while. The database might not be ready yet.</li>\n</ol>", created_at: "2013-12-13 19:56:09", updated_at: "2013-12-13 19:56:09", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "<p>During the early development of Rails deploying on Heroku, sometimes you want to reset the database. Here are the steps:<br><br></p>\n<ol>\n<li>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/bash.png' alt='bash'/>\n              </div>\n          <pre><code class=\"bash\">git push heroku</code></pre>\n        </div>\n</li>\n<li>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/bash.png' alt='bash'/>\n              </div>\n          <pre><code class=\"bash\">heroku pg:reset DATABASE</code></pre>\n        </div>\nDATABASE means 'DATABASE', nothing else. Just copy and paste the command on your terminal and hit ENTER key</li>\n<li>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/bash.png' alt='bash'/>\n              </div>\n          <pre><code class=\"bash\">heroku run rake db:migrate</code></pre>\n        </div>\n</li>\n<li>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/bash.png' alt='bash'/>\n              </div>\n          <pre><code class=\"bash\">heroku run rake db:migrate:statue</code></pre>\n        </div>\nStep 4 ensures the migration is successful</li>\n<li>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/bash.png' alt='bash'/>\n              </div>\n          <pre><code class=\"bash\">heroku open</code></pre>\n        </div>\nIf Step 5 fails, wait a while. The database might not be ready yet.</li>\n</ol>", pretty_preview: "<p>During the early development of Rails deploying on Heroku, sometimes you want to reset the database. Here are the steps:<br><br></p>\n<ol>\n<li>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/bash.png' alt='bash'/>\n              </div>\n          <pre><code class=\"bash\">git push heroku</code></pre>\n        </div>\n</li>\n<li>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/bash.png' alt='bash'/>\n              </div>\n          <pre><code class=\"bash\">heroku pg:reset DATABASE</code></pre>\n        </div>\nDATABASE means 'DATABASE', nothing else. Just copy and paste the command on your terminal...</li>\n</ol>"},
  {id: 398, name: "Turn Angular.js Controller into Directive with Rails and Bootstrap", category_id: 3, body: "<p>I have an on/off switch using Rails and <a href=\"http://twitter.github.com/bootstrap/javascript.html#buttons\"><code>Bootstrap radio button</code></a>, which is now using Angular.js for ajax:<br></p>\n<pre><code class=\"erb\">&lt;div ng-controller='LightCtrl'&gt;<br>  &lt;div class='btn-group' data-toggle='buttons-radio' ng-init='init(&lt;%= @light.on %&gt;)'&gt;<br>    &lt;%= link_to 'Off', '#', :'ng-class' =&gt; 'off_class', :'ng-click' =&gt; \"turn_off(\#{@light.id})\" %&gt;<br>    &lt;%= link_to 'On', '#', :'ng-class' =&gt; 'on_class', :'ng-click' =&gt; \"turn_on(\#{@light.id})\" %&gt;<br>  &lt;/div&gt;<br>&lt;/div&gt;</code></pre>And its controller:<br><pre><code class=\"javascript\">function LightCtrl($scope, $http) {<br>  var light_on = false;<br>  $scope.init = function(data) {<br>    light_on = data<br>    $scope.off_class = 'btn btn-mini'<br>    $scope.on_class = 'btn btn-mini'<br>    if (light_on) {<br>      $scope.on_class  = $scope.on_class   ' btn-success active'<br>    } else {<br>      $scope.off_class  = $scope.off_class   ' active'<br>    }<br>  }<br><br>  $scope.turn_off = function(light) {<br>    $http.put('/lights/' light '.json', {<br>        'id': light,<br>        'light': {<br>          'on': false<br>        }<br>      }).success(function(data) {<br>        console.log('on');<br>        $scope.public_class = 'btn btn-mini'<br>      }).error(function(data) {<br>        console.log('error: ' data);<br>      });<br>  };<br><br>  $scope.turn_on = function(light) {<br>    $http.put('/lights/' light '.json', {<br>        'id': light,<br>        'light': {<br>          'on': true<br>        }<br>      }).success(function(data) {<br>        console.log('light');<br>        $scope.public_class = 'btn btn-mini btn-success'<br>      }).error(function(data) {<br>        console.log('error: ' data);<br>      });<br>  }<br>}</code></pre>To reuse this user interface, I turn it into Angular.js directive like this:<br><pre><code class=\"erb\">&lt;div class='btn-group' data-light-on='&lt;%= @light.on %&gt;' data-light='&lt;%= @light.id %&gt;'&gt;&lt;/div&gt;</code></pre>\n<pre><code class=\"javascript\">app.directive('lightOn', function($http) {<br>  return {<br>    restrict: 'A',<br>    scope: true,<br>    template: \"&lt;div class='btn-group' data-toggle='buttons-radio'&gt;\"  <br>        \"&lt;a href='#' ng-class='off_class' ng-click='turn_off()'&gt;Off&lt;/a&gt;\"  <br>        \"&lt;a href='#' ng-class='on_class' ng-click='turn_on()'&gt;On&lt;/a&gt;\"  <br>        \"&lt;/div&gt;\",<br>    link: function(scope, element, attrs) {<br>      scope.off_class = 'btn btn-mini'<br>      scope.on_class = 'btn btn-mini'<br>      if (attrs.lightOn == 'true') {<br>        scope.on_class  = scope.on_class   ' btn-success active'<br>      } else {<br>        scope.off_class  = scope.off_class   ' active'<br>      }<br><br>      scope.turn_off = function() {<br>        $http.put('/lights/' attrs.light '.json', {<br>          'id': attrs.light,<br>          'light': {<br>            'on': false<br>          }<br>        }).success(function(data) {<br>          scope.on_class = 'btn btn-mini'<br>        }).error(function(data) {<br>          console.log('error: ' data);<br>        });<br>      }<br><br>      scope.turn_on = function() {<br>        $http.put('/lights/' attrs.light '.json', {<br>          'id': attrs.light,<br>          'light': {<br>            'on': true<br>          }<br>        }).success(function(data) {<br>          scope.on_class = 'btn btn-mini btn-success'<br>        }).error(function(data) {<br>          console.log('error: ' data);<br>        });<br>      }<br>    }<br>  }<br>});</code></pre>By doing HTML manipulation on client side, it will reduce the burden on Rails. <br>", created_at: "2013-12-13 19:56:09", updated_at: "2013-12-13 19:56:09", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "<p>I have an on/off switch using Rails and <a href=\"http://twitter.github.com/bootstrap/javascript.html#buttons\"><code>Bootstrap radio button</code></a>, which is now using Angular.js for ajax:<br></p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/erb.png' alt='erb'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#070;font-weight:bold\">&lt;div</span> <span style=\"color:#b48\">ng-controller</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">LightCtrl</span><span style=\"color:#710\">'</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span>\n  <span style=\"color:#070;font-weight:bold\">&lt;div</span> <span style=\"color:#b48\">class</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">btn-group</span><span style=\"color:#710\">'</span></span> <span style=\"color:#b48\">data-toggle</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">buttons-radio</span><span style=\"color:#710\">'</span></span> <span style=\"color:#b48\">ng-init</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">init(</span></span><span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> <span style=\"color:#33B\">@light</span>.on <span style=\"font-weight:bold;color:#666\">%&gt;</span></span><span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#D20\">)</span><span style=\"color:#710\">'</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span>\n    <span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> link_to <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">Off</span><span style=\"color:#710\">'</span></span>, <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">#</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#A60\"><span style=\"color:#A60\">:</span><span style=\"color:#740\">'</span><span style=\"color:#A60\">ng-class</span><span style=\"color:#740\">'</span></span> =&gt; <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">off_class</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#A60\"><span style=\"color:#A60\">:</span><span style=\"color:#740\">'</span><span style=\"color:#A60\">ng-click</span><span style=\"color:#740\">'</span></span> =&gt; <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">turn_off(</span><span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">\#{</span><span style=\"color:#33B\">@light</span>.id<span style=\"font-weight:bold;color:#666\">}</span></span><span style=\"color:#D20\">)</span><span style=\"color:#710\">&quot;</span></span> <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>\n    <span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> link_to <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">On</span><span style=\"color:#710\">'</span></span>, <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">#</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#A60\"><span style=\"color:#A60\">:</span><span style=\"color:#740\">'</span><span style=\"color:#A60\">ng-class</span><span style=\"color:#740\">'</span></span> =&gt; <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">on_class</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#A60\"><span style=\"color:#A60\">:</span><span style=\"color:#740\">'</span><span style=\"color:#A60\">ng-click</span><span style=\"color:#740\">'</span></span> =&gt; <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">turn_on(</span><span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">\#{</span><span style=\"color:#33B\">@light</span>.id<span style=\"font-weight:bold;color:#666\">}</span></span><span style=\"color:#D20\">)</span><span style=\"color:#710\">&quot;</span></span> <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>\n  <span style=\"color:#070;font-weight:bold\">&lt;/div&gt;</span>\n<span style=\"color:#070;font-weight:bold\">&lt;/div&gt;</span>\n</pre></td>\n</tr></table>\n\n        </div>\nAnd its controller:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/javascript.png' alt='javascript'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n<a href=\"#n8\" name=\"n8\">8</a>\n<a href=\"#n9\" name=\"n9\">9</a>\n<strong><a href=\"#n10\" name=\"n10\">10</a></strong>\n<a href=\"#n11\" name=\"n11\">11</a>\n<a href=\"#n12\" name=\"n12\">12</a>\n<a href=\"#n13\" name=\"n13\">13</a>\n<a href=\"#n14\" name=\"n14\">14</a>\n<a href=\"#n15\" name=\"n15\">15</a>\n<a href=\"#n16\" name=\"n16\">16</a>\n<a href=\"#n17\" name=\"n17\">17</a>\n<a href=\"#n18\" name=\"n18\">18</a>\n<a href=\"#n19\" name=\"n19\">19</a>\n<strong><a href=\"#n20\" name=\"n20\">20</a></strong>\n<a href=\"#n21\" name=\"n21\">21</a>\n<a href=\"#n22\" name=\"n22\">22</a>\n<a href=\"#n23\" name=\"n23\">23</a>\n<a href=\"#n24\" name=\"n24\">24</a>\n<a href=\"#n25\" name=\"n25\">25</a>\n<a href=\"#n26\" name=\"n26\">26</a>\n<a href=\"#n27\" name=\"n27\">27</a>\n<a href=\"#n28\" name=\"n28\">28</a>\n<a href=\"#n29\" name=\"n29\">29</a>\n<strong><a href=\"#n30\" name=\"n30\">30</a></strong>\n<a href=\"#n31\" name=\"n31\">31</a>\n<a href=\"#n32\" name=\"n32\">32</a>\n<a href=\"#n33\" name=\"n33\">33</a>\n<a href=\"#n34\" name=\"n34\">34</a>\n<a href=\"#n35\" name=\"n35\">35</a>\n<a href=\"#n36\" name=\"n36\">36</a>\n<a href=\"#n37\" name=\"n37\">37</a>\n<a href=\"#n38\" name=\"n38\">38</a>\n<a href=\"#n39\" name=\"n39\">39</a>\n<strong><a href=\"#n40\" name=\"n40\">40</a></strong>\n<a href=\"#n41\" name=\"n41\">41</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#080;font-weight:bold\">function</span> <span style=\"color:#06B;font-weight:bold\">LightCtrl</span>(<span style=\"color:#369;font-weight:bold\">$scope</span>, <span style=\"color:#369;font-weight:bold\">$http</span>) {\n<span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#080;font-weight:bold\">var</span> light_on = <span style=\"color:#069\">false</span>;\n<span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#369;font-weight:bold\">$scope</span>.<span style=\"color:#06B;font-weight:bold\">init</span> = <span style=\"color:#080;font-weight:bold\">function</span>(data) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> light_on = data\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#369;font-weight:bold\">$scope</span>.off_class = <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">btn btn-mini</span><span style=\"color:#710\">'</span></span>\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#369;font-weight:bold\">$scope</span>.on_class = <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">btn btn-mini</span><span style=\"color:#710\">'</span></span>\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#080;font-weight:bold\">if</span> (light_on) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#369;font-weight:bold\">$scope</span>.on_class<span style=\"color:#F00;background-color:#FAA\"> </span> = <span style=\"color:#369;font-weight:bold\">$scope</span>.on_class   <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\"> btn-success active</span><span style=\"color:#710\">'</span></span>\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> } <span style=\"color:#080;font-weight:bold\">else</span> {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#369;font-weight:bold\">$scope</span>.off_class<span style=\"color:#F00;background-color:#FAA\"> </span> = <span style=\"color:#369;font-weight:bold\">$scope</span>.off_class   <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\"> active</span><span style=\"color:#710\">'</span></span>\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> }\n<span style=\"color:#F00;background-color:#FAA\"> </span> }\n\n<span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#369;font-weight:bold\">$scope</span>.<span style=\"color:#06B;font-weight:bold\">turn_off</span> = <span style=\"color:#080;font-weight:bold\">function</span>(light) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#369;font-weight:bold\">$http</span>.put(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">/lights/</span><span style=\"color:#710\">'</span></span> light <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">.json</span><span style=\"color:#710\">'</span></span>, {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#606\"><span style=\"color:#404\">'</span><span>id</span><span style=\"color:#404\">'</span></span>: light,\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#606\"><span style=\"color:#404\">'</span><span>light</span><span style=\"color:#404\">'</span></span>: {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#606\"><span style=\"color:#404\">'</span><span>on</span><span style=\"color:#404\">'</span></span>: <span style=\"color:#069\">false</span>\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> }\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> }).success(<span style=\"color:#080;font-weight:bold\">function</span>(data) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> console.log(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">on</span><span style=\"color:#710\">'</span></span>);\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#369;font-weight:bold\">$scope</span>.public_class = <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">btn btn-mini</span><span style=\"color:#710\">'</span></span>\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> }).error(<span style=\"color:#080;font-weight:bold\">function</span>(data) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> console.log(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">error: </span><span style=\"color:#710\">'</span></span> data);\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> });\n<span style=\"color:#F00;background-color:#FAA\"> </span> };\n\n<span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#369;font-weight:bold\">$scope</span>.<span style=\"color:#06B;font-weight:bold\">turn_on</span> = <span style=\"color:#080;font-weight:bold\">function</span>(light) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#369;font-weight:bold\">$http</span>.put(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">/lights/</span><span style=\"color:#710\">'</span></span> light <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">.json</span><span style=\"color:#710\">'</span></span>, {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#606\"><span style=\"color:#404\">'</span><span>id</span><span style=\"color:#404\">'</span></span>: light,\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#606\"><span style=\"color:#404\">'</span><span>light</span><span style=\"color:#404\">'</span></span>: {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#606\"><span style=\"color:#404\">'</span><span>on</span><span style=\"color:#404\">'</span></span>: <span style=\"color:#069\">true</span>\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> }\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> }).success(<span style=\"color:#080;font-weight:bold\">function</span>(data) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> console.log(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">light</span><span style=\"color:#710\">'</span></span>);\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#369;font-weight:bold\">$scope</span>.public_class = <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">btn btn-mini btn-success</span><span style=\"color:#710\">'</span></span>\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> }).error(<span style=\"color:#080;font-weight:bold\">function</span>(data) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> console.log(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">error: </span><span style=\"color:#710\">'</span></span> data);\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> });\n<span style=\"color:#F00;background-color:#FAA\"> </span> }\n}\n</pre></td>\n</tr></table>\n\n        </div>\nTo reuse this user interface, I turn it into Angular.js directive like this:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/erb.png' alt='erb'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#070;font-weight:bold\">&lt;div</span> <span style=\"color:#b48\">class</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">btn-group</span><span style=\"color:#710\">'</span></span> <span style=\"color:#b48\">data-light-on</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span></span><span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> <span style=\"color:#33B\">@light</span>.on <span style=\"font-weight:bold;color:#666\">%&gt;</span></span><span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span></span> <span style=\"color:#b48\">data-light</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span></span><span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> <span style=\"color:#33B\">@light</span>.id <span style=\"font-weight:bold;color:#666\">%&gt;</span></span><span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span><span style=\"color:#070;font-weight:bold\">&lt;/div&gt;</span>\n</pre></td>\n</tr></table>\n\n        </div>\n\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/javascript.png' alt='javascript'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n<a href=\"#n8\" name=\"n8\">8</a>\n<a href=\"#n9\" name=\"n9\">9</a>\n<strong><a href=\"#n10\" name=\"n10\">10</a></strong>\n<a href=\"#n11\" name=\"n11\">11</a>\n<a href=\"#n12\" name=\"n12\">12</a>\n<a href=\"#n13\" name=\"n13\">13</a>\n<a href=\"#n14\" name=\"n14\">14</a>\n<a href=\"#n15\" name=\"n15\">15</a>\n<a href=\"#n16\" name=\"n16\">16</a>\n<a href=\"#n17\" name=\"n17\">17</a>\n<a href=\"#n18\" name=\"n18\">18</a>\n<a href=\"#n19\" name=\"n19\">19</a>\n<strong><a href=\"#n20\" name=\"n20\">20</a></strong>\n<a href=\"#n21\" name=\"n21\">21</a>\n<a href=\"#n22\" name=\"n22\">22</a>\n<a href=\"#n23\" name=\"n23\">23</a>\n<a href=\"#n24\" name=\"n24\">24</a>\n<a href=\"#n25\" name=\"n25\">25</a>\n<a href=\"#n26\" name=\"n26\">26</a>\n<a href=\"#n27\" name=\"n27\">27</a>\n<a href=\"#n28\" name=\"n28\">28</a>\n<a href=\"#n29\" name=\"n29\">29</a>\n<strong><a href=\"#n30\" name=\"n30\">30</a></strong>\n<a href=\"#n31\" name=\"n31\">31</a>\n<a href=\"#n32\" name=\"n32\">32</a>\n<a href=\"#n33\" name=\"n33\">33</a>\n<a href=\"#n34\" name=\"n34\">34</a>\n<a href=\"#n35\" name=\"n35\">35</a>\n<a href=\"#n36\" name=\"n36\">36</a>\n<a href=\"#n37\" name=\"n37\">37</a>\n<a href=\"#n38\" name=\"n38\">38</a>\n<a href=\"#n39\" name=\"n39\">39</a>\n<strong><a href=\"#n40\" name=\"n40\">40</a></strong>\n<a href=\"#n41\" name=\"n41\">41</a>\n<a href=\"#n42\" name=\"n42\">42</a>\n<a href=\"#n43\" name=\"n43\">43</a>\n<a href=\"#n44\" name=\"n44\">44</a>\n<a href=\"#n45\" name=\"n45\">45</a>\n</pre></td>\n  <td class=\"code\"><pre>app.directive(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">lightOn</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#080;font-weight:bold\">function</span>(<span style=\"color:#369;font-weight:bold\">$http</span>) {\n<span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#080;font-weight:bold\">return</span> {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#606\">restrict</span>: <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">A</span><span style=\"color:#710\">'</span></span>,\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#606\">scope</span>: <span style=\"color:#069\">true</span>,\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#606\">template</span>: <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">&lt;div class='btn-group' data-toggle='buttons-radio'&gt;</span><span style=\"color:#710\">&quot;</span></span>  \n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">&lt;a href='#' ng-class='off_class' ng-click='turn_off()'&gt;Off&lt;/a&gt;</span><span style=\"color:#710\">&quot;</span></span>  \n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">&lt;a href='#' ng-class='on_class' ng-click='turn_on()'&gt;On&lt;/a&gt;</span><span style=\"color:#710\">&quot;</span></span>  \n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">&lt;/div&gt;</span><span style=\"color:#710\">&quot;</span></span>,\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#06B;font-weight:bold\">link</span>: <span style=\"color:#080;font-weight:bold\">function</span>(scope, element, attrs) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> scope.off_class = <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">btn btn-mini</span><span style=\"color:#710\">'</span></span>\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> scope.on_class = <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">btn btn-mini</span><span style=\"color:#710\">'</span></span>\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#080;font-weight:bold\">if</span> (attrs.lightOn == <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">true</span><span style=\"color:#710\">'</span></span>) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> scope.on_class<span style=\"color:#F00;background-color:#FAA\"> </span> = scope.on_class   <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\"> btn-success active</span><span style=\"color:#710\">'</span></span>\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> } <span style=\"color:#080;font-weight:bold\">else</span> {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> scope.off_class<span style=\"color:#F00;background-color:#FAA\"> </span> = scope.off_class   <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\"> active</span><span style=\"color:#710\">'</span></span>\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> }\n\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> scope.<span style=\"color:#06B;font-weight:bold\">turn_off</span> = <span style=\"color:#080;font-weight:bold\">function</span>() {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#369;font-weight:bold\">$http</span>.put(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">/lights/</span><span style=\"color:#710\">'</span></span> attrs.light <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">.json</span><span style=\"color:#710\">'</span></span>, {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#606\"><span style=\"color:#404\">'</span><span>id</span><span style=\"color:#404\">'</span></span>: attrs.light,\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#606\"><span style=\"color:#404\">'</span><span>light</span><span style=\"color:#404\">'</span></span>: {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#606\"><span style=\"color:#404\">'</span><span>on</span><span style=\"color:#404\">'</span></span>: <span style=\"color:#069\">false</span>\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> }\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> }).success(<span style=\"color:#080;font-weight:bold\">function</span>(data) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> scope.on_class = <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">btn btn-mini</span><span style=\"color:#710\">'</span></span>\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> }).error(<span style=\"color:#080;font-weight:bold\">function</span>(data) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> console.log(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">error: </span><span style=\"color:#710\">'</span></span> data);\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> });\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> }\n\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> scope.<span style=\"color:#06B;font-weight:bold\">turn_on</span> = <span style=\"color:#080;font-weight:bold\">function</span>() {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#369;font-weight:bold\">$http</span>.put(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">/lights/</span><span style=\"color:#710\">'</span></span> attrs.light <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">.json</span><span style=\"color:#710\">'</span></span>, {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#606\"><span style=\"color:#404\">'</span><span>id</span><span style=\"color:#404\">'</span></span>: attrs.light,\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#606\"><span style=\"color:#404\">'</span><span>light</span><span style=\"color:#404\">'</span></span>: {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#606\"><span style=\"color:#404\">'</span><span>on</span><span style=\"color:#404\">'</span></span>: <span style=\"color:#069\">true</span>\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> }\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> }).success(<span style=\"color:#080;font-weight:bold\">function</span>(data) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> scope.on_class = <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">btn btn-mini btn-success</span><span style=\"color:#710\">'</span></span>\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> }).error(<span style=\"color:#080;font-weight:bold\">function</span>(data) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> console.log(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">error: </span><span style=\"color:#710\">'</span></span> data);\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> });\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> }\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> }\n<span style=\"color:#F00;background-color:#FAA\"> </span> }\n});\n</pre></td>\n</tr></table>\n\n        </div>\nBy doing HTML manipulation on client side, it will reduce the burden on Rails. <br>", pretty_preview: "<p>I have an on/off switch using Rails and <a href=\"http://twitter.github.com/bootstrap/javascript.html#buttons\"><code>Bootstrap radio button</code></a>, which is now using Angular.js for ajax:<br></p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/erb.png' alt='erb'/>\n              </div>\n          <div class=\"CodeRay\">\n  <div class=\"code\"><pre><span style=\"color:#070;font-weight:bold\">&lt;div</span> <span style=\"color:#b48\">ng-controller</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">LightCtrl</span><span style=\"color:#710\">'</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span>\n  <span style=\"color:#070;font-weight:bold\">&lt;div</span> <span style=\"color:#b48\">class</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">btn-group</span><span style=\"color:#710\">'</span></span> <span style=\"color:#b48\">data-toggle</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">buttons-radio</span><span style=\"color:#710\">'</span></span> <span style=\"color:#b48\">ng-init</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">init(</span></span><span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> <span style=\"color:#33B\">@light</span>.on <span style=\"font-weight:bold;color:#666\">%&gt;</span></span><span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#D20\">)</span><span style=\"color:#710\">'</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span>\n    <span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> link_to <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">Off</span><span style=\"color:#710\">'</span></span>, <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">#</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#A60\"><span style=\"color:#A60\">:</span><span style=\"color:#740\">'</span><span style=\"color:#A60\">ng-class</span><span style=\"color:#740\">'</span></span> =&gt; <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">off_clas...\n\n</span></span></span></pre></div>\n</div>\n\n        </div>\n"},
  {id: 399, name: "CanCan with many-to-many association", category_id: 3, body: "<p>To use <a href=\"https://github.com/ryanb/cancan\"><code>CanCan</code></a> with many-to-many association like this might be problematic:<br></p>\n<pre><code class=\"ruby\">class User &lt; ActiveRecord::Base<br>  has_many :ownerships<br>  has_many :documents, :through =&gt; :ownerships<br>end</code></pre>\n<pre><code class=\"ruby\">class Document &lt; ActiveRecord::Base<br>  has_many :ownerships<br>  has_many :users, :through =&gt; :ownerships<br>end</code></pre>\n<pre><code class=\"ruby\">class Ownership &lt; ActiveRecord::Base<br>  belongs_to :user<br>  belongs_to :document<br>end</code></pre>\n<span style=\"font-weight: bold;\">load_and_authorize_resource</span> will <a href=\"https://github.com/ryanb/cancan/wiki/Controller-Authorization-Example\"><code>retrieve or create record</code></a> automatically. We tend to define the ability like this:<br><pre><code class=\"ruby\">  def initialize(user)<br>    if user<br>      can :manage, Document, :ownerships =&gt; { :user_id =&gt; user.id }<br>    end<br>  end</code></pre>But for new and create actions in DocumentsController, it will only use something like this to create new record:<br><pre><code class=\"ruby\">@document = Document.new<br># add some attributes<br>authorize! :new, @document</code></pre>The access will be denied because the <span style=\"font-weight: bold;\">Ownership</span> is not established, thus, checking <span style=\"font-weight: bold;\">:ownerships =&gt; { :user_id =&gt; user.id }</span> will fail. To fix this problem, just this ability instead:<br><pre><code class=\"ruby\">  def initialize(user)<br>    if user<br>      can :create, Document<br>      can [:read, :update, :destroy], Document, :ownerships =&gt; { :user_id =&gt; user.id }<br>    end<br>  end</code></pre>Then in <span style=\"font-weight: bold;\">DocumentsController</span>, create the <span style=\"font-weight: bold;\">Ownership</span> in <span style=\"font-weight: bold;\">create</span> action.<br><br>You can justify this approach by saying users can create document freely, but newly created will be associated with users. Thus, there is no need to denied access for user to create new document. <br>", created_at: "2013-12-13 19:56:09", updated_at: "2013-12-13 19:56:09", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "<p>To use <a href=\"https://github.com/ryanb/cancan\"><code>CanCan</code></a> with many-to-many association like this might be problematic:<br></p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#080;font-weight:bold\">class</span> <span style=\"color:#B06;font-weight:bold\">User</span> &lt; <span style=\"color:#036;font-weight:bold\">ActiveRecord</span>::<span style=\"color:#036;font-weight:bold\">Base</span>\n  has_many <span style=\"color:#A60\">:ownerships</span>\n  has_many <span style=\"color:#A60\">:documents</span>, <span style=\"color:#A60\">:through</span> =&gt; <span style=\"color:#A60\">:ownerships</span>\n<span style=\"color:#080;font-weight:bold\">end</span>\n</pre></td>\n</tr></table>\n\n        </div>\n\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#080;font-weight:bold\">class</span> <span style=\"color:#B06;font-weight:bold\">Document</span> &lt; <span style=\"color:#036;font-weight:bold\">ActiveRecord</span>::<span style=\"color:#036;font-weight:bold\">Base</span>\n  has_many <span style=\"color:#A60\">:ownerships</span>\n  has_many <span style=\"color:#A60\">:users</span>, <span style=\"color:#A60\">:through</span> =&gt; <span style=\"color:#A60\">:ownerships</span>\n<span style=\"color:#080;font-weight:bold\">end</span>\n</pre></td>\n</tr></table>\n\n        </div>\n\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#080;font-weight:bold\">class</span> <span style=\"color:#B06;font-weight:bold\">Ownership</span> &lt; <span style=\"color:#036;font-weight:bold\">ActiveRecord</span>::<span style=\"color:#036;font-weight:bold\">Base</span>\n  belongs_to <span style=\"color:#A60\">:user</span>\n  belongs_to <span style=\"color:#A60\">:document</span>\n<span style=\"color:#080;font-weight:bold\">end</span>\n</pre></td>\n</tr></table>\n\n        </div>\n\n<span style=\"font-weight: bold;\">load_and_authorize_resource</span> will <a href=\"https://github.com/ryanb/cancan/wiki/Controller-Authorization-Example\"><code>retrieve or create record</code></a> automatically. We tend to define the ability like this:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n</pre></td>\n  <td class=\"code\"><pre>  <span style=\"color:#080;font-weight:bold\">def</span> <span style=\"color:#06B;font-weight:bold\">initialize</span>(user)\n    <span style=\"color:#080;font-weight:bold\">if</span> user\n      can <span style=\"color:#A60\">:manage</span>, <span style=\"color:#036;font-weight:bold\">Document</span>, <span style=\"color:#A60\">:ownerships</span> =&gt; { <span style=\"color:#A60\">:user_id</span> =&gt; user.id }\n    <span style=\"color:#080;font-weight:bold\">end</span>\n  <span style=\"color:#080;font-weight:bold\">end</span>\n</pre></td>\n</tr></table>\n\n        </div>\nBut for new and create actions in DocumentsController, it will only use something like this to create new record:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#33B\">@document</span> = <span style=\"color:#036;font-weight:bold\">Document</span>.new\n<span style=\"color:#777\"># add some attributes</span>\nauthorize! <span style=\"color:#A60\">:new</span>, <span style=\"color:#33B\">@document</span>\n</pre></td>\n</tr></table>\n\n        </div>\nThe access will be denied because the <span style=\"font-weight: bold;\">Ownership</span> is not established, thus, checking <span style=\"font-weight: bold;\">:ownerships =&gt; { :user_id =&gt; user.id }</span> will fail. To fix this problem, just this ability instead:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n</pre></td>\n  <td class=\"code\"><pre>  <span style=\"color:#080;font-weight:bold\">def</span> <span style=\"color:#06B;font-weight:bold\">initialize</span>(user)\n    <span style=\"color:#080;font-weight:bold\">if</span> user\n      can <span style=\"color:#A60\">:create</span>, <span style=\"color:#036;font-weight:bold\">Document</span>\n      can [<span style=\"color:#A60\">:read</span>, <span style=\"color:#A60\">:update</span>, <span style=\"color:#A60\">:destroy</span>], <span style=\"color:#036;font-weight:bold\">Document</span>, <span style=\"color:#A60\">:ownerships</span> =&gt; { <span style=\"color:#A60\">:user_id</span> =&gt; user.id }\n    <span style=\"color:#080;font-weight:bold\">end</span>\n  <span style=\"color:#080;font-weight:bold\">end</span>\n</pre></td>\n</tr></table>\n\n        </div>\nThen in <span style=\"font-weight: bold;\">DocumentsController</span>, create the <span style=\"font-weight: bold;\">Ownership</span> in <span style=\"font-weight: bold;\">create</span> action.<br><br>You can justify this approach by saying users can create document freely, but newly created will be associated with users. Thus, there is no need to denied access for user to create new document. <br>", pretty_preview: "<p>To use <a href=\"https://github.com/ryanb/cancan\"><code>CanCan</code></a> with many-to-many association like this might be problematic:<br></p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <div class=\"CodeRay\">\n  <div class=\"code\"><pre><span style=\"color:#080;font-weight:bold\">class</span> <span style=\"color:#B06;font-weight:bold\">User</span> &lt; <span style=\"color:#036;font-weight:bold\">ActiveRecord</span>::<span style=\"color:#036;font-weight:bold\">Base</span>\n  has_many <span style=\"color:#A60\">:ownerships</span>\n  has_many <span style=\"color:#A60\">:documents</span>, <span style=\"color:#A60\">:through</span> =&gt; <span style=\"color:#A60\">:ownerships</span>\n<span style=\"color:#080;font-weight:bold\">end</span>\n</pre></div>\n</div>\n\n        </div>\n\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <div class=\"CodeRay\">\n  <div class=\"code\"><pre><span style=\"color:#080;font-weight:bold\">class</span> <span style=\"color:#B06;font-weight:bold\">Document</span> &lt; <span style=\"color:#036;font-weight:bold\">ActiveRecord</span>::<span style=\"color:#036;font-weight:bold\">Base</span>\n  has_many <span style=\"color:#A60\">:ownerships</span>\n  has_many <span style=\"color:#A60\">:users</span>, <span style=\"color:#A60\">:t</span>...\n\n</pre></div>\n</div>\n\n        </div>\n"},
  {id: 400, name: "Authorization with cancan and role_model gems ", category_id: 3, body: "<pre><code class=\"bash\">rails generate cancan:ability</code></pre>\n<span style=\"font-weight: bold;\">DEFINE AUTHORIZATION ( app/models/ability.rb )</span><br>Here, we want users to see only their data, not others.<br><pre><code class=\"ruby\">class Ability<br>  include CanCan::Ability<br><br>  def initialize(user)<br>    if user<br>      can [:show, :update, :destroy], User, :id =&gt; user.id<br>    else<br>      # Not login<br>    end<br>  end<br>end</code></pre>\n<span style=\"font-weight: bold;\">ADD AUTHORIZATION IN USERS CONTROLLER ( app/controllers/users_controller.rb )</span><br><pre><code class=\"ruby\">class UsersController &lt; ApplicationController<br>  load_and_authorize_resource<br>  ...</code></pre>\n<span style=\"font-weight: bold;\">ADD ROLE BASED AUTHORIZATION</span><br>We use <a href=\"https://github.com/martinrehfeld/role_model\"><code>role_model</code></a> gem, which follows <a href=\"https://github.com/ryanb/cancan/wiki/role-based-authorization\"><code>this approach</code></a>.<br>First, add role_model gem in Gemfile<br><pre><code class=\"ruby\"># Gemfile<br>gem 'role_model'</code></pre>\n<pre><code class=\"bash\">bundle install</code></pre>Then add necessary field in database:<br><pre><code class=\"bash\">rails generate migration AddRolesMaskToUser roles_mask:integer</code></pre>Then edit the generated migration:<br><pre><code class=\"ruby\">class AddRolesMaskToUser &lt; ActiveRecord::Migration<br>  def change<br>    add_column :users, :roles_mask, :integer, :default =&gt; 1<br><br>    User.find_each do |u|<br>      u.update_column(:roles_mask, 1)<br>    end<br>  end<br>end</code></pre>Note that I add a default value to be 1, which will be the first role we will defined later.<br><pre><code class=\"bash\">rake db:migrate</code></pre>Now, we add roles into user model ( <span style=\"font-weight: bold;\">app/models/user.rb</span> ):<br><pre><code class=\"ruby\">class User &lt; ActiveRecord::Base<br>  extend OmniauthCallbacks<br>  include RoleModel # for role_model gem<br><br>  # Include default devise modules. Others available are:<br>  # :token_authenticatable, :confirmable,<br>  # :registerable, :recoverable<br>  # :lockable, :timeoutable and :omniauthable<br>  devise :database_authenticatable,<br>         :rememberable, :trackable, :validatable,<br>         :omniauthable<br><br>  roles :regular, :pro, :super, :manager, :admin<br><br>  # Setup accessible (or protected) attributes for your model<br>  attr_accessible :email, :password, :password_confirmation, :remember_me<br>  # attr_accessible :title, :body<br>end</code></pre>A few roles are defined in user model. Note that we do not add <span style=\"font-weight: bold;\">roles_mask</span> into <span style=\"font-weight: bold;\">attr_accessible</span> to protect it from mass assignment. Now, we can improve the authorization in CanCan ( <span style=\"font-weight: bold;\">app/models/ability.rb</span> )<br><pre><code class=\"ruby\">class Ability<br>  include CanCan::Ability<br><br>  def initialize(user)<br>    cannot :manage, :all # Lock down everything<br>    if user<br>      if user.is? :regular<br>        can [:show, :update, :destroy], User, :id =&gt; user.id<br>      end<br><br>      if user.is? :admin<br>        can :manage, :all<br>      end<br>    end<br>  end<br>end</code></pre>", created_at: "2013-12-13 19:56:10", updated_at: "2013-12-13 19:56:10", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/bash.png' alt='bash'/>\n              </div>\n          <pre><code class=\"bash\">rails generate cancan:ability</code></pre>\n        </div>\n\n<span style=\"font-weight: bold;\">DEFINE AUTHORIZATION ( app/models/ability.rb )</span><br>Here, we want users to see only their data, not others.<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n<a href=\"#n8\" name=\"n8\">8</a>\n<a href=\"#n9\" name=\"n9\">9</a>\n<strong><a href=\"#n10\" name=\"n10\">10</a></strong>\n<a href=\"#n11\" name=\"n11\">11</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#080;font-weight:bold\">class</span> <span style=\"color:#B06;font-weight:bold\">Ability</span>\n  include <span style=\"color:#036;font-weight:bold\">CanCan</span>::<span style=\"color:#036;font-weight:bold\">Ability</span>\n\n  <span style=\"color:#080;font-weight:bold\">def</span> <span style=\"color:#06B;font-weight:bold\">initialize</span>(user)\n    <span style=\"color:#080;font-weight:bold\">if</span> user\n      can [<span style=\"color:#A60\">:show</span>, <span style=\"color:#A60\">:update</span>, <span style=\"color:#A60\">:destroy</span>], <span style=\"color:#036;font-weight:bold\">User</span>, <span style=\"color:#A60\">:id</span> =&gt; user.id\n    <span style=\"color:#080;font-weight:bold\">else</span>\n      <span style=\"color:#777\"># Not login</span>\n    <span style=\"color:#080;font-weight:bold\">end</span>\n  <span style=\"color:#080;font-weight:bold\">end</span>\n<span style=\"color:#080;font-weight:bold\">end</span>\n</pre></td>\n</tr></table>\n\n        </div>\n\n<span style=\"font-weight: bold;\">ADD AUTHORIZATION IN USERS CONTROLLER ( app/controllers/users_controller.rb )</span><br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#080;font-weight:bold\">class</span> <span style=\"color:#B06;font-weight:bold\">UsersController</span> &lt; <span style=\"color:#036;font-weight:bold\">ApplicationController</span>\n  load_and_authorize_resource\n  ...\n</pre></td>\n</tr></table>\n\n        </div>\n\n<span style=\"font-weight: bold;\">ADD ROLE BASED AUTHORIZATION</span><br>We use <a href=\"https://github.com/martinrehfeld/role_model\"><code>role_model</code></a> gem, which follows <a href=\"https://github.com/ryanb/cancan/wiki/role-based-authorization\"><code>this approach</code></a>.<br>First, add role_model gem in Gemfile<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#777\"># Gemfile</span>\ngem <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">role_model</span><span style=\"color:#710\">'</span></span>\n</pre></td>\n</tr></table>\n\n        </div>\n\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/bash.png' alt='bash'/>\n              </div>\n          <pre><code class=\"bash\">bundle install</code></pre>\n        </div>\nThen add necessary field in database:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/bash.png' alt='bash'/>\n              </div>\n          <pre><code class=\"bash\">rails generate migration AddRolesMaskToUser roles_mask:integer</code></pre>\n        </div>\nThen edit the generated migration:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n<a href=\"#n8\" name=\"n8\">8</a>\n<a href=\"#n9\" name=\"n9\">9</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#080;font-weight:bold\">class</span> <span style=\"color:#B06;font-weight:bold\">AddRolesMaskToUser</span> &lt; <span style=\"color:#036;font-weight:bold\">ActiveRecord</span>::<span style=\"color:#036;font-weight:bold\">Migration</span>\n  <span style=\"color:#080;font-weight:bold\">def</span> <span style=\"color:#06B;font-weight:bold\">change</span>\n    add_column <span style=\"color:#A60\">:users</span>, <span style=\"color:#A60\">:roles_mask</span>, <span style=\"color:#A60\">:integer</span>, <span style=\"color:#A60\">:default</span> =&gt; <span style=\"color:#00D\">1</span>\n\n    <span style=\"color:#036;font-weight:bold\">User</span>.find_each <span style=\"color:#080;font-weight:bold\">do</span> |u|\n      u.update_column(<span style=\"color:#A60\">:roles_mask</span>, <span style=\"color:#00D\">1</span>)\n    <span style=\"color:#080;font-weight:bold\">end</span>\n  <span style=\"color:#080;font-weight:bold\">end</span>\n<span style=\"color:#080;font-weight:bold\">end</span>\n</pre></td>\n</tr></table>\n\n        </div>\nNote that I add a default value to be 1, which will be the first role we will defined later.<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/bash.png' alt='bash'/>\n              </div>\n          <pre><code class=\"bash\">rake db:migrate</code></pre>\n        </div>\nNow, we add roles into user model ( <span style=\"font-weight: bold;\">app/models/user.rb</span> ):<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n<a href=\"#n8\" name=\"n8\">8</a>\n<a href=\"#n9\" name=\"n9\">9</a>\n<strong><a href=\"#n10\" name=\"n10\">10</a></strong>\n<a href=\"#n11\" name=\"n11\">11</a>\n<a href=\"#n12\" name=\"n12\">12</a>\n<a href=\"#n13\" name=\"n13\">13</a>\n<a href=\"#n14\" name=\"n14\">14</a>\n<a href=\"#n15\" name=\"n15\">15</a>\n<a href=\"#n16\" name=\"n16\">16</a>\n<a href=\"#n17\" name=\"n17\">17</a>\n<a href=\"#n18\" name=\"n18\">18</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#080;font-weight:bold\">class</span> <span style=\"color:#B06;font-weight:bold\">User</span> &lt; <span style=\"color:#036;font-weight:bold\">ActiveRecord</span>::<span style=\"color:#036;font-weight:bold\">Base</span>\n  extend <span style=\"color:#036;font-weight:bold\">OmniauthCallbacks</span>\n  include <span style=\"color:#036;font-weight:bold\">RoleModel</span> <span style=\"color:#777\"># for role_model gem</span>\n\n  <span style=\"color:#777\"># Include default devise modules. Others available are:</span>\n  <span style=\"color:#777\"># :token_authenticatable, :confirmable,</span>\n  <span style=\"color:#777\"># :registerable, :recoverable</span>\n  <span style=\"color:#777\"># :lockable, :timeoutable and :omniauthable</span>\n  devise <span style=\"color:#A60\">:database_authenticatable</span>,\n         <span style=\"color:#A60\">:rememberable</span>, <span style=\"color:#A60\">:trackable</span>, <span style=\"color:#A60\">:validatable</span>,\n         <span style=\"color:#A60\">:omniauthable</span>\n\n  roles <span style=\"color:#A60\">:regular</span>, <span style=\"color:#A60\">:pro</span>, <span style=\"color:#A60\">:super</span>, <span style=\"color:#A60\">:manager</span>, <span style=\"color:#A60\">:admin</span>\n\n  <span style=\"color:#777\"># Setup accessible (or protected) attributes for your model</span>\n  attr_accessible <span style=\"color:#A60\">:email</span>, <span style=\"color:#A60\">:password</span>, <span style=\"color:#A60\">:password_confirmation</span>, <span style=\"color:#A60\">:remember_me</span>\n  <span style=\"color:#777\"># attr_accessible :title, :body</span>\n<span style=\"color:#080;font-weight:bold\">end</span>\n</pre></td>\n</tr></table>\n\n        </div>\nA few roles are defined in user model. Note that we do not add <span style=\"font-weight: bold;\">roles_mask</span> into <span style=\"font-weight: bold;\">attr_accessible</span> to protect it from mass assignment. Now, we can improve the authorization in CanCan ( <span style=\"font-weight: bold;\">app/models/ability.rb</span> )<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n<a href=\"#n8\" name=\"n8\">8</a>\n<a href=\"#n9\" name=\"n9\">9</a>\n<strong><a href=\"#n10\" name=\"n10\">10</a></strong>\n<a href=\"#n11\" name=\"n11\">11</a>\n<a href=\"#n12\" name=\"n12\">12</a>\n<a href=\"#n13\" name=\"n13\">13</a>\n<a href=\"#n14\" name=\"n14\">14</a>\n<a href=\"#n15\" name=\"n15\">15</a>\n<a href=\"#n16\" name=\"n16\">16</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#080;font-weight:bold\">class</span> <span style=\"color:#B06;font-weight:bold\">Ability</span>\n  include <span style=\"color:#036;font-weight:bold\">CanCan</span>::<span style=\"color:#036;font-weight:bold\">Ability</span>\n\n  <span style=\"color:#080;font-weight:bold\">def</span> <span style=\"color:#06B;font-weight:bold\">initialize</span>(user)\n    cannot <span style=\"color:#A60\">:manage</span>, <span style=\"color:#A60\">:all</span> <span style=\"color:#777\"># Lock down everything</span>\n    <span style=\"color:#080;font-weight:bold\">if</span> user\n      <span style=\"color:#080;font-weight:bold\">if</span> user.is? <span style=\"color:#A60\">:regular</span>\n        can [<span style=\"color:#A60\">:show</span>, <span style=\"color:#A60\">:update</span>, <span style=\"color:#A60\">:destroy</span>], <span style=\"color:#036;font-weight:bold\">User</span>, <span style=\"color:#A60\">:id</span> =&gt; user.id\n      <span style=\"color:#080;font-weight:bold\">end</span>\n\n      <span style=\"color:#080;font-weight:bold\">if</span> user.is? <span style=\"color:#A60\">:admin</span>\n        can <span style=\"color:#A60\">:manage</span>, <span style=\"color:#A60\">:all</span>\n      <span style=\"color:#080;font-weight:bold\">end</span>\n    <span style=\"color:#080;font-weight:bold\">end</span>\n  <span style=\"color:#080;font-weight:bold\">end</span>\n<span style=\"color:#080;font-weight:bold\">end</span>\n</pre></td>\n</tr></table>\n\n        </div>\n", pretty_preview: "        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/bash.png' alt='bash'/>\n              </div>\n          <pre><code class=\"bash\">rails generate cancan:ability</code></pre>\n        </div>\n\n<span style=\"font-weight: bold;\">DEFINE AUTHORIZATION ( app/models/ability.rb )</span><br>Here, we want users to see only their data, not others.<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <div class=\"CodeRay\">\n  <div class=\"code\"><pre><span style=\"color:#080;font-weight:bold\">class</span> <span style=\"color:#B06;font-weight:bold\">Ability</span>\n  include <span style=\"color:#036;font-weight:bold\">CanCan</span>::<span style=\"color:#036;font-weight:bold\">Ability</span>\n\n  <span style=\"color:#080;font-weight:bold\">def</span> <span style=\"color:#06B;font-weight:bold\">initialize</span>(user)\n    <span style=\"color:#080;font-weight:bold\">if</span> user\n      can [<span style=\"color:#A60\">:show</span>, <span style=\"color:#A60\">:update</span>, <span style=\"color:#A60\">:destroy</span>], <span style=\"color:#036;font-weight:bold\">User</span>, <span style=\"color:#A60\">:id</span> =...\n\n</pre></div>\n</div>\n\n        </div>\n"},
  {id: 401, name: "Build Apps with AngularJS", category_id: 1, body: "<p>A good article on <code><a href=\"http://developer.chrome.com/apps/angular_framework.html\">Angular.js and Google Chrome App</a></code>.</p>", created_at: "2013-12-13 19:56:10", updated_at: "2013-12-13 19:56:10", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "<p>A good article on <code><a href=\"http://developer.chrome.com/apps/angular_framework.html\">Angular.js and Google Chrome App</a></code>.</p>", pretty_preview: "<p>A good article on <code><a href=\"http://developer.chrome.com/apps/angular_framework.html\">Angular.js and Google Chrome App</a></code>.</p>"},
  {id: 402, name: "Tutorials on Angular.js and Rails #8", category_id: 3, body: "<p>Form validation is another function which should be implemented on client side instead of server side. Let's begin with the standard rails form:<br></p>\n<pre><code class=\"erb\">&lt;%= form_for(@task) do |f| %&gt;<br>  &lt;div class=\"field\"&gt;<br>    &lt;%= f.label :title %&gt;&lt;br /&gt;<br>    &lt;%= f.text_field :title %&gt;<br>  &lt;/div&gt;<br>  &lt;div class=\"field\"&gt;<br>    &lt;%= f.label :finished %&gt;&lt;br /&gt;<br>    &lt;%= f.check_box :finished %&gt;<br>  &lt;/div&gt;<br>  &lt;div class=\"actions\"&gt;<br>    &lt;%= f.submit %&gt;<br>  &lt;/div&gt;<br>&lt;% end %&gt;</code></pre>Don't forget the <a href=\"https://www.google.com/#hl=en&amp;q=HTML5%20form%20validation\">HTML5 form validation</a> which might suit you:\n<pre><code class=\"erb\">&lt;%= form_for(@task) do |f| %&gt;<br>  &lt;div class=\"field\"&gt;<br>    &lt;%= f.label :title %&gt;&lt;br /&gt;<br>    &lt;%= f.text_field :title, :type=&gt;'email', :'required'=&gt;'' %&gt;<br>  &lt;/div&gt;<br>  &lt;div class=\"field\"&gt;<br>    &lt;%= f.label :finished %&gt;&lt;br /&gt;<br>    &lt;%= f.check_box :finished %&gt;<br>  &lt;/div&gt;<br>  &lt;div class=\"actions\"&gt;<br>    &lt;%= f.submit %&gt;<br>  &lt;/div&gt;<br>&lt;% end %&gt;</code></pre>Here, we use <b>required</b> to mandatory field, and use <b>type='email'</b> as an example to show that HTML5 support certain types of data format.<br><br>\nTo use validation from Angular.js, we need to assign <b>'ng-model'</b>. (Don't forget to add <b>ng-app</b> in html element).\n<br><pre><code class=\"erb\">&lt;div&gt;<br>  &lt;%= form_for(@task, :html =&gt; {:novalidate =&gt; ''}) do |f| %&gt;<br>  &lt;div class=\"field\"&gt;<br>    &lt;%= f.label :title %&gt;&lt;br /&gt;<br>    &lt;%= f.text_field :title, :'ng-model'=&gt;'task.title', :type=&gt;'email', :'required'=&gt;'' %&gt;<br>  &lt;/div&gt;<br>  &lt;div class=\"field\"&gt;<br>    &lt;%= f.label :finished %&gt;&lt;br /&gt;<br>    &lt;%= f.check_box :finished %&gt;<br>  &lt;/div&gt;<br>  &lt;div class=\"actions\"&gt;<br>    &lt;%= f.submit %&gt;<br>  &lt;/div&gt;<br>&lt;% end %&gt;<br>&lt;/div&gt;<br> &lt;style type=\"text/css\"&gt;<br>   input.ng-invalid.ng-dirty {<br>     background-color: #FA787E;<br>   }<br>   input.ng-valid.ng-dirty {<br>     background-color: #78FA89;<br>   }<br> &lt;/style&gt;</code></pre>\n<b>novalidate</b> in form turns off the HTML5 form validation, which you can actually keep. <b>ng-model</b> will add certain HTML classes to html element so that you can use CSS to render colors as shown in the bottom.<br><br>\nWhen you try to save the task, HTML5 form validation will check whether \nthe text match an email, but not Angular.js. In such case, you need to \ndo that manually:\n<br><pre><code class=\"erb\">&lt;div&gt;<br>  &lt;%= form_for(@task, :html =&gt; {:novalidate =&gt; '', :name =&gt; 'aform'}) do |f| %&gt;<br>  &lt;div class=\"field\"&gt;<br>    &lt;%= f.label :title %&gt;&lt;br /&gt;<br>    &lt;%= f.text_field :title, :'ng-model'=&gt;'task.title', :name =&gt; 'tName', :type=&gt;'email', :'required'=&gt;'' %&gt;<br>  &lt;/div&gt;<br>  &lt;div class=\"field\"&gt;<br>    &lt;%= f.label :finished %&gt;&lt;br /&gt;<br>    &lt;%= f.check_box :finished %&gt;<br>  &lt;/div&gt;<br>  &lt;div class=\"actions\"&gt;<br>    &lt;%= f.submit nil, :'ng-disabled' =&gt; 'aform.$invalid', :class =&gt; 'btn' %&gt;<br>  &lt;/div&gt;<br>&lt;% end %&gt;<br>Is title invalid ? {{aform.tName.$invalid | json}}&lt;br/&gt;<br>Is form invalid ? {{aform.$invalid | json}}<br>&lt;/div&gt;<br> &lt;style type=\"text/css\"&gt;<br>   input.ng-invalid.ng-dirty {<br>     background-color: #FA787E;<br>   }<br>   input.ng-valid.ng-dirty {<br>     background-color: #78FA89;<br>   }<br> &lt;/style&gt;</code></pre>We add <b>name=aform</b> to form so that you can use it in Angular.js. Similarly, we add <b>name=tName</b> to input in order to use it in Angular.js. Why not use <b>ng-model</b> to access input ? It is because when the input is not valid, ng-model is undefined. You can output <b>{{task.title}}</b> to see. Now you have a client-side validation to use with Angular.js.<br><br>\nTo do something more sophisticated like checking whether an email is already taken, you can use Angular.js directive for that:\n<br><pre><code class=\"erb\">&lt;div&gt;<br>  &lt;%= form_for(@task, :html =&gt; {:novalidate =&gt; '', :name =&gt; 'aform'}) do |f| %&gt;<br>  &lt;div class=\"field\"&gt;<br>    &lt;%= f.label :title %&gt;&lt;br /&gt;<br>    &lt;%= f.text_field :title, :'ng-model'=&gt;'task.title', :name =&gt; 'tName', :type=&gt;'email', :'required'=&gt;'', :unique=&gt;'' %&gt;<br>  &lt;/div&gt;<br>  &lt;div class=\"field\"&gt;<br>    &lt;%= f.label :finished %&gt;&lt;br /&gt;<br>    &lt;%= f.check_box :finished %&gt;<br>  &lt;/div&gt;<br>  &lt;div class=\"actions\"&gt;<br>    &lt;%= f.submit nil, :'ng-disabled' =&gt; 'aform.$invalid', :class =&gt; 'btn' %&gt;<br>  &lt;/div&gt;<br>&lt;% end %&gt;<br>Is title invalid ? {{aform.tName.$invalid | json}}&lt;br/&gt;<br>Is form invalid ? {{aform.$invalid | json}}&lt;br/&gt;<br>Title: {{task.title}}&lt;br/&gt;<br>Is title already taken ? {{aform.tName.$error.unique | json}}<br>&lt;/div&gt;<br> &lt;style type=\"text/css\"&gt;<br>   input.ng-invalid.ng-dirty {<br>     background-color: #FA787E;<br>   }<br>   input.ng-valid.ng-dirty {<br>     background-color: #78FA89;<br>   }<br> &lt;/style&gt;</code></pre>\n<pre><code class=\"javascript\">  .directive('unique', function() {<br>    return {<br>      require: 'ngModel',<br>      link: function(scope, elm, attrs, ctrl) {<br>        ctrl.$parsers.push(function(viewValue) {<br>          console.log(scope.aform.tName.$invalid);<br>          if (scope.aform.tName.$invalid == false) {<br>            console.log('check uniqueness');<br>            ctrl.$setValidity('unique', false);<br>          }<br>          return viewValue;<br>        });<br>      }<br>    };<br>  })</code></pre>We add an <b>unique</b> directive to the input, then add new parser to intrinsic form controller. You can use <b>scope.aform</b> to access form element as in HTML. Here, we set <b>setValidity</b> to false all the time to show how it work. At this part, you can use Angular.js to call server to check the uniqueness.<br><br>\nFinally, let's hook up with Rails like this:\n<br><pre><code class=\"ruby\"># app/controllers/tasks_controller.rb\"<br>  def unique<br>    existing = Task.exists?(:title =&gt; params[:title])<br>    respond_to do |format|<br>      format.json { render :json =&gt; {'existing' =&gt; existing}, :status =&gt; :ok }<br>    end<br>  end</code></pre>\n<pre><code class=\"javascript\">  .directive('unique', function(Task) {<br>    return {<br>      require: 'ngModel',<br>      link: function(scope, elm, attrs, ctrl) {<br>        ctrl.$parsers.push(function(viewValue) {<br>          if (scope.aform.tName.$invalid == false) {<br>            Task.get({action: 'unique.json', title:viewValue}, function(resource) {<br>              if (resource.existing) {<br>                ctrl.$setValidity('unique', false);<br>                ctrl.$setViewValue(undefined);<br>              } else {<br>                ctrl.$setValidity('unique', true);<br>              }<br>            }, function(response) {<br>              console.log(response);<br>            });<br>          }<br>          ctrl.$setValidity('unique', true);<br>          return viewValue;<br>        });<br>      }<br>    };<br>  })</code></pre>Remember to add new action in <b>routes</b>. Because the nature of Task resource is ajax, we set <b>setValidity</b> is true by default. When ajax is returned from server, <b>setValidity</b> is set to the correct one.", created_at: "2013-12-13 19:56:10", updated_at: "2013-12-13 19:56:10", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "<p>Form validation is another function which should be implemented on client side instead of server side. Let's begin with the standard rails form:<br></p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/erb.png' alt='erb'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n<a href=\"#n8\" name=\"n8\">8</a>\n<a href=\"#n9\" name=\"n9\">9</a>\n<strong><a href=\"#n10\" name=\"n10\">10</a></strong>\n<a href=\"#n11\" name=\"n11\">11</a>\n<a href=\"#n12\" name=\"n12\">12</a>\n<a href=\"#n13\" name=\"n13\">13</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> form_for(<span style=\"color:#33B\">@task</span>) <span style=\"color:#080;font-weight:bold\">do</span> |f| <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>\n  <span style=\"color:#070;font-weight:bold\">&lt;div</span> <span style=\"color:#b48\">class</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">field</span><span style=\"color:#710\">&quot;</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span>\n    <span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> f.label <span style=\"color:#A60\">:title</span> <span style=\"font-weight:bold;color:#666\">%&gt;</span></span><span style=\"color:#070;font-weight:bold\">&lt;br</span> <span style=\"color:#070;font-weight:bold\">/&gt;</span>\n    <span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> f.text_field <span style=\"color:#A60\">:title</span> <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>\n  <span style=\"color:#070;font-weight:bold\">&lt;/div&gt;</span>\n  <span style=\"color:#070;font-weight:bold\">&lt;div</span> <span style=\"color:#b48\">class</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">field</span><span style=\"color:#710\">&quot;</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span>\n    <span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> f.label <span style=\"color:#A60\">:finished</span> <span style=\"font-weight:bold;color:#666\">%&gt;</span></span><span style=\"color:#070;font-weight:bold\">&lt;br</span> <span style=\"color:#070;font-weight:bold\">/&gt;</span>\n    <span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> f.check_box <span style=\"color:#A60\">:finished</span> <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>\n  <span style=\"color:#070;font-weight:bold\">&lt;/div&gt;</span>\n  <span style=\"color:#070;font-weight:bold\">&lt;div</span> <span style=\"color:#b48\">class</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">actions</span><span style=\"color:#710\">&quot;</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span>\n    <span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> f.submit <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>\n  <span style=\"color:#070;font-weight:bold\">&lt;/div&gt;</span>\n<span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%</span> <span style=\"color:#080;font-weight:bold\">end</span> <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>\n</pre></td>\n</tr></table>\n\n        </div>\nDon't forget the <a href=\"https://www.google.com/#hl=en&amp;q=HTML5%20form%20validation\">HTML5 form validation</a> which might suit you:\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/erb.png' alt='erb'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n<a href=\"#n8\" name=\"n8\">8</a>\n<a href=\"#n9\" name=\"n9\">9</a>\n<strong><a href=\"#n10\" name=\"n10\">10</a></strong>\n<a href=\"#n11\" name=\"n11\">11</a>\n<a href=\"#n12\" name=\"n12\">12</a>\n<a href=\"#n13\" name=\"n13\">13</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> form_for(<span style=\"color:#33B\">@task</span>) <span style=\"color:#080;font-weight:bold\">do</span> |f| <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>\n  <span style=\"color:#070;font-weight:bold\">&lt;div</span> <span style=\"color:#b48\">class</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">field</span><span style=\"color:#710\">&quot;</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span>\n    <span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> f.label <span style=\"color:#A60\">:title</span> <span style=\"font-weight:bold;color:#666\">%&gt;</span></span><span style=\"color:#070;font-weight:bold\">&lt;br</span> <span style=\"color:#070;font-weight:bold\">/&gt;</span>\n    <span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> f.text_field <span style=\"color:#A60\">:title</span>, <span style=\"color:#A60\">:type</span>=&gt;<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">email</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#A60\"><span style=\"color:#A60\">:</span><span style=\"color:#740\">'</span><span style=\"color:#A60\">required</span><span style=\"color:#740\">'</span></span>=&gt;<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#710\">'</span></span> <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>\n  <span style=\"color:#070;font-weight:bold\">&lt;/div&gt;</span>\n  <span style=\"color:#070;font-weight:bold\">&lt;div</span> <span style=\"color:#b48\">class</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">field</span><span style=\"color:#710\">&quot;</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span>\n    <span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> f.label <span style=\"color:#A60\">:finished</span> <span style=\"font-weight:bold;color:#666\">%&gt;</span></span><span style=\"color:#070;font-weight:bold\">&lt;br</span> <span style=\"color:#070;font-weight:bold\">/&gt;</span>\n    <span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> f.check_box <span style=\"color:#A60\">:finished</span> <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>\n  <span style=\"color:#070;font-weight:bold\">&lt;/div&gt;</span>\n  <span style=\"color:#070;font-weight:bold\">&lt;div</span> <span style=\"color:#b48\">class</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">actions</span><span style=\"color:#710\">&quot;</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span>\n    <span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> f.submit <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>\n  <span style=\"color:#070;font-weight:bold\">&lt;/div&gt;</span>\n<span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%</span> <span style=\"color:#080;font-weight:bold\">end</span> <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>\n</pre></td>\n</tr></table>\n\n        </div>\nHere, we use <b>required</b> to mandatory field, and use <b>type='email'</b> as an example to show that HTML5 support certain types of data format.<br><br>\nTo use validation from Angular.js, we need to assign <b>'ng-model'</b>. (Don't forget to add <b>ng-app</b> in html element).\n<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/erb.png' alt='erb'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n<a href=\"#n8\" name=\"n8\">8</a>\n<a href=\"#n9\" name=\"n9\">9</a>\n<strong><a href=\"#n10\" name=\"n10\">10</a></strong>\n<a href=\"#n11\" name=\"n11\">11</a>\n<a href=\"#n12\" name=\"n12\">12</a>\n<a href=\"#n13\" name=\"n13\">13</a>\n<a href=\"#n14\" name=\"n14\">14</a>\n<a href=\"#n15\" name=\"n15\">15</a>\n<a href=\"#n16\" name=\"n16\">16</a>\n<a href=\"#n17\" name=\"n17\">17</a>\n<a href=\"#n18\" name=\"n18\">18</a>\n<a href=\"#n19\" name=\"n19\">19</a>\n<strong><a href=\"#n20\" name=\"n20\">20</a></strong>\n<a href=\"#n21\" name=\"n21\">21</a>\n<a href=\"#n22\" name=\"n22\">22</a>\n<a href=\"#n23\" name=\"n23\">23</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#070;font-weight:bold\">&lt;div&gt;</span>\n  <span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> form_for(<span style=\"color:#33B\">@task</span>, <span style=\"color:#A60\">:html</span> =&gt; {<span style=\"color:#A60\">:novalidate</span> =&gt; <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#710\">'</span></span>}) <span style=\"color:#080;font-weight:bold\">do</span> |f| <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>\n  <span style=\"color:#070;font-weight:bold\">&lt;div</span> <span style=\"color:#b48\">class</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">field</span><span style=\"color:#710\">&quot;</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span>\n    <span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> f.label <span style=\"color:#A60\">:title</span> <span style=\"font-weight:bold;color:#666\">%&gt;</span></span><span style=\"color:#070;font-weight:bold\">&lt;br</span> <span style=\"color:#070;font-weight:bold\">/&gt;</span>\n    <span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> f.text_field <span style=\"color:#A60\">:title</span>, <span style=\"color:#A60\"><span style=\"color:#A60\">:</span><span style=\"color:#740\">'</span><span style=\"color:#A60\">ng-model</span><span style=\"color:#740\">'</span></span>=&gt;<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">task.title</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#A60\">:type</span>=&gt;<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">email</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#A60\"><span style=\"color:#A60\">:</span><span style=\"color:#740\">'</span><span style=\"color:#A60\">required</span><span style=\"color:#740\">'</span></span>=&gt;<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#710\">'</span></span> <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>\n  <span style=\"color:#070;font-weight:bold\">&lt;/div&gt;</span>\n  <span style=\"color:#070;font-weight:bold\">&lt;div</span> <span style=\"color:#b48\">class</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">field</span><span style=\"color:#710\">&quot;</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span>\n    <span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> f.label <span style=\"color:#A60\">:finished</span> <span style=\"font-weight:bold;color:#666\">%&gt;</span></span><span style=\"color:#070;font-weight:bold\">&lt;br</span> <span style=\"color:#070;font-weight:bold\">/&gt;</span>\n    <span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> f.check_box <span style=\"color:#A60\">:finished</span> <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>\n  <span style=\"color:#070;font-weight:bold\">&lt;/div&gt;</span>\n  <span style=\"color:#070;font-weight:bold\">&lt;div</span> <span style=\"color:#b48\">class</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">actions</span><span style=\"color:#710\">&quot;</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span>\n    <span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> f.submit <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>\n  <span style=\"color:#070;font-weight:bold\">&lt;/div&gt;</span>\n<span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%</span> <span style=\"color:#080;font-weight:bold\">end</span> <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>\n<span style=\"color:#070;font-weight:bold\">&lt;/div&gt;</span>\n <span style=\"color:#070;font-weight:bold\">&lt;style</span> <span style=\"color:#b48\">type</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">text/css</span><span style=\"color:#710\">&quot;</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span>\n<span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#070;font-weight:bold\">input</span><span style=\"color:#B06;font-weight:bold\">.ng-invalid</span><span style=\"color:#B06;font-weight:bold\">.ng-dirty</span> {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#606\">background-color</span>: <span style=\"color:#0A0\">#FA787E</span>;\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> }\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#070;font-weight:bold\">input</span><span style=\"color:#B06;font-weight:bold\">.ng-valid</span><span style=\"color:#B06;font-weight:bold\">.ng-dirty</span> {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#606\">background-color</span>: <span style=\"color:#0A0\">#78FA89</span>;\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> }\n<span style=\"color:#F00;background-color:#FAA\"> </span></span><span style=\"color:#070;font-weight:bold\">&lt;/style&gt;</span>\n</pre></td>\n</tr></table>\n\n        </div>\n\n<b>novalidate</b> in form turns off the HTML5 form validation, which you can actually keep. <b>ng-model</b> will add certain HTML classes to html element so that you can use CSS to render colors as shown in the bottom.<br><br>\nWhen you try to save the task, HTML5 form validation will check whether \nthe text match an email, but not Angular.js. In such case, you need to \ndo that manually:\n<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/erb.png' alt='erb'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n<a href=\"#n8\" name=\"n8\">8</a>\n<a href=\"#n9\" name=\"n9\">9</a>\n<strong><a href=\"#n10\" name=\"n10\">10</a></strong>\n<a href=\"#n11\" name=\"n11\">11</a>\n<a href=\"#n12\" name=\"n12\">12</a>\n<a href=\"#n13\" name=\"n13\">13</a>\n<a href=\"#n14\" name=\"n14\">14</a>\n<a href=\"#n15\" name=\"n15\">15</a>\n<a href=\"#n16\" name=\"n16\">16</a>\n<a href=\"#n17\" name=\"n17\">17</a>\n<a href=\"#n18\" name=\"n18\">18</a>\n<a href=\"#n19\" name=\"n19\">19</a>\n<strong><a href=\"#n20\" name=\"n20\">20</a></strong>\n<a href=\"#n21\" name=\"n21\">21</a>\n<a href=\"#n22\" name=\"n22\">22</a>\n<a href=\"#n23\" name=\"n23\">23</a>\n<a href=\"#n24\" name=\"n24\">24</a>\n<a href=\"#n25\" name=\"n25\">25</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#070;font-weight:bold\">&lt;div&gt;</span>\n  <span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> form_for(<span style=\"color:#33B\">@task</span>, <span style=\"color:#A60\">:html</span> =&gt; {<span style=\"color:#A60\">:novalidate</span> =&gt; <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#A60\">:name</span> =&gt; <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">aform</span><span style=\"color:#710\">'</span></span>}) <span style=\"color:#080;font-weight:bold\">do</span> |f| <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>\n  <span style=\"color:#070;font-weight:bold\">&lt;div</span> <span style=\"color:#b48\">class</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">field</span><span style=\"color:#710\">&quot;</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span>\n    <span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> f.label <span style=\"color:#A60\">:title</span> <span style=\"font-weight:bold;color:#666\">%&gt;</span></span><span style=\"color:#070;font-weight:bold\">&lt;br</span> <span style=\"color:#070;font-weight:bold\">/&gt;</span>\n    <span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> f.text_field <span style=\"color:#A60\">:title</span>, <span style=\"color:#A60\"><span style=\"color:#A60\">:</span><span style=\"color:#740\">'</span><span style=\"color:#A60\">ng-model</span><span style=\"color:#740\">'</span></span>=&gt;<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">task.title</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#A60\">:name</span> =&gt; <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">tName</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#A60\">:type</span>=&gt;<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">email</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#A60\"><span style=\"color:#A60\">:</span><span style=\"color:#740\">'</span><span style=\"color:#A60\">required</span><span style=\"color:#740\">'</span></span>=&gt;<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#710\">'</span></span> <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>\n  <span style=\"color:#070;font-weight:bold\">&lt;/div&gt;</span>\n  <span style=\"color:#070;font-weight:bold\">&lt;div</span> <span style=\"color:#b48\">class</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">field</span><span style=\"color:#710\">&quot;</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span>\n    <span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> f.label <span style=\"color:#A60\">:finished</span> <span style=\"font-weight:bold;color:#666\">%&gt;</span></span><span style=\"color:#070;font-weight:bold\">&lt;br</span> <span style=\"color:#070;font-weight:bold\">/&gt;</span>\n    <span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> f.check_box <span style=\"color:#A60\">:finished</span> <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>\n  <span style=\"color:#070;font-weight:bold\">&lt;/div&gt;</span>\n  <span style=\"color:#070;font-weight:bold\">&lt;div</span> <span style=\"color:#b48\">class</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">actions</span><span style=\"color:#710\">&quot;</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span>\n    <span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> f.submit <span style=\"color:#069\">nil</span>, <span style=\"color:#A60\"><span style=\"color:#A60\">:</span><span style=\"color:#740\">'</span><span style=\"color:#A60\">ng-disabled</span><span style=\"color:#740\">'</span></span> =&gt; <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">aform.$invalid</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#A60\">:class</span> =&gt; <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">btn</span><span style=\"color:#710\">'</span></span> <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>\n  <span style=\"color:#070;font-weight:bold\">&lt;/div&gt;</span>\n<span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%</span> <span style=\"color:#080;font-weight:bold\">end</span> <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>\nIs title invalid ? {{aform.tName.$invalid | json}}<span style=\"color:#070;font-weight:bold\">&lt;br</span><span style=\"color:#070;font-weight:bold\">/&gt;</span>\nIs form invalid ? {{aform.$invalid | json}}\n<span style=\"color:#070;font-weight:bold\">&lt;/div&gt;</span>\n <span style=\"color:#070;font-weight:bold\">&lt;style</span> <span style=\"color:#b48\">type</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">text/css</span><span style=\"color:#710\">&quot;</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span>\n<span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#070;font-weight:bold\">input</span><span style=\"color:#B06;font-weight:bold\">.ng-invalid</span><span style=\"color:#B06;font-weight:bold\">.ng-dirty</span> {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#606\">background-color</span>: <span style=\"color:#0A0\">#FA787E</span>;\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> }\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#070;font-weight:bold\">input</span><span style=\"color:#B06;font-weight:bold\">.ng-valid</span><span style=\"color:#B06;font-weight:bold\">.ng-dirty</span> {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#606\">background-color</span>: <span style=\"color:#0A0\">#78FA89</span>;\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> }\n<span style=\"color:#F00;background-color:#FAA\"> </span></span><span style=\"color:#070;font-weight:bold\">&lt;/style&gt;</span>\n</pre></td>\n</tr></table>\n\n        </div>\nWe add <b>name=aform</b> to form so that you can use it in Angular.js. Similarly, we add <b>name=tName</b> to input in order to use it in Angular.js. Why not use <b>ng-model</b> to access input ? It is because when the input is not valid, ng-model is undefined. You can output <b>{{task.title}}</b> to see. Now you have a client-side validation to use with Angular.js.<br><br>\nTo do something more sophisticated like checking whether an email is already taken, you can use Angular.js directive for that:\n<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/erb.png' alt='erb'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n<a href=\"#n8\" name=\"n8\">8</a>\n<a href=\"#n9\" name=\"n9\">9</a>\n<strong><a href=\"#n10\" name=\"n10\">10</a></strong>\n<a href=\"#n11\" name=\"n11\">11</a>\n<a href=\"#n12\" name=\"n12\">12</a>\n<a href=\"#n13\" name=\"n13\">13</a>\n<a href=\"#n14\" name=\"n14\">14</a>\n<a href=\"#n15\" name=\"n15\">15</a>\n<a href=\"#n16\" name=\"n16\">16</a>\n<a href=\"#n17\" name=\"n17\">17</a>\n<a href=\"#n18\" name=\"n18\">18</a>\n<a href=\"#n19\" name=\"n19\">19</a>\n<strong><a href=\"#n20\" name=\"n20\">20</a></strong>\n<a href=\"#n21\" name=\"n21\">21</a>\n<a href=\"#n22\" name=\"n22\">22</a>\n<a href=\"#n23\" name=\"n23\">23</a>\n<a href=\"#n24\" name=\"n24\">24</a>\n<a href=\"#n25\" name=\"n25\">25</a>\n<a href=\"#n26\" name=\"n26\">26</a>\n<a href=\"#n27\" name=\"n27\">27</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#070;font-weight:bold\">&lt;div&gt;</span>\n  <span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> form_for(<span style=\"color:#33B\">@task</span>, <span style=\"color:#A60\">:html</span> =&gt; {<span style=\"color:#A60\">:novalidate</span> =&gt; <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#A60\">:name</span> =&gt; <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">aform</span><span style=\"color:#710\">'</span></span>}) <span style=\"color:#080;font-weight:bold\">do</span> |f| <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>\n  <span style=\"color:#070;font-weight:bold\">&lt;div</span> <span style=\"color:#b48\">class</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">field</span><span style=\"color:#710\">&quot;</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span>\n    <span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> f.label <span style=\"color:#A60\">:title</span> <span style=\"font-weight:bold;color:#666\">%&gt;</span></span><span style=\"color:#070;font-weight:bold\">&lt;br</span> <span style=\"color:#070;font-weight:bold\">/&gt;</span>\n    <span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> f.text_field <span style=\"color:#A60\">:title</span>, <span style=\"color:#A60\"><span style=\"color:#A60\">:</span><span style=\"color:#740\">'</span><span style=\"color:#A60\">ng-model</span><span style=\"color:#740\">'</span></span>=&gt;<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">task.title</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#A60\">:name</span> =&gt; <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">tName</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#A60\">:type</span>=&gt;<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">email</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#A60\"><span style=\"color:#A60\">:</span><span style=\"color:#740\">'</span><span style=\"color:#A60\">required</span><span style=\"color:#740\">'</span></span>=&gt;<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#A60\">:unique</span>=&gt;<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#710\">'</span></span> <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>\n  <span style=\"color:#070;font-weight:bold\">&lt;/div&gt;</span>\n  <span style=\"color:#070;font-weight:bold\">&lt;div</span> <span style=\"color:#b48\">class</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">field</span><span style=\"color:#710\">&quot;</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span>\n    <span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> f.label <span style=\"color:#A60\">:finished</span> <span style=\"font-weight:bold;color:#666\">%&gt;</span></span><span style=\"color:#070;font-weight:bold\">&lt;br</span> <span style=\"color:#070;font-weight:bold\">/&gt;</span>\n    <span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> f.check_box <span style=\"color:#A60\">:finished</span> <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>\n  <span style=\"color:#070;font-weight:bold\">&lt;/div&gt;</span>\n  <span style=\"color:#070;font-weight:bold\">&lt;div</span> <span style=\"color:#b48\">class</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">actions</span><span style=\"color:#710\">&quot;</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span>\n    <span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> f.submit <span style=\"color:#069\">nil</span>, <span style=\"color:#A60\"><span style=\"color:#A60\">:</span><span style=\"color:#740\">'</span><span style=\"color:#A60\">ng-disabled</span><span style=\"color:#740\">'</span></span> =&gt; <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">aform.$invalid</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#A60\">:class</span> =&gt; <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">btn</span><span style=\"color:#710\">'</span></span> <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>\n  <span style=\"color:#070;font-weight:bold\">&lt;/div&gt;</span>\n<span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%</span> <span style=\"color:#080;font-weight:bold\">end</span> <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>\nIs title invalid ? {{aform.tName.$invalid | json}}<span style=\"color:#070;font-weight:bold\">&lt;br</span><span style=\"color:#070;font-weight:bold\">/&gt;</span>\nIs form invalid ? {{aform.$invalid | json}}<span style=\"color:#070;font-weight:bold\">&lt;br</span><span style=\"color:#070;font-weight:bold\">/&gt;</span>\nTitle: {{task.title}}<span style=\"color:#070;font-weight:bold\">&lt;br</span><span style=\"color:#070;font-weight:bold\">/&gt;</span>\nIs title already taken ? {{aform.tName.$error.unique | json}}\n<span style=\"color:#070;font-weight:bold\">&lt;/div&gt;</span>\n <span style=\"color:#070;font-weight:bold\">&lt;style</span> <span style=\"color:#b48\">type</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">text/css</span><span style=\"color:#710\">&quot;</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span>\n<span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#070;font-weight:bold\">input</span><span style=\"color:#B06;font-weight:bold\">.ng-invalid</span><span style=\"color:#B06;font-weight:bold\">.ng-dirty</span> {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#606\">background-color</span>: <span style=\"color:#0A0\">#FA787E</span>;\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> }\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#070;font-weight:bold\">input</span><span style=\"color:#B06;font-weight:bold\">.ng-valid</span><span style=\"color:#B06;font-weight:bold\">.ng-dirty</span> {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#606\">background-color</span>: <span style=\"color:#0A0\">#78FA89</span>;\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> }\n<span style=\"color:#F00;background-color:#FAA\"> </span></span><span style=\"color:#070;font-weight:bold\">&lt;/style&gt;</span>\n</pre></td>\n</tr></table>\n\n        </div>\n\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/javascript.png' alt='javascript'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n<a href=\"#n8\" name=\"n8\">8</a>\n<a href=\"#n9\" name=\"n9\">9</a>\n<strong><a href=\"#n10\" name=\"n10\">10</a></strong>\n<a href=\"#n11\" name=\"n11\">11</a>\n<a href=\"#n12\" name=\"n12\">12</a>\n<a href=\"#n13\" name=\"n13\">13</a>\n<a href=\"#n14\" name=\"n14\">14</a>\n<a href=\"#n15\" name=\"n15\">15</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#F00;background-color:#FAA\"> </span> .directive(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">unique</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#080;font-weight:bold\">function</span>() {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#080;font-weight:bold\">return</span> {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#606\">require</span>: <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">ngModel</span><span style=\"color:#710\">'</span></span>,\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#06B;font-weight:bold\">link</span>: <span style=\"color:#080;font-weight:bold\">function</span>(scope, elm, attrs, ctrl) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> ctrl.<span style=\"color:#369;font-weight:bold\">$parsers</span>.push(<span style=\"color:#080;font-weight:bold\">function</span>(viewValue) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> console.log(scope.aform.tName.<span style=\"color:#369;font-weight:bold\">$invalid</span>);\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#080;font-weight:bold\">if</span> (scope.aform.tName.<span style=\"color:#369;font-weight:bold\">$invalid</span> == <span style=\"color:#069\">false</span>) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> console.log(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">check uniqueness</span><span style=\"color:#710\">'</span></span>);\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> ctrl.<span style=\"color:#369;font-weight:bold\">$setValidity</span>(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">unique</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#069\">false</span>);\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> }\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#080;font-weight:bold\">return</span> viewValue;\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> });\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> }\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> };\n<span style=\"color:#F00;background-color:#FAA\"> </span> })\n</pre></td>\n</tr></table>\n\n        </div>\nWe add an <b>unique</b> directive to the input, then add new parser to intrinsic form controller. You can use <b>scope.aform</b> to access form element as in HTML. Here, we set <b>setValidity</b> to false all the time to show how it work. At this part, you can use Angular.js to call server to check the uniqueness.<br><br>\nFinally, let's hook up with Rails like this:\n<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#777\"># app/controllers/tasks_controller.rb&quot;</span>\n  <span style=\"color:#080;font-weight:bold\">def</span> <span style=\"color:#06B;font-weight:bold\">unique</span>\n    existing = <span style=\"color:#036;font-weight:bold\">Task</span>.exists?(<span style=\"color:#A60\">:title</span> =&gt; params[<span style=\"color:#A60\">:title</span>])\n    respond_to <span style=\"color:#080;font-weight:bold\">do</span> |format|\n      format.json { render <span style=\"color:#A60\">:json</span> =&gt; {<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">existing</span><span style=\"color:#710\">'</span></span> =&gt; existing}, <span style=\"color:#A60\">:status</span> =&gt; <span style=\"color:#A60\">:ok</span> }\n    <span style=\"color:#080;font-weight:bold\">end</span>\n  <span style=\"color:#080;font-weight:bold\">end</span>\n</pre></td>\n</tr></table>\n\n        </div>\n\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/javascript.png' alt='javascript'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n<a href=\"#n8\" name=\"n8\">8</a>\n<a href=\"#n9\" name=\"n9\">9</a>\n<strong><a href=\"#n10\" name=\"n10\">10</a></strong>\n<a href=\"#n11\" name=\"n11\">11</a>\n<a href=\"#n12\" name=\"n12\">12</a>\n<a href=\"#n13\" name=\"n13\">13</a>\n<a href=\"#n14\" name=\"n14\">14</a>\n<a href=\"#n15\" name=\"n15\">15</a>\n<a href=\"#n16\" name=\"n16\">16</a>\n<a href=\"#n17\" name=\"n17\">17</a>\n<a href=\"#n18\" name=\"n18\">18</a>\n<a href=\"#n19\" name=\"n19\">19</a>\n<strong><a href=\"#n20\" name=\"n20\">20</a></strong>\n<a href=\"#n21\" name=\"n21\">21</a>\n<a href=\"#n22\" name=\"n22\">22</a>\n<a href=\"#n23\" name=\"n23\">23</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#F00;background-color:#FAA\"> </span> .directive(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">unique</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#080;font-weight:bold\">function</span>(Task) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#080;font-weight:bold\">return</span> {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#606\">require</span>: <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">ngModel</span><span style=\"color:#710\">'</span></span>,\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#06B;font-weight:bold\">link</span>: <span style=\"color:#080;font-weight:bold\">function</span>(scope, elm, attrs, ctrl) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> ctrl.<span style=\"color:#369;font-weight:bold\">$parsers</span>.push(<span style=\"color:#080;font-weight:bold\">function</span>(viewValue) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#080;font-weight:bold\">if</span> (scope.aform.tName.<span style=\"color:#369;font-weight:bold\">$invalid</span> == <span style=\"color:#069\">false</span>) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> Task.get({<span style=\"color:#606\">action</span>: <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">unique.json</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#606\">title</span>:viewValue}, <span style=\"color:#080;font-weight:bold\">function</span>(resource) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#080;font-weight:bold\">if</span> (resource.existing) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> ctrl.<span style=\"color:#369;font-weight:bold\">$setValidity</span>(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">unique</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#069\">false</span>);\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> ctrl.<span style=\"color:#369;font-weight:bold\">$setViewValue</span>(<span style=\"color:#069\">undefined</span>);\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> } <span style=\"color:#080;font-weight:bold\">else</span> {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> ctrl.<span style=\"color:#369;font-weight:bold\">$setValidity</span>(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">unique</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#069\">true</span>);\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> }\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> }, <span style=\"color:#080;font-weight:bold\">function</span>(response) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> console.log(response);\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> });\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> }\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> ctrl.<span style=\"color:#369;font-weight:bold\">$setValidity</span>(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">unique</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#069\">true</span>);\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#080;font-weight:bold\">return</span> viewValue;\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> });\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> }\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> };\n<span style=\"color:#F00;background-color:#FAA\"> </span> })\n</pre></td>\n</tr></table>\n\n        </div>\nRemember to add new action in <b>routes</b>. Because the nature of Task resource is ajax, we set <b>setValidity</b> is true by default. When ajax is returned from server, <b>setValidity</b> is set to the correct one.", pretty_preview: "<p>Form validation is another function which should be implemented on client side instead of server side. Let's begin with the standard rails form:<br></p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/erb.png' alt='erb'/>\n              </div>\n          <div class=\"CodeRay\">\n  <div class=\"code\"><pre><span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> form_for(<span style=\"color:#33B\">@task</span>) <span style=\"color:#080;font-weight:bold\">do</span> |f| <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>\n  <span style=\"color:#070;font-weight:bold\">&lt;div</span> <span style=\"color:#b48\">class</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">field</span><span style=\"color:#710\">&quot;</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span>\n    <span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> f.label <span style=\"color:#A60\">:title</span> <span style=\"font-weight:bold;color:#666\">%&gt;</span></span><span style=\"color:#070;font-weight:bold\">&lt;br</span> <span style=\"color:#070;font-weight:bold\">/&gt;</span>\n    <span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> f.text_field <span style=\"color:#A60\">:tit</span>...\n\n</span></pre></div>\n</div>\n\n        </div>\n"},
  {id: 403, name: "Tutorials on Angular.js and Rails #7", category_id: 3, body: "<a href=\"http://docs.angularjs.org/guide/directive\">Directive</a> is the most important feature of Angular.js. It is similar to <a href=\"http://guides.rubyonrails.org/layouts_and_rendering.html\">partials</a> in Rails. Let's begin with a very simple directive. In <a href=\"http://blog.berylliumwork.com/2012/10/tutorials-on-angularjs-and-rails-6.html\">previous tutorial</a>, we render title of task in table like this:\n\n<br><pre><code class=\"erb\">&lt;!-- /app/views/tasks/index.html --&gt;<br>&lt;tr ng-repeat='task in tasks' id='task_{{task.id}}'&gt;<br>  &lt;td&gt;{{task.title}}&lt;/td&gt;<br>  &lt;td&gt;{{task.finished}}&lt;/td&gt;<br>&lt;/tr&gt;</code></pre>Assume that we want to add an icon from <a href=\"http://twitter.github.com/bootstrap/\">Bootstrap</a> to the title. First, we need to include Bootstrap in this Rails application. Here I will use <a href=\"https://github.com/yjchen/bootstrap-rails-engine\">bootstrap-rails-engine</a>:\n\n<pre><code class=\"ruby\"># Gemfile<br>gem 'bootstrap-rails-engine', :git =&gt; \"https://github.com/yjchen/bootstrap-rails-engine.git\"</code></pre>\n<pre><code class=\"erb\"># app/views/layout/application.html.erb<br>&lt;%= bootstrap_javascript_include_tag :default %&gt;<br>&lt;%= bootstrap_stylesheet_include_tag :default %&gt;</code></pre>To use icons from Bootstrap, we need to add<br><pre><code class=\"erb\">&lt;i class='icon-tasks'&gt;&lt;i&gt;</code></pre>To use directive, first, we define new attribue <b>data-icon</b>. Then write directive for it:\n<br><pre><code class=\"erb\">&lt;!-- /app/views/tasks/index.html --&gt;<br>&lt;tr ng-repeat='task in tasks' id='task_{{task.id}}'&gt;<br>  &lt;td data-icon='tasks'&gt;{{task.title}}&lt;/td&gt;<br>  &lt;td&gt;{{task.finished}}&lt;/td&gt;<br>&lt;/tr&gt;</code></pre>\n<pre><code class=\"javascript\">/* /app/assets/javascripts/tasks.js */<br>angular.module('momentumService', ['ngResource']).<br>  factory('Task', function($resource) {<br>    return $resource('/tasks/:task_id/:action', {task_id:'@id'}, {<br>      update: { method: 'PUT' }<br>    });<br>  }).<br>  directive('icon', function() {<br>    return {<br>      restrict: 'A',<br>      link: function(scope, element, attrs) {<br>        element.prepend('&lt;i class=\"icon-' attrs.icon '\"&gt;&lt;/i&gt; ');<br>      }<br>    }<br>  });</code></pre>\n<b>restrict: 'A'</b> means <b>attribute</b>. The <b>link</b> function is where you can manipulate the DOM element. Here, we add the <b>&lt;i&gt;</b> element to display Bootstrap icon. The attribute <b>data-icon</b> in html will map to <b>attrs.icon</b> in Angular.js. Thus, it allows you to move some code from partials and helpers in Rails to directives in Angular.js.\n<br><br>Now, let's try to write a very simple paginator for Angular.js:<br><pre><code class=\"erb\">&lt;span data-paginator data-current-page='5' data-total-page='10'&gt;&lt;/span&gt;</code></pre>\n<pre><code class=\"javascript\">  directive('paginator', function() {<br>    return {<br>      restrict: 'A',<br>      replace: true,<br>      transclude: true,<br>      scope: {page: '@currentPage', total: '@totalPage'},<br>      template: '&lt;span&gt;{{page}} / {{total}}&lt;/span&gt;',<br>      link: function(scope, element, attrs) {<br>        if (attrs.currentPage != 1) {<br>          element.prepend('&lt;span&gt;Previous | &lt;span&gt;');<br>        } <br>        if (attrs.currentPage != attrs.totalPage) {<br>          element.append('&lt;span&gt; | Next&lt;span&gt;');<br>        }<br>      }<br>    }<br>  });</code></pre>Note that <b>data-current-page</b> will map in <b>scope</b> to <b>@currentPage</b> and <b>page</b> used in <b>template</b>.\n<br><br>Once this directive is in place, you can easily improve it like this:<br><pre><code class=\"erb\">&lt;span data-paginator data-current-page='&lt;%= params[:page] || 1 %&gt;' data-total-page='10'&gt;&lt;/span&gt;</code></pre>\n<pre><code class=\"javascript\">  directive('paginator', function() {<br>    return {<br>      restrict: 'A',<br>      replace: true,<br>      transclude: true,<br>      scope: {page: '@currentPage', total: '@totalPage'},<br>      template: '&lt;span&gt;{{page}} / {{total}}&lt;/span&gt;',<br>      link: function(scope, element, attrs) {<br>        if (attrs.currentPage != 1) {<br>          element.prepend('&lt;span&gt;&lt;a href=\"/?page=' (parseInt(attrs.currentPage)-1) '\"&gt;Previous&lt;/a&gt; | &lt;span&gt; ');<br>        } <br>        if (attrs.currentPage != attrs.totalPage) {<br>          element.append('&lt;span&gt; | &lt;a href=\"/?page=' (parseInt(attrs.currentPage) 1) '\"&gt;Next&lt;/a&gt;&lt;span&gt;');<br>        }<br>      }<br>    }<br>  });</code></pre>This paginator is far from perfect, but would be a beginning for something better. You might consider to use a paginator to render list of tasks in ajax way. While that can be done easily, you need to compare the pros and cons of ajax and caching in Rails in terms of user experience and server workload. Ajax avoids re-rendering of a web page and caching avoids call(s) to database. The latter might be the bottle neck of most web application. <br>", created_at: "2013-12-13 19:56:10", updated_at: "2013-12-13 19:56:10", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "<a href=\"http://docs.angularjs.org/guide/directive\">Directive</a> is the most important feature of Angular.js. It is similar to <a href=\"http://guides.rubyonrails.org/layouts_and_rendering.html\">partials</a> in Rails. Let's begin with a very simple directive. In <a href=\"http://blog.berylliumwork.com/2012/10/tutorials-on-angularjs-and-rails-6.html\">previous tutorial</a>, we render title of task in table like this:\n\n<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/erb.png' alt='erb'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#777\">&lt;!-- /app/views/tasks/index.html --&gt;</span>\n<span style=\"color:#070;font-weight:bold\">&lt;tr</span> <span style=\"color:#b48\">ng-repeat</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">task in tasks</span><span style=\"color:#710\">'</span></span> <span style=\"color:#b48\">id</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">task_{{task.id}}</span><span style=\"color:#710\">'</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span>\n  <span style=\"color:#070;font-weight:bold\">&lt;td&gt;</span>{{task.title}}<span style=\"color:#070;font-weight:bold\">&lt;/td&gt;</span>\n  <span style=\"color:#070;font-weight:bold\">&lt;td&gt;</span>{{task.finished}}<span style=\"color:#070;font-weight:bold\">&lt;/td&gt;</span>\n<span style=\"color:#070;font-weight:bold\">&lt;/tr&gt;</span>\n</pre></td>\n</tr></table>\n\n        </div>\nAssume that we want to add an icon from <a href=\"http://twitter.github.com/bootstrap/\">Bootstrap</a> to the title. First, we need to include Bootstrap in this Rails application. Here I will use <a href=\"https://github.com/yjchen/bootstrap-rails-engine\">bootstrap-rails-engine</a>:\n\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#777\"># Gemfile</span>\ngem <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">bootstrap-rails-engine</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#A60\">:git</span> =&gt; <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">https://github.com/yjchen/bootstrap-rails-engine.git</span><span style=\"color:#710\">&quot;</span></span>\n</pre></td>\n</tr></table>\n\n        </div>\n\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/erb.png' alt='erb'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n</pre></td>\n  <td class=\"code\"><pre># app/views/layout/application.html.erb\n<span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> bootstrap_javascript_include_tag <span style=\"color:#A60\">:default</span> <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>\n<span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> bootstrap_stylesheet_include_tag <span style=\"color:#A60\">:default</span> <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>\n</pre></td>\n</tr></table>\n\n        </div>\nTo use icons from Bootstrap, we need to add<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/erb.png' alt='erb'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#070;font-weight:bold\">&lt;i</span> <span style=\"color:#b48\">class</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">icon-tasks</span><span style=\"color:#710\">'</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span><span style=\"color:#070;font-weight:bold\">&lt;i&gt;</span>\n</pre></td>\n</tr></table>\n\n        </div>\nTo use directive, first, we define new attribue <b>data-icon</b>. Then write directive for it:\n<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/erb.png' alt='erb'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#777\">&lt;!-- /app/views/tasks/index.html --&gt;</span>\n<span style=\"color:#070;font-weight:bold\">&lt;tr</span> <span style=\"color:#b48\">ng-repeat</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">task in tasks</span><span style=\"color:#710\">'</span></span> <span style=\"color:#b48\">id</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">task_{{task.id}}</span><span style=\"color:#710\">'</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span>\n  <span style=\"color:#070;font-weight:bold\">&lt;td</span> <span style=\"color:#b48\">data-icon</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">tasks</span><span style=\"color:#710\">'</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span>{{task.title}}<span style=\"color:#070;font-weight:bold\">&lt;/td&gt;</span>\n  <span style=\"color:#070;font-weight:bold\">&lt;td&gt;</span>{{task.finished}}<span style=\"color:#070;font-weight:bold\">&lt;/td&gt;</span>\n<span style=\"color:#070;font-weight:bold\">&lt;/tr&gt;</span>\n</pre></td>\n</tr></table>\n\n        </div>\n\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/javascript.png' alt='javascript'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n<a href=\"#n8\" name=\"n8\">8</a>\n<a href=\"#n9\" name=\"n9\">9</a>\n<strong><a href=\"#n10\" name=\"n10\">10</a></strong>\n<a href=\"#n11\" name=\"n11\">11</a>\n<a href=\"#n12\" name=\"n12\">12</a>\n<a href=\"#n13\" name=\"n13\">13</a>\n<a href=\"#n14\" name=\"n14\">14</a>\n<a href=\"#n15\" name=\"n15\">15</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#777\">/* /app/assets/javascripts/tasks.js */</span>\nangular.module(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">momentumService</span><span style=\"color:#710\">'</span></span>, [<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">ngResource</span><span style=\"color:#710\">'</span></span>]).\n<span style=\"color:#F00;background-color:#FAA\"> </span> factory(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">Task</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#080;font-weight:bold\">function</span>(<span style=\"color:#369;font-weight:bold\">$resource</span>) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#080;font-weight:bold\">return</span> <span style=\"color:#369;font-weight:bold\">$resource</span>(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">/tasks/:task_id/:action</span><span style=\"color:#710\">'</span></span>, {<span style=\"color:#606\">task_id</span>:<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">@id</span><span style=\"color:#710\">'</span></span>}, {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#606\">update</span>: { <span style=\"color:#606\">method</span>: <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">PUT</span><span style=\"color:#710\">'</span></span> }\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> });\n<span style=\"color:#F00;background-color:#FAA\"> </span> }).\n<span style=\"color:#F00;background-color:#FAA\"> </span> directive(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">icon</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#080;font-weight:bold\">function</span>() {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#080;font-weight:bold\">return</span> {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#606\">restrict</span>: <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">A</span><span style=\"color:#710\">'</span></span>,\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#06B;font-weight:bold\">link</span>: <span style=\"color:#080;font-weight:bold\">function</span>(scope, element, attrs) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> element.prepend(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">&lt;i class=&quot;icon-</span><span style=\"color:#710\">'</span></span> attrs.icon <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">&quot;&gt;&lt;/i&gt; </span><span style=\"color:#710\">'</span></span>);\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> }\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> }\n<span style=\"color:#F00;background-color:#FAA\"> </span> });\n</pre></td>\n</tr></table>\n\n        </div>\n\n<b>restrict: 'A'</b> means <b>attribute</b>. The <b>link</b> function is where you can manipulate the DOM element. Here, we add the <b>&lt;i&gt;</b> element to display Bootstrap icon. The attribute <b>data-icon</b> in html will map to <b>attrs.icon</b> in Angular.js. Thus, it allows you to move some code from partials and helpers in Rails to directives in Angular.js.\n<br><br>Now, let's try to write a very simple paginator for Angular.js:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/erb.png' alt='erb'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#070;font-weight:bold\">&lt;span</span> <span style=\"color:#b48\">data-paginator</span> <span style=\"color:#b48\">data-current-page</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">5</span><span style=\"color:#710\">'</span></span> <span style=\"color:#b48\">data-total-page</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">10</span><span style=\"color:#710\">'</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span><span style=\"color:#070;font-weight:bold\">&lt;/span&gt;</span>\n</pre></td>\n</tr></table>\n\n        </div>\n\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/javascript.png' alt='javascript'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n<a href=\"#n8\" name=\"n8\">8</a>\n<a href=\"#n9\" name=\"n9\">9</a>\n<strong><a href=\"#n10\" name=\"n10\">10</a></strong>\n<a href=\"#n11\" name=\"n11\">11</a>\n<a href=\"#n12\" name=\"n12\">12</a>\n<a href=\"#n13\" name=\"n13\">13</a>\n<a href=\"#n14\" name=\"n14\">14</a>\n<a href=\"#n15\" name=\"n15\">15</a>\n<a href=\"#n16\" name=\"n16\">16</a>\n<a href=\"#n17\" name=\"n17\">17</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#F00;background-color:#FAA\"> </span> directive(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">paginator</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#080;font-weight:bold\">function</span>() {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#080;font-weight:bold\">return</span> {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#606\">restrict</span>: <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">A</span><span style=\"color:#710\">'</span></span>,\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#606\">replace</span>: <span style=\"color:#069\">true</span>,\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#606\">transclude</span>: <span style=\"color:#069\">true</span>,\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#606\">scope</span>: {<span style=\"color:#606\">page</span>: <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">@currentPage</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#606\">total</span>: <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">@totalPage</span><span style=\"color:#710\">'</span></span>},\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#606\">template</span>: <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">&lt;span&gt;{{page}} / {{total}}&lt;/span&gt;</span><span style=\"color:#710\">'</span></span>,\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#06B;font-weight:bold\">link</span>: <span style=\"color:#080;font-weight:bold\">function</span>(scope, element, attrs) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#080;font-weight:bold\">if</span> (attrs.currentPage != <span style=\"color:#00D\">1</span>) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> element.prepend(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">&lt;span&gt;Previous | &lt;span&gt;</span><span style=\"color:#710\">'</span></span>);\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> } \n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#080;font-weight:bold\">if</span> (attrs.currentPage != attrs.totalPage) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> element.append(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">&lt;span&gt; | Next&lt;span&gt;</span><span style=\"color:#710\">'</span></span>);\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> }\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> }\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> }\n<span style=\"color:#F00;background-color:#FAA\"> </span> });\n</pre></td>\n</tr></table>\n\n        </div>\nNote that <b>data-current-page</b> will map in <b>scope</b> to <b>@currentPage</b> and <b>page</b> used in <b>template</b>.\n<br><br>Once this directive is in place, you can easily improve it like this:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/erb.png' alt='erb'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#070;font-weight:bold\">&lt;span</span> <span style=\"color:#b48\">data-paginator</span> <span style=\"color:#b48\">data-current-page</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span></span><span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> params[<span style=\"color:#A60\">:page</span>] || <span style=\"color:#00D\">1</span> <span style=\"font-weight:bold;color:#666\">%&gt;</span></span><span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span></span> <span style=\"color:#b48\">data-total-page</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">10</span><span style=\"color:#710\">'</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span><span style=\"color:#070;font-weight:bold\">&lt;/span&gt;</span>\n</pre></td>\n</tr></table>\n\n        </div>\n\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/javascript.png' alt='javascript'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n<a href=\"#n8\" name=\"n8\">8</a>\n<a href=\"#n9\" name=\"n9\">9</a>\n<strong><a href=\"#n10\" name=\"n10\">10</a></strong>\n<a href=\"#n11\" name=\"n11\">11</a>\n<a href=\"#n12\" name=\"n12\">12</a>\n<a href=\"#n13\" name=\"n13\">13</a>\n<a href=\"#n14\" name=\"n14\">14</a>\n<a href=\"#n15\" name=\"n15\">15</a>\n<a href=\"#n16\" name=\"n16\">16</a>\n<a href=\"#n17\" name=\"n17\">17</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#F00;background-color:#FAA\"> </span> directive(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">paginator</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#080;font-weight:bold\">function</span>() {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#080;font-weight:bold\">return</span> {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#606\">restrict</span>: <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">A</span><span style=\"color:#710\">'</span></span>,\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#606\">replace</span>: <span style=\"color:#069\">true</span>,\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#606\">transclude</span>: <span style=\"color:#069\">true</span>,\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#606\">scope</span>: {<span style=\"color:#606\">page</span>: <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">@currentPage</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#606\">total</span>: <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">@totalPage</span><span style=\"color:#710\">'</span></span>},\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#606\">template</span>: <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">&lt;span&gt;{{page}} / {{total}}&lt;/span&gt;</span><span style=\"color:#710\">'</span></span>,\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#06B;font-weight:bold\">link</span>: <span style=\"color:#080;font-weight:bold\">function</span>(scope, element, attrs) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#080;font-weight:bold\">if</span> (attrs.currentPage != <span style=\"color:#00D\">1</span>) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> element.prepend(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">&lt;span&gt;&lt;a href=&quot;/?page=</span><span style=\"color:#710\">'</span></span> (parseInt(attrs.currentPage)-<span style=\"color:#00D\">1</span>) <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">&quot;&gt;Previous&lt;/a&gt; | &lt;span&gt; </span><span style=\"color:#710\">'</span></span>);\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> } \n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#080;font-weight:bold\">if</span> (attrs.currentPage != attrs.totalPage) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> element.append(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">&lt;span&gt; | &lt;a href=&quot;/?page=</span><span style=\"color:#710\">'</span></span> (parseInt(attrs.currentPage) <span style=\"color:#00D\">1</span>) <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">&quot;&gt;Next&lt;/a&gt;&lt;span&gt;</span><span style=\"color:#710\">'</span></span>);\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> }\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> }\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> }\n<span style=\"color:#F00;background-color:#FAA\"> </span> });\n</pre></td>\n</tr></table>\n\n        </div>\nThis paginator is far from perfect, but would be a beginning for something better. You might consider to use a paginator to render list of tasks in ajax way. While that can be done easily, you need to compare the pros and cons of ajax and caching in Rails in terms of user experience and server workload. Ajax avoids re-rendering of a web page and caching avoids call(s) to database. The latter might be the bottle neck of most web application. <br>", pretty_preview: "<a href=\"http://docs.angularjs.org/guide/directive\">Directive</a> is the most important feature of Angular.js. It is similar to <a href=\"http://guides.rubyonrails.org/layouts_and_rendering.html\">partials</a> in Rails. Let's begin with a very simple directive. In <a href=\"http://blog.berylliumwork.com/2012/10/tutorials-on-angularjs-and-rails-6.html\">previous tutorial</a>, we render title of task in table like this:\n\n<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/erb.png' alt='erb'/>\n              </div>\n          <div class=\"CodeRay\">\n  <div class=\"code\"><pre><span style=\"color:#777\">&lt;!-- /app/views/tasks/index.html --&gt;</span>\n<span style=\"color:#070;font-weight:bold\">&lt;tr</span> <span style=\"color:#b48\">ng-repeat</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">task in tasks</span><span style=\"color:#710\">'</span></span> <span style=\"color:#b48\">id</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">task_{{task.id}...</span>\n\n</span></pre></div>\n</div>\n\n        </div>\n"},
  {id: 404, name: "Tutorials on Angular.js and Rails #6", category_id: 3, body: "<p>One advantage of Angular.js is that it might reduce the burden on servers. It depends on how you use it. A typical loading of page from Rails involves:<br><br></p>\n<ol>\n<li>map url to Rails controller</li>\n<li>load data from database</li>\n<li>render partial (erb)</li>\n<li>render template</li>\n</ol>\n<br>All of these actions occurs on server side. If Angular.js is used, it might look like this:<br><br><ol>\n<li>map url to Rails controller</li>\n<li>render partial (static html)</li>\n<li>render Rails template</li>\n<li>load data from database through ajax</li>\n<li>render Angular.js template</li>\n</ol>\n<br>The last step occurs at client side, thus, save some workload from servers. If caches are involved, you might skip some data loading, which will save a lot. Thus, to archive the best performance, try use caches first. If not possible, Angular.js might give you better user experience via ajax.<br>Here is how to implement <span style=\"font-weight: bold;\">index</span> action with Angular.js<br><pre><code class=\"ruby\"># app/controllers/tasks_controller.rb<br>class TasksController &lt; ApplicationController<br>  # GET /tasks<br>  # GET /tasks.json<br>  def index<br>    respond_to do |format|<br>      format.html # index.html.erb<br>      format.json { <br>        @tasks = Task.all<br>        render json: @tasks <br>      }<br>    end<br>  end<br>...</code></pre>A text of 'loading...' will be show first until tasks are loaded through ajax. It gives users a hint if server is slow.<br><pre><code class=\"erb\">&lt;!--app/views/tasks/index.html.erb --&gt;<br>&lt;h1&gt;Listing tasks&lt;/h1&gt;<br>&lt;div ng-controller='TasksController' ng-init='index()'&gt;<br>&lt;span ng-hide='tasks'&gt;Loading&lt;/span&gt;<br>&lt;table&gt;<br>  &lt;tr&gt;<br>    &lt;th&gt;Title&lt;/th&gt;<br>    &lt;th&gt;Finished&lt;/th&gt;<br>    &lt;th&gt;&lt;/th&gt;<br>    &lt;th&gt;&lt;/th&gt;<br>    &lt;th&gt;&lt;/th&gt;<br>  &lt;/tr&gt;<br>    &lt;tr ng-repeat='task in tasks' id='task_{{task.id}}'&gt;<br>      &lt;td&gt;{{task.title}}&lt;/td&gt;<br>      &lt;td&gt;{{task.finished}}&lt;/td&gt;<br>      &lt;td&gt;&lt;a href='' ng-click='show(task.id)'&gt;Show&lt;/a&gt;&lt;/td&gt;<br>      &lt;td&gt;&lt;a href='' ng-click='edit(task.id)'&gt;Edit&lt;/a&gt;&lt;/td&gt;<br>      &lt;td&gt;&lt;a href='' ng-click='destroy(task.id)'&gt;Delete&lt;/a&gt;&lt;/td&gt;<br>    &lt;/tr&gt;<br>&lt;/table&gt; <br>...</code></pre>\n<pre><code class=\"javascript\">/* app/assets/javascripts/tasks_controller.js */<br>function TasksController($scope, Task) {<br>  $scope.index = function() {<br>    console.log('Index');<br>    Task.query(function(resource) {<br>      $scope.tasks = resource;<br>    }, function(response) {<br>      console.log(response);<br>    });<br>  };<br>...</code></pre>The rest is the same as in <a href=\"http://blog.berylliumwork.com/2012/09/tutorials-on-angularjs-and-rails-5.html\">Tutorial #5</a>.\n<p>\nIf pagination is used, eg. <a href=\"https://github.com/amatsuda/kaminari\">kaminari</a>, you need to transfer the page number from Rails controller to view so that Angular.js can do the correct ajax call. <a href=\"https://github.com/gazay/gon\">Gon</a> is a gem for that. You can also watch the <a href=\"http://railscasts.com/episodes/324-passing-data-to-javascript\">RailsCast</a>. So add this gem into Gemfile. Add <b>include_gon</b> in application template. Here are the code for Rails controllers and Angular.js controller:\n</p>\n<pre><code class=\"ruby\">  def index<br>    gon.page = params[:page] || 1<br>    respond_to do |format|<br>      format.html # index.html.erb<br>      format.json { <br>        @tasks = Task.page(params[:page]).per(5)<br>        render json: @tasks <br>      }<br>    end<br>  end</code></pre>\n<pre><code class=\"javascript\">  $scope.index = function(page) {<br>    console.log('Index');<br>    Task.query({page: window.gon.page}, function(resource) {<br>      $scope.tasks = resource;<br>    }, function(response) {<br>      console.log(response);<br>    });<br>  };</code></pre>Unfortunately, you will notice that you cannot use page helper from kaminari because @tasks does not exist. Well, to fix it, you need to put @tasks outside format.json, thus, it will be called twice (one from html.erb and the other from json). The solution will be write the page helper in Angular.js. That would be outside the scope of this tutorial. <br>", created_at: "2013-12-13 19:56:10", updated_at: "2013-12-13 19:56:10", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "<p>One advantage of Angular.js is that it might reduce the burden on servers. It depends on how you use it. A typical loading of page from Rails involves:<br><br></p>\n<ol>\n<li>map url to Rails controller</li>\n<li>load data from database</li>\n<li>render partial (erb)</li>\n<li>render template</li>\n</ol>\n<br>All of these actions occurs on server side. If Angular.js is used, it might look like this:<br><br><ol>\n<li>map url to Rails controller</li>\n<li>render partial (static html)</li>\n<li>render Rails template</li>\n<li>load data from database through ajax</li>\n<li>render Angular.js template</li>\n</ol>\n<br>The last step occurs at client side, thus, save some workload from servers. If caches are involved, you might skip some data loading, which will save a lot. Thus, to archive the best performance, try use caches first. If not possible, Angular.js might give you better user experience via ajax.<br>Here is how to implement <span style=\"font-weight: bold;\">index</span> action with Angular.js<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n<a href=\"#n8\" name=\"n8\">8</a>\n<a href=\"#n9\" name=\"n9\">9</a>\n<strong><a href=\"#n10\" name=\"n10\">10</a></strong>\n<a href=\"#n11\" name=\"n11\">11</a>\n<a href=\"#n12\" name=\"n12\">12</a>\n<a href=\"#n13\" name=\"n13\">13</a>\n<a href=\"#n14\" name=\"n14\">14</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#777\"># app/controllers/tasks_controller.rb</span>\n<span style=\"color:#080;font-weight:bold\">class</span> <span style=\"color:#B06;font-weight:bold\">TasksController</span> &lt; <span style=\"color:#036;font-weight:bold\">ApplicationController</span>\n  <span style=\"color:#777\"># GET /tasks</span>\n  <span style=\"color:#777\"># GET /tasks.json</span>\n  <span style=\"color:#080;font-weight:bold\">def</span> <span style=\"color:#06B;font-weight:bold\">index</span>\n    respond_to <span style=\"color:#080;font-weight:bold\">do</span> |format|\n      format.html <span style=\"color:#777\"># index.html.erb</span>\n      format.json { \n        <span style=\"color:#33B\">@tasks</span> = <span style=\"color:#036;font-weight:bold\">Task</span>.all\n        render <span style=\"color:#606\">json</span>: <span style=\"color:#33B\">@tasks</span> \n      }\n    <span style=\"color:#080;font-weight:bold\">end</span>\n  <span style=\"color:#080;font-weight:bold\">end</span>\n...\n</pre></td>\n</tr></table>\n\n        </div>\nA text of 'loading...' will be show first until tasks are loaded through ajax. It gives users a hint if server is slow.<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/erb.png' alt='erb'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n<a href=\"#n8\" name=\"n8\">8</a>\n<a href=\"#n9\" name=\"n9\">9</a>\n<strong><a href=\"#n10\" name=\"n10\">10</a></strong>\n<a href=\"#n11\" name=\"n11\">11</a>\n<a href=\"#n12\" name=\"n12\">12</a>\n<a href=\"#n13\" name=\"n13\">13</a>\n<a href=\"#n14\" name=\"n14\">14</a>\n<a href=\"#n15\" name=\"n15\">15</a>\n<a href=\"#n16\" name=\"n16\">16</a>\n<a href=\"#n17\" name=\"n17\">17</a>\n<a href=\"#n18\" name=\"n18\">18</a>\n<a href=\"#n19\" name=\"n19\">19</a>\n<strong><a href=\"#n20\" name=\"n20\">20</a></strong>\n<a href=\"#n21\" name=\"n21\">21</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#777\">&lt;!--app/views/tasks/index.html.erb --&gt;</span>\n<span style=\"color:#070;font-weight:bold\">&lt;h1&gt;</span>Listing tasks<span style=\"color:#070;font-weight:bold\">&lt;/h1&gt;</span>\n<span style=\"color:#070;font-weight:bold\">&lt;div</span> <span style=\"color:#b48\">ng-controller</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">TasksController</span><span style=\"color:#710\">'</span></span> <span style=\"color:#b48\">ng-init</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">index()</span><span style=\"color:#710\">'</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span>\n<span style=\"color:#070;font-weight:bold\">&lt;span</span> <span style=\"color:#b48\">ng-hide</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">tasks</span><span style=\"color:#710\">'</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span>Loading<span style=\"color:#070;font-weight:bold\">&lt;/span&gt;</span>\n<span style=\"color:#070;font-weight:bold\">&lt;table&gt;</span>\n  <span style=\"color:#070;font-weight:bold\">&lt;tr&gt;</span>\n    <span style=\"color:#070;font-weight:bold\">&lt;th&gt;</span>Title<span style=\"color:#070;font-weight:bold\">&lt;/th&gt;</span>\n    <span style=\"color:#070;font-weight:bold\">&lt;th&gt;</span>Finished<span style=\"color:#070;font-weight:bold\">&lt;/th&gt;</span>\n    <span style=\"color:#070;font-weight:bold\">&lt;th&gt;</span><span style=\"color:#070;font-weight:bold\">&lt;/th&gt;</span>\n    <span style=\"color:#070;font-weight:bold\">&lt;th&gt;</span><span style=\"color:#070;font-weight:bold\">&lt;/th&gt;</span>\n    <span style=\"color:#070;font-weight:bold\">&lt;th&gt;</span><span style=\"color:#070;font-weight:bold\">&lt;/th&gt;</span>\n  <span style=\"color:#070;font-weight:bold\">&lt;/tr&gt;</span>\n    <span style=\"color:#070;font-weight:bold\">&lt;tr</span> <span style=\"color:#b48\">ng-repeat</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">task in tasks</span><span style=\"color:#710\">'</span></span> <span style=\"color:#b48\">id</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">task_{{task.id}}</span><span style=\"color:#710\">'</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span>\n      <span style=\"color:#070;font-weight:bold\">&lt;td&gt;</span>{{task.title}}<span style=\"color:#070;font-weight:bold\">&lt;/td&gt;</span>\n      <span style=\"color:#070;font-weight:bold\">&lt;td&gt;</span>{{task.finished}}<span style=\"color:#070;font-weight:bold\">&lt;/td&gt;</span>\n      <span style=\"color:#070;font-weight:bold\">&lt;td&gt;</span><span style=\"color:#070;font-weight:bold\">&lt;a</span> <span style=\"color:#b48\">href</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#710\">'</span></span> <span style=\"color:#b48\">ng-click</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">show(task.id)</span><span style=\"color:#710\">'</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span>Show<span style=\"color:#070;font-weight:bold\">&lt;/a&gt;</span><span style=\"color:#070;font-weight:bold\">&lt;/td&gt;</span>\n      <span style=\"color:#070;font-weight:bold\">&lt;td&gt;</span><span style=\"color:#070;font-weight:bold\">&lt;a</span> <span style=\"color:#b48\">href</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#710\">'</span></span> <span style=\"color:#b48\">ng-click</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">edit(task.id)</span><span style=\"color:#710\">'</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span>Edit<span style=\"color:#070;font-weight:bold\">&lt;/a&gt;</span><span style=\"color:#070;font-weight:bold\">&lt;/td&gt;</span>\n      <span style=\"color:#070;font-weight:bold\">&lt;td&gt;</span><span style=\"color:#070;font-weight:bold\">&lt;a</span> <span style=\"color:#b48\">href</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#710\">'</span></span> <span style=\"color:#b48\">ng-click</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">destroy(task.id)</span><span style=\"color:#710\">'</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span>Delete<span style=\"color:#070;font-weight:bold\">&lt;/a&gt;</span><span style=\"color:#070;font-weight:bold\">&lt;/td&gt;</span>\n    <span style=\"color:#070;font-weight:bold\">&lt;/tr&gt;</span>\n<span style=\"color:#070;font-weight:bold\">&lt;/table&gt;</span> \n...\n</pre></td>\n</tr></table>\n\n        </div>\n\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/javascript.png' alt='javascript'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n<a href=\"#n8\" name=\"n8\">8</a>\n<a href=\"#n9\" name=\"n9\">9</a>\n<strong><a href=\"#n10\" name=\"n10\">10</a></strong>\n<a href=\"#n11\" name=\"n11\">11</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#777\">/* app/assets/javascripts/tasks_controller.js */</span>\n<span style=\"color:#080;font-weight:bold\">function</span> <span style=\"color:#06B;font-weight:bold\">TasksController</span>(<span style=\"color:#369;font-weight:bold\">$scope</span>, Task) {\n<span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#369;font-weight:bold\">$scope</span>.<span style=\"color:#06B;font-weight:bold\">index</span> = <span style=\"color:#080;font-weight:bold\">function</span>() {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> console.log(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">Index</span><span style=\"color:#710\">'</span></span>);\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> Task.query(<span style=\"color:#080;font-weight:bold\">function</span>(resource) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#369;font-weight:bold\">$scope</span>.tasks = resource;\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> }, <span style=\"color:#080;font-weight:bold\">function</span>(response) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> console.log(response);\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> });\n<span style=\"color:#F00;background-color:#FAA\"> </span> };\n...\n</pre></td>\n</tr></table>\n\n        </div>\nThe rest is the same as in <a href=\"http://blog.berylliumwork.com/2012/09/tutorials-on-angularjs-and-rails-5.html\">Tutorial #5</a>.\n<p>\nIf pagination is used, eg. <a href=\"https://github.com/amatsuda/kaminari\">kaminari</a>, you need to transfer the page number from Rails controller to view so that Angular.js can do the correct ajax call. <a href=\"https://github.com/gazay/gon\">Gon</a> is a gem for that. You can also watch the <a href=\"http://railscasts.com/episodes/324-passing-data-to-javascript\">RailsCast</a>. So add this gem into Gemfile. Add <b>include_gon</b> in application template. Here are the code for Rails controllers and Angular.js controller:\n</p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n<a href=\"#n8\" name=\"n8\">8</a>\n<a href=\"#n9\" name=\"n9\">9</a>\n<strong><a href=\"#n10\" name=\"n10\">10</a></strong>\n</pre></td>\n  <td class=\"code\"><pre>  <span style=\"color:#080;font-weight:bold\">def</span> <span style=\"color:#06B;font-weight:bold\">index</span>\n    gon.page = params[<span style=\"color:#A60\">:page</span>] || <span style=\"color:#00D\">1</span>\n    respond_to <span style=\"color:#080;font-weight:bold\">do</span> |format|\n      format.html <span style=\"color:#777\"># index.html.erb</span>\n      format.json { \n        <span style=\"color:#33B\">@tasks</span> = <span style=\"color:#036;font-weight:bold\">Task</span>.page(params[<span style=\"color:#A60\">:page</span>]).per(<span style=\"color:#00D\">5</span>)\n        render <span style=\"color:#606\">json</span>: <span style=\"color:#33B\">@tasks</span> \n      }\n    <span style=\"color:#080;font-weight:bold\">end</span>\n  <span style=\"color:#080;font-weight:bold\">end</span>\n</pre></td>\n</tr></table>\n\n        </div>\n\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/javascript.png' alt='javascript'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n<a href=\"#n8\" name=\"n8\">8</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#369;font-weight:bold\">$scope</span>.<span style=\"color:#06B;font-weight:bold\">index</span> = <span style=\"color:#080;font-weight:bold\">function</span>(page) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> console.log(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">Index</span><span style=\"color:#710\">'</span></span>);\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> Task.query({<span style=\"color:#606\">page</span>: window.gon.page}, <span style=\"color:#080;font-weight:bold\">function</span>(resource) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#369;font-weight:bold\">$scope</span>.tasks = resource;\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> }, <span style=\"color:#080;font-weight:bold\">function</span>(response) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> console.log(response);\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> });\n<span style=\"color:#F00;background-color:#FAA\"> </span> };\n</pre></td>\n</tr></table>\n\n        </div>\nUnfortunately, you will notice that you cannot use page helper from kaminari because @tasks does not exist. Well, to fix it, you need to put @tasks outside format.json, thus, it will be called twice (one from html.erb and the other from json). The solution will be write the page helper in Angular.js. That would be outside the scope of this tutorial. <br>", pretty_preview: "<p>One advantage of Angular.js is that it might reduce the burden on servers. It depends on how you use it. A typical loading of page from Rails involves:<br><br></p>\n<ol>\n<li>map url to Rails controller</li>\n<li>load data from database</li>\n<li>render partial (erb)</li>\n<li>render template</li>\n</ol>\n<br>All of the...<br>"},
  {id: 405, name: "RESTful $resource in AngularJS ", category_id: 3, body: "<p><a href=\"http://docs.angularjs.org/api/ngResource.%24resource\">$resource</a> is a useful service that helps you interact with a REST API from your AngularJS application.</p>\n\n<p>$resource by default handles these five REST operations to (1) get a \nlist of items, (2) get an item, (3) insert an item, (4) update an item, \nand (5) delete an item:</p>(1) GET /collection<br>(2) GET /collection/:id<br>(3) POST /collection<br>(4) PUT /collection/:id<br>(5) DELETE /collection/:id<br><br>However, this might not be enough for you. Rails enables you to <a href=\"http://guides.rubyonrails.org/routing.html#adding-more-restful-actions\">define additional actions on your resources</a>, but how to wire them to $resource?<br><br>Turns out the solution is pretty simple:<br><pre><code class=\"javascript\">angular.module('myApp')<br>.factory('Station', ['$resource', 'apiUrl', ($resource, apiUrl) -&gt;<br>  Station = $resource(apiUrl   '/stations/:collectionRoute:id/:memberRoute', {<br>    id: '@id'<br>    collectionRoute: '@collectionRoute'<br>    memberRoute: '@memberRoute'<br>  }, {<br>    # Define methods on the Station object<br><br>    # /stations/autocomplete?term=Pra<br>    # Invoke as: Station.autocomplete({term: 'Pra'})<br>    autocomplete: {method: 'GET', isArray: true, params: {collectionRoute: 'autocomplete'}}<br><br>    # /stations/123/location<br>    # Invoke as: Station.location({id: 123})<br>    location: {method: 'GET', params: {memberRoute: 'location'}}<br>  })<br>  return Station<br>])</code></pre>$resource automatically binds <span style=\"font-weight: bold;\">id</span>, <span style=\"font-weight: bold;\">collectionRoute </span>and <span style=\"font-weight: bold;\">memberRoute</span> params into the URL, and all other params as query params (<span style=\"font-weight: bold;\">?param=</span>).<br><br>By wiring the collectionRoute/memberRoute params to custom methods, you can now call <span style=\"font-weight: bold;\">Station.autocomplete({term: 'Pra'})</span> as a collection action, and <span style=\"font-weight: bold;\">Station.location({id: 123})</span> as a member action.<br><br>P.S. Kudos to <a href=\"http://www.bennadel.com/blog/2433-Using-RESTful-Controllers-In-An-AngularJS-Resource.htm\">http://www.bennadel.com/blog/2433-Using-RESTful-Controllers-In-An-AngularJS-Resource.htm</a>, which was the original source for this tip.<br>", created_at: "2013-12-13 19:56:10", updated_at: "2013-12-13 19:56:10", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "<p><a href=\"http://docs.angularjs.org/api/ngResource.%24resource\">$resource</a> is a useful service that helps you interact with a REST API from your AngularJS application.</p>\n\n<p>$resource by default handles these five REST operations to (1) get a \nlist of items, (2) get an item, (3) insert an item, (4) update an item, \nand (5) delete an item:</p>(1) GET /collection<br>(2) GET /collection/:id<br>(3) POST /collection<br>(4) PUT /collection/:id<br>(5) DELETE /collection/:id<br><br>However, this might not be enough for you. Rails enables you to <a href=\"http://guides.rubyonrails.org/routing.html#adding-more-restful-actions\">define additional actions on your resources</a>, but how to wire them to $resource?<br><br>Turns out the solution is pretty simple:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/javascript.png' alt='javascript'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n<a href=\"#n8\" name=\"n8\">8</a>\n<a href=\"#n9\" name=\"n9\">9</a>\n<strong><a href=\"#n10\" name=\"n10\">10</a></strong>\n<a href=\"#n11\" name=\"n11\">11</a>\n<a href=\"#n12\" name=\"n12\">12</a>\n<a href=\"#n13\" name=\"n13\">13</a>\n<a href=\"#n14\" name=\"n14\">14</a>\n<a href=\"#n15\" name=\"n15\">15</a>\n<a href=\"#n16\" name=\"n16\">16</a>\n<a href=\"#n17\" name=\"n17\">17</a>\n<a href=\"#n18\" name=\"n18\">18</a>\n<a href=\"#n19\" name=\"n19\">19</a>\n</pre></td>\n  <td class=\"code\"><pre>angular.module(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">myApp</span><span style=\"color:#710\">'</span></span>)\n.factory(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">Station</span><span style=\"color:#710\">'</span></span>, [<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">$resource</span><span style=\"color:#710\">'</span></span>, <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">apiUrl</span><span style=\"color:#710\">'</span></span>, (<span style=\"color:#369;font-weight:bold\">$resource</span>, apiUrl) -&gt;\n<span style=\"color:#F00;background-color:#FAA\"> </span> Station = <span style=\"color:#369;font-weight:bold\">$resource</span>(apiUrl   <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">/stations/:collectionRoute:id/:memberRoute</span><span style=\"color:#710\">'</span></span>, {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#606\">id</span>: <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">@id</span><span style=\"color:#710\">'</span></span>\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> collectionRoute: <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">@collectionRoute</span><span style=\"color:#710\">'</span></span>\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> memberRoute: <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">@memberRoute</span><span style=\"color:#710\">'</span></span>\n<span style=\"color:#F00;background-color:#FAA\"> </span> }, {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#F00;background-color:#FAA\">#</span> Define methods on the Station object\n\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#F00;background-color:#FAA\">#</span> <span style=\"background-color:hsla(300,100%,50%,0.06)\"><span style=\"color:#404\">/</span><span style=\"color:#808\">stations</span><span style=\"color:#404\">/</span></span>autocomplete?term=Pra\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#F00;background-color:#FAA\">#</span> Invoke as: Station.autocomplete({<span style=\"color:#606\">term</span>: <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">Pra</span><span style=\"color:#710\">'</span></span>})\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> autocomplete: {<span style=\"color:#606\">method</span>: <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">GET</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#606\">isArray</span>: <span style=\"color:#069\">true</span>, <span style=\"color:#606\">params</span>: {<span style=\"color:#606\">collectionRoute</span>: <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">autocomplete</span><span style=\"color:#710\">'</span></span>}}\n\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#F00;background-color:#FAA\">#</span> <span style=\"background-color:hsla(300,100%,50%,0.06)\"><span style=\"color:#404\">/</span><span style=\"color:#808\">stations</span><span style=\"color:#404\">/</span></span><span style=\"color:#00D\">123</span>/location\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#F00;background-color:#FAA\">#</span> Invoke as: Station.location({<span style=\"color:#606\">id</span>: <span style=\"color:#00D\">123</span>})\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> location: {<span style=\"color:#606\">method</span>: <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">GET</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#606\">params</span>: {<span style=\"color:#606\">memberRoute</span>: <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">location</span><span style=\"color:#710\">'</span></span>}}\n<span style=\"color:#F00;background-color:#FAA\"> </span> })\n<span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#080;font-weight:bold\">return</span> Station\n])\n</pre></td>\n</tr></table>\n\n        </div>\n$resource automatically binds <span style=\"font-weight: bold;\">id</span>, <span style=\"font-weight: bold;\">collectionRoute </span>and <span style=\"font-weight: bold;\">memberRoute</span> params into the URL, and all other params as query params (<span style=\"font-weight: bold;\">?param=</span>).<br><br>By wiring the collectionRoute/memberRoute params to custom methods, you can now call <span style=\"font-weight: bold;\">Station.autocomplete({term: 'Pra'})</span> as a collection action, and <span style=\"font-weight: bold;\">Station.location({id: 123})</span> as a member action.<br><br>P.S. Kudos to <a href=\"http://www.bennadel.com/blog/2433-Using-RESTful-Controllers-In-An-AngularJS-Resource.htm\">http://www.bennadel.com/blog/2433-Using-RESTful-Controllers-In-An-AngularJS-Resource.htm</a>, which was the original source for this tip.<br>", pretty_preview: "<p><a href=\"http://docs.angularjs.org/api/ngResource.%24resource\">$resource</a> is a useful service that helps you interact with a REST API from your AngularJS application.</p>\n\n<p>$resource by default handles these five REST operations to (1) get a \nlist of items, (2) get an item, (3) insert an item, (4) update an item, \nand (5) delet...</p>"},
  {id: 406, name: " Tutorials on Angular.js and Rails #5 ", category_id: 3, body: "<p>To map resources of Angular.js to Rails is easy, but not obvious. They both offer their own verb (see comparision in <a href=\"http://blog.berylliumwork.com/2012/09/tutorials-on-angularjs-and-rails.html\">tutorial #1</a>). The basic of resource has been shown in <a href=\"http://blog.berylliumwork.com/2012/09/tutorials-on-angularjs-and-rails-4.html\">previous tutorial</a>:\n<br></p>\n<pre><code class=\"javascript\">angular.module('momentumService', ['ngResource']).<br>  factory('Task', function($resource) {<br>    return $resource('/tasks/:task_id', {}, {<br>      destroy: { method: 'DELETE' }<br>    });<br>  });</code></pre>To add more resources, try this:<br><pre><code class=\"javascript\">angular.module('momentumService', ['ngResource']).<br>  factory('Task', function($resource) {<br>    return $resource('/tasks/:task_id', {}, {<br>      index: {method: 'GET', isArray: true},<br>      new: { method: 'GET'),<br>      create: {method: 'POST'),<br>      show: { method: 'GET'),<br>      edit: { method: 'GET'),<br>      update: { method: 'PUT'),<br>      destroy: { method: 'DELETE' }<br>    });<br>  });</code></pre>This approach has two problems. First, several resources (<b>new</b>, <b>show</b> and <b>edit</b>)\n use the same http verb. Second, resource in Angular.js maps to one \npath, but in Rails, resource might maps to different path (eg. '<b>/tasks</b>' for <b>index</b>, '<b>/tasks/1</b>' for <b>show</b> and '<b>/tasks/1/edit</b>' for <b>edit</b>). Fortunately, this problem can be fixed on the controller level. Let's see the code first:\n<br><pre><code class=\"javascript\">// Resource<br>angular.module('momentumService', ['ngResource']).<br>  factory('Task', function($resource) {<br>    return $resource('/tasks/:task_id/:action', {task_id:'@id'}, {<br>      update: { method: 'PUT' }<br>    });<br>  });<br><br>// Controller<br>function TasksController($scope, Task) {<br>  $scope.index = function() {<br>    console.log('Index');<br>    Task.query(function(resource) {<br>      console.log(resource);<br>    }, function(response) {<br>      console.log(response);<br>    });<br>  };<br>  $scope.new = function() {<br>    console.log('New');<br>    Task.get({action: 'new'}, function(resource) {<br>      console.log(resource);<br>    }, function(response) {<br>      console.log(response);<br>    });<br>  };<br>  $scope.show = function(t_id) {<br>    console.log('Show');<br>    Task.get({task_id: t_id}, function(resource) {<br>      console.log(resource);<br>    }, function(response) {<br>      console.log(response);<br>    });<br>  };<br>  $scope.edit = function(t_id) {<br>    console.log('Edit');<br>    Task.get({task_id: t_id, action: 'edit'}, function(resource) {<br>      console.log(resource);<br>    }, function(response) {<br>      console.log(response);<br>    });<br>  };<br>  // data in JSON, eg, {title: 'new task'}<br>  $scope.create = function(data) {<br>    console.log('Create');<br>    Task.save({}, data, function(resource) {<br>      console.log(resource);<br>    }, function(response) {<br>      console.log(response);<br>    });<br>  };<br>  // data in JSON, eg, {title: 'edited task'}<br>  $scope.update = function(t_id, data) {<br>    console.log('Update');<br>    Task.update({task_id: t_id}, data, function(resource) {<br>      console.log(resource);<br>    }, function(response) {<br>      console.log(response);<br>    });<br>  };<br>  $scope.destroy = function(t_id) {<br>    console.log('Destroy');<br>    Task.delete({task_id: t_id}, function(resource) {<br>      // ajax success<br>      $('#task_' t_id).closest('tr').fadeOut();  <br>    }, function (response) {<br>      // ajax failed<br>      console.log(response);<br>    });<br>  };<br>  $scope.action = function(t_id, a) {<br>    console.log('Other action');<br>    Task.get({task_id: t_id, action: a}, function(resource) {<br>    }, function(response) {<br>      console.log(response);<br>    });<br>  };<br>  $scope.upcase = function(t_id) {<br>    Task.get({task_id: t_id}, function(resource) {<br>      var task = resource;<br>      console.log(task);<br>      task.title = angular.uppercase(task.title);<br>      console.log(task);<br>      task.$update();<br>    }, function(response) {<br>      console.log(response);<br>    });<br>  }<br>};</code></pre>The <b>Task</b> uses standard Angular.js resource. We only add <b>update</b>, which is missing in Angular.js resource. Then in controller, we define seven actions, plus one called <b>action</b>\n for extra action as example. Note that the seven standard actions, we \nuse class method to talk to Rails. The last method, called <b>upcase</b>, is an example that it used the instance method. In this case, :task_id will maps to 'id\" from JSON because we define <b>'@id'</b> in our resource. Lastly, here are the examples for calling these actions:\n<br><pre><code class=\"erb\">&lt;div ng-controller='TasksController'&gt;<br>&lt;%= link_to 'Index', '', :'ng-click' =&gt; \"index()\" %&gt;<br>&lt;%= link_to 'New', '', :'ng-click' =&gt; \"new()\" %&gt;<br>&lt;%= link_to 'show', '', :'ng-click' =&gt; \"show(\#{task.id})\" %&gt;<br>&lt;%= link_to 'edit', '', :'ng-click' =&gt; \"edit(\#{task.id})\" %&gt;<br>&lt;%= link_to 'create', '', :'ng-click' =&gt; \"create({title: 'new task'})\" %&gt;<br>&lt;%= link_to 'update', '', :'ng-click' =&gt; \"update(\#{task.id}, {title: '<br>updated task'})\" %&gt;<br>&lt;%= link_to 'delete', '', :'ng-click' =&gt; \"destroy(\#{task.id})\", :'data<br>-confirm' =&gt; 'Are you sure?', :id =&gt; \"task_\#{task.id}\" %&gt;<br>&lt;%= link_to 'action', '', :'ng-click' =&gt; \"action(\#{task.id}, 'action')\" %&gt;<br>&lt;%= link_to 'upcase', '', :'ng-click' =&gt; \"upcase(\#{task.id})\" %&gt;<br>&lt;/div&gt;</code></pre>\n<p>\nIf you are careful enough, you will notice that for <b>delete</b> action, <b>data-confirm</b> is called after the ajax action is executed. Thus, you need to modify the destroy() action in Angular.js controller for that. \n</p>\n<p>\nOnce you can map Angular.js actions to Rails one, you are free to decide\n which parts of your web application stay in Rails and which part in \nAngular.js.\n</p>", created_at: "2013-12-13 19:56:10", updated_at: "2013-12-13 19:56:10", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "<p>To map resources of Angular.js to Rails is easy, but not obvious. They both offer their own verb (see comparision in <a href=\"http://blog.berylliumwork.com/2012/09/tutorials-on-angularjs-and-rails.html\">tutorial #1</a>). The basic of resource has been shown in <a href=\"http://blog.berylliumwork.com/2012/09/tutorials-on-angularjs-and-rails-4.html\">previous tutorial</a>:\n<br></p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/javascript.png' alt='javascript'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n</pre></td>\n  <td class=\"code\"><pre>angular.module(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">momentumService</span><span style=\"color:#710\">'</span></span>, [<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">ngResource</span><span style=\"color:#710\">'</span></span>]).\n<span style=\"color:#F00;background-color:#FAA\"> </span> factory(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">Task</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#080;font-weight:bold\">function</span>(<span style=\"color:#369;font-weight:bold\">$resource</span>) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#080;font-weight:bold\">return</span> <span style=\"color:#369;font-weight:bold\">$resource</span>(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">/tasks/:task_id</span><span style=\"color:#710\">'</span></span>, {}, {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#606\">destroy</span>: { <span style=\"color:#606\">method</span>: <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">DELETE</span><span style=\"color:#710\">'</span></span> }\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> });\n<span style=\"color:#F00;background-color:#FAA\"> </span> });\n</pre></td>\n</tr></table>\n\n        </div>\nTo add more resources, try this:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/javascript.png' alt='javascript'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n<a href=\"#n8\" name=\"n8\">8</a>\n<a href=\"#n9\" name=\"n9\">9</a>\n<strong><a href=\"#n10\" name=\"n10\">10</a></strong>\n<a href=\"#n11\" name=\"n11\">11</a>\n<a href=\"#n12\" name=\"n12\">12</a>\n</pre></td>\n  <td class=\"code\"><pre>angular.module(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">momentumService</span><span style=\"color:#710\">'</span></span>, [<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">ngResource</span><span style=\"color:#710\">'</span></span>]).\n<span style=\"color:#F00;background-color:#FAA\"> </span> factory(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">Task</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#080;font-weight:bold\">function</span>(<span style=\"color:#369;font-weight:bold\">$resource</span>) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#080;font-weight:bold\">return</span> <span style=\"color:#369;font-weight:bold\">$resource</span>(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">/tasks/:task_id</span><span style=\"color:#710\">'</span></span>, {}, {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#606\">index</span>: {<span style=\"color:#606\">method</span>: <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">GET</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#606\">isArray</span>: <span style=\"color:#069\">true</span>},\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#080;font-weight:bold\">new</span>: { <span style=\"color:#606\">method</span>: <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">GET</span><span style=\"color:#710\">'</span></span>),\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#606\">create</span>: {<span style=\"color:#606\">method</span>: <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">POST</span><span style=\"color:#710\">'</span></span>),\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#606\">show</span>: { <span style=\"color:#606\">method</span>: <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">GET</span><span style=\"color:#710\">'</span></span>),\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#606\">edit</span>: { <span style=\"color:#606\">method</span>: <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">GET</span><span style=\"color:#710\">'</span></span>),\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#606\">update</span>: { <span style=\"color:#606\">method</span>: <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">PUT</span><span style=\"color:#710\">'</span></span>),\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#606\">destroy</span>: { <span style=\"color:#606\">method</span>: <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">DELETE</span><span style=\"color:#710\">'</span></span> }\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> });\n<span style=\"color:#F00;background-color:#FAA\"> </span> });\n</pre></td>\n</tr></table>\n\n        </div>\nThis approach has two problems. First, several resources (<b>new</b>, <b>show</b> and <b>edit</b>)\n use the same http verb. Second, resource in Angular.js maps to one \npath, but in Rails, resource might maps to different path (eg. '<b>/tasks</b>' for <b>index</b>, '<b>/tasks/1</b>' for <b>show</b> and '<b>/tasks/1/edit</b>' for <b>edit</b>). Fortunately, this problem can be fixed on the controller level. Let's see the code first:\n<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/javascript.png' alt='javascript'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n<a href=\"#n8\" name=\"n8\">8</a>\n<a href=\"#n9\" name=\"n9\">9</a>\n<strong><a href=\"#n10\" name=\"n10\">10</a></strong>\n<a href=\"#n11\" name=\"n11\">11</a>\n<a href=\"#n12\" name=\"n12\">12</a>\n<a href=\"#n13\" name=\"n13\">13</a>\n<a href=\"#n14\" name=\"n14\">14</a>\n<a href=\"#n15\" name=\"n15\">15</a>\n<a href=\"#n16\" name=\"n16\">16</a>\n<a href=\"#n17\" name=\"n17\">17</a>\n<a href=\"#n18\" name=\"n18\">18</a>\n<a href=\"#n19\" name=\"n19\">19</a>\n<strong><a href=\"#n20\" name=\"n20\">20</a></strong>\n<a href=\"#n21\" name=\"n21\">21</a>\n<a href=\"#n22\" name=\"n22\">22</a>\n<a href=\"#n23\" name=\"n23\">23</a>\n<a href=\"#n24\" name=\"n24\">24</a>\n<a href=\"#n25\" name=\"n25\">25</a>\n<a href=\"#n26\" name=\"n26\">26</a>\n<a href=\"#n27\" name=\"n27\">27</a>\n<a href=\"#n28\" name=\"n28\">28</a>\n<a href=\"#n29\" name=\"n29\">29</a>\n<strong><a href=\"#n30\" name=\"n30\">30</a></strong>\n<a href=\"#n31\" name=\"n31\">31</a>\n<a href=\"#n32\" name=\"n32\">32</a>\n<a href=\"#n33\" name=\"n33\">33</a>\n<a href=\"#n34\" name=\"n34\">34</a>\n<a href=\"#n35\" name=\"n35\">35</a>\n<a href=\"#n36\" name=\"n36\">36</a>\n<a href=\"#n37\" name=\"n37\">37</a>\n<a href=\"#n38\" name=\"n38\">38</a>\n<a href=\"#n39\" name=\"n39\">39</a>\n<strong><a href=\"#n40\" name=\"n40\">40</a></strong>\n<a href=\"#n41\" name=\"n41\">41</a>\n<a href=\"#n42\" name=\"n42\">42</a>\n<a href=\"#n43\" name=\"n43\">43</a>\n<a href=\"#n44\" name=\"n44\">44</a>\n<a href=\"#n45\" name=\"n45\">45</a>\n<a href=\"#n46\" name=\"n46\">46</a>\n<a href=\"#n47\" name=\"n47\">47</a>\n<a href=\"#n48\" name=\"n48\">48</a>\n<a href=\"#n49\" name=\"n49\">49</a>\n<strong><a href=\"#n50\" name=\"n50\">50</a></strong>\n<a href=\"#n51\" name=\"n51\">51</a>\n<a href=\"#n52\" name=\"n52\">52</a>\n<a href=\"#n53\" name=\"n53\">53</a>\n<a href=\"#n54\" name=\"n54\">54</a>\n<a href=\"#n55\" name=\"n55\">55</a>\n<a href=\"#n56\" name=\"n56\">56</a>\n<a href=\"#n57\" name=\"n57\">57</a>\n<a href=\"#n58\" name=\"n58\">58</a>\n<a href=\"#n59\" name=\"n59\">59</a>\n<strong><a href=\"#n60\" name=\"n60\">60</a></strong>\n<a href=\"#n61\" name=\"n61\">61</a>\n<a href=\"#n62\" name=\"n62\">62</a>\n<a href=\"#n63\" name=\"n63\">63</a>\n<a href=\"#n64\" name=\"n64\">64</a>\n<a href=\"#n65\" name=\"n65\">65</a>\n<a href=\"#n66\" name=\"n66\">66</a>\n<a href=\"#n67\" name=\"n67\">67</a>\n<a href=\"#n68\" name=\"n68\">68</a>\n<a href=\"#n69\" name=\"n69\">69</a>\n<strong><a href=\"#n70\" name=\"n70\">70</a></strong>\n<a href=\"#n71\" name=\"n71\">71</a>\n<a href=\"#n72\" name=\"n72\">72</a>\n<a href=\"#n73\" name=\"n73\">73</a>\n<a href=\"#n74\" name=\"n74\">74</a>\n<a href=\"#n75\" name=\"n75\">75</a>\n<a href=\"#n76\" name=\"n76\">76</a>\n<a href=\"#n77\" name=\"n77\">77</a>\n<a href=\"#n78\" name=\"n78\">78</a>\n<a href=\"#n79\" name=\"n79\">79</a>\n<strong><a href=\"#n80\" name=\"n80\">80</a></strong>\n<a href=\"#n81\" name=\"n81\">81</a>\n<a href=\"#n82\" name=\"n82\">82</a>\n<a href=\"#n83\" name=\"n83\">83</a>\n<a href=\"#n84\" name=\"n84\">84</a>\n<a href=\"#n85\" name=\"n85\">85</a>\n<a href=\"#n86\" name=\"n86\">86</a>\n<a href=\"#n87\" name=\"n87\">87</a>\n<a href=\"#n88\" name=\"n88\">88</a>\n<a href=\"#n89\" name=\"n89\">89</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#777\">// Resource</span>\nangular.module(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">momentumService</span><span style=\"color:#710\">'</span></span>, [<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">ngResource</span><span style=\"color:#710\">'</span></span>]).\n<span style=\"color:#F00;background-color:#FAA\"> </span> factory(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">Task</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#080;font-weight:bold\">function</span>(<span style=\"color:#369;font-weight:bold\">$resource</span>) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#080;font-weight:bold\">return</span> <span style=\"color:#369;font-weight:bold\">$resource</span>(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">/tasks/:task_id/:action</span><span style=\"color:#710\">'</span></span>, {<span style=\"color:#606\">task_id</span>:<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">@id</span><span style=\"color:#710\">'</span></span>}, {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#606\">update</span>: { <span style=\"color:#606\">method</span>: <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">PUT</span><span style=\"color:#710\">'</span></span> }\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> });\n<span style=\"color:#F00;background-color:#FAA\"> </span> });\n\n<span style=\"color:#777\">// Controller</span>\n<span style=\"color:#080;font-weight:bold\">function</span> <span style=\"color:#06B;font-weight:bold\">TasksController</span>(<span style=\"color:#369;font-weight:bold\">$scope</span>, Task) {\n<span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#369;font-weight:bold\">$scope</span>.<span style=\"color:#06B;font-weight:bold\">index</span> = <span style=\"color:#080;font-weight:bold\">function</span>() {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> console.log(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">Index</span><span style=\"color:#710\">'</span></span>);\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> Task.query(<span style=\"color:#080;font-weight:bold\">function</span>(resource) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> console.log(resource);\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> }, <span style=\"color:#080;font-weight:bold\">function</span>(response) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> console.log(response);\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> });\n<span style=\"color:#F00;background-color:#FAA\"> </span> };\n<span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#369;font-weight:bold\">$scope</span>.<span style=\"color:#080;font-weight:bold\">new</span> = <span style=\"color:#080;font-weight:bold\">function</span>() {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> console.log(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">New</span><span style=\"color:#710\">'</span></span>);\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> Task.get({<span style=\"color:#606\">action</span>: <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">new</span><span style=\"color:#710\">'</span></span>}, <span style=\"color:#080;font-weight:bold\">function</span>(resource) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> console.log(resource);\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> }, <span style=\"color:#080;font-weight:bold\">function</span>(response) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> console.log(response);\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> });\n<span style=\"color:#F00;background-color:#FAA\"> </span> };\n<span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#369;font-weight:bold\">$scope</span>.<span style=\"color:#06B;font-weight:bold\">show</span> = <span style=\"color:#080;font-weight:bold\">function</span>(t_id) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> console.log(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">Show</span><span style=\"color:#710\">'</span></span>);\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> Task.get({<span style=\"color:#606\">task_id</span>: t_id}, <span style=\"color:#080;font-weight:bold\">function</span>(resource) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> console.log(resource);\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> }, <span style=\"color:#080;font-weight:bold\">function</span>(response) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> console.log(response);\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> });\n<span style=\"color:#F00;background-color:#FAA\"> </span> };\n<span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#369;font-weight:bold\">$scope</span>.<span style=\"color:#06B;font-weight:bold\">edit</span> = <span style=\"color:#080;font-weight:bold\">function</span>(t_id) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> console.log(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">Edit</span><span style=\"color:#710\">'</span></span>);\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> Task.get({<span style=\"color:#606\">task_id</span>: t_id, <span style=\"color:#606\">action</span>: <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">edit</span><span style=\"color:#710\">'</span></span>}, <span style=\"color:#080;font-weight:bold\">function</span>(resource) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> console.log(resource);\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> }, <span style=\"color:#080;font-weight:bold\">function</span>(response) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> console.log(response);\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> });\n<span style=\"color:#F00;background-color:#FAA\"> </span> };\n<span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#777\">// data in JSON, eg, {title: 'new task'}</span>\n<span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#369;font-weight:bold\">$scope</span>.<span style=\"color:#06B;font-weight:bold\">create</span> = <span style=\"color:#080;font-weight:bold\">function</span>(data) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> console.log(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">Create</span><span style=\"color:#710\">'</span></span>);\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> Task.save({}, data, <span style=\"color:#080;font-weight:bold\">function</span>(resource) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> console.log(resource);\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> }, <span style=\"color:#080;font-weight:bold\">function</span>(response) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> console.log(response);\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> });\n<span style=\"color:#F00;background-color:#FAA\"> </span> };\n<span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#777\">// data in JSON, eg, {title: 'edited task'}</span>\n<span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#369;font-weight:bold\">$scope</span>.<span style=\"color:#06B;font-weight:bold\">update</span> = <span style=\"color:#080;font-weight:bold\">function</span>(t_id, data) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> console.log(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">Update</span><span style=\"color:#710\">'</span></span>);\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> Task.update({<span style=\"color:#606\">task_id</span>: t_id}, data, <span style=\"color:#080;font-weight:bold\">function</span>(resource) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> console.log(resource);\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> }, <span style=\"color:#080;font-weight:bold\">function</span>(response) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> console.log(response);\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> });\n<span style=\"color:#F00;background-color:#FAA\"> </span> };\n<span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#369;font-weight:bold\">$scope</span>.<span style=\"color:#06B;font-weight:bold\">destroy</span> = <span style=\"color:#080;font-weight:bold\">function</span>(t_id) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> console.log(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">Destroy</span><span style=\"color:#710\">'</span></span>);\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> Task.<span style=\"color:#080;font-weight:bold\">delete</span>({<span style=\"color:#606\">task_id</span>: t_id}, <span style=\"color:#080;font-weight:bold\">function</span>(resource) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#777\">// ajax success</span>\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#369;font-weight:bold\">$</span>(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">#task_</span><span style=\"color:#710\">'</span></span> t_id).closest(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">tr</span><span style=\"color:#710\">'</span></span>).fadeOut(); <span style=\"color:#F00;background-color:#FAA\"> </span>\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> }, <span style=\"color:#080;font-weight:bold\">function</span> (response) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#777\">// ajax failed</span>\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> console.log(response);\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> });\n<span style=\"color:#F00;background-color:#FAA\"> </span> };\n<span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#369;font-weight:bold\">$scope</span>.<span style=\"color:#06B;font-weight:bold\">action</span> = <span style=\"color:#080;font-weight:bold\">function</span>(t_id, a) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> console.log(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">Other action</span><span style=\"color:#710\">'</span></span>);\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> Task.get({<span style=\"color:#606\">task_id</span>: t_id, <span style=\"color:#606\">action</span>: a}, <span style=\"color:#080;font-weight:bold\">function</span>(resource) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> }, <span style=\"color:#080;font-weight:bold\">function</span>(response) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> console.log(response);\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> });\n<span style=\"color:#F00;background-color:#FAA\"> </span> };\n<span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#369;font-weight:bold\">$scope</span>.<span style=\"color:#06B;font-weight:bold\">upcase</span> = <span style=\"color:#080;font-weight:bold\">function</span>(t_id) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> Task.get({<span style=\"color:#606\">task_id</span>: t_id}, <span style=\"color:#080;font-weight:bold\">function</span>(resource) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#080;font-weight:bold\">var</span> task = resource;\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> console.log(task);\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> task.title = angular.uppercase(task.title);\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> console.log(task);\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> task.<span style=\"color:#369;font-weight:bold\">$update</span>();\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> }, <span style=\"color:#080;font-weight:bold\">function</span>(response) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> console.log(response);\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> });\n<span style=\"color:#F00;background-color:#FAA\"> </span> }\n};\n</pre></td>\n</tr></table>\n\n        </div>\nThe <b>Task</b> uses standard Angular.js resource. We only add <b>update</b>, which is missing in Angular.js resource. Then in controller, we define seven actions, plus one called <b>action</b>\n for extra action as example. Note that the seven standard actions, we \nuse class method to talk to Rails. The last method, called <b>upcase</b>, is an example that it used the instance method. In this case, :task_id will maps to 'id\" from JSON because we define <b>'@id'</b> in our resource. Lastly, here are the examples for calling these actions:\n<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/erb.png' alt='erb'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n<a href=\"#n8\" name=\"n8\">8</a>\n<a href=\"#n9\" name=\"n9\">9</a>\n<strong><a href=\"#n10\" name=\"n10\">10</a></strong>\n<a href=\"#n11\" name=\"n11\">11</a>\n<a href=\"#n12\" name=\"n12\">12</a>\n<a href=\"#n13\" name=\"n13\">13</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#070;font-weight:bold\">&lt;div</span> <span style=\"color:#b48\">ng-controller</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">TasksController</span><span style=\"color:#710\">'</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span>\n<span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> link_to <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">Index</span><span style=\"color:#710\">'</span></span>, <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#A60\"><span style=\"color:#A60\">:</span><span style=\"color:#740\">'</span><span style=\"color:#A60\">ng-click</span><span style=\"color:#740\">'</span></span> =&gt; <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">index()</span><span style=\"color:#710\">&quot;</span></span> <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>\n<span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> link_to <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">New</span><span style=\"color:#710\">'</span></span>, <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#A60\"><span style=\"color:#A60\">:</span><span style=\"color:#740\">'</span><span style=\"color:#A60\">ng-click</span><span style=\"color:#740\">'</span></span> =&gt; <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">new()</span><span style=\"color:#710\">&quot;</span></span> <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>\n<span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> link_to <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">show</span><span style=\"color:#710\">'</span></span>, <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#A60\"><span style=\"color:#A60\">:</span><span style=\"color:#740\">'</span><span style=\"color:#A60\">ng-click</span><span style=\"color:#740\">'</span></span> =&gt; <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">show(</span><span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">\#{</span>task.id<span style=\"font-weight:bold;color:#666\">}</span></span><span style=\"color:#D20\">)</span><span style=\"color:#710\">&quot;</span></span> <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>\n<span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> link_to <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">edit</span><span style=\"color:#710\">'</span></span>, <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#A60\"><span style=\"color:#A60\">:</span><span style=\"color:#740\">'</span><span style=\"color:#A60\">ng-click</span><span style=\"color:#740\">'</span></span> =&gt; <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">edit(</span><span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">\#{</span>task.id<span style=\"font-weight:bold;color:#666\">}</span></span><span style=\"color:#D20\">)</span><span style=\"color:#710\">&quot;</span></span> <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>\n<span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> link_to <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">create</span><span style=\"color:#710\">'</span></span>, <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#A60\"><span style=\"color:#A60\">:</span><span style=\"color:#740\">'</span><span style=\"color:#A60\">ng-click</span><span style=\"color:#740\">'</span></span> =&gt; <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">create({title: 'new task'})</span><span style=\"color:#710\">&quot;</span></span> <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>\n<span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> link_to <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">update</span><span style=\"color:#710\">'</span></span>, <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#A60\"><span style=\"color:#A60\">:</span><span style=\"color:#740\">'</span><span style=\"color:#A60\">ng-click</span><span style=\"color:#740\">'</span></span> =&gt; <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">update(</span><span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">\#{</span>task.id<span style=\"font-weight:bold;color:#666\">}</span></span><span style=\"color:#D20\">, {title: '\nupdated task'})</span><span style=\"color:#710\">&quot;</span></span> <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>\n<span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> link_to <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">delete</span><span style=\"color:#710\">'</span></span>, <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#A60\"><span style=\"color:#A60\">:</span><span style=\"color:#740\">'</span><span style=\"color:#A60\">ng-click</span><span style=\"color:#740\">'</span></span> =&gt; <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">destroy(</span><span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">\#{</span>task.id<span style=\"font-weight:bold;color:#666\">}</span></span><span style=\"color:#D20\">)</span><span style=\"color:#710\">&quot;</span></span>, <span style=\"color:#A60\"><span style=\"color:#A60\">:</span><span style=\"color:#740\">'</span><span style=\"color:#A60\">data\n-confirm</span><span style=\"color:#740\">'</span></span> =&gt; <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">Are you sure?</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#A60\">:id</span> =&gt; <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">task_</span><span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">\#{</span>task.id<span style=\"font-weight:bold;color:#666\">}</span></span><span style=\"color:#710\">&quot;</span></span> <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>\n<span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> link_to <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">action</span><span style=\"color:#710\">'</span></span>, <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#A60\"><span style=\"color:#A60\">:</span><span style=\"color:#740\">'</span><span style=\"color:#A60\">ng-click</span><span style=\"color:#740\">'</span></span> =&gt; <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">action(</span><span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">\#{</span>task.id<span style=\"font-weight:bold;color:#666\">}</span></span><span style=\"color:#D20\">, 'action')</span><span style=\"color:#710\">&quot;</span></span> <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>\n<span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> link_to <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">upcase</span><span style=\"color:#710\">'</span></span>, <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#A60\"><span style=\"color:#A60\">:</span><span style=\"color:#740\">'</span><span style=\"color:#A60\">ng-click</span><span style=\"color:#740\">'</span></span> =&gt; <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">upcase(</span><span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">\#{</span>task.id<span style=\"font-weight:bold;color:#666\">}</span></span><span style=\"color:#D20\">)</span><span style=\"color:#710\">&quot;</span></span> <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>\n<span style=\"color:#070;font-weight:bold\">&lt;/div&gt;</span>\n</pre></td>\n</tr></table>\n\n        </div>\n\n<p>\nIf you are careful enough, you will notice that for <b>delete</b> action, <b>data-confirm</b> is called after the ajax action is executed. Thus, you need to modify the destroy() action in Angular.js controller for that. \n</p>\n<p>\nOnce you can map Angular.js actions to Rails one, you are free to decide\n which parts of your web application stay in Rails and which part in \nAngular.js.\n</p>", pretty_preview: "<p>To map resources of Angular.js to Rails is easy, but not obvious. They both offer their own verb (see comparision in <a href=\"http://blog.berylliumwork.com/2012/09/tutorials-on-angularjs-and-rails.html\">tutorial #1</a>). The basic of resource has been shown in <a href=\"http://blog.berylliumwork.com/2012/09/tutorials-on-angularjs-and-rails-4.html\">previous tutorial</a>:\n<br></p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/javascript.png' alt='javascript'/>\n              </div>\n          <div class=\"CodeRay\">\n  <div class=\"code\"><pre>angular.module(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">momentumService</span><span style=\"color:#710\">'</span></span>, [<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">ngResource</span><span style=\"color:#710\">'</span></span>]).\n<span style=\"color:#F00;background-color:#FAA\"> </span> factory(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">Task</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#080;font-weight:bold\">function</span>(<span style=\"color:#369;font-weight:bold\">$resource</span>) ...\n\n</pre></div>\n</div>\n\n        </div>\n"},
  {id: 407, name: "Tutorials on Angular.js and Rails #4", category_id: 3, body: "<p>Let's begin with simple ajax call from Angular.js to Rails. This action \ncan be easily implemented by jQuery. When things becomes complicated, \nAngular.js might become handy.<br><br>\nHere is a very good article on implementing 'delete' action with ajax: <a href=\"http://net.tutsplus.com/tutorials/javascript-ajax/using-unobtrusive-javascript-and-ajax-with-rails-3/\">Using Unobtrusive JavaScript and AJAX with Rails 3</a>. Let's refresh again.\n\nBegin with this very standard <b>delete</b> action:\n\n<br></p>\n<pre><code class=\"erb\">&lt;td&gt;&lt;%= link_to 'delete', task, :'data-confirm' =&gt; 'Are you sure?', :'data-method' =&gt; 'delete' %&gt;&lt;/td&gt;</code></pre>Then turn it into ajax call:<br><pre><code class=\"erb\">// app/views/tasks/index.html<br>&lt;td&gt;&lt;%= link_to 'delete', task, :'data-confirm' =&gt; 'Are you sure?', :'data-method' =&gt; 'delete', :'data-remote' =&gt; true, :id =&gt; \"task_\#{task.id}\"%&gt;&lt;/td&gt;</code></pre>\n<pre><code class=\"ruby\"># app/controllers/tasks_controller.rb<br>  def destroy<br>    @task = Task.find(params[:id])<br>    @task_id = params[:id]<br>    @task.destroy<br><br>    respond_to do |format|<br>      format.html { redirect_to tasks_url }<br>      format.json { head :no_content }<br>      format.js <br>    end<br>  end</code></pre>\n<pre><code class=\"erb\">// app/views/tasks/destroy.js.erb<br>$('#&lt;%= \"task_\#{@task_id}\" %&gt;').closest('tr').fadeOut(); </code></pre>Here is use js.erb to transfer some information from Rails to \nJavsscript. The reason for that is in many case, you need feedback from \nRails after the ajax call. If you write a pure Javascript for this ajax \ncall, it might not be easy to transfer the result from Rails to \nJavascript. Now, let turn this into Angular.js by these steps:\n<br><ol>\n<li>Turn <b>delete</b> into a resource service</li>\n<li>Call <b>delete</b> from an Angular.js controller, which use resource service above</li>\n<li>Handle the result after the call</li>\n</ol>\nFirst, we define our module <b>momentum</b> and include the CSRF token by default. The <b>Task</b>\n is the resource connecting to Rails through REST. Note that by default,\n it calls JSON. Therefore, in Rails controller, you have to handle the \nresult from <b>format.json</b>\n<br><pre><code class=\"javascript\">// app/assets/javascript/tasks.js<br>angular.module('momentum', ['momentumService'])<br>  .config([\"$httpProvider\", function(provider) {<br>      provider.defaults.headers.common['X-CSRF-Token'] = $('meta[name=csrf-token]').attr('content');<br>  }]);<br><br>angular.module('momentumService', ['ngResource']).<br>  factory('Task', function($resource) {<br>    return $resource('/tasks/:task_id', {}, {<br>      destroy: { method: 'DELETE' }<br>    });<br>  });</code></pre>Thus, the Rails controller looks like this. Note that you can use <b>:status</b> for successful and failed ajax call to Angular.js.\n<br><pre><code class=\"ruby\"># app/controllers/tasks_controller.rb<br>  def destroy<br>    @task = Task.find(params[:id])<br>    @task.destroy<br><br>    respond_to do |format|<br>      format.html { redirect_to tasks_url }<br>      format.json { render :nothing =&gt; true, :status =&gt; :ok }<br>#      format.json { render :nothing =&gt; true, :status =&gt; :not_found }<br>    end<br>  end</code></pre>Now, the controller of Angular.js:<br><pre><code class=\"javascript\">// app/assets/javascripts/tasks_controller.js<br>function TasksController($scope, Task) {<br>  $scope.destroy = function(t_id) {<br>    new Task.destroy({task_id: t_id}, function(resource) {<br>      // ajax success<br>      $('#task_' t_id).closest('tr').fadeOut();<br>    }, function (response) {<br>      // ajax failed<br>      console.log(response);<br>    });<br>  };<br>};</code></pre>Finally, we hook up with view. Note that you need to include this <b>momentum</b> module in <b>ng-app</b><br><pre><code class=\"erb\">&lt;!-- app/views/layouts/application.html.erb --&gt;<br>&lt;!DOCTYPE html&gt;<br>&lt;html ng-app='momentum'&gt;<br>&lt;head&gt;<br>  &lt;title&gt;Momentum&lt;/title&gt;<br>  &lt;%= stylesheet_link_tag    \"application\", :media =&gt; \"all\" %&gt;<br>  &lt;%= javascript_include_tag \"application\" %&gt;<br>  &lt;%= csrf_meta_tags %&gt;<br>&lt;/head&gt;<br>&lt;body&gt;<br>  &lt;%= yield %&gt;<br>&lt;/body&gt;<br>&lt;/html&gt;</code></pre>And note that in the <b>link_to</b> method, the url is missing. It is because <b>ng-click</b> does not prevent the browser from display the href path. Otherwise, ng-click and href are both called.\n<br><pre><code class=\"erb\">&lt;!-- app/views/tasks/index.html.erb --&gt;<br>&lt;h1&gt;Listing tasks&lt;/h1&gt;<br>&lt;div ng-controller='TasksController'&gt;<br>&lt;table&gt;<br>  &lt;tr&gt;<br>    &lt;th&gt;Title&lt;/th&gt;<br>    &lt;th&gt;&lt;/th&gt;<br>  &lt;/tr&gt;<br>  &lt;% @tasks.each do |task| %&gt;<br>    &lt;tr&gt;<br>      &lt;td&gt;&lt;%= task.title %&gt;&lt;/td&gt;<br>      &lt;td&gt;&lt;%= link_to 'delete', '', :'ng-click' =&gt; \"destroy(\#{task.id})\", :'data-confirm' =&gt; 'Are you sure?', :id =&gt; \"task_\#{task.id}\" %&gt;&lt;/td&gt;<br>    &lt;/tr&gt;<br>  &lt;% end %&gt;<br>&lt;/table&gt;<br>&lt;/div&gt;</code></pre>Does this approach really save server any workload ? In this case, probably little. It saves the server from serving the js.erb after ajax call. But when thing becomes complicated, it might save a lot. <br>", created_at: "2013-12-13 19:56:10", updated_at: "2013-12-13 19:56:10", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "<p>Let's begin with simple ajax call from Angular.js to Rails. This action \ncan be easily implemented by jQuery. When things becomes complicated, \nAngular.js might become handy.<br><br>\nHere is a very good article on implementing 'delete' action with ajax: <a href=\"http://net.tutsplus.com/tutorials/javascript-ajax/using-unobtrusive-javascript-and-ajax-with-rails-3/\">Using Unobtrusive JavaScript and AJAX with Rails 3</a>. Let's refresh again.\n\nBegin with this very standard <b>delete</b> action:\n\n<br></p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/erb.png' alt='erb'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#070;font-weight:bold\">&lt;td&gt;</span><span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> link_to <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">delete</span><span style=\"color:#710\">'</span></span>, task, <span style=\"color:#A60\"><span style=\"color:#A60\">:</span><span style=\"color:#740\">'</span><span style=\"color:#A60\">data-confirm</span><span style=\"color:#740\">'</span></span> =&gt; <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">Are you sure?</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#A60\"><span style=\"color:#A60\">:</span><span style=\"color:#740\">'</span><span style=\"color:#A60\">data-method</span><span style=\"color:#740\">'</span></span> =&gt; <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">delete</span><span style=\"color:#710\">'</span></span> <span style=\"font-weight:bold;color:#666\">%&gt;</span></span><span style=\"color:#070;font-weight:bold\">&lt;/td&gt;</span>\n</pre></td>\n</tr></table>\n\n        </div>\nThen turn it into ajax call:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/erb.png' alt='erb'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n</pre></td>\n  <td class=\"code\"><pre>// app/views/tasks/index.html\n<span style=\"color:#070;font-weight:bold\">&lt;td&gt;</span><span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> link_to <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">delete</span><span style=\"color:#710\">'</span></span>, task, <span style=\"color:#A60\"><span style=\"color:#A60\">:</span><span style=\"color:#740\">'</span><span style=\"color:#A60\">data-confirm</span><span style=\"color:#740\">'</span></span> =&gt; <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">Are you sure?</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#A60\"><span style=\"color:#A60\">:</span><span style=\"color:#740\">'</span><span style=\"color:#A60\">data-method</span><span style=\"color:#740\">'</span></span> =&gt; <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">delete</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#A60\"><span style=\"color:#A60\">:</span><span style=\"color:#740\">'</span><span style=\"color:#A60\">data-remote</span><span style=\"color:#740\">'</span></span> =&gt; <span style=\"color:#069\">true</span>, <span style=\"color:#A60\">:id</span> =&gt; <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">task_</span><span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">\#{</span>task.id<span style=\"font-weight:bold;color:#666\">}</span></span><span style=\"color:#710\">&quot;</span></span><span style=\"font-weight:bold;color:#666\">%&gt;</span></span><span style=\"color:#070;font-weight:bold\">&lt;/td&gt;</span>\n</pre></td>\n</tr></table>\n\n        </div>\n\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n<a href=\"#n8\" name=\"n8\">8</a>\n<a href=\"#n9\" name=\"n9\">9</a>\n<strong><a href=\"#n10\" name=\"n10\">10</a></strong>\n<a href=\"#n11\" name=\"n11\">11</a>\n<a href=\"#n12\" name=\"n12\">12</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#777\"># app/controllers/tasks_controller.rb</span>\n  <span style=\"color:#080;font-weight:bold\">def</span> <span style=\"color:#06B;font-weight:bold\">destroy</span>\n    <span style=\"color:#33B\">@task</span> = <span style=\"color:#036;font-weight:bold\">Task</span>.find(params[<span style=\"color:#A60\">:id</span>])\n    <span style=\"color:#33B\">@task_id</span> = params[<span style=\"color:#A60\">:id</span>]\n    <span style=\"color:#33B\">@task</span>.destroy\n\n    respond_to <span style=\"color:#080;font-weight:bold\">do</span> |format|\n      format.html { redirect_to tasks_url }\n      format.json { head <span style=\"color:#A60\">:no_content</span> }\n      format.js \n    <span style=\"color:#080;font-weight:bold\">end</span>\n  <span style=\"color:#080;font-weight:bold\">end</span>\n</pre></td>\n</tr></table>\n\n        </div>\n\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/erb.png' alt='erb'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n</pre></td>\n  <td class=\"code\"><pre>// app/views/tasks/destroy.js.erb\n$('#<span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">task_</span><span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">\#{</span><span style=\"color:#33B\">@task_id</span><span style=\"font-weight:bold;color:#666\">}</span></span><span style=\"color:#710\">&quot;</span></span> <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>').closest('tr').fadeOut(); \n</pre></td>\n</tr></table>\n\n        </div>\nHere is use js.erb to transfer some information from Rails to \nJavsscript. The reason for that is in many case, you need feedback from \nRails after the ajax call. If you write a pure Javascript for this ajax \ncall, it might not be easy to transfer the result from Rails to \nJavascript. Now, let turn this into Angular.js by these steps:\n<br><ol>\n<li>Turn <b>delete</b> into a resource service</li>\n<li>Call <b>delete</b> from an Angular.js controller, which use resource service above</li>\n<li>Handle the result after the call</li>\n</ol>\nFirst, we define our module <b>momentum</b> and include the CSRF token by default. The <b>Task</b>\n is the resource connecting to Rails through REST. Note that by default,\n it calls JSON. Therefore, in Rails controller, you have to handle the \nresult from <b>format.json</b>\n<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/javascript.png' alt='javascript'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n<a href=\"#n8\" name=\"n8\">8</a>\n<a href=\"#n9\" name=\"n9\">9</a>\n<strong><a href=\"#n10\" name=\"n10\">10</a></strong>\n<a href=\"#n11\" name=\"n11\">11</a>\n<a href=\"#n12\" name=\"n12\">12</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#777\">// app/assets/javascript/tasks.js</span>\nangular.module(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">momentum</span><span style=\"color:#710\">'</span></span>, [<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">momentumService</span><span style=\"color:#710\">'</span></span>])\n<span style=\"color:#F00;background-color:#FAA\"> </span> .config([<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">$httpProvider</span><span style=\"color:#710\">&quot;</span></span>, <span style=\"color:#080;font-weight:bold\">function</span>(provider) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> provider.defaults.headers.common[<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">X-CSRF-Token</span><span style=\"color:#710\">'</span></span>] = <span style=\"color:#369;font-weight:bold\">$</span>(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">meta[name=csrf-token]</span><span style=\"color:#710\">'</span></span>).attr(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">content</span><span style=\"color:#710\">'</span></span>);\n<span style=\"color:#F00;background-color:#FAA\"> </span> }]);\n\nangular.module(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">momentumService</span><span style=\"color:#710\">'</span></span>, [<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">ngResource</span><span style=\"color:#710\">'</span></span>]).\n<span style=\"color:#F00;background-color:#FAA\"> </span> factory(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">Task</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#080;font-weight:bold\">function</span>(<span style=\"color:#369;font-weight:bold\">$resource</span>) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#080;font-weight:bold\">return</span> <span style=\"color:#369;font-weight:bold\">$resource</span>(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">/tasks/:task_id</span><span style=\"color:#710\">'</span></span>, {}, {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#606\">destroy</span>: { <span style=\"color:#606\">method</span>: <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">DELETE</span><span style=\"color:#710\">'</span></span> }\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> });\n<span style=\"color:#F00;background-color:#FAA\"> </span> });\n</pre></td>\n</tr></table>\n\n        </div>\nThus, the Rails controller looks like this. Note that you can use <b>:status</b> for successful and failed ajax call to Angular.js.\n<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n<a href=\"#n8\" name=\"n8\">8</a>\n<a href=\"#n9\" name=\"n9\">9</a>\n<strong><a href=\"#n10\" name=\"n10\">10</a></strong>\n<a href=\"#n11\" name=\"n11\">11</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#777\"># app/controllers/tasks_controller.rb</span>\n  <span style=\"color:#080;font-weight:bold\">def</span> <span style=\"color:#06B;font-weight:bold\">destroy</span>\n    <span style=\"color:#33B\">@task</span> = <span style=\"color:#036;font-weight:bold\">Task</span>.find(params[<span style=\"color:#A60\">:id</span>])\n    <span style=\"color:#33B\">@task</span>.destroy\n\n    respond_to <span style=\"color:#080;font-weight:bold\">do</span> |format|\n      format.html { redirect_to tasks_url }\n      format.json { render <span style=\"color:#A60\">:nothing</span> =&gt; <span style=\"color:#069\">true</span>, <span style=\"color:#A60\">:status</span> =&gt; <span style=\"color:#A60\">:ok</span> }\n<span style=\"color:#777\">#      format.json { render :nothing =&gt; true, :status =&gt; :not_found }</span>\n    <span style=\"color:#080;font-weight:bold\">end</span>\n  <span style=\"color:#080;font-weight:bold\">end</span>\n</pre></td>\n</tr></table>\n\n        </div>\nNow, the controller of Angular.js:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/javascript.png' alt='javascript'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n<a href=\"#n8\" name=\"n8\">8</a>\n<a href=\"#n9\" name=\"n9\">9</a>\n<strong><a href=\"#n10\" name=\"n10\">10</a></strong>\n<a href=\"#n11\" name=\"n11\">11</a>\n<a href=\"#n12\" name=\"n12\">12</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#777\">// app/assets/javascripts/tasks_controller.js</span>\n<span style=\"color:#080;font-weight:bold\">function</span> <span style=\"color:#06B;font-weight:bold\">TasksController</span>(<span style=\"color:#369;font-weight:bold\">$scope</span>, Task) {\n<span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#369;font-weight:bold\">$scope</span>.<span style=\"color:#06B;font-weight:bold\">destroy</span> = <span style=\"color:#080;font-weight:bold\">function</span>(t_id) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#080;font-weight:bold\">new</span> Task.destroy({<span style=\"color:#606\">task_id</span>: t_id}, <span style=\"color:#080;font-weight:bold\">function</span>(resource) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#777\">// ajax success</span>\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#369;font-weight:bold\">$</span>(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">#task_</span><span style=\"color:#710\">'</span></span> t_id).closest(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">tr</span><span style=\"color:#710\">'</span></span>).fadeOut();\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> }, <span style=\"color:#080;font-weight:bold\">function</span> (response) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#777\">// ajax failed</span>\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> console.log(response);\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> });\n<span style=\"color:#F00;background-color:#FAA\"> </span> };\n};\n</pre></td>\n</tr></table>\n\n        </div>\nFinally, we hook up with view. Note that you need to include this <b>momentum</b> module in <b>ng-app</b><br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/erb.png' alt='erb'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n<a href=\"#n8\" name=\"n8\">8</a>\n<a href=\"#n9\" name=\"n9\">9</a>\n<strong><a href=\"#n10\" name=\"n10\">10</a></strong>\n<a href=\"#n11\" name=\"n11\">11</a>\n<a href=\"#n12\" name=\"n12\">12</a>\n<a href=\"#n13\" name=\"n13\">13</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#777\">&lt;!-- app/views/layouts/application.html.erb --&gt;</span>\n<span style=\"color:#34b\">&lt;!DOCTYPE html&gt;</span>\n<span style=\"color:#070;font-weight:bold\">&lt;html</span> <span style=\"color:#b48\">ng-app</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">momentum</span><span style=\"color:#710\">'</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span>\n<span style=\"color:#070;font-weight:bold\">&lt;head&gt;</span>\n  <span style=\"color:#070;font-weight:bold\">&lt;title&gt;</span>Momentum<span style=\"color:#070;font-weight:bold\">&lt;/title&gt;</span>\n  <span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> stylesheet_link_tag    <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">application</span><span style=\"color:#710\">&quot;</span></span>, <span style=\"color:#A60\">:media</span> =&gt; <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">all</span><span style=\"color:#710\">&quot;</span></span> <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>\n  <span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> javascript_include_tag <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">application</span><span style=\"color:#710\">&quot;</span></span> <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>\n  <span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> csrf_meta_tags <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>\n<span style=\"color:#070;font-weight:bold\">&lt;/head&gt;</span>\n<span style=\"color:#070;font-weight:bold\">&lt;body&gt;</span>\n  <span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> <span style=\"color:#080;font-weight:bold\">yield</span> <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>\n<span style=\"color:#070;font-weight:bold\">&lt;/body&gt;</span>\n<span style=\"color:#070;font-weight:bold\">&lt;/html&gt;</span>\n</pre></td>\n</tr></table>\n\n        </div>\nAnd note that in the <b>link_to</b> method, the url is missing. It is because <b>ng-click</b> does not prevent the browser from display the href path. Otherwise, ng-click and href are both called.\n<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/erb.png' alt='erb'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n<a href=\"#n8\" name=\"n8\">8</a>\n<a href=\"#n9\" name=\"n9\">9</a>\n<strong><a href=\"#n10\" name=\"n10\">10</a></strong>\n<a href=\"#n11\" name=\"n11\">11</a>\n<a href=\"#n12\" name=\"n12\">12</a>\n<a href=\"#n13\" name=\"n13\">13</a>\n<a href=\"#n14\" name=\"n14\">14</a>\n<a href=\"#n15\" name=\"n15\">15</a>\n<a href=\"#n16\" name=\"n16\">16</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#777\">&lt;!-- app/views/tasks/index.html.erb --&gt;</span>\n<span style=\"color:#070;font-weight:bold\">&lt;h1&gt;</span>Listing tasks<span style=\"color:#070;font-weight:bold\">&lt;/h1&gt;</span>\n<span style=\"color:#070;font-weight:bold\">&lt;div</span> <span style=\"color:#b48\">ng-controller</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">TasksController</span><span style=\"color:#710\">'</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span>\n<span style=\"color:#070;font-weight:bold\">&lt;table&gt;</span>\n  <span style=\"color:#070;font-weight:bold\">&lt;tr&gt;</span>\n    <span style=\"color:#070;font-weight:bold\">&lt;th&gt;</span>Title<span style=\"color:#070;font-weight:bold\">&lt;/th&gt;</span>\n    <span style=\"color:#070;font-weight:bold\">&lt;th&gt;</span><span style=\"color:#070;font-weight:bold\">&lt;/th&gt;</span>\n  <span style=\"color:#070;font-weight:bold\">&lt;/tr&gt;</span>\n  <span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%</span> <span style=\"color:#33B\">@tasks</span>.each <span style=\"color:#080;font-weight:bold\">do</span> |task| <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>\n    <span style=\"color:#070;font-weight:bold\">&lt;tr&gt;</span>\n      <span style=\"color:#070;font-weight:bold\">&lt;td&gt;</span><span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> task.title <span style=\"font-weight:bold;color:#666\">%&gt;</span></span><span style=\"color:#070;font-weight:bold\">&lt;/td&gt;</span>\n      <span style=\"color:#070;font-weight:bold\">&lt;td&gt;</span><span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%=</span> link_to <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">delete</span><span style=\"color:#710\">'</span></span>, <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#A60\"><span style=\"color:#A60\">:</span><span style=\"color:#740\">'</span><span style=\"color:#A60\">ng-click</span><span style=\"color:#740\">'</span></span> =&gt; <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">destroy(</span><span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">\#{</span>task.id<span style=\"font-weight:bold;color:#666\">}</span></span><span style=\"color:#D20\">)</span><span style=\"color:#710\">&quot;</span></span>, <span style=\"color:#A60\"><span style=\"color:#A60\">:</span><span style=\"color:#740\">'</span><span style=\"color:#A60\">data-confirm</span><span style=\"color:#740\">'</span></span> =&gt; <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">Are you sure?</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#A60\">:id</span> =&gt; <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">task_</span><span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">\#{</span>task.id<span style=\"font-weight:bold;color:#666\">}</span></span><span style=\"color:#710\">&quot;</span></span> <span style=\"font-weight:bold;color:#666\">%&gt;</span></span><span style=\"color:#070;font-weight:bold\">&lt;/td&gt;</span>\n    <span style=\"color:#070;font-weight:bold\">&lt;/tr&gt;</span>\n  <span style=\"background-color:hsla(0,0%,0%,0.07);color:black\"><span style=\"font-weight:bold;color:#666\">&lt;%</span> <span style=\"color:#080;font-weight:bold\">end</span> <span style=\"font-weight:bold;color:#666\">%&gt;</span></span>\n<span style=\"color:#070;font-weight:bold\">&lt;/table&gt;</span>\n<span style=\"color:#070;font-weight:bold\">&lt;/div&gt;</span>\n</pre></td>\n</tr></table>\n\n        </div>\nDoes this approach really save server any workload ? In this case, probably little. It saves the server from serving the js.erb after ajax call. But when thing becomes complicated, it might save a lot. <br>", pretty_preview: "<p>Let's begin with simple ajax call from Angular.js to Rails. This action \ncan be easily implemented by jQuery. When things becomes complicated, \nAngular.js might become handy.<br><br>\nHere is a very good article on implementing 'delete' action with ajax: <a href=\"http://net.tutsplus.com/tutorials/javascript-ajax/using-unobtrusive-javascript-and-ajax-with-rails-3/\">Using Unobtrusive JavaScript and AJAX with Rails 3</a>. Let's refresh again.\n\n...<b>...</b></p>"},
  {id: 408, name: "Tutorials on Angular.js and Rails #2", category_id: 3, body: "<p>The main purpose for using Angular.js with Rails is to enhance the user \ninterface and reduce the workload on server by moving some parts of \ntasks onto client side. Therefore, the first thing is to hook up Rails \nCRUD with Angular.js. Here is a comparison of resource in Rails and in \nAngular.js:<br><br></p>\n<table style=\"border: 1px solid;\">\n<thead><tr>\n<th>HTTP Verb</th>\n<th>Path</th>\n<th>action</th>\n<th>Angular.js</th>\n</tr></thead>\n<tbody></tbody>\n<tbody>\n<tr>\n<td>\n<span>GET</span>          </td>\n  <td>/photos           </td>\n  <td>index    </td>\n<td>'query':  {method:'GET', isArray:true}</td>\n </tr>\n<tr>\n<td>\n<span>GET</span>          </td>\n  <td>/photos/new       </td>\n  <td>new      </td>\n </tr>\n<tr>\n<td>\n<span>POST</span>         </td>\n  <td>/photos           </td>\n  <td>create   </td>\n<td>'save':   {method:'POST'}</td>\n </tr>\n<tr>\n<td>\n<span>GET</span>          </td>\n  <td>/photos/:id       </td>\n  <td>show     </td>\n<td>'get':    {method:'GET'}</td>\n </tr>\n<tr>\n<td>\n<span>GET</span>          </td>\n  <td>/photos/:id/edit  </td>\n  <td>edit     </td>\n </tr>\n<tr>\n<td>\n<span>PUT</span>          </td>\n  <td>/photos/:id       </td>\n  <td>update   </td>\n </tr>\n<tr>\n<td>\n<span>DELETE</span>       </td>\n  <td>/photos/:id       </td>\n  <td>destroy  </td>\n<td>'remove' or 'delete': {method:'DELETE'}</td>\n </tr>\n</tbody>\n</table>\n<br>\nOf course, we can define our own verbs in Angular.js to fit Rails style.\n Besides the difference in verbs, another issue between Rails and \nAngular.js is that they both has their own routing and template system. \nRails use &lt;%= yield %&gt; for partial and Angular.js use &lt;div \nng-view&gt;&lt;/div&gt;. Since Angular.js works on client-side, you can \nlet Rails render the view first, then pass it to Angular.js. But this \napproach will not actually reduce the burden on servers. While these two\n systems do not mix well, they fortunately do not conflict with each \nother. To reach our goal of reducing the loading of server, let take a \nlook of each verb and decide which one will use Rails system and which \none for Angular.js.<br><br>\nStart with the easiest method, '<b>destroy</b>'. This action does not \nrender views and usually triggers the removal of its HTML element from \nview. This can be easily done via regular JavaScript as in many <a href=\"http://net.tutsplus.com/tutorials/javascript-ajax/using-unobtrusive-javascript-and-ajax-with-rails-3/\">tutorials</a>. Therefore, I decide to keep '<b>destroy</b>' in Rails.<br><br>\nMany tutorials, include the <a href=\"http://blog.berylliumwork.com/2012/09/tutorials-on-angularjs-and-rails.html\">previous one</a>, show you how to use Angular.js for action '<b>index</b>'. But if you consider it more carefully, '<b>index</b>'\n often needs pagination and search on database. It does not make too \nmuch sense to transfer all data to client-side for pagination and \nsearching. And Rails does have very good gems on pagination and \nsearching, such as '<a href=\"https://github.com/amatsuda/kaminari\">kaminari</a>' and '<a href=\"https://github.com/ernie/ransack\">ransack</a>'. Therefore, '<b>index</b>' will stay in Rails. <br><br>\nFor actions on single record, as long as Rails supply it in form of \nJSON, the rest can be handled on client side, including form validation,\n dynamic user interface, etc. Therefore, they can be handled by \nAngular.js. The advantages of this approach is that views for these \nactions can be static html instead of erb.<br><br>\nHere defines the routes for Angular.js:<br><pre><code class=\"javascript\">// app/assets/javascripts/tasks.js<br><br>angular.module('momentum', ['momentumService'])<br>  .config(['$routeProvider', function($provider) {<br>    $provider<br>      .when('/tasks/new', {templateUrl: '/tasks/new.html', controller: TaskNewCtrl})<br>      .when('/tasks/:task_id', {templateUrl: '/tasks/show.html', controller: TaskCtrl})<br>      .when('/tasks/:task_id/edit', {templateUrl: '/tasks/edit.html', controller: TaskEditCtrl});<br>  }])<br>  .config([\"$httpProvider\", function(provider) {<br>      provider.defaults.headers.common['X-CSRF-Token'] = $('meta[name=csrf-token]').attr('content');<br>  }]);<br><br>angular.module('momentumService', ['ngResource']).<br>  factory('Tasks', function($resource) {<br>    return $resource('/tasks.json', {}, {<br>      index: { method: 'GET', isArray: true},<br>      create: { method: 'POST' }<br>    });<br>  }).<br>  factory('Task', function($resource) {<br>    return $resource('/tasks/:task_id.json', {}, {<br>      show: { method: 'GET' },<br>      update: { method: 'PUT' }<br>    });<br>  }); </code></pre>The <span style=\"font-weight: bold;\">httpProvider</span> part is to use CSRF token from Rails for create and update actions. <span style=\"font-weight: bold;\">routeProvider</span> defines the routes in Angular.js. Note that the root of path in Angular.js begins from the path where <span style=\"font-weight: bold;\">&lt;div ng-view&gt;&lt;/div&gt;</span> is located. To add entrance point for Angular.js, we define it in <span style=\"font-weight: bold;\">tasks_controller.rb</span>:<br><pre><code class=\"ruby\">def angular<br>    respond_to do |format|<br>      format.html<br>      format.json { head :no_content }<br>    end<br>  end</code></pre>Remember to add this actino to routes in Rails. And views in <span style=\"font-weight: bold;\">app/views/tasks/angular.html.erb</span>:<br><pre><code class=\"erb\">&lt;div ng-view=\"ng-view\"&gt;</code></pre>As you can see, from browser, localhost:3000/tasks/angular will be the \nentrance point of Angular.js. Therefore, the path defined in <span style=\"background-color: #fce5cd;\">routeProvider</span> will start from this point. For example, for '/tasks/new', it will be localhost:3000/tasks/angular#/tasks/new. Note the <a href=\"http://docs.angularjs.org/guide/dev_guide.services.%24location\">hashbang</a> is one route mode fro Angular.js. Therefore, the relationships of routes, template and controller are:<br><br><table>\n<thead><tr>\n<th>route</th>\n<th>uri</th>\n<th>template</th>\n<th>controller</th>\n</tr></thead>\n<tbody>\n<tr>\n<td>/tasks/new</td>\n<td>localhosts:3000/tasks/angular#/tasks/new</td>\n<td>/tasks/new.html</td>\n<td>TaskCtrl</td>\n</tr>\n<tr>\n<td>/tasks/:task_id</td>\n<td>localhosts:3000/tasks/angular#/tasks/1</td>\n<td>/tasks/show.html</td>\n<td>TaskShowCtrl</td>\n</tr>\n<tr>\n<td>/tasks/:task_id/edit</td>\n<td>localhosts:3000/tasks/angular#/tasks/1/edit</td>\n<td>/tasks/edit.html</td>\n<td>TaskEditCtrl</td>\n</tr>\n</tbody>\n</table>\n<br>In the module '<span style=\"font-weight: bold;\">momentumService</span>', we define resources from Rails. For <span style=\"font-weight: bold;\">ngResource</span>, we need <span style=\"font-weight: bold;\">angular-resource.min.js</span>. We also need to add module '<span style=\"font-weight: bold;\">momentum</span>' in <span style=\"font-weight: bold;\">/app/views/layout/application.html.erb</span>:<br><pre><code class=\"erb\">&lt;html ng-app='momentum'&gt;</code></pre>For controllers in Angular.js in <span style=\"font-weight: bold;\">app/assets/javascripts/tasks_controller.js</span>:<br>f<pre><code class=\"javascript\">unction TaskNewCtrl($scope, $location, Tasks, Task) {<br>  console.log('TaskNewCtrl');<br>  $scope.task = {};<br><br>  $scope.create = function(task) {<br>    t = new Tasks(task);<br>    t.$create(function(task) {<br>      $location.path('/tasks/' task.id);<br>    });<br>  };<br>};<br><br>function TaskCtrl($scope, $routeParams, Task) {<br>  console.log('TaskCtrl');<br>  task_id = $routeParams.task_id;<br>  $scope.task = Task.show({task_id: task_id});<br>};<br><br>function TaskEditCtrl($scope, $routeParams, $location, Task) {<br>  console.log('TaskEditCtrl');<br><br>  $scope.master = {};<br>  task_id = $routeParams.task_id;<br>  $scope.task = new Task.show({task_id: task_id}, function(resource) {<br>    $scope.master = angular.copy(resource);<br>  });<br><br>  $scope.update = function(task) {<br>    $scope.master = angular.copy(task);<br>    task.$update({task_id: task_id}, function(t) {<br>      $location.path('/tasks/' t.id);<br>    });<br>  };<br>  $scope.reset = function() {<br>    $scope.task = angular.copy($scope.master);<br>  };<br>}</code></pre>Each controller will call Rails to get or set data in JSON.<br><br>Since Angular.js works on client-side, the view is actually HTML, which can be put in /public directory, thus, save server from rendering dynamic views:<br><br>In <span style=\"font-weight: bold;\">/public/tasks/new.html</span>:<br><pre><code class=\"erb\">&lt;h1&gt;New task&lt;/h1&gt;<br><br>&lt;form novalidate&gt;<br>  &lt;div class=\"field\"&gt;<br>    &lt;label for=\"task_title\"&gt;Title&lt;/label&gt;&lt;br /&gt;<br>    &lt;input id=\"task_title\" name=\"task[title]\" size=\"30\" type=\"text\" ng-model='task.title' /&gt;<br>  &lt;/div&gt;<br><br>  &lt;div class=\"field\"&gt;<br>    &lt;label for=\"task_finished\"&gt;Finished&lt;/label&gt;&lt;br /&gt;<br>    &lt;input id=\"task_finished\" name=\"task[finished]\" type=\"checkbox\" ng-model='task.finished' /&gt;<br>  &lt;/div&gt;<br><br>  &lt;button ng-click='create(task)'&gt;Create Task&lt;/button&gt;<br>&lt;/form&gt;<br><br>&lt;a href=\"/tasks\"&gt;Back&lt;/a&gt;</code></pre>In <span style=\"font-weight: bold;\">/public/tasks/show.html</span>:<br><pre><code class=\"erb\">&lt;p&gt;<br>  &lt;b&gt;Title:&lt;/b&gt;<br>    {{task.title}}<br>&lt;/p&gt;<br><br>&lt;p&gt;<br>  &lt;b&gt;Finished:&lt;/b&gt;<br>  {{task.finished}}<br>&lt;/p&gt;<br><br>&lt;a href='/tasks/angular#/tasks/{{task.id}}/edit'&gt;Edit&lt;/a&gt; |<br>&lt;a href=\"/tasks\"&gt;Back&lt;/a&gt;</code></pre>In <span style=\"font-weight: bold;\">/public/tasks/edit.html</span>:<br><pre><code class=\"erb\">&lt;h1&gt;Editing task&lt;/h1&gt;<br><br>&lt;form novalidate&gt;<br>  &lt;div class=\"field\"&gt;<br>    &lt;label for=\"task_title\"&gt;Title&lt;/label&gt;&lt;br /&gt;<br>    &lt;input id=\"task_title\" name=\"task[title]\" size=\"30\" type=\"text\" ng-model='task.title' /&gt;<br>  &lt;/div&gt;<br><br>  &lt;div class=\"field\"&gt;<br>    &lt;label for=\"task_finished\"&gt;Finished&lt;/label&gt;&lt;br /&gt;<br>    &lt;input id=\"task_finished\" name=\"task[finished]\" type=\"checkbox\" ng-model='task.finished' /&gt;<br>  &lt;/div&gt;<br><br>  &lt;button ng-click='reset()'&gt;RESET&lt;/button&gt;<br>  &lt;button ng-click='update(task)'&gt;Update Task&lt;/button&gt;<br>&lt;/form&gt;<br><br>&lt;a href=\"/tasks/angular#/tasks/{{task.id}}\"&gt;Show&lt;/a&gt; |<br>&lt;a href=\"/tasks\"&gt;Back&lt;/a&gt;</code></pre>", created_at: "2013-12-13 19:56:10", updated_at: "2013-12-13 19:56:10", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "<p>The main purpose for using Angular.js with Rails is to enhance the user \ninterface and reduce the workload on server by moving some parts of \ntasks onto client side. Therefore, the first thing is to hook up Rails \nCRUD with Angular.js. Here is a comparison of resource in Rails and in \nAngular.js:<br><br></p>\n<table style=\"border: 1px solid;\">\n<thead><tr>\n<th>HTTP Verb</th>\n<th>Path</th>\n<th>action</th>\n<th>Angular.js</th>\n</tr></thead>\n<tbody></tbody>\n<tbody>\n<tr>\n<td>\n<span>GET</span>          </td>\n  <td>/photos           </td>\n  <td>index    </td>\n<td>'query':  {method:'GET', isArray:true}</td>\n </tr>\n<tr>\n<td>\n<span>GET</span>          </td>\n  <td>/photos/new       </td>\n  <td>new      </td>\n </tr>\n<tr>\n<td>\n<span>POST</span>         </td>\n  <td>/photos           </td>\n  <td>create   </td>\n<td>'save':   {method:'POST'}</td>\n </tr>\n<tr>\n<td>\n<span>GET</span>          </td>\n  <td>/photos/:id       </td>\n  <td>show     </td>\n<td>'get':    {method:'GET'}</td>\n </tr>\n<tr>\n<td>\n<span>GET</span>          </td>\n  <td>/photos/:id/edit  </td>\n  <td>edit     </td>\n </tr>\n<tr>\n<td>\n<span>PUT</span>          </td>\n  <td>/photos/:id       </td>\n  <td>update   </td>\n </tr>\n<tr>\n<td>\n<span>DELETE</span>       </td>\n  <td>/photos/:id       </td>\n  <td>destroy  </td>\n<td>'remove' or 'delete': {method:'DELETE'}</td>\n </tr>\n</tbody>\n</table>\n<br>\nOf course, we can define our own verbs in Angular.js to fit Rails style.\n Besides the difference in verbs, another issue between Rails and \nAngular.js is that they both has their own routing and template system. \nRails use &lt;%= yield %&gt; for partial and Angular.js use &lt;div \nng-view&gt;&lt;/div&gt;. Since Angular.js works on client-side, you can \nlet Rails render the view first, then pass it to Angular.js. But this \napproach will not actually reduce the burden on servers. While these two\n systems do not mix well, they fortunately do not conflict with each \nother. To reach our goal of reducing the loading of server, let take a \nlook of each verb and decide which one will use Rails system and which \none for Angular.js.<br><br>\nStart with the easiest method, '<b>destroy</b>'. This action does not \nrender views and usually triggers the removal of its HTML element from \nview. This can be easily done via regular JavaScript as in many <a href=\"http://net.tutsplus.com/tutorials/javascript-ajax/using-unobtrusive-javascript-and-ajax-with-rails-3/\">tutorials</a>. Therefore, I decide to keep '<b>destroy</b>' in Rails.<br><br>\nMany tutorials, include the <a href=\"http://blog.berylliumwork.com/2012/09/tutorials-on-angularjs-and-rails.html\">previous one</a>, show you how to use Angular.js for action '<b>index</b>'. But if you consider it more carefully, '<b>index</b>'\n often needs pagination and search on database. It does not make too \nmuch sense to transfer all data to client-side for pagination and \nsearching. And Rails does have very good gems on pagination and \nsearching, such as '<a href=\"https://github.com/amatsuda/kaminari\">kaminari</a>' and '<a href=\"https://github.com/ernie/ransack\">ransack</a>'. Therefore, '<b>index</b>' will stay in Rails. <br><br>\nFor actions on single record, as long as Rails supply it in form of \nJSON, the rest can be handled on client side, including form validation,\n dynamic user interface, etc. Therefore, they can be handled by \nAngular.js. The advantages of this approach is that views for these \nactions can be static html instead of erb.<br><br>\nHere defines the routes for Angular.js:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/javascript.png' alt='javascript'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n<a href=\"#n8\" name=\"n8\">8</a>\n<a href=\"#n9\" name=\"n9\">9</a>\n<strong><a href=\"#n10\" name=\"n10\">10</a></strong>\n<a href=\"#n11\" name=\"n11\">11</a>\n<a href=\"#n12\" name=\"n12\">12</a>\n<a href=\"#n13\" name=\"n13\">13</a>\n<a href=\"#n14\" name=\"n14\">14</a>\n<a href=\"#n15\" name=\"n15\">15</a>\n<a href=\"#n16\" name=\"n16\">16</a>\n<a href=\"#n17\" name=\"n17\">17</a>\n<a href=\"#n18\" name=\"n18\">18</a>\n<a href=\"#n19\" name=\"n19\">19</a>\n<strong><a href=\"#n20\" name=\"n20\">20</a></strong>\n<a href=\"#n21\" name=\"n21\">21</a>\n<a href=\"#n22\" name=\"n22\">22</a>\n<a href=\"#n23\" name=\"n23\">23</a>\n<a href=\"#n24\" name=\"n24\">24</a>\n<a href=\"#n25\" name=\"n25\">25</a>\n<a href=\"#n26\" name=\"n26\">26</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#777\">// app/assets/javascripts/tasks.js</span>\n\nangular.module(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">momentum</span><span style=\"color:#710\">'</span></span>, [<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">momentumService</span><span style=\"color:#710\">'</span></span>])\n<span style=\"color:#F00;background-color:#FAA\"> </span> .config([<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">$routeProvider</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#080;font-weight:bold\">function</span>(<span style=\"color:#369;font-weight:bold\">$provider</span>) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#369;font-weight:bold\">$provider</span>\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> .when(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">/tasks/new</span><span style=\"color:#710\">'</span></span>, {<span style=\"color:#606\">templateUrl</span>: <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">/tasks/new.html</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#606\">controller</span>: TaskNewCtrl})\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> .when(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">/tasks/:task_id</span><span style=\"color:#710\">'</span></span>, {<span style=\"color:#606\">templateUrl</span>: <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">/tasks/show.html</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#606\">controller</span>: TaskCtrl})\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> .when(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">/tasks/:task_id/edit</span><span style=\"color:#710\">'</span></span>, {<span style=\"color:#606\">templateUrl</span>: <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">/tasks/edit.html</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#606\">controller</span>: TaskEditCtrl});\n<span style=\"color:#F00;background-color:#FAA\"> </span> }])\n<span style=\"color:#F00;background-color:#FAA\"> </span> .config([<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">$httpProvider</span><span style=\"color:#710\">&quot;</span></span>, <span style=\"color:#080;font-weight:bold\">function</span>(provider) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> provider.defaults.headers.common[<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">X-CSRF-Token</span><span style=\"color:#710\">'</span></span>] = <span style=\"color:#369;font-weight:bold\">$</span>(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">meta[name=csrf-token]</span><span style=\"color:#710\">'</span></span>).attr(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">content</span><span style=\"color:#710\">'</span></span>);\n<span style=\"color:#F00;background-color:#FAA\"> </span> }]);\n\nangular.module(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">momentumService</span><span style=\"color:#710\">'</span></span>, [<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">ngResource</span><span style=\"color:#710\">'</span></span>]).\n<span style=\"color:#F00;background-color:#FAA\"> </span> factory(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">Tasks</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#080;font-weight:bold\">function</span>(<span style=\"color:#369;font-weight:bold\">$resource</span>) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#080;font-weight:bold\">return</span> <span style=\"color:#369;font-weight:bold\">$resource</span>(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">/tasks.json</span><span style=\"color:#710\">'</span></span>, {}, {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#606\">index</span>: { <span style=\"color:#606\">method</span>: <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">GET</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#606\">isArray</span>: <span style=\"color:#069\">true</span>},\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#606\">create</span>: { <span style=\"color:#606\">method</span>: <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">POST</span><span style=\"color:#710\">'</span></span> }\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> });\n<span style=\"color:#F00;background-color:#FAA\"> </span> }).\n<span style=\"color:#F00;background-color:#FAA\"> </span> factory(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">Task</span><span style=\"color:#710\">'</span></span>, <span style=\"color:#080;font-weight:bold\">function</span>(<span style=\"color:#369;font-weight:bold\">$resource</span>) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#080;font-weight:bold\">return</span> <span style=\"color:#369;font-weight:bold\">$resource</span>(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">/tasks/:task_id.json</span><span style=\"color:#710\">'</span></span>, {}, {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#606\">show</span>: { <span style=\"color:#606\">method</span>: <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">GET</span><span style=\"color:#710\">'</span></span> },\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#606\">update</span>: { <span style=\"color:#606\">method</span>: <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">PUT</span><span style=\"color:#710\">'</span></span> }\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> });\n<span style=\"color:#F00;background-color:#FAA\"> </span> }); \n</pre></td>\n</tr></table>\n\n        </div>\nThe <span style=\"font-weight: bold;\">httpProvider</span> part is to use CSRF token from Rails for create and update actions. <span style=\"font-weight: bold;\">routeProvider</span> defines the routes in Angular.js. Note that the root of path in Angular.js begins from the path where <span style=\"font-weight: bold;\">&lt;div ng-view&gt;&lt;/div&gt;</span> is located. To add entrance point for Angular.js, we define it in <span style=\"font-weight: bold;\">tasks_controller.rb</span>:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#080;font-weight:bold\">def</span> <span style=\"color:#06B;font-weight:bold\">angular</span>\n    respond_to <span style=\"color:#080;font-weight:bold\">do</span> |format|\n      format.html\n      format.json { head <span style=\"color:#A60\">:no_content</span> }\n    <span style=\"color:#080;font-weight:bold\">end</span>\n  <span style=\"color:#080;font-weight:bold\">end</span>\n</pre></td>\n</tr></table>\n\n        </div>\nRemember to add this actino to routes in Rails. And views in <span style=\"font-weight: bold;\">app/views/tasks/angular.html.erb</span>:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/erb.png' alt='erb'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#070;font-weight:bold\">&lt;div</span> <span style=\"color:#b48\">ng-view</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">ng-view</span><span style=\"color:#710\">&quot;</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span>\n</pre></td>\n</tr></table>\n\n        </div>\nAs you can see, from browser, localhost:3000/tasks/angular will be the \nentrance point of Angular.js. Therefore, the path defined in <span style=\"background-color: #fce5cd;\">routeProvider</span> will start from this point. For example, for '/tasks/new', it will be localhost:3000/tasks/angular#/tasks/new. Note the <a href=\"http://docs.angularjs.org/guide/dev_guide.services.%24location\">hashbang</a> is one route mode fro Angular.js. Therefore, the relationships of routes, template and controller are:<br><br><table>\n<thead><tr>\n<th>route</th>\n<th>uri</th>\n<th>template</th>\n<th>controller</th>\n</tr></thead>\n<tbody>\n<tr>\n<td>/tasks/new</td>\n<td>localhosts:3000/tasks/angular#/tasks/new</td>\n<td>/tasks/new.html</td>\n<td>TaskCtrl</td>\n</tr>\n<tr>\n<td>/tasks/:task_id</td>\n<td>localhosts:3000/tasks/angular#/tasks/1</td>\n<td>/tasks/show.html</td>\n<td>TaskShowCtrl</td>\n</tr>\n<tr>\n<td>/tasks/:task_id/edit</td>\n<td>localhosts:3000/tasks/angular#/tasks/1/edit</td>\n<td>/tasks/edit.html</td>\n<td>TaskEditCtrl</td>\n</tr>\n</tbody>\n</table>\n<br>In the module '<span style=\"font-weight: bold;\">momentumService</span>', we define resources from Rails. For <span style=\"font-weight: bold;\">ngResource</span>, we need <span style=\"font-weight: bold;\">angular-resource.min.js</span>. We also need to add module '<span style=\"font-weight: bold;\">momentum</span>' in <span style=\"font-weight: bold;\">/app/views/layout/application.html.erb</span>:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/erb.png' alt='erb'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#070;font-weight:bold\">&lt;html</span> <span style=\"color:#b48\">ng-app</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">momentum</span><span style=\"color:#710\">'</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span>\n</pre></td>\n</tr></table>\n\n        </div>\nFor controllers in Angular.js in <span style=\"font-weight: bold;\">app/assets/javascripts/tasks_controller.js</span>:<br>f        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/javascript.png' alt='javascript'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n<a href=\"#n8\" name=\"n8\">8</a>\n<a href=\"#n9\" name=\"n9\">9</a>\n<strong><a href=\"#n10\" name=\"n10\">10</a></strong>\n<a href=\"#n11\" name=\"n11\">11</a>\n<a href=\"#n12\" name=\"n12\">12</a>\n<a href=\"#n13\" name=\"n13\">13</a>\n<a href=\"#n14\" name=\"n14\">14</a>\n<a href=\"#n15\" name=\"n15\">15</a>\n<a href=\"#n16\" name=\"n16\">16</a>\n<a href=\"#n17\" name=\"n17\">17</a>\n<a href=\"#n18\" name=\"n18\">18</a>\n<a href=\"#n19\" name=\"n19\">19</a>\n<strong><a href=\"#n20\" name=\"n20\">20</a></strong>\n<a href=\"#n21\" name=\"n21\">21</a>\n<a href=\"#n22\" name=\"n22\">22</a>\n<a href=\"#n23\" name=\"n23\">23</a>\n<a href=\"#n24\" name=\"n24\">24</a>\n<a href=\"#n25\" name=\"n25\">25</a>\n<a href=\"#n26\" name=\"n26\">26</a>\n<a href=\"#n27\" name=\"n27\">27</a>\n<a href=\"#n28\" name=\"n28\">28</a>\n<a href=\"#n29\" name=\"n29\">29</a>\n<strong><a href=\"#n30\" name=\"n30\">30</a></strong>\n<a href=\"#n31\" name=\"n31\">31</a>\n<a href=\"#n32\" name=\"n32\">32</a>\n<a href=\"#n33\" name=\"n33\">33</a>\n<a href=\"#n34\" name=\"n34\">34</a>\n<a href=\"#n35\" name=\"n35\">35</a>\n<a href=\"#n36\" name=\"n36\">36</a>\n<a href=\"#n37\" name=\"n37\">37</a>\n</pre></td>\n  <td class=\"code\"><pre>unction TaskNewCtrl(<span style=\"color:#369;font-weight:bold\">$scope</span>, <span style=\"color:#369;font-weight:bold\">$location</span>, Tasks, Task) {\n<span style=\"color:#F00;background-color:#FAA\"> </span> console.log(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">TaskNewCtrl</span><span style=\"color:#710\">'</span></span>);\n<span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#369;font-weight:bold\">$scope</span>.task = {};\n\n<span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#369;font-weight:bold\">$scope</span>.<span style=\"color:#06B;font-weight:bold\">create</span> = <span style=\"color:#080;font-weight:bold\">function</span>(task) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> t = <span style=\"color:#080;font-weight:bold\">new</span> Tasks(task);\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> t.<span style=\"color:#369;font-weight:bold\">$create</span>(<span style=\"color:#080;font-weight:bold\">function</span>(task) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#369;font-weight:bold\">$location</span>.path(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">/tasks/</span><span style=\"color:#710\">'</span></span> task.id);\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> });\n<span style=\"color:#F00;background-color:#FAA\"> </span> };\n};\n\n<span style=\"color:#080;font-weight:bold\">function</span> <span style=\"color:#06B;font-weight:bold\">TaskCtrl</span>(<span style=\"color:#369;font-weight:bold\">$scope</span>, <span style=\"color:#369;font-weight:bold\">$routeParams</span>, Task) {\n<span style=\"color:#F00;background-color:#FAA\"> </span> console.log(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">TaskCtrl</span><span style=\"color:#710\">'</span></span>);\n<span style=\"color:#F00;background-color:#FAA\"> </span> task_id = <span style=\"color:#369;font-weight:bold\">$routeParams</span>.task_id;\n<span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#369;font-weight:bold\">$scope</span>.task = Task.show({<span style=\"color:#606\">task_id</span>: task_id});\n};\n\n<span style=\"color:#080;font-weight:bold\">function</span> <span style=\"color:#06B;font-weight:bold\">TaskEditCtrl</span>(<span style=\"color:#369;font-weight:bold\">$scope</span>, <span style=\"color:#369;font-weight:bold\">$routeParams</span>, <span style=\"color:#369;font-weight:bold\">$location</span>, Task) {\n<span style=\"color:#F00;background-color:#FAA\"> </span> console.log(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">TaskEditCtrl</span><span style=\"color:#710\">'</span></span>);\n\n<span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#369;font-weight:bold\">$scope</span>.master = {};\n<span style=\"color:#F00;background-color:#FAA\"> </span> task_id = <span style=\"color:#369;font-weight:bold\">$routeParams</span>.task_id;\n<span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#369;font-weight:bold\">$scope</span>.task = <span style=\"color:#080;font-weight:bold\">new</span> Task.show({<span style=\"color:#606\">task_id</span>: task_id}, <span style=\"color:#080;font-weight:bold\">function</span>(resource) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#369;font-weight:bold\">$scope</span>.master = angular.copy(resource);\n<span style=\"color:#F00;background-color:#FAA\"> </span> });\n\n<span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#369;font-weight:bold\">$scope</span>.<span style=\"color:#06B;font-weight:bold\">update</span> = <span style=\"color:#080;font-weight:bold\">function</span>(task) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#369;font-weight:bold\">$scope</span>.master = angular.copy(task);\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> task.<span style=\"color:#369;font-weight:bold\">$update</span>({<span style=\"color:#606\">task_id</span>: task_id}, <span style=\"color:#080;font-weight:bold\">function</span>(t) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#369;font-weight:bold\">$location</span>.path(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">/tasks/</span><span style=\"color:#710\">'</span></span> t.id);\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> });\n<span style=\"color:#F00;background-color:#FAA\"> </span> };\n<span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#369;font-weight:bold\">$scope</span>.<span style=\"color:#06B;font-weight:bold\">reset</span> = <span style=\"color:#080;font-weight:bold\">function</span>() {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#369;font-weight:bold\">$scope</span>.task = angular.copy(<span style=\"color:#369;font-weight:bold\">$scope</span>.master);\n<span style=\"color:#F00;background-color:#FAA\"> </span> };\n}\n</pre></td>\n</tr></table>\n\n        </div>\nEach controller will call Rails to get or set data in JSON.<br><br>Since Angular.js works on client-side, the view is actually HTML, which can be put in /public directory, thus, save server from rendering dynamic views:<br><br>In <span style=\"font-weight: bold;\">/public/tasks/new.html</span>:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/erb.png' alt='erb'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n<a href=\"#n8\" name=\"n8\">8</a>\n<a href=\"#n9\" name=\"n9\">9</a>\n<strong><a href=\"#n10\" name=\"n10\">10</a></strong>\n<a href=\"#n11\" name=\"n11\">11</a>\n<a href=\"#n12\" name=\"n12\">12</a>\n<a href=\"#n13\" name=\"n13\">13</a>\n<a href=\"#n14\" name=\"n14\">14</a>\n<a href=\"#n15\" name=\"n15\">15</a>\n<a href=\"#n16\" name=\"n16\">16</a>\n<a href=\"#n17\" name=\"n17\">17</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#070;font-weight:bold\">&lt;h1&gt;</span>New task<span style=\"color:#070;font-weight:bold\">&lt;/h1&gt;</span>\n\n<span style=\"color:#070;font-weight:bold\">&lt;form</span> <span style=\"color:#b48\">novalidate</span><span style=\"color:#070;font-weight:bold\">&gt;</span>\n  <span style=\"color:#070;font-weight:bold\">&lt;div</span> <span style=\"color:#b48\">class</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">field</span><span style=\"color:#710\">&quot;</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span>\n    <span style=\"color:#070;font-weight:bold\">&lt;label</span> <span style=\"color:#b48\">for</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">task_title</span><span style=\"color:#710\">&quot;</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span>Title<span style=\"color:#070;font-weight:bold\">&lt;/label&gt;</span><span style=\"color:#070;font-weight:bold\">&lt;br</span> <span style=\"color:#070;font-weight:bold\">/&gt;</span>\n    <span style=\"color:#070;font-weight:bold\">&lt;input</span> <span style=\"color:#b48\">id</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">task_title</span><span style=\"color:#710\">&quot;</span></span> <span style=\"color:#b48\">name</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">task[title]</span><span style=\"color:#710\">&quot;</span></span> <span style=\"color:#b48\">size</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">30</span><span style=\"color:#710\">&quot;</span></span> <span style=\"color:#b48\">type</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">text</span><span style=\"color:#710\">&quot;</span></span> <span style=\"color:#b48\">ng-model</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">task.title</span><span style=\"color:#710\">'</span></span> <span style=\"color:#070;font-weight:bold\">/&gt;</span>\n  <span style=\"color:#070;font-weight:bold\">&lt;/div&gt;</span>\n\n  <span style=\"color:#070;font-weight:bold\">&lt;div</span> <span style=\"color:#b48\">class</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">field</span><span style=\"color:#710\">&quot;</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span>\n    <span style=\"color:#070;font-weight:bold\">&lt;label</span> <span style=\"color:#b48\">for</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">task_finished</span><span style=\"color:#710\">&quot;</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span>Finished<span style=\"color:#070;font-weight:bold\">&lt;/label&gt;</span><span style=\"color:#070;font-weight:bold\">&lt;br</span> <span style=\"color:#070;font-weight:bold\">/&gt;</span>\n    <span style=\"color:#070;font-weight:bold\">&lt;input</span> <span style=\"color:#b48\">id</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">task_finished</span><span style=\"color:#710\">&quot;</span></span> <span style=\"color:#b48\">name</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">task[finished]</span><span style=\"color:#710\">&quot;</span></span> <span style=\"color:#b48\">type</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">checkbox</span><span style=\"color:#710\">&quot;</span></span> <span style=\"color:#b48\">ng-model</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">task.finished</span><span style=\"color:#710\">'</span></span> <span style=\"color:#070;font-weight:bold\">/&gt;</span>\n  <span style=\"color:#070;font-weight:bold\">&lt;/div&gt;</span>\n\n  <span style=\"color:#070;font-weight:bold\">&lt;button</span> <span style=\"color:#b48\">ng-click</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">create(task)</span><span style=\"color:#710\">'</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span>Create Task<span style=\"color:#070;font-weight:bold\">&lt;/button&gt;</span>\n<span style=\"color:#070;font-weight:bold\">&lt;/form&gt;</span>\n\n<span style=\"color:#070;font-weight:bold\">&lt;a</span> <span style=\"color:#b48\">href</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">/tasks</span><span style=\"color:#710\">&quot;</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span>Back<span style=\"color:#070;font-weight:bold\">&lt;/a&gt;</span>\n</pre></td>\n</tr></table>\n\n        </div>\nIn <span style=\"font-weight: bold;\">/public/tasks/show.html</span>:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/erb.png' alt='erb'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n<a href=\"#n8\" name=\"n8\">8</a>\n<a href=\"#n9\" name=\"n9\">9</a>\n<strong><a href=\"#n10\" name=\"n10\">10</a></strong>\n<a href=\"#n11\" name=\"n11\">11</a>\n<a href=\"#n12\" name=\"n12\">12</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#070;font-weight:bold\">&lt;p&gt;</span>\n  <span style=\"color:#070;font-weight:bold\">&lt;b&gt;</span>Title:<span style=\"color:#070;font-weight:bold\">&lt;/b&gt;</span>\n    {{task.title}}\n<span style=\"color:#070;font-weight:bold\">&lt;/p&gt;</span>\n\n<span style=\"color:#070;font-weight:bold\">&lt;p&gt;</span>\n  <span style=\"color:#070;font-weight:bold\">&lt;b&gt;</span>Finished:<span style=\"color:#070;font-weight:bold\">&lt;/b&gt;</span>\n  {{task.finished}}\n<span style=\"color:#070;font-weight:bold\">&lt;/p&gt;</span>\n\n<span style=\"color:#070;font-weight:bold\">&lt;a</span> <span style=\"color:#b48\">href</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">/tasks/angular#/tasks/{{task.id}}/edit</span><span style=\"color:#710\">'</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span>Edit<span style=\"color:#070;font-weight:bold\">&lt;/a&gt;</span> |\n<span style=\"color:#070;font-weight:bold\">&lt;a</span> <span style=\"color:#b48\">href</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">/tasks</span><span style=\"color:#710\">&quot;</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span>Back<span style=\"color:#070;font-weight:bold\">&lt;/a&gt;</span>\n</pre></td>\n</tr></table>\n\n        </div>\nIn <span style=\"font-weight: bold;\">/public/tasks/edit.html</span>:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/erb.png' alt='erb'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n<a href=\"#n8\" name=\"n8\">8</a>\n<a href=\"#n9\" name=\"n9\">9</a>\n<strong><a href=\"#n10\" name=\"n10\">10</a></strong>\n<a href=\"#n11\" name=\"n11\">11</a>\n<a href=\"#n12\" name=\"n12\">12</a>\n<a href=\"#n13\" name=\"n13\">13</a>\n<a href=\"#n14\" name=\"n14\">14</a>\n<a href=\"#n15\" name=\"n15\">15</a>\n<a href=\"#n16\" name=\"n16\">16</a>\n<a href=\"#n17\" name=\"n17\">17</a>\n<a href=\"#n18\" name=\"n18\">18</a>\n<a href=\"#n19\" name=\"n19\">19</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#070;font-weight:bold\">&lt;h1&gt;</span>Editing task<span style=\"color:#070;font-weight:bold\">&lt;/h1&gt;</span>\n\n<span style=\"color:#070;font-weight:bold\">&lt;form</span> <span style=\"color:#b48\">novalidate</span><span style=\"color:#070;font-weight:bold\">&gt;</span>\n  <span style=\"color:#070;font-weight:bold\">&lt;div</span> <span style=\"color:#b48\">class</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">field</span><span style=\"color:#710\">&quot;</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span>\n    <span style=\"color:#070;font-weight:bold\">&lt;label</span> <span style=\"color:#b48\">for</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">task_title</span><span style=\"color:#710\">&quot;</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span>Title<span style=\"color:#070;font-weight:bold\">&lt;/label&gt;</span><span style=\"color:#070;font-weight:bold\">&lt;br</span> <span style=\"color:#070;font-weight:bold\">/&gt;</span>\n    <span style=\"color:#070;font-weight:bold\">&lt;input</span> <span style=\"color:#b48\">id</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">task_title</span><span style=\"color:#710\">&quot;</span></span> <span style=\"color:#b48\">name</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">task[title]</span><span style=\"color:#710\">&quot;</span></span> <span style=\"color:#b48\">size</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">30</span><span style=\"color:#710\">&quot;</span></span> <span style=\"color:#b48\">type</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">text</span><span style=\"color:#710\">&quot;</span></span> <span style=\"color:#b48\">ng-model</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">task.title</span><span style=\"color:#710\">'</span></span> <span style=\"color:#070;font-weight:bold\">/&gt;</span>\n  <span style=\"color:#070;font-weight:bold\">&lt;/div&gt;</span>\n\n  <span style=\"color:#070;font-weight:bold\">&lt;div</span> <span style=\"color:#b48\">class</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">field</span><span style=\"color:#710\">&quot;</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span>\n    <span style=\"color:#070;font-weight:bold\">&lt;label</span> <span style=\"color:#b48\">for</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">task_finished</span><span style=\"color:#710\">&quot;</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span>Finished<span style=\"color:#070;font-weight:bold\">&lt;/label&gt;</span><span style=\"color:#070;font-weight:bold\">&lt;br</span> <span style=\"color:#070;font-weight:bold\">/&gt;</span>\n    <span style=\"color:#070;font-weight:bold\">&lt;input</span> <span style=\"color:#b48\">id</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">task_finished</span><span style=\"color:#710\">&quot;</span></span> <span style=\"color:#b48\">name</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">task[finished]</span><span style=\"color:#710\">&quot;</span></span> <span style=\"color:#b48\">type</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">checkbox</span><span style=\"color:#710\">&quot;</span></span> <span style=\"color:#b48\">ng-model</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">task.finished</span><span style=\"color:#710\">'</span></span> <span style=\"color:#070;font-weight:bold\">/&gt;</span>\n  <span style=\"color:#070;font-weight:bold\">&lt;/div&gt;</span>\n\n  <span style=\"color:#070;font-weight:bold\">&lt;button</span> <span style=\"color:#b48\">ng-click</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">reset()</span><span style=\"color:#710\">'</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span>RESET<span style=\"color:#070;font-weight:bold\">&lt;/button&gt;</span>\n  <span style=\"color:#070;font-weight:bold\">&lt;button</span> <span style=\"color:#b48\">ng-click</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">update(task)</span><span style=\"color:#710\">'</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span>Update Task<span style=\"color:#070;font-weight:bold\">&lt;/button&gt;</span>\n<span style=\"color:#070;font-weight:bold\">&lt;/form&gt;</span>\n\n<span style=\"color:#070;font-weight:bold\">&lt;a</span> <span style=\"color:#b48\">href</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">/tasks/angular#/tasks/{{task.id}}</span><span style=\"color:#710\">&quot;</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span>Show<span style=\"color:#070;font-weight:bold\">&lt;/a&gt;</span> |\n<span style=\"color:#070;font-weight:bold\">&lt;a</span> <span style=\"color:#b48\">href</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">/tasks</span><span style=\"color:#710\">&quot;</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span>Back<span style=\"color:#070;font-weight:bold\">&lt;/a&gt;</span>\n</pre></td>\n</tr></table>\n\n        </div>\n", pretty_preview: "<p>The main purpose for using Angular.js with Rails is to enhance the user \ninterface and reduce the workload on server by moving some parts of \ntasks onto client side. Therefore, the first thing is to hook up Rails \nCRUD with Angular.js. Here is a comparison of resource in Rails and in \nA...<br></p>"},
  {id: 409, name: "Tutorials on Angular.js and Rails", category_id: 3, body: "<p>Many web applications use Rails as backend and client-side javascript \nfor user interface. While there are many choices of javascript \nframeworks, I found <a href=\"http://angularjs.org/\">Angular.js</a> is small enough to use with Rails. Here is a serials on making a todo list by Angular.js and Rails.<br><br>\nFirst, generate a basic Rails application called <b>momentum</b>:<br></p>\n<pre><code class=\"bash\">rails new momentum --skip-bundle -T<br>cd momentum/<br>rails g scaffold task title:string finished:boolean<br>rake db:create<br>rake db:migrate<br>rm public/index.html</code></pre>Edit <b>config/routes.rb</b> to have root point to '<b>tasks#index</b>':<br><pre><code class=\"ruby\"> root :to =&gt; 'tasks#index'</code></pre>\n<span style=\"font-family: inherit;\"><span style=\"font-family: inherit;\">Then start the web server by running '<span style='font-family: \"Courier New\",Courier,monospace;'>rails server</span>' and point your web browser to <a href=\"localhost:3000\">localhost:3000</a>.</span> Now, you have a very basic rails application. To use its JSON facility, just add '.json' extension to the url, for example, <a href=\"http://localhost:3000/tasks.json\">localhost:3000/tasks.json</a>. (Be sure to add new tasks first to see the list).</span><br><hr>\n<span style=\"font-family: inherit;\">To begin with Angular.js, copy this file into <b>app/assets/javascripts/</b>:</span><br><pre><code>angular-1.0.1.min.js</code></pre>In <span style=\"font-weight: bold;\">app/views/layout/application.html.erb</span>, add Angular.js:<br><pre><code class=\"erb\">&lt;html ng-app&gt; </code></pre>Then write the tasks controller to angular.js in <span style=\"font-weight: bold;\">app/assets/javascripts/tasks_controller.js</span>:<br><pre><code class=\"javascript\">function TasksCtrl($scope) {<br>  $scope.tasks = [<br>    {\"title\":\"Buy milk\", \"finished\":false},<br>    {\"title\":\"Wash car\", \"finished\":true}<br>  ]<br>} </code></pre>This provides a hard-coded data for now. Finally, in <span style=\"font-weight: bold;\">app/views/tasks/index.html.erb</span>, add:<br><pre><code class=\"erb\">&lt;div ng-controller='TasksCtrl'&gt;<br>  &lt;ul&gt;<br>    &lt;li ng-repeat='task in tasks'&gt;<br>    {{task.title}}, {{task.finished}}<br>    &lt;/li&gt;<br>  &lt;/ul&gt;<br>&lt;/div&gt;</code></pre>\n<span style=\"font-family: inherit;\">This <span style=\"background-color: orange;\">TasksCtrl</span></span> in<span style=\"font-family: inherit;\"> views refers to the one defined in <b>tasks_controller.js</b>. Therefore, <span style=\"background-color: orange;\">tasks</span> in view refers to <span style=\"background-color: orange;\">$scope.tasks</span> defined in controller. When you check <span style=\"font-family: inherit;\"><span style=\"font-family: inherit;\"><a href=\"localhost:3000\">localhost:3000</a>, you will see the tasks rendered by Angular.js.</span></span></span><br><hr>\nNow, We want the real data from Rails. The easily way is to $http service from angular.js:<br><pre><code class=\"javascript\">/* app/assets/javascripts/tasks_controller.js */<br><br>function TasksCtrl($scope, $http) {<br>  $http.get('/tasks.json').success(function(data) {<br>    $scope.tasks = data;<br>    console.log(data);<br>  });<br>}</code></pre>It fetches the tasks.json when loaded. This <span style=\"background-color: orange;\">$http</span> is a service of Angular.js. We can write our own services later to fit Rails convention better.", created_at: "2013-12-13 19:56:10", updated_at: "2013-12-13 19:56:10", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "<p>Many web applications use Rails as backend and client-side javascript \nfor user interface. While there are many choices of javascript \nframeworks, I found <a href=\"http://angularjs.org/\">Angular.js</a> is small enough to use with Rails. Here is a serials on making a todo list by Angular.js and Rails.<br><br>\nFirst, generate a basic Rails application called <b>momentum</b>:<br></p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/bash.png' alt='bash'/>\n              </div>\n          <pre><code class=\"bash\">rails new momentum --skip-bundle -T<br>cd momentum/<br>rails g scaffold task title:string finished:boolean<br>rake db:create<br>rake db:migrate<br>rm public/index.html</code></pre>\n        </div>\nEdit <b>config/routes.rb</b> to have root point to '<b>tasks#index</b>':<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n</pre></td>\n  <td class=\"code\"><pre> root <span style=\"color:#A60\">:to</span> =&gt; <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">tasks#index</span><span style=\"color:#710\">'</span></span>\n</pre></td>\n</tr></table>\n\n        </div>\n\n<span style=\"font-family: inherit;\"><span style=\"font-family: inherit;\">Then start the web server by running '<span style='font-family: \"Courier New\",Courier,monospace;'>rails server</span>' and point your web browser to <a href=\"localhost:3000\">localhost:3000</a>.</span> Now, you have a very basic rails application. To use its JSON facility, just add '.json' extension to the url, for example, <a href=\"http://localhost:3000/tasks.json\">localhost:3000/tasks.json</a>. (Be sure to add new tasks first to see the list).</span><br><hr>\n<span style=\"font-family: inherit;\">To begin with Angular.js, copy this file into <b>app/assets/javascripts/</b>:</span><br>        <div class='oa clearfix'>\n          \n          <pre><code>angular-1.0.1.min.js</code></pre>\n        </div>\nIn <span style=\"font-weight: bold;\">app/views/layout/application.html.erb</span>, add Angular.js:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/erb.png' alt='erb'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#070;font-weight:bold\">&lt;html</span> <span style=\"color:#b48\">ng-app</span><span style=\"color:#070;font-weight:bold\">&gt;</span> \n</pre></td>\n</tr></table>\n\n        </div>\nThen write the tasks controller to angular.js in <span style=\"font-weight: bold;\">app/assets/javascripts/tasks_controller.js</span>:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/javascript.png' alt='javascript'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#080;font-weight:bold\">function</span> <span style=\"color:#06B;font-weight:bold\">TasksCtrl</span>(<span style=\"color:#369;font-weight:bold\">$scope</span>) {\n<span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#369;font-weight:bold\">$scope</span>.tasks = [\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> {<span style=\"color:#606\"><span style=\"color:#404\">&quot;</span><span>title</span><span style=\"color:#404\">&quot;</span></span>:<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">Buy milk</span><span style=\"color:#710\">&quot;</span></span>, <span style=\"color:#606\"><span style=\"color:#404\">&quot;</span><span>finished</span><span style=\"color:#404\">&quot;</span></span>:<span style=\"color:#069\">false</span>},\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> {<span style=\"color:#606\"><span style=\"color:#404\">&quot;</span><span>title</span><span style=\"color:#404\">&quot;</span></span>:<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">&quot;</span><span style=\"color:#D20\">Wash car</span><span style=\"color:#710\">&quot;</span></span>, <span style=\"color:#606\"><span style=\"color:#404\">&quot;</span><span>finished</span><span style=\"color:#404\">&quot;</span></span>:<span style=\"color:#069\">true</span>}\n<span style=\"color:#F00;background-color:#FAA\"> </span> ]\n} \n</pre></td>\n</tr></table>\n\n        </div>\nThis provides a hard-coded data for now. Finally, in <span style=\"font-weight: bold;\">app/views/tasks/index.html.erb</span>, add:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/erb.png' alt='erb'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#070;font-weight:bold\">&lt;div</span> <span style=\"color:#b48\">ng-controller</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">TasksCtrl</span><span style=\"color:#710\">'</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span>\n  <span style=\"color:#070;font-weight:bold\">&lt;ul&gt;</span>\n    <span style=\"color:#070;font-weight:bold\">&lt;li</span> <span style=\"color:#b48\">ng-repeat</span>=<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">task in tasks</span><span style=\"color:#710\">'</span></span><span style=\"color:#070;font-weight:bold\">&gt;</span>\n    {{task.title}}, {{task.finished}}\n    <span style=\"color:#070;font-weight:bold\">&lt;/li&gt;</span>\n  <span style=\"color:#070;font-weight:bold\">&lt;/ul&gt;</span>\n<span style=\"color:#070;font-weight:bold\">&lt;/div&gt;</span>\n</pre></td>\n</tr></table>\n\n        </div>\n\n<span style=\"font-family: inherit;\">This <span style=\"background-color: orange;\">TasksCtrl</span></span> in<span style=\"font-family: inherit;\"> views refers to the one defined in <b>tasks_controller.js</b>. Therefore, <span style=\"background-color: orange;\">tasks</span> in view refers to <span style=\"background-color: orange;\">$scope.tasks</span> defined in controller. When you check <span style=\"font-family: inherit;\"><span style=\"font-family: inherit;\"><a href=\"localhost:3000\">localhost:3000</a>, you will see the tasks rendered by Angular.js.</span></span></span><br><hr>\nNow, We want the real data from Rails. The easily way is to $http service from angular.js:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/javascript.png' alt='javascript'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n<a href=\"#n8\" name=\"n8\">8</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#777\">/* app/assets/javascripts/tasks_controller.js */</span>\n\n<span style=\"color:#080;font-weight:bold\">function</span> <span style=\"color:#06B;font-weight:bold\">TasksCtrl</span>(<span style=\"color:#369;font-weight:bold\">$scope</span>, <span style=\"color:#369;font-weight:bold\">$http</span>) {\n<span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#369;font-weight:bold\">$http</span>.get(<span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">/tasks.json</span><span style=\"color:#710\">'</span></span>).success(<span style=\"color:#080;font-weight:bold\">function</span>(data) {\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> <span style=\"color:#369;font-weight:bold\">$scope</span>.tasks = data;\n<span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span><span style=\"color:#F00;background-color:#FAA\"> </span> console.log(data);\n<span style=\"color:#F00;background-color:#FAA\"> </span> });\n}\n</pre></td>\n</tr></table>\n\n        </div>\nIt fetches the tasks.json when loaded. This <span style=\"background-color: orange;\">$http</span> is a service of Angular.js. We can write our own services later to fit Rails convention better.", pretty_preview: "<p>Many web applications use Rails as backend and client-side javascript \nfor user interface. While there are many choices of javascript \nframeworks, I found <a href=\"http://angularjs.org/\">Angular.js</a> is small enough to use with Rails. Here is a serials on making a todo list by Angular.js and Ra...<br></p>"},
  {id: 410, name: "Efficient insert of multiple objects", category_id: 3, body: "<p>If you ever need to populate your database with a lot of data ( maybe for testing purposes ), don't do this:<br></p>\n<pre><code class=\"ruby\">10000.times { MyModel.create(:some_attribute =&gt; :some_value) }</code></pre>\nBut, instead do this:<br><pre><code class=\"ruby\">ActiveRecord::Base.transaction { 10000.times { MyModel.create(:some_attribute =&gt; :some_value) } }</code></pre>\nThe difference in execution times will be considerable.", created_at: "2013-12-13 19:56:10", updated_at: "2013-12-13 19:56:10", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "<p>If you ever need to populate your database with a lot of data ( maybe for testing purposes ), don't do this:<br></p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#00D\">10000</span>.times { <span style=\"color:#036;font-weight:bold\">MyModel</span>.create(<span style=\"color:#A60\">:some_attribute</span> =&gt; <span style=\"color:#A60\">:some_value</span>) }\n</pre></td>\n</tr></table>\n\n        </div>\n\nBut, instead do this:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#036;font-weight:bold\">ActiveRecord</span>::<span style=\"color:#036;font-weight:bold\">Base</span>.transaction { <span style=\"color:#00D\">10000</span>.times { <span style=\"color:#036;font-weight:bold\">MyModel</span>.create(<span style=\"color:#A60\">:some_attribute</span> =&gt; <span style=\"color:#A60\">:some_value</span>) } }\n</pre></td>\n</tr></table>\n\n        </div>\n\nThe difference in execution times will be considerable.", pretty_preview: "<p>If you ever need to populate your database with a lot of data ( maybe for testing purposes ), don't do this:<br></p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <div class=\"CodeRay\">\n  <div class=\"code\"><pre><span style=\"color:#00D\">10000</span>.times { <span style=\"color:#036;font-weight:bold\">MyModel</span>.create(<span style=\"color:#A60\">:some_attribute</span> =&gt; <span style=\"color:#A60\">:some_value</span>) }\n</pre></div>\n</div>\n\n        </div>\n\nBut, instead do this:<br>        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <div class=\"CodeRay\">\n  <div class=\"code\"><pre><span style=\"color:#036;font-weight:bold\">ActiveRecord</span>::<span style=\"color:#036;font-weight:bold\">Base</span>.transaction { <span style=\"color:#00D\">10000</span>.times { <span style=\"color:#036;font-weight:bold\">MyModel</span>.cre...\n</pre></div>\n</div>\n\n        </div>\n"},
  {id: 411, name: "Rails 3 merging scopes with joins", category_id: 3, body: "<pre><code class=\"ruby\">class SolarSystem &lt; ActiveRecord::Base<br>  has_many :planets<br>  has_many :planet_types, :through =&gt; :planets<br>  has_many :planet_type, :through =&gt; :planets, :class_name =&gt; 'PlanetType'<br><br>  scope :has_earthlike_planet, joins(:planets).merge(Planet.like_earth)<br>end<br><br>SolarSystem.has_earthlike_planet.to_sql # =&gt; SELECT \"solar_systems\".* FROM \"solar_systems\" INNER JOIN \"planets\" ON \"planets\".\"solar_system_id\" = \"solar_systems\".\"id\" INNER JOIN \"planets\" \"planet_types_solar_systems_join\" ON \"solar_systems\".\"id\" = \"planet_types_solar_systems_join\".\"solar_system_id\" INNER JOIN \"planet_types\" ON \"planet_types\".\"id\" = \"planet_types_solar_systems_join\".\"planet_type_id\" WHERE \"planet_types\".\"life\" = 't' AND \"planet_types\".\"gravity\" = 9.8</code></pre>", created_at: "2013-12-13 19:56:10", updated_at: "2013-12-13 19:56:10", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n<a href=\"#n2\" name=\"n2\">2</a>\n<a href=\"#n3\" name=\"n3\">3</a>\n<a href=\"#n4\" name=\"n4\">4</a>\n<a href=\"#n5\" name=\"n5\">5</a>\n<a href=\"#n6\" name=\"n6\">6</a>\n<a href=\"#n7\" name=\"n7\">7</a>\n<a href=\"#n8\" name=\"n8\">8</a>\n<a href=\"#n9\" name=\"n9\">9</a>\n</pre></td>\n  <td class=\"code\"><pre><span style=\"color:#080;font-weight:bold\">class</span> <span style=\"color:#B06;font-weight:bold\">SolarSystem</span> &lt; <span style=\"color:#036;font-weight:bold\">ActiveRecord</span>::<span style=\"color:#036;font-weight:bold\">Base</span>\n  has_many <span style=\"color:#A60\">:planets</span>\n  has_many <span style=\"color:#A60\">:planet_types</span>, <span style=\"color:#A60\">:through</span> =&gt; <span style=\"color:#A60\">:planets</span>\n  has_many <span style=\"color:#A60\">:planet_type</span>, <span style=\"color:#A60\">:through</span> =&gt; <span style=\"color:#A60\">:planets</span>, <span style=\"color:#A60\">:class_name</span> =&gt; <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">PlanetType</span><span style=\"color:#710\">'</span></span>\n\n  scope <span style=\"color:#A60\">:has_earthlike_planet</span>, joins(<span style=\"color:#A60\">:planets</span>).merge(<span style=\"color:#036;font-weight:bold\">Planet</span>.like_earth)\n<span style=\"color:#080;font-weight:bold\">end</span>\n\n<span style=\"color:#036;font-weight:bold\">SolarSystem</span>.has_earthlike_planet.to_sql <span style=\"color:#777\"># =&gt; SELECT &quot;solar_systems&quot;.* FROM &quot;solar_systems&quot; INNER JOIN &quot;planets&quot; ON &quot;planets&quot;.&quot;solar_system_id&quot; = &quot;solar_systems&quot;.&quot;id&quot; INNER JOIN &quot;planets&quot; &quot;planet_types_solar_systems_join&quot; ON &quot;solar_systems&quot;.&quot;id&quot; = &quot;planet_types_solar_systems_join&quot;.&quot;solar_system_id&quot; INNER JOIN &quot;planet_types&quot; ON &quot;planet_types&quot;.&quot;id&quot; = &quot;planet_types_solar_systems_join&quot;.&quot;planet_type_id&quot; WHERE &quot;planet_types&quot;.&quot;life&quot; = 't' AND &quot;planet_types&quot;.&quot;gravity&quot; = 9.8</span>\n</pre></td>\n</tr></table>\n\n        </div>\n", pretty_preview: "        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <div class=\"CodeRay\">\n  <div class=\"code\"><pre><span style=\"color:#080;font-weight:bold\">class</span> <span style=\"color:#B06;font-weight:bold\">SolarSystem</span> &lt; <span style=\"color:#036;font-weight:bold\">ActiveRecord</span>::<span style=\"color:#036;font-weight:bold\">Base</span>\n  has_many <span style=\"color:#A60\">:planets</span>\n  has_many <span style=\"color:#A60\">:planet_types</span>, <span style=\"color:#A60\">:through</span> =&gt; <span style=\"color:#A60\">:planets</span>\n  has_many <span style=\"color:#A60\">:planet_type</span>, <span style=\"color:#A60\">:through</span> =&gt; <span style=\"color:#A60\">:planets</span>, <span style=\"color:#A60\">:class_name</span> =&gt; <span style=\"background-color:hsla(0,100%,50%,0.05)\"><span style=\"color:#710\">'</span><span style=\"color:#D20\">PlanetType</span><span style=\"color:#710\">'</span></span>\n\n  scope <span style=\"color:#A60\">:has_earthlike_planet</span>, joins(<span style=\"color:#A60\">:planets</span>).merge(<span style=\"color:#036;font-weight:bold\">Planet</span>.like_earth)\n<span style=\"color:#080;font-weight:bold\">end</span>...\n\n</pre></div>\n</div>\n\n        </div>\n"},
  {id: 412, name: "Setting a foreign key to nil on deletion", category_id: 3, body: "<p>If you delete a model, and want that the associated foreign key is set to nil, add this to your model:<br></p>\n<pre><code class=\"ruby\">has_one :something, :dependent =&gt; :nullify</code></pre>\nThis way, when you delete your model, the associated foreign key will no\n longer point to this ( deleted ) model, and will instead be nil.", created_at: "2013-12-13 19:56:10", updated_at: "2013-12-13 19:56:10", author_id: 10, author_name: "jeyboy1985@gmail.com", pretty_body: "<p>If you delete a model, and want that the associated foreign key is set to nil, add this to your model:<br></p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <table class=\"CodeRay\"><tr>\n  <td class=\"line-numbers\"><pre><a href=\"#n1\" name=\"n1\">1</a>\n</pre></td>\n  <td class=\"code\"><pre>has_one <span style=\"color:#A60\">:something</span>, <span style=\"color:#A60\">:dependent</span> =&gt; <span style=\"color:#A60\">:nullify</span>\n</pre></td>\n</tr></table>\n\n        </div>\n\nThis way, when you delete your model, the associated foreign key will no\n longer point to this ( deleted ) model, and will instead be nil.", pretty_preview: "<p>If you delete a model, and want that the associated foreign key is set to nil, add this to your model:<br></p>\n        <div class='oa clearfix'>\n          <div class='lang_sign'>\n                <img src='/assets/languages/ruby.png' alt='ruby'/>\n              </div>\n          <div class=\"CodeRay\">\n  <div class=\"code\"><pre>has_one <span style=\"color:#A60\">:something</span>, <span style=\"color:#A60\">:dependent</span> =&gt; <span style=\"color:#A60\">:nullify</span>\n</pre></div>\n</div>\n\n        </div>\n\nThis way, when you delete your model, the associated foreign key will no\n longer point to this ( deleted ..."}
])
Tag.create!([
  {id: 1, name: "js", counter: 0, created_at: "2013-12-13 19:19:43", updated_at: "2013-12-13 19:19:43"},
  {id: 2, name: "ruby", counter: 0, created_at: "2013-12-13 19:19:43", updated_at: "2013-12-13 19:19:43"},
  {id: 3, name: "db", counter: 0, created_at: "2013-12-13 19:19:43", updated_at: "2013-12-13 19:19:43"},
  {id: 4, name: "console", counter: 0, created_at: "2013-12-13 19:19:43", updated_at: "2013-12-13 19:19:43"},
  {id: 5, name: "trick", counter: 0, created_at: "2013-12-13 19:19:43", updated_at: "2013-12-13 19:19:43"},
  {id: 6, name: "error", counter: 0, created_at: "2013-12-13 19:19:43", updated_at: "2013-12-13 19:19:43"},
  {id: 7, name: "solution", counter: 0, created_at: "2013-12-13 19:19:43", updated_at: "2013-12-13 19:19:43"},
  {id: 8, name: "quering", counter: 0, created_at: "2013-12-13 19:19:43", updated_at: "2013-12-13 19:19:43"},
  {id: 9, name: "model", counter: 0, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 10, name: "relation", counter: 0, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 11, name: "assets", counter: 0, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 12, name: "gzip", counter: 0, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 13, name: "gem", counter: 0, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 14, name: "worker process", counter: 0, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 15, name: "engine", counter: 0, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 16, name: "testing", counter: 0, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 17, name: "configuration", counter: 0, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 18, name: "time zone", counter: 0, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 19, name: "heroku", counter: 0, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 20, name: "routes", counter: 0, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 21, name: "migrations", counter: 0, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 22, name: "validations", counter: 0, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 23, name: "transactions", counter: 0, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 24, name: "gemfile", counter: 0, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 25, name: "active admin", counter: 0, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 26, name: "ror", counter: 0, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 27, name: "encoding", counter: 0, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 28, name: "rule", counter: 0, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 29, name: "session", counter: 0, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 30, name: "settings", counter: 0, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 31, name: "schema", counter: 0, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 32, name: "json", counter: 0, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 33, name: "string", counter: 0, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 34, name: "jbuilder", counter: 0, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 35, name: "caching", counter: 0, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 36, name: "dalli", counter: 0, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 37, name: "i18n", counter: 0, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 38, name: "internationalization", counter: 0, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 39, name: "query", counter: 0, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 40, name: "active record", counter: 0, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 41, name: "rake", counter: 0, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 42, name: "rspec", counter: 0, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 43, name: "irb", counter: 0, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 44, name: "metaprogramming", counter: 0, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 45, name: "sinatra", counter: 0, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 46, name: "devise", counter: 0, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 47, name: "bootstrap", counter: 0, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 48, name: "background", counter: 0, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 49, name: "angularjs", counter: 0, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 50, name: "minitest", counter: 0, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 51, name: "unicode", counter: 0, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 52, name: "print", counter: 0, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 53, name: "search", counter: 0, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 54, name: "rvm", counter: 0, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 55, name: "authentication", counter: 0, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 56, name: "facebook", counter: 0, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 57, name: "google", counter: 0, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 58, name: "security", counter: 0, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 59, name: "cancan", counter: 0, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 60, name: "role", counter: 0, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 61, name: "cheat sheet", counter: 0, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 62, name: "scope", counter: 0, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"}
])
Taggable.create!([
  {id: 1, tagged_type: "Post", tagged_id: 2, tag_id: 1, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 2, tagged_type: "Post", tagged_id: 4, tag_id: 2, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 3, tagged_type: "Post", tagged_id: 5, tag_id: 2, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 4, tagged_type: "Post", tagged_id: 8, tag_id: 2, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 5, tagged_type: "Post", tagged_id: 8, tag_id: 3, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 6, tagged_type: "Post", tagged_id: 8, tag_id: 4, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 7, tagged_type: "Post", tagged_id: 5, tag_id: 5, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 8, tagged_type: "Post", tagged_id: 9, tag_id: 2, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 9, tagged_type: "Post", tagged_id: 9, tag_id: 6, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 10, tagged_type: "Post", tagged_id: 9, tag_id: 7, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 11, tagged_type: "Post", tagged_id: 10, tag_id: 5, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 12, tagged_type: "Post", tagged_id: 10, tag_id: 2, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 13, tagged_type: "Post", tagged_id: 11, tag_id: 2, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 14, tagged_type: "Post", tagged_id: 11, tag_id: 9, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 15, tagged_type: "Post", tagged_id: 11, tag_id: 10, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 16, tagged_type: "Post", tagged_id: 12, tag_id: 2, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 17, tagged_type: "Post", tagged_id: 12, tag_id: 11, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 18, tagged_type: "Post", tagged_id: 12, tag_id: 5, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 19, tagged_type: "Post", tagged_id: 13, tag_id: 11, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 20, tagged_type: "Post", tagged_id: 13, tag_id: 2, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 21, tagged_type: "Post", tagged_id: 13, tag_id: 5, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 22, tagged_type: "Post", tagged_id: 13, tag_id: 12, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 23, tagged_type: "Post", tagged_id: 14, tag_id: 2, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 24, tagged_type: "Post", tagged_id: 14, tag_id: 13, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 25, tagged_type: "Post", tagged_id: 14, tag_id: 14, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 26, tagged_type: "Post", tagged_id: 15, tag_id: 4, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 27, tagged_type: "Post", tagged_id: 15, tag_id: 2, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 28, tagged_type: "Post", tagged_id: 15, tag_id: 3, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 29, tagged_type: "Post", tagged_id: 16, tag_id: 2, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 30, tagged_type: "Post", tagged_id: 16, tag_id: 6, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 31, tagged_type: "Post", tagged_id: 16, tag_id: 11, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 32, tagged_type: "Post", tagged_id: 17, tag_id: 2, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 33, tagged_type: "Post", tagged_id: 17, tag_id: 4, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 34, tagged_type: "Post", tagged_id: 17, tag_id: 5, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 35, tagged_type: "Post", tagged_id: 18, tag_id: 2, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 36, tagged_type: "Post", tagged_id: 18, tag_id: 7, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 37, tagged_type: "Post", tagged_id: 18, tag_id: 15, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 38, tagged_type: "Post", tagged_id: 19, tag_id: 2, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 39, tagged_type: "Post", tagged_id: 19, tag_id: 13, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 40, tagged_type: "Post", tagged_id: 19, tag_id: 5, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 41, tagged_type: "Post", tagged_id: 20, tag_id: 13, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 42, tagged_type: "Post", tagged_id: 20, tag_id: 16, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 43, tagged_type: "Post", tagged_id: 21, tag_id: 2, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 44, tagged_type: "Post", tagged_id: 21, tag_id: 17, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 45, tagged_type: "Post", tagged_id: 21, tag_id: 18, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 46, tagged_type: "Post", tagged_id: 22, tag_id: 2, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 47, tagged_type: "Post", tagged_id: 22, tag_id: 17, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 48, tagged_type: "Post", tagged_id: 22, tag_id: 19, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 49, tagged_type: "Post", tagged_id: 23, tag_id: 2, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 50, tagged_type: "Post", tagged_id: 23, tag_id: 7, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 51, tagged_type: "Post", tagged_id: 23, tag_id: 20, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 52, tagged_type: "Post", tagged_id: 24, tag_id: 2, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 53, tagged_type: "Post", tagged_id: 24, tag_id: 7, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 54, tagged_type: "Post", tagged_id: 24, tag_id: 21, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 55, tagged_type: "Post", tagged_id: 8, tag_id: 21, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 56, tagged_type: "Post", tagged_id: 25, tag_id: 2, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 57, tagged_type: "Post", tagged_id: 25, tag_id: 21, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 58, tagged_type: "Post", tagged_id: 25, tag_id: 6, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 59, tagged_type: "Post", tagged_id: 26, tag_id: 2, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 60, tagged_type: "Post", tagged_id: 26, tag_id: 21, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 61, tagged_type: "Post", tagged_id: 26, tag_id: 10, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 62, tagged_type: "Post", tagged_id: 27, tag_id: 1, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 63, tagged_type: "Post", tagged_id: 28, tag_id: 2, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 64, tagged_type: "Post", tagged_id: 28, tag_id: 5, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 65, tagged_type: "Post", tagged_id: 28, tag_id: 22, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 66, tagged_type: "Post", tagged_id: 29, tag_id: 2, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 67, tagged_type: "Post", tagged_id: 29, tag_id: 21, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 68, tagged_type: "Post", tagged_id: 30, tag_id: 2, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 69, tagged_type: "Post", tagged_id: 30, tag_id: 23, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 70, tagged_type: "Post", tagged_id: 30, tag_id: 5, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 71, tagged_type: "Post", tagged_id: 31, tag_id: 2, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 72, tagged_type: "Post", tagged_id: 31, tag_id: 7, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 73, tagged_type: "Post", tagged_id: 32, tag_id: 2, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 74, tagged_type: "Post", tagged_id: 32, tag_id: 7, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 75, tagged_type: "Post", tagged_id: 32, tag_id: 24, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 76, tagged_type: "Post", tagged_id: 33, tag_id: 2, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 77, tagged_type: "Post", tagged_id: 33, tag_id: 9, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 78, tagged_type: "Post", tagged_id: 33, tag_id: 5, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 79, tagged_type: "Post", tagged_id: 34, tag_id: 2, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 80, tagged_type: "Post", tagged_id: 34, tag_id: 5, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 81, tagged_type: "Post", tagged_id: 34, tag_id: 25, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 82, tagged_type: "Post", tagged_id: 2036, tag_id: 2, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 83, tagged_type: "Post", tagged_id: 2037, tag_id: 26, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 84, tagged_type: "Post", tagged_id: 2037, tag_id: 21, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 85, tagged_type: "Post", tagged_id: 2038, tag_id: 26, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 86, tagged_type: "Post", tagged_id: 2038, tag_id: 21, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 87, tagged_type: "Post", tagged_id: 2039, tag_id: 26, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 88, tagged_type: "Post", tagged_id: 2039, tag_id: 21, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 89, tagged_type: "Post", tagged_id: 2040, tag_id: 26, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 90, tagged_type: "Post", tagged_id: 2040, tag_id: 6, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 91, tagged_type: "Post", tagged_id: 2040, tag_id: 7, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 92, tagged_type: "Post", tagged_id: 2040, tag_id: 18, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 93, tagged_type: "Post", tagged_id: 2041, tag_id: 26, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 94, tagged_type: "Post", tagged_id: 2041, tag_id: 6, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 95, tagged_type: "Post", tagged_id: 2041, tag_id: 18, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 96, tagged_type: "Post", tagged_id: 2042, tag_id: 26, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 97, tagged_type: "Post", tagged_id: 2042, tag_id: 27, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 98, tagged_type: "Post", tagged_id: 2042, tag_id: 7, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 99, tagged_type: "Post", tagged_id: 2043, tag_id: 26, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 100, tagged_type: "Post", tagged_id: 2043, tag_id: 24, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 101, tagged_type: "Post", tagged_id: 2043, tag_id: 7, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 102, tagged_type: "Post", tagged_id: 2044, tag_id: 26, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 103, tagged_type: "Post", tagged_id: 2044, tag_id: 9, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 104, tagged_type: "Post", tagged_id: 2044, tag_id: 7, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 105, tagged_type: "Post", tagged_id: 2044, tag_id: 28, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 106, tagged_type: "Post", tagged_id: 2045, tag_id: 26, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 107, tagged_type: "Post", tagged_id: 2045, tag_id: 25, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 108, tagged_type: "Post", tagged_id: 2045, tag_id: 28, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 109, tagged_type: "Post", tagged_id: 2046, tag_id: 26, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 110, tagged_type: "Post", tagged_id: 2046, tag_id: 25, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 111, tagged_type: "Post", tagged_id: 2047, tag_id: 26, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 112, tagged_type: "Post", tagged_id: 2047, tag_id: 3, created_at: "2013-12-13 19:19:44", updated_at: "2013-12-13 19:19:44"},
  {id: 113, tagged_type: "Post", tagged_id: 2047, tag_id: 13, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 114, tagged_type: "Post", tagged_id: 2048, tag_id: 26, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 115, tagged_type: "Post", tagged_id: 2048, tag_id: 25, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 116, tagged_type: "Post", tagged_id: 2048, tag_id: 13, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 117, tagged_type: "Post", tagged_id: 2049, tag_id: 26, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 118, tagged_type: "Post", tagged_id: 2049, tag_id: 25, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 119, tagged_type: "Post", tagged_id: 2049, tag_id: 13, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 120, tagged_type: "Post", tagged_id: 2050, tag_id: 26, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 121, tagged_type: "Post", tagged_id: 2050, tag_id: 21, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 122, tagged_type: "Post", tagged_id: 2050, tag_id: 3, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 123, tagged_type: "Post", tagged_id: 2051, tag_id: 26, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 124, tagged_type: "Post", tagged_id: 2051, tag_id: 29, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 125, tagged_type: "Post", tagged_id: 2051, tag_id: 30, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 126, tagged_type: "Post", tagged_id: 2052, tag_id: 26, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 127, tagged_type: "Post", tagged_id: 2052, tag_id: 31, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 128, tagged_type: "Post", tagged_id: 2052, tag_id: 21, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 129, tagged_type: "Post", tagged_id: 2053, tag_id: 26, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 130, tagged_type: "Post", tagged_id: 2053, tag_id: 18, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 131, tagged_type: "Post", tagged_id: 2054, tag_id: 26, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 132, tagged_type: "Post", tagged_id: 2054, tag_id: 32, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 133, tagged_type: "Post", tagged_id: 2054, tag_id: 33, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 134, tagged_type: "Post", tagged_id: 2054, tag_id: 34, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 135, tagged_type: "Post", tagged_id: 2055, tag_id: 26, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 136, tagged_type: "Post", tagged_id: 2055, tag_id: 35, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 137, tagged_type: "Post", tagged_id: 2055, tag_id: 36, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 138, tagged_type: "Post", tagged_id: 2056, tag_id: 26, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 139, tagged_type: "Post", tagged_id: 2056, tag_id: 37, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 140, tagged_type: "Post", tagged_id: 2056, tag_id: 9, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 141, tagged_type: "Post", tagged_id: 2056, tag_id: 38, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 142, tagged_type: "Post", tagged_id: 2057, tag_id: 26, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 143, tagged_type: "Post", tagged_id: 2057, tag_id: 16, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 144, tagged_type: "Post", tagged_id: 2058, tag_id: 26, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 145, tagged_type: "Post", tagged_id: 2058, tag_id: 39, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 146, tagged_type: "Post", tagged_id: 2058, tag_id: 40, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 147, tagged_type: "Post", tagged_id: 2059, tag_id: 26, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 148, tagged_type: "Post", tagged_id: 2059, tag_id: 19, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 149, tagged_type: "Post", tagged_id: 2059, tag_id: 17, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 150, tagged_type: "Post", tagged_id: 2059, tag_id: 40, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 151, tagged_type: "Post", tagged_id: 2060, tag_id: 26, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 152, tagged_type: "Post", tagged_id: 2060, tag_id: 20, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 153, tagged_type: "Post", tagged_id: 2060, tag_id: 6, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 154, tagged_type: "Post", tagged_id: 2060, tag_id: 41, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 155, tagged_type: "Post", tagged_id: 2061, tag_id: 26, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 156, tagged_type: "Post", tagged_id: 2061, tag_id: 9, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 157, tagged_type: "Post", tagged_id: 2062, tag_id: 26, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 158, tagged_type: "Post", tagged_id: 2062, tag_id: 21, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 159, tagged_type: "Post", tagged_id: 2063, tag_id: 26, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 160, tagged_type: "Post", tagged_id: 2063, tag_id: 16, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 161, tagged_type: "Post", tagged_id: 2063, tag_id: 42, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 162, tagged_type: "Post", tagged_id: 2064, tag_id: 26, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 163, tagged_type: "Post", tagged_id: 2064, tag_id: 4, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 164, tagged_type: "Post", tagged_id: 2064, tag_id: 40, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 165, tagged_type: "Post", tagged_id: 2065, tag_id: 26, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 166, tagged_type: "Post", tagged_id: 2065, tag_id: 4, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 167, tagged_type: "Post", tagged_id: 2065, tag_id: 40, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 168, tagged_type: "Post", tagged_id: 2065, tag_id: 9, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 169, tagged_type: "Post", tagged_id: 2066, tag_id: 2, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 170, tagged_type: "Post", tagged_id: 2066, tag_id: 17, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 171, tagged_type: "Post", tagged_id: 2066, tag_id: 43, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 172, tagged_type: "Post", tagged_id: 2067, tag_id: 26, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 173, tagged_type: "Post", tagged_id: 2067, tag_id: 10, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 174, tagged_type: "Post", tagged_id: 2067, tag_id: 9, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 175, tagged_type: "Post", tagged_id: 2067, tag_id: 40, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 176, tagged_type: "Post", tagged_id: 2068, tag_id: 26, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 177, tagged_type: "Post", tagged_id: 2068, tag_id: 4, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 178, tagged_type: "Post", tagged_id: 2068, tag_id: 21, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 179, tagged_type: "Post", tagged_id: 2069, tag_id: 26, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 180, tagged_type: "Post", tagged_id: 2069, tag_id: 17, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 181, tagged_type: "Post", tagged_id: 2070, tag_id: 26, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 182, tagged_type: "Post", tagged_id: 2070, tag_id: 40, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 183, tagged_type: "Post", tagged_id: 2071, tag_id: 26, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 184, tagged_type: "Post", tagged_id: 2071, tag_id: 20, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 185, tagged_type: "Post", tagged_id: 2072, tag_id: 26, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 186, tagged_type: "Post", tagged_id: 2072, tag_id: 16, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 187, tagged_type: "Post", tagged_id: 2073, tag_id: 26, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 188, tagged_type: "Post", tagged_id: 2073, tag_id: 40, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 189, tagged_type: "Post", tagged_id: 2074, tag_id: 26, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 190, tagged_type: "Post", tagged_id: 2074, tag_id: 25, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 191, tagged_type: "Post", tagged_id: 2074, tag_id: 13, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 192, tagged_type: "Post", tagged_id: 2075, tag_id: 2, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 193, tagged_type: "Post", tagged_id: 2075, tag_id: 44, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 194, tagged_type: "Post", tagged_id: 2076, tag_id: 45, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 195, tagged_type: "Post", tagged_id: 2077, tag_id: 26, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 196, tagged_type: "Post", tagged_id: 2077, tag_id: 39, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 197, tagged_type: "Post", tagged_id: 2078, tag_id: 26, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 198, tagged_type: "Post", tagged_id: 2078, tag_id: 40, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 199, tagged_type: "Post", tagged_id: 2078, tag_id: 23, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 200, tagged_type: "Post", tagged_id: 2078, tag_id: 5, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 201, tagged_type: "Post", tagged_id: 2079, tag_id: 26, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 202, tagged_type: "Post", tagged_id: 2079, tag_id: 21, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 203, tagged_type: "Post", tagged_id: 2080, tag_id: 22, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 204, tagged_type: "Post", tagged_id: 2080, tag_id: 46, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 205, tagged_type: "Post", tagged_id: 2080, tag_id: 13, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 206, tagged_type: "Post", tagged_id: 2080, tag_id: 26, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 207, tagged_type: "Post", tagged_id: 2081, tag_id: 26, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 208, tagged_type: "Post", tagged_id: 2081, tag_id: 21, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 209, tagged_type: "Post", tagged_id: 2081, tag_id: 6, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 210, tagged_type: "Post", tagged_id: 2082, tag_id: 26, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 211, tagged_type: "Post", tagged_id: 2082, tag_id: 4, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 212, tagged_type: "Post", tagged_id: 2082, tag_id: 21, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 213, tagged_type: "Post", tagged_id: 2082, tag_id: 40, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 214, tagged_type: "Post", tagged_id: 2083, tag_id: 26, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 215, tagged_type: "Post", tagged_id: 2083, tag_id: 20, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 216, tagged_type: "Post", tagged_id: 2084, tag_id: 19, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 217, tagged_type: "Post", tagged_id: 2084, tag_id: 26, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 218, tagged_type: "Post", tagged_id: 2085, tag_id: 26, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 219, tagged_type: "Post", tagged_id: 2085, tag_id: 18, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 220, tagged_type: "Post", tagged_id: 2085, tag_id: 40, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 221, tagged_type: "Post", tagged_id: 2086, tag_id: 26, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 222, tagged_type: "Post", tagged_id: 2086, tag_id: 16, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 223, tagged_type: "Post", tagged_id: 2087, tag_id: 26, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 224, tagged_type: "Post", tagged_id: 2087, tag_id: 46, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 225, tagged_type: "Post", tagged_id: 2087, tag_id: 13, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 226, tagged_type: "Post", tagged_id: 2087, tag_id: 9, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 227, tagged_type: "Post", tagged_id: 2087, tag_id: 35, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 228, tagged_type: "Post", tagged_id: 2088, tag_id: 26, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 229, tagged_type: "Post", tagged_id: 2088, tag_id: 15, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 230, tagged_type: "Post", tagged_id: 2088, tag_id: 13, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 231, tagged_type: "Post", tagged_id: 2088, tag_id: 7, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 232, tagged_type: "Post", tagged_id: 2089, tag_id: 1, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 233, tagged_type: "Post", tagged_id: 2089, tag_id: 26, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 234, tagged_type: "Post", tagged_id: 2090, tag_id: 26, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 235, tagged_type: "Post", tagged_id: 2090, tag_id: 47, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 236, tagged_type: "Post", tagged_id: 2090, tag_id: 6, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 237, tagged_type: "Post", tagged_id: 2091, tag_id: 26, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 238, tagged_type: "Post", tagged_id: 2091, tag_id: 1, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 239, tagged_type: "Post", tagged_id: 2091, tag_id: 7, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 240, tagged_type: "Post", tagged_id: 2092, tag_id: 26, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 241, tagged_type: "Post", tagged_id: 2092, tag_id: 4, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 242, tagged_type: "Post", tagged_id: 2092, tag_id: 41, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 243, tagged_type: "Post", tagged_id: 2093, tag_id: 14, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 244, tagged_type: "Post", tagged_id: 2093, tag_id: 26, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 245, tagged_type: "Post", tagged_id: 2093, tag_id: 13, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 246, tagged_type: "Post", tagged_id: 2093, tag_id: 48, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 247, tagged_type: "Post", tagged_id: 2094, tag_id: 26, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 248, tagged_type: "Post", tagged_id: 2094, tag_id: 12, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 249, tagged_type: "Post", tagged_id: 2094, tag_id: 11, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 250, tagged_type: "Post", tagged_id: 2095, tag_id: 26, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 251, tagged_type: "Post", tagged_id: 2095, tag_id: 40, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 252, tagged_type: "Post", tagged_id: 2095, tag_id: 10, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 253, tagged_type: "Post", tagged_id: 2096, tag_id: 26, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 254, tagged_type: "Post", tagged_id: 2096, tag_id: 16, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 255, tagged_type: "Post", tagged_id: 2096, tag_id: 29, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 256, tagged_type: "Post", tagged_id: 2097, tag_id: 49, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 257, tagged_type: "Post", tagged_id: 2097, tag_id: 26, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 258, tagged_type: "Post", tagged_id: 2097, tag_id: 1, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 259, tagged_type: "Post", tagged_id: 2098, tag_id: 1, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 260, tagged_type: "Post", tagged_id: 2098, tag_id: 26, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 261, tagged_type: "Post", tagged_id: 2098, tag_id: 49, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 262, tagged_type: "Post", tagged_id: 2099, tag_id: 1, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 263, tagged_type: "Post", tagged_id: 2099, tag_id: 26, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 264, tagged_type: "Post", tagged_id: 2099, tag_id: 49, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 265, tagged_type: "Post", tagged_id: 2100, tag_id: 1, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 266, tagged_type: "Post", tagged_id: 2100, tag_id: 26, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 267, tagged_type: "Post", tagged_id: 2100, tag_id: 49, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 268, tagged_type: "Post", tagged_id: 2101, tag_id: 26, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 269, tagged_type: "Post", tagged_id: 2101, tag_id: 1, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 270, tagged_type: "Post", tagged_id: 2101, tag_id: 49, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 271, tagged_type: "Post", tagged_id: 2102, tag_id: 26, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 272, tagged_type: "Post", tagged_id: 2102, tag_id: 35, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 273, tagged_type: "Post", tagged_id: 2102, tag_id: 7, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 274, tagged_type: "Post", tagged_id: 2103, tag_id: 26, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 275, tagged_type: "Post", tagged_id: 2103, tag_id: 13, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 276, tagged_type: "Post", tagged_id: 2104, tag_id: 26, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 277, tagged_type: "Post", tagged_id: 2104, tag_id: 49, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 278, tagged_type: "Post", tagged_id: 2104, tag_id: 11, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 279, tagged_type: "Post", tagged_id: 2104, tag_id: 30, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 280, tagged_type: "Post", tagged_id: 2104, tag_id: 7, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 281, tagged_type: "Post", tagged_id: 2105, tag_id: 26, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 282, tagged_type: "Post", tagged_id: 2105, tag_id: 19, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 283, tagged_type: "Post", tagged_id: 2105, tag_id: 11, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 284, tagged_type: "Post", tagged_id: 2106, tag_id: 26, created_at: "2013-12-13 19:19:45", updated_at: "2013-12-13 19:19:45"},
  {id: 285, tagged_type: "Post", tagged_id: 2106, tag_id: 16, created_at: "2013-12-13 19:19:46", updated_at: "2013-12-13 19:19:46"},
  {id: 286, tagged_type: "Post", tagged_id: 2106, tag_id: 50, created_at: "2013-12-13 19:19:46", updated_at: "2013-12-13 19:19:46"},
  {id: 287, tagged_type: "Post", tagged_id: 2107, tag_id: 26, created_at: "2013-12-13 19:19:46", updated_at: "2013-12-13 19:19:46"},
  {id: 288, tagged_type: "Post", tagged_id: 2107, tag_id: 9, created_at: "2013-12-13 19:19:46", updated_at: "2013-12-13 19:19:46"},
  {id: 289, tagged_type: "Post", tagged_id: 2108, tag_id: 26, created_at: "2013-12-13 19:19:46", updated_at: "2013-12-13 19:19:46"},
  {id: 290, tagged_type: "Post", tagged_id: 2108, tag_id: 10, created_at: "2013-12-13 19:19:46", updated_at: "2013-12-13 19:19:46"},
  {id: 291, tagged_type: "Post", tagged_id: 2108, tag_id: 40, created_at: "2013-12-13 19:19:46", updated_at: "2013-12-13 19:19:46"},
  {id: 292, tagged_type: "Post", tagged_id: 2109, tag_id: 26, created_at: "2013-12-13 19:19:46", updated_at: "2013-12-13 19:19:46"},
  {id: 293, tagged_type: "Post", tagged_id: 2109, tag_id: 38, created_at: "2013-12-13 19:19:46", updated_at: "2013-12-13 19:19:46"},
  {id: 294, tagged_type: "Post", tagged_id: 2109, tag_id: 13, created_at: "2013-12-13 19:19:46", updated_at: "2013-12-13 19:19:46"},
  {id: 295, tagged_type: "Post", tagged_id: 2110, tag_id: 26, created_at: "2013-12-13 19:19:46", updated_at: "2013-12-13 19:19:46"},
  {id: 296, tagged_type: "Post", tagged_id: 2111, tag_id: 51, created_at: "2013-12-13 19:19:46", updated_at: "2013-12-13 19:19:46"},
  {id: 297, tagged_type: "Post", tagged_id: 2112, tag_id: 26, created_at: "2013-12-13 19:19:46", updated_at: "2013-12-13 19:19:46"},
  {id: 298, tagged_type: "Post", tagged_id: 2112, tag_id: 29, created_at: "2013-12-13 19:19:46", updated_at: "2013-12-13 19:19:46"},
  {id: 299, tagged_type: "Post", tagged_id: 2112, tag_id: 35, created_at: "2013-12-13 19:19:46", updated_at: "2013-12-13 19:19:46"},
  {id: 300, tagged_type: "Post", tagged_id: 2113, tag_id: 1, created_at: "2013-12-13 19:19:46", updated_at: "2013-12-13 19:19:46"},
  {id: 301, tagged_type: "Post", tagged_id: 2113, tag_id: 47, created_at: "2013-12-13 19:19:46", updated_at: "2013-12-13 19:19:46"},
  {id: 302, tagged_type: "Post", tagged_id: 2113, tag_id: 52, created_at: "2013-12-13 19:19:46", updated_at: "2013-12-13 19:19:46"},
  {id: 303, tagged_type: "Post", tagged_id: 2114, tag_id: 26, created_at: "2013-12-13 19:19:46", updated_at: "2013-12-13 19:19:46"},
  {id: 304, tagged_type: "Post", tagged_id: 2114, tag_id: 13, created_at: "2013-12-13 19:19:46", updated_at: "2013-12-13 19:19:46"},
  {id: 305, tagged_type: "Post", tagged_id: 2114, tag_id: 53, created_at: "2013-12-13 19:19:46", updated_at: "2013-12-13 19:19:46"},
  {id: 306, tagged_type: "Post", tagged_id: 2115, tag_id: 26, created_at: "2013-12-13 19:19:46", updated_at: "2013-12-13 19:19:46"},
  {id: 307, tagged_type: "Post", tagged_id: 2115, tag_id: 30, created_at: "2013-12-13 19:19:46", updated_at: "2013-12-13 19:19:46"},
  {id: 308, tagged_type: "Post", tagged_id: 2115, tag_id: 54, created_at: "2013-12-13 19:19:46", updated_at: "2013-12-13 19:19:46"},
  {id: 309, tagged_type: "Post", tagged_id: 2116, tag_id: 26, created_at: "2013-12-13 19:19:46", updated_at: "2013-12-13 19:19:46"},
  {id: 310, tagged_type: "Post", tagged_id: 2116, tag_id: 55, created_at: "2013-12-13 19:19:46", updated_at: "2013-12-13 19:19:46"},
  {id: 311, tagged_type: "Post", tagged_id: 2116, tag_id: 1, created_at: "2013-12-13 19:19:46", updated_at: "2013-12-13 19:19:46"},
  {id: 312, tagged_type: "Post", tagged_id: 2116, tag_id: 49, created_at: "2013-12-13 19:19:46", updated_at: "2013-12-13 19:19:46"},
  {id: 313, tagged_type: "Post", tagged_id: 2117, tag_id: 1, created_at: "2013-12-13 19:19:46", updated_at: "2013-12-13 19:19:46"},
  {id: 314, tagged_type: "Post", tagged_id: 2117, tag_id: 49, created_at: "2013-12-13 19:19:46", updated_at: "2013-12-13 19:19:46"},
  {id: 315, tagged_type: "Post", tagged_id: 2117, tag_id: 26, created_at: "2013-12-13 19:19:46", updated_at: "2013-12-13 19:19:46"},
  {id: 316, tagged_type: "Post", tagged_id: 2117, tag_id: 56, created_at: "2013-12-13 19:19:46", updated_at: "2013-12-13 19:19:46"},
  {id: 317, tagged_type: "Post", tagged_id: 2116, tag_id: 57, created_at: "2013-12-13 19:19:46", updated_at: "2013-12-13 19:19:46"},
  {id: 318, tagged_type: "Post", tagged_id: 2118, tag_id: 26, created_at: "2013-12-13 19:19:46", updated_at: "2013-12-13 19:19:46"},
  {id: 319, tagged_type: "Post", tagged_id: 2118, tag_id: 42, created_at: "2013-12-13 19:19:46", updated_at: "2013-12-13 19:19:46"},
  {id: 320, tagged_type: "Post", tagged_id: 2118, tag_id: 50, created_at: "2013-12-13 19:19:46", updated_at: "2013-12-13 19:19:46"},
  {id: 321, tagged_type: "Post", tagged_id: 2118, tag_id: 16, created_at: "2013-12-13 19:19:46", updated_at: "2013-12-13 19:19:46"},
  {id: 322, tagged_type: "Post", tagged_id: 2119, tag_id: 26, created_at: "2013-12-13 19:19:46", updated_at: "2013-12-13 19:19:46"},
  {id: 323, tagged_type: "Post", tagged_id: 2119, tag_id: 32, created_at: "2013-12-13 19:19:46", updated_at: "2013-12-13 19:19:46"},
  {id: 324, tagged_type: "Post", tagged_id: 2119, tag_id: 34, created_at: "2013-12-13 19:19:46", updated_at: "2013-12-13 19:19:46"},
  {id: 325, tagged_type: "Post", tagged_id: 2119, tag_id: 35, created_at: "2013-12-13 19:19:46", updated_at: "2013-12-13 19:19:46"},
  {id: 326, tagged_type: "Post", tagged_id: 2120, tag_id: 26, created_at: "2013-12-13 19:19:46", updated_at: "2013-12-13 19:19:46"},
  {id: 327, tagged_type: "Post", tagged_id: 2120, tag_id: 7, created_at: "2013-12-13 19:19:46", updated_at: "2013-12-13 19:19:46"},
  {id: 328, tagged_type: "Post", tagged_id: 2120, tag_id: 30, created_at: "2013-12-13 19:19:46", updated_at: "2013-12-13 19:19:46"},
  {id: 329, tagged_type: "Post", tagged_id: 2121, tag_id: 26, created_at: "2013-12-13 19:19:46", updated_at: "2013-12-13 19:19:46"},
  {id: 330, tagged_type: "Post", tagged_id: 2121, tag_id: 13, created_at: "2013-12-13 19:19:46", updated_at: "2013-12-13 19:19:46"},
  {id: 331, tagged_type: "Post", tagged_id: 2121, tag_id: 58, created_at: "2013-12-13 19:19:46", updated_at: "2013-12-13 19:19:46"},
  {id: 332, tagged_type: "Post", tagged_id: 2122, tag_id: 26, created_at: "2013-12-13 19:19:46", updated_at: "2013-12-13 19:19:46"},
  {id: 333, tagged_type: "Post", tagged_id: 2122, tag_id: 19, created_at: "2013-12-13 19:19:46", updated_at: "2013-12-13 19:19:46"},
  {id: 334, tagged_type: "Post", tagged_id: 2122, tag_id: 30, created_at: "2013-12-13 19:19:46", updated_at: "2013-12-13 19:19:46"},
  {id: 335, tagged_type: "Post", tagged_id: 2123, tag_id: 1, created_at: "2013-12-13 19:19:46", updated_at: "2013-12-13 19:19:46"},
  {id: 336, tagged_type: "Post", tagged_id: 2123, tag_id: 26, created_at: "2013-12-13 19:19:46", updated_at: "2013-12-13 19:19:46"},
  {id: 337, tagged_type: "Post", tagged_id: 2123, tag_id: 18, created_at: "2013-12-13 19:19:46", updated_at: "2013-12-13 19:19:46"},
  {id: 338, tagged_type: "Post", tagged_id: 2124, tag_id: 26, created_at: "2013-12-13 19:19:46", updated_at: "2013-12-13 19:19:46"},
  {id: 339, tagged_type: "Post", tagged_id: 2124, tag_id: 6, created_at: "2013-12-13 19:19:46", updated_at: "2013-12-13 19:19:46"},
  {id: 340, tagged_type: "Post", tagged_id: 2125, tag_id: 26, created_at: "2013-12-13 19:19:46", updated_at: "2013-12-13 19:19:46"},
  {id: 341, tagged_type: "Post", tagged_id: 2125, tag_id: 19, created_at: "2013-12-13 19:19:46", updated_at: "2013-12-13 19:19:46"},
  {id: 342, tagged_type: "Post", tagged_id: 2126, tag_id: 26, created_at: "2013-12-13 19:19:46", updated_at: "2013-12-13 19:19:46"},
  {id: 343, tagged_type: "Post", tagged_id: 2126, tag_id: 1, created_at: "2013-12-13 19:19:46", updated_at: "2013-12-13 19:19:46"},
  {id: 344, tagged_type: "Post", tagged_id: 2126, tag_id: 49, created_at: "2013-12-13 19:19:46", updated_at: "2013-12-13 19:19:46"},
  {id: 345, tagged_type: "Post", tagged_id: 2126, tag_id: 47, created_at: "2013-12-13 19:19:46", updated_at: "2013-12-13 19:19:46"},
  {id: 346, tagged_type: "Post", tagged_id: 2127, tag_id: 26, created_at: "2013-12-13 19:19:46", updated_at: "2013-12-13 19:19:46"},
  {id: 347, tagged_type: "Post", tagged_id: 2127, tag_id: 59, created_at: "2013-12-13 19:19:46", updated_at: "2013-12-13 19:19:46"},
  {id: 348, tagged_type: "Post", tagged_id: 2127, tag_id: 13, created_at: "2013-12-13 19:19:46", updated_at: "2013-12-13 19:19:46"},
  {id: 349, tagged_type: "Post", tagged_id: 2127, tag_id: 7, created_at: "2013-12-13 19:19:46", updated_at: "2013-12-13 19:19:46"},
  {id: 350, tagged_type: "Post", tagged_id: 2128, tag_id: 26, created_at: "2013-12-13 19:19:46", updated_at: "2013-12-13 19:19:46"},
  {id: 351, tagged_type: "Post", tagged_id: 2128, tag_id: 59, created_at: "2013-12-13 19:19:46", updated_at: "2013-12-13 19:19:46"},
  {id: 352, tagged_type: "Post", tagged_id: 2128, tag_id: 60, created_at: "2013-12-13 19:19:46", updated_at: "2013-12-13 19:19:46"},
  {id: 353, tagged_type: "Post", tagged_id: 2128, tag_id: 13, created_at: "2013-12-13 19:19:46", updated_at: "2013-12-13 19:19:46"},
  {id: 354, tagged_type: "Post", tagged_id: 2128, tag_id: 55, created_at: "2013-12-13 19:19:46", updated_at: "2013-12-13 19:19:46"},
  {id: 355, tagged_type: "Post", tagged_id: 2129, tag_id: 1, created_at: "2013-12-13 19:19:46", updated_at: "2013-12-13 19:19:46"},
  {id: 356, tagged_type: "Post", tagged_id: 2129, tag_id: 49, created_at: "2013-12-13 19:19:46", updated_at: "2013-12-13 19:19:46"},
  {id: 357, tagged_type: "Post", tagged_id: 2130, tag_id: 26, created_at: "2013-12-13 19:19:46", updated_at: "2013-12-13 19:19:46"},
  {id: 358, tagged_type: "Post", tagged_id: 2130, tag_id: 18, created_at: "2013-12-13 19:19:46", updated_at: "2013-12-13 19:19:46"},
  {id: 359, tagged_type: "Post", tagged_id: 2130, tag_id: 61, created_at: "2013-12-13 19:19:46", updated_at: "2013-12-13 19:19:46"},
  {id: 360, tagged_type: "Post", tagged_id: 2131, tag_id: 26, created_at: "2013-12-13 19:19:46", updated_at: "2013-12-13 19:19:46"},
  {id: 361, tagged_type: "Post", tagged_id: 2131, tag_id: 49, created_at: "2013-12-13 19:19:46", updated_at: "2013-12-13 19:19:46"},
  {id: 362, tagged_type: "Post", tagged_id: 2131, tag_id: 22, created_at: "2013-12-13 19:19:46", updated_at: "2013-12-13 19:19:46"},
  {id: 363, tagged_type: "Post", tagged_id: 2132, tag_id: 26, created_at: "2013-12-13 19:19:46", updated_at: "2013-12-13 19:19:46"},
  {id: 364, tagged_type: "Post", tagged_id: 2132, tag_id: 49, created_at: "2013-12-13 19:19:46", updated_at: "2013-12-13 19:19:46"},
  {id: 365, tagged_type: "Post", tagged_id: 2133, tag_id: 26, created_at: "2013-12-13 19:19:46", updated_at: "2013-12-13 19:19:46"},
  {id: 366, tagged_type: "Post", tagged_id: 2133, tag_id: 49, created_at: "2013-12-13 19:19:46", updated_at: "2013-12-13 19:19:46"},
  {id: 367, tagged_type: "Post", tagged_id: 2134, tag_id: 26, created_at: "2013-12-13 19:19:46", updated_at: "2013-12-13 19:19:46"},
  {id: 368, tagged_type: "Post", tagged_id: 2134, tag_id: 49, created_at: "2013-12-13 19:19:46", updated_at: "2013-12-13 19:19:46"},
  {id: 369, tagged_type: "Post", tagged_id: 2134, tag_id: 20, created_at: "2013-12-13 19:19:46", updated_at: "2013-12-13 19:19:46"},
  {id: 370, tagged_type: "Post", tagged_id: 2135, tag_id: 26, created_at: "2013-12-13 19:19:46", updated_at: "2013-12-13 19:19:46"},
  {id: 371, tagged_type: "Post", tagged_id: 2135, tag_id: 49, created_at: "2013-12-13 19:19:46", updated_at: "2013-12-13 19:19:46"},
  {id: 372, tagged_type: "Post", tagged_id: 2136, tag_id: 26, created_at: "2013-12-13 19:19:46", updated_at: "2013-12-13 19:19:46"},
  {id: 373, tagged_type: "Post", tagged_id: 2136, tag_id: 49, created_at: "2013-12-13 19:19:46", updated_at: "2013-12-13 19:19:46"},
  {id: 374, tagged_type: "Post", tagged_id: 2137, tag_id: 26, created_at: "2013-12-13 19:19:46", updated_at: "2013-12-13 19:19:46"},
  {id: 375, tagged_type: "Post", tagged_id: 2137, tag_id: 49, created_at: "2013-12-13 19:19:46", updated_at: "2013-12-13 19:19:46"},
  {id: 376, tagged_type: "Post", tagged_id: 2138, tag_id: 26, created_at: "2013-12-13 19:19:46", updated_at: "2013-12-13 19:19:46"},
  {id: 377, tagged_type: "Post", tagged_id: 2138, tag_id: 49, created_at: "2013-12-13 19:19:46", updated_at: "2013-12-13 19:19:46"},
  {id: 378, tagged_type: "Post", tagged_id: 2139, tag_id: 26, created_at: "2013-12-13 19:19:46", updated_at: "2013-12-13 19:19:46"},
  {id: 379, tagged_type: "Post", tagged_id: 2139, tag_id: 40, created_at: "2013-12-13 19:19:46", updated_at: "2013-12-13 19:19:46"},
  {id: 380, tagged_type: "Post", tagged_id: 2139, tag_id: 62, created_at: "2013-12-13 19:19:46", updated_at: "2013-12-13 19:19:46"},
  {id: 381, tagged_type: "Post", tagged_id: 2139, tag_id: 7, created_at: "2013-12-13 19:19:46", updated_at: "2013-12-13 19:19:46"},
  {id: 382, tagged_type: "Post", tagged_id: 2139, tag_id: 9, created_at: "2013-12-13 19:19:46", updated_at: "2013-12-13 19:19:46"}
])
